<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Durj Database Guide - Complete Reference</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f7fa;
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }

        header {
            background: linear-gradient(135deg, #1E40AF 0%, #3B82F6 100%);
            color: white;
            padding: 40px;
            border-radius: 16px;
            margin-bottom: 30px;
            text-align: center;
        }
        header h1 { font-size: 2.5em; margin-bottom: 10px; }
        header p { opacity: 0.9; font-size: 1.1em; }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .stat { text-align: center; }
        .stat-number { font-size: 2em; font-weight: bold; }
        .stat-label { font-size: 0.9em; opacity: 0.8; }

        nav {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        nav h2 { margin-bottom: 15px; color: #1E40AF; }
        .nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }
        .nav-item {
            padding: 10px 15px;
            background: #f0f4f8;
            border-radius: 8px;
            text-decoration: none;
            color: #333;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .nav-item:hover { background: #e0e7ef; transform: translateY(-2px); }
        .nav-icon { font-size: 1.2em; }

        section {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        .section-icon { font-size: 1.8em; }
        .section-header h2 { color: #1E40AF; font-size: 1.5em; }
        .section-desc { color: #666; font-size: 0.95em; margin-top: 5px; }

        .table-card {
            background: #fafbfc;
            border: 1px solid #e5e7eb;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .table-header {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            padding: 15px 20px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .table-name {
            font-weight: 600;
            font-size: 1.1em;
            color: #1E40AF;
        }
        .table-badge {
            background: #e0e7ff;
            color: #3730a3;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8em;
        }
        .table-purpose {
            padding: 12px 20px;
            background: #fffbeb;
            border-bottom: 1px solid #e5e7eb;
            color: #92400e;
            font-size: 0.9em;
        }
        .table-purpose strong { color: #78350f; }

        table { width: 100%; border-collapse: collapse; }
        th {
            background: #f8fafc;
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
            color: #475569;
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        td {
            padding: 12px 15px;
            border-top: 1px solid #f0f0f0;
            vertical-align: top;
        }
        tr:hover td { background: #f8fafc; }

        .field-name {
            font-family: 'Consolas', 'Monaco', monospace;
            color: #7c3aed;
            font-weight: 500;
        }
        .field-type {
            background: #f1f5f9;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            color: #64748b;
            font-family: monospace;
        }
        .field-required {
            color: #dc2626;
            font-weight: bold;
        }
        .field-optional {
            color: #16a34a;
        }

        .enum-section {
            background: #fef3c7;
            border: 1px solid #fcd34d;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .enum-title { color: #92400e; font-weight: 600; margin-bottom: 10px; }
        .enum-values {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        .enum-value {
            background: white;
            padding: 4px 12px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 0.9em;
            border: 1px solid #fcd34d;
        }

        .highlight { background: #fef3c7; padding: 2px 6px; border-radius: 4px; }
        .key-field { background: #dbeafe; }

        .tip {
            background: #ecfdf5;
            border-left: 4px solid #10b981;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        .tip-title { font-weight: 600; color: #047857; margin-bottom: 5px; }

        .warning {
            background: #fef2f2;
            border-left: 4px solid #ef4444;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        .warning-title { font-weight: 600; color: #dc2626; margin-bottom: 5px; }

        footer {
            text-align: center;
            padding: 30px;
            color: #64748b;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            .stats-bar { gap: 20px; }
            .nav-grid { grid-template-columns: 1fr; }
            section { padding: 20px; }
            th, td { padding: 8px 10px; font-size: 0.9em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìä Durj Database Guide</h1>
            <p>Complete reference for all data tables and their purpose</p>
            <div class="stats-bar">
                <div class="stat">
                    <div class="stat-number">54</div>
                    <div class="stat-label">Tables</div>
                </div>
                <div class="stat">
                    <div class="stat-number">18</div>
                    <div class="stat-label">Sections</div>
                </div>
                <div class="stat">
                    <div class="stat-number">25</div>
                    <div class="stat-label">Enums</div>
                </div>
            </div>
        </header>

        <nav>
            <h2>Quick Navigation</h2>
            <div class="nav-grid">
                <a href="#auth" class="nav-item"><span class="nav-icon">üîê</span> Authentication</a>
                <a href="#org" class="nav-item"><span class="nav-icon">üè¢</span> Organizations</a>
                <a href="#users" class="nav-item"><span class="nav-icon">üë•</span> Users & Roles</a>
                <a href="#assets" class="nav-item"><span class="nav-icon">üíª</span> Assets</a>
                <a href="#subscriptions" class="nav-item"><span class="nav-icon">üì¶</span> Subscriptions</a>
                <a href="#suppliers" class="nav-item"><span class="nav-icon">üè™</span> Suppliers</a>
                <a href="#hr" class="nav-item"><span class="nav-icon">üëî</span> HR Profiles</a>
                <a href="#leave" class="nav-item"><span class="nav-icon">üèñÔ∏è</span> Leave Management</a>
                <a href="#payroll" class="nav-item"><span class="nav-icon">üí∞</span> Payroll</a>
                <a href="#purchase" class="nav-item"><span class="nav-icon">üõí</span> Purchase Requests</a>
                <a href="#asset-requests" class="nav-item"><span class="nav-icon">üìã</span> Asset Requests</a>
                <a href="#approvals" class="nav-item"><span class="nav-icon">‚úÖ</span> Approvals</a>
                <a href="#docs" class="nav-item"><span class="nav-icon">üìÑ</span> Company Documents</a>
                <a href="#depreciation" class="nav-item"><span class="nav-icon">üìâ</span> Depreciation</a>
                <a href="#notifications" class="nav-item"><span class="nav-icon">üîî</span> Notifications</a>
                <a href="#activity" class="nav-item"><span class="nav-icon">üìù</span> Activity Logs</a>
                <a href="#ai" class="nav-item"><span class="nav-icon">ü§ñ</span> AI Chat</a>
                <a href="#whatsapp" class="nav-item"><span class="nav-icon">üí¨</span> WhatsApp</a>
            </div>
        </nav>

        <!-- AUTHENTICATION -->
        <section id="auth">
            <div class="section-header">
                <span class="section-icon">üîê</span>
                <div>
                    <h2>Authentication & Security</h2>
                    <p class="section-desc">How users log in and stay secure</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">Account</span>
                    <span class="table-badge">OAuth Connections</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Stores connections to Google, Microsoft, and other login providers. Each user can have multiple accounts (e.g., both Google and Microsoft linked).
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">id</td><td><span class="field-type">String</span></td><td>Unique identifier for this account connection</td></tr>
                    <tr><td class="field-name">userId</td><td><span class="field-type">String</span></td><td>Which user this account belongs to</td></tr>
                    <tr><td class="field-name">provider</td><td><span class="field-type">String</span></td><td>Login provider name: "google", "azure-ad", or "credentials"</td></tr>
                    <tr><td class="field-name">providerAccountId</td><td><span class="field-type">String</span></td><td>User's ID in the external provider (e.g., Google user ID)</td></tr>
                    <tr><td class="field-name">access_token</td><td><span class="field-type">String?</span></td><td>Token to access user's data from provider (temporary)</td></tr>
                    <tr><td class="field-name">refresh_token</td><td><span class="field-type">String?</span></td><td>Token to get new access tokens (long-lived)</td></tr>
                    <tr><td class="field-name">expires_at</td><td><span class="field-type">Int?</span></td><td>When the access token expires (Unix timestamp)</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">Session</span>
                    <span class="table-badge">Active Logins</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Tracks who is currently logged in. Each browser/device creates a separate session. Sessions expire after a set time for security.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">id</td><td><span class="field-type">String</span></td><td>Unique session identifier</td></tr>
                    <tr><td class="field-name">sessionToken</td><td><span class="field-type">String</span></td><td>Secret token stored in browser cookie to identify the session</td></tr>
                    <tr><td class="field-name">userId</td><td><span class="field-type">String</span></td><td>Which user is logged in with this session</td></tr>
                    <tr><td class="field-name">expires</td><td><span class="field-type">DateTime</span></td><td>When this session will automatically log out</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">VerificationToken</span>
                    <span class="table-badge">Email Verification</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Temporary tokens sent via email for password resets and email verification. Each token can only be used once and expires quickly.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">identifier</td><td><span class="field-type">String</span></td><td>The email address being verified</td></tr>
                    <tr><td class="field-name">token</td><td><span class="field-type">String</span></td><td>The secret verification code</td></tr>
                    <tr><td class="field-name">expires</td><td><span class="field-type">DateTime</span></td><td>When this token becomes invalid</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">RevokedImpersonationToken</span>
                    <span class="table-badge">Security Audit</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> When super admins access a company's account (impersonation), tokens can be revoked for security. This tracks revoked tokens to prevent misuse.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">jti</td><td><span class="field-type">String</span></td><td>JWT Token ID that was revoked</td></tr>
                    <tr><td class="field-name">revokedBy</td><td><span class="field-type">String</span></td><td>Which super admin revoked this token</td></tr>
                    <tr><td class="field-name">reason</td><td><span class="field-type">String?</span></td><td>Why the token was revoked (optional)</td></tr>
                    <tr><td class="field-name">organizationSlug</td><td><span class="field-type">String</span></td><td>Which company's account was being accessed</td></tr>
                </table>
            </div>
        </section>

        <!-- ORGANIZATIONS -->
        <section id="org">
            <div class="section-header">
                <span class="section-icon">üè¢</span>
                <div>
                    <h2>Organizations (Companies)</h2>
                    <p class="section-desc">Each company using Durj is an "Organization" - all their data is kept separate</p>
                </div>
            </div>

            <div class="tip">
                <div class="tip-title">üí° Multi-Tenant Architecture</div>
                Every piece of data in Durj belongs to one organization. This is called "multi-tenant" - one system serves many companies, but each company only sees their own data.
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">Organization</span>
                    <span class="table-badge">Core Table</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> The main company record. Contains company settings, branding, subscription plan, and what features are enabled.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr class="key-field"><td class="field-name">id</td><td><span class="field-type">String</span></td><td>Unique company identifier (used internally)</td></tr>
                    <tr><td class="field-name">name</td><td><span class="field-type">String</span></td><td>Company display name (e.g., "Acme Corporation")</td></tr>
                    <tr><td class="field-name">slug</td><td><span class="field-type">String</span></td><td>URL-friendly name used in subdomain (e.g., "acme-corp" ‚Üí acme-corp.durj.com)</td></tr>
                    <tr><td class="field-name">logoUrl</td><td><span class="field-type">String?</span></td><td>Company logo image URL</td></tr>
                    <tr><td class="field-name">primaryColor</td><td><span class="field-type">String</span></td><td>Brand color for the interface (default: deep blue #1E40AF)</td></tr>
                    <tr><td class="field-name">timezone</td><td><span class="field-type">String</span></td><td>Company timezone (default: Asia/Qatar)</td></tr>
                    <tr><td class="field-name">currency</td><td><span class="field-type">String</span></td><td>Primary currency (default: QAR)</td></tr>
                    <tr><td class="field-name">codePrefix</td><td><span class="field-type">String</span></td><td>Prefix for employee IDs, asset tags, etc. (e.g., "ACME")</td></tr>
                    <tr><td class="field-name">enabledModules</td><td><span class="field-type">String[]</span></td><td>Which features are turned on: assets, subscriptions, suppliers, employees, leave, payroll, etc.</td></tr>
                    <tr><td class="field-name">subscriptionTier</td><td><span class="field-type">Enum</span></td><td>Billing plan: FREE or PLUS</td></tr>
                    <tr><td class="field-name">maxUsers</td><td><span class="field-type">Int</span></td><td>Maximum users allowed (default: 5 for FREE)</td></tr>
                    <tr><td class="field-name">maxAssets</td><td><span class="field-type">Int</span></td><td>Maximum assets allowed (default: 50 for FREE)</td></tr>
                    <tr><td class="field-name">onboardingCompleted</td><td><span class="field-type">Boolean</span></td><td>Has the company finished initial setup?</td></tr>
                    <tr><td class="field-name">aiChatEnabled</td><td><span class="field-type">Boolean</span></td><td>Is AI assistant feature turned on?</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">OrganizationUser</span>
                    <span class="table-badge">Memberships</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Links users to companies. A user could technically belong to multiple companies, each with a different role.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">organizationId</td><td><span class="field-type">String</span></td><td>Which company</td></tr>
                    <tr><td class="field-name">userId</td><td><span class="field-type">String</span></td><td>Which user</td></tr>
                    <tr><td class="field-name">role</td><td><span class="field-type">OrgRole</span></td><td>Their role: OWNER, ADMIN, MANAGER, or MEMBER</td></tr>
                    <tr><td class="field-name">isOwner</td><td><span class="field-type">Boolean</span></td><td>Is this the original company creator?</td></tr>
                    <tr><td class="field-name">joinedAt</td><td><span class="field-type">DateTime</span></td><td>When they joined this company</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">OrganizationInvitation</span>
                    <span class="table-badge">Pending Invites</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> When someone is invited to join a company, an invitation is created. The invite contains a special link that expires.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">email</td><td><span class="field-type">String</span></td><td>Email address of person being invited</td></tr>
                    <tr><td class="field-name">name</td><td><span class="field-type">String?</span></td><td>Name of invitee (pre-fills signup form)</td></tr>
                    <tr><td class="field-name">role</td><td><span class="field-type">OrgRole</span></td><td>What role they'll have when they join</td></tr>
                    <tr><td class="field-name">token</td><td><span class="field-type">String</span></td><td>Secret code in the invitation link</td></tr>
                    <tr><td class="field-name">expiresAt</td><td><span class="field-type">DateTime</span></td><td>When the invitation link stops working</td></tr>
                    <tr><td class="field-name">acceptedAt</td><td><span class="field-type">DateTime?</span></td><td>When they accepted (null if not yet accepted)</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">OrganizationSetupProgress</span>
                    <span class="table-badge">Onboarding Checklist</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Tracks what setup steps a new company has completed. Shows a checklist until they finish basic configuration.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">profileComplete</td><td><span class="field-type">Boolean</span></td><td>Has company name been set?</td></tr>
                    <tr><td class="field-name">logoUploaded</td><td><span class="field-type">Boolean</span></td><td>Has a logo been uploaded?</td></tr>
                    <tr><td class="field-name">brandingConfigured</td><td><span class="field-type">Boolean</span></td><td>Has brand color been customized?</td></tr>
                    <tr><td class="field-name">firstAssetAdded</td><td><span class="field-type">Boolean</span></td><td>Has at least one asset been created?</td></tr>
                    <tr><td class="field-name">firstTeamMemberInvited</td><td><span class="field-type">Boolean</span></td><td>Has anyone been invited to join?</td></tr>
                    <tr><td class="field-name">isDismissed</td><td><span class="field-type">Boolean</span></td><td>Has user chosen to hide the checklist?</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">RolePermission</span>
                    <span class="table-badge">Custom Permissions</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Custom permission settings for MANAGER and MEMBER roles. OWNER and ADMIN automatically have all permissions.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">role</td><td><span class="field-type">OrgRole</span></td><td>Which role this permission applies to</td></tr>
                    <tr><td class="field-name">permission</td><td><span class="field-type">String</span></td><td>Permission code like "assets:view", "payroll:run", "leave:approve"</td></tr>
                </table>
            </div>
        </section>

        <!-- USERS -->
        <section id="users">
            <div class="section-header">
                <span class="section-icon">üë•</span>
                <div>
                    <h2>Users</h2>
                    <p class="section-desc">Everyone who can log into the system</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">User</span>
                    <span class="table-badge">Core Table</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Every person who can access Durj. Contains login credentials, security settings, and what type of user they are.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr class="key-field"><td class="field-name">id</td><td><span class="field-type">String</span></td><td>Unique user identifier</td></tr>
                    <tr><td class="field-name">email</td><td><span class="field-type">String</span></td><td>Email address (used for login)</td></tr>
                    <tr><td class="field-name">name</td><td><span class="field-type">String?</span></td><td>Full name</td></tr>
                    <tr><td class="field-name">passwordHash</td><td><span class="field-type">String?</span></td><td>Encrypted password (only for email/password login)</td></tr>
                    <tr><td class="field-name">role</td><td><span class="field-type">Role</span></td><td>Job role: ADMIN, EMPLOYEE, MANAGER, HR_MANAGER, FINANCE_MANAGER, DIRECTOR</td></tr>
                    <tr><td class="field-name">isSuperAdmin</td><td><span class="field-type">Boolean</span></td><td>Is this a platform-level admin? (Can manage ALL companies)</td></tr>
                    <tr><td class="field-name">isEmployee</td><td><span class="field-type">Boolean</span></td><td>Should they appear in HR/payroll? (Some users are admin-only)</td></tr>
                    <tr><td class="field-name">canLogin</td><td><span class="field-type">Boolean</span></td><td>Can they log in? (Disabled for terminated employees)</td></tr>
                    <tr><td class="field-name">isOnWps</td><td><span class="field-type">Boolean</span></td><td>Should they be included in WPS salary file?</td></tr>
                    <tr><td class="field-name">emailVerified</td><td><span class="field-type">DateTime?</span></td><td>When email was verified (null = not verified)</td></tr>
                    <tr><td class="field-name">twoFactorEnabled</td><td><span class="field-type">Boolean</span></td><td>Is 2FA turned on? (Required for super admins)</td></tr>
                    <tr><td class="field-name">isDeleted</td><td><span class="field-type">Boolean</span></td><td>Is this user soft-deleted? (Data kept for 7 days)</td></tr>
                    <tr><td class="field-name">failedLoginAttempts</td><td><span class="field-type">Int</span></td><td>Wrong password count (for brute-force protection)</td></tr>
                    <tr><td class="field-name">lockedUntil</td><td><span class="field-type">DateTime?</span></td><td>Account locked until this time (after too many failed attempts)</td></tr>
                </table>
            </div>

            <div class="enum-section">
                <div class="enum-title">Role Types (What job does this person do?)</div>
                <div class="enum-values">
                    <span class="enum-value">ADMIN - Full system access</span>
                    <span class="enum-value">EMPLOYEE - Regular staff</span>
                    <span class="enum-value">MANAGER - First-level approver</span>
                    <span class="enum-value">HR_MANAGER - HR approvals</span>
                    <span class="enum-value">FINANCE_MANAGER - Budget approvals</span>
                    <span class="enum-value">DIRECTOR - High-value approvals</span>
                    <span class="enum-value">TEMP_STAFF - Temporary workers</span>
                </div>
            </div>

            <div class="enum-section">
                <div class="enum-title">Organization Roles (What can they do in this company?)</div>
                <div class="enum-values">
                    <span class="enum-value">OWNER - Full control, billing access</span>
                    <span class="enum-value">ADMIN - Manage users, settings</span>
                    <span class="enum-value">MANAGER - Approve requests, view reports</span>
                    <span class="enum-value">MEMBER - Basic access only</span>
                </div>
            </div>
        </section>

        <!-- ASSETS -->
        <section id="assets">
            <div class="section-header">
                <span class="section-icon">üíª</span>
                <div>
                    <h2>Assets</h2>
                    <p class="section-desc">Company equipment, devices, and physical items</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">Asset</span>
                    <span class="table-badge">Core Table</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Every piece of company equipment - laptops, monitors, phones, vehicles, furniture, etc. Tracks who has it, where it is, and its value.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">assetTag</td><td><span class="field-type">String?</span></td><td>Company's asset ID tag (e.g., "ACME-LAP-001")</td></tr>
                    <tr><td class="field-name">type</td><td><span class="field-type">String</span></td><td>What kind of asset: Laptop, Monitor, Phone, Vehicle, etc.</td></tr>
                    <tr><td class="field-name">category</td><td><span class="field-type">String?</span></td><td>Department: IT, Marketing, Operations, etc.</td></tr>
                    <tr><td class="field-name">brand</td><td><span class="field-type">String?</span></td><td>Manufacturer: Apple, Dell, HP, Toyota, etc.</td></tr>
                    <tr><td class="field-name">model</td><td><span class="field-type">String</span></td><td>Model name: "MacBook Pro 16", "Dell XPS 15"</td></tr>
                    <tr><td class="field-name">serial</td><td><span class="field-type">String?</span></td><td>Serial number from manufacturer</td></tr>
                    <tr><td class="field-name">configuration</td><td><span class="field-type">String?</span></td><td>Specs: "16GB RAM, 512GB SSD"</td></tr>
                    <tr><td class="field-name">purchaseDate</td><td><span class="field-type">DateTime?</span></td><td>When it was bought</td></tr>
                    <tr><td class="field-name">warrantyExpiry</td><td><span class="field-type">DateTime?</span></td><td>When warranty ends</td></tr>
                    <tr><td class="field-name">price</td><td><span class="field-type">Decimal?</span></td><td>Purchase price</td></tr>
                    <tr><td class="field-name">assignedUserId</td><td><span class="field-type">String?</span></td><td>Who currently has this asset</td></tr>
                    <tr><td class="field-name">status</td><td><span class="field-type">AssetStatus</span></td><td>Current state: IN_USE, SPARE, REPAIR, or DISPOSED</td></tr>
                    <tr><td class="field-name">location</td><td><span class="field-type">String?</span></td><td>Where it is: "Head Office", "Building A", etc.</td></tr>
                    <tr><td class="field-name">isShared</td><td><span class="field-type">Boolean</span></td><td>Is this a shared resource like a printer or meeting room TV?</td></tr>
                    <tr><td class="field-name">netBookValue</td><td><span class="field-type">Decimal?</span></td><td>Current value after depreciation</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">AssetHistory</span>
                    <span class="table-badge">Audit Trail</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Complete history of everything that happened to an asset - who had it, status changes, location moves. Never deleted.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">action</td><td><span class="field-type">Enum</span></td><td>What happened: ASSIGNED, UNASSIGNED, STATUS_CHANGED, LOCATION_CHANGED, CREATED, UPDATED</td></tr>
                    <tr><td class="field-name">fromUserId</td><td><span class="field-type">String?</span></td><td>Previous owner (for assignments)</td></tr>
                    <tr><td class="field-name">toUserId</td><td><span class="field-type">String?</span></td><td>New owner (for assignments)</td></tr>
                    <tr><td class="field-name">fromStatus</td><td><span class="field-type">Enum?</span></td><td>Previous status (for status changes)</td></tr>
                    <tr><td class="field-name">toStatus</td><td><span class="field-type">Enum?</span></td><td>New status (for status changes)</td></tr>
                    <tr><td class="field-name">performedBy</td><td><span class="field-type">String?</span></td><td>Who made this change</td></tr>
                    <tr><td class="field-name">notes</td><td><span class="field-type">String?</span></td><td>Any notes about the change</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">MaintenanceRecord</span>
                    <span class="table-badge">Service History</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Records of repairs, servicing, and maintenance done on assets. Helps track maintenance costs and schedules.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">maintenanceDate</td><td><span class="field-type">DateTime</span></td><td>When the maintenance was done</td></tr>
                    <tr><td class="field-name">notes</td><td><span class="field-type">String?</span></td><td>What was done, parts replaced, etc.</td></tr>
                    <tr><td class="field-name">performedBy</td><td><span class="field-type">String?</span></td><td>Who did the maintenance (technician name)</td></tr>
                </table>
            </div>

            <div class="enum-section">
                <div class="enum-title">Asset Status (Where is this asset right now?)</div>
                <div class="enum-values">
                    <span class="enum-value">IN_USE - Currently assigned to someone</span>
                    <span class="enum-value">SPARE - Available for assignment</span>
                    <span class="enum-value">REPAIR - Being fixed</span>
                    <span class="enum-value">DISPOSED - Retired/sold/thrown away</span>
                </div>
            </div>
        </section>

        <!-- SUBSCRIPTIONS -->
        <section id="subscriptions">
            <div class="section-header">
                <span class="section-icon">üì¶</span>
                <div>
                    <h2>Subscriptions</h2>
                    <p class="section-desc">Software, services, and recurring payments</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">Subscription</span>
                    <span class="table-badge">Core Table</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> All software and services the company pays for - Office 365, Slack, cloud hosting, etc. Tracks costs, renewal dates, and who uses them.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">serviceName</td><td><span class="field-type">String</span></td><td>Name of the service: "Microsoft 365", "Slack", "AWS"</td></tr>
                    <tr><td class="field-name">category</td><td><span class="field-type">String?</span></td><td>Type: "Productivity", "Communication", "Cloud", etc.</td></tr>
                    <tr><td class="field-name">accountId</td><td><span class="field-type">String?</span></td><td>Account/license number with the vendor</td></tr>
                    <tr><td class="field-name">billingCycle</td><td><span class="field-type">Enum</span></td><td>How often you pay: MONTHLY, YEARLY, or ONE_TIME</td></tr>
                    <tr><td class="field-name">costPerCycle</td><td><span class="field-type">Decimal?</span></td><td>Cost per billing period</td></tr>
                    <tr><td class="field-name">renewalDate</td><td><span class="field-type">DateTime?</span></td><td>Next renewal/payment date</td></tr>
                    <tr><td class="field-name">status</td><td><span class="field-type">Enum</span></td><td>ACTIVE, PAUSED, or CANCELLED</td></tr>
                    <tr><td class="field-name">autoRenew</td><td><span class="field-type">Boolean</span></td><td>Will it auto-renew?</td></tr>
                    <tr><td class="field-name">assignedUserId</td><td><span class="field-type">String?</span></td><td>Primary user (for individual licenses)</td></tr>
                    <tr><td class="field-name">vendor</td><td><span class="field-type">String?</span></td><td>Company providing the service</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">SubscriptionHistory</span>
                    <span class="table-badge">Change Log</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Records every change to a subscription - renewals, cancellations, reassignments, reactivations.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">action</td><td><span class="field-type">Enum</span></td><td>CREATED, RENEWED, CANCELLED, REACTIVATED, REASSIGNED</td></tr>
                    <tr><td class="field-name">oldStatus / newStatus</td><td><span class="field-type">Enum?</span></td><td>Status before and after the change</td></tr>
                    <tr><td class="field-name">oldUserId / newUserId</td><td><span class="field-type">String?</span></td><td>For reassignments - who had it, who has it now</td></tr>
                    <tr><td class="field-name">performedBy</td><td><span class="field-type">String?</span></td><td>Who made the change</td></tr>
                </table>
            </div>
        </section>

        <!-- SUPPLIERS -->
        <section id="suppliers">
            <div class="section-header">
                <span class="section-icon">üè™</span>
                <div>
                    <h2>Suppliers & Vendors</h2>
                    <p class="section-desc">Companies you buy from</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">Supplier</span>
                    <span class="table-badge">Core Table</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> All vendors and suppliers the company works with. Can self-register on a portal and await approval.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">suppCode</td><td><span class="field-type">String?</span></td><td>Supplier code (generated on approval): "SUPP-0001"</td></tr>
                    <tr><td class="field-name">name</td><td><span class="field-type">String</span></td><td>Company name</td></tr>
                    <tr><td class="field-name">category</td><td><span class="field-type">String</span></td><td>What they supply: "IT Equipment", "Office Supplies", etc.</td></tr>
                    <tr><td class="field-name">primaryContactName</td><td><span class="field-type">String?</span></td><td>Main contact person name</td></tr>
                    <tr><td class="field-name">primaryContactEmail</td><td><span class="field-type">String?</span></td><td>Main contact email</td></tr>
                    <tr><td class="field-name">primaryContactMobile</td><td><span class="field-type">String?</span></td><td>Main contact phone</td></tr>
                    <tr><td class="field-name">status</td><td><span class="field-type">Enum</span></td><td>PENDING (awaiting review), APPROVED (can do business), REJECTED</td></tr>
                    <tr><td class="field-name">paymentTerms</td><td><span class="field-type">String?</span></td><td>Payment terms: "Net 30", "50% upfront", etc.</td></tr>
                    <tr><td class="field-name">website</td><td><span class="field-type">String?</span></td><td>Company website</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">SupplierEngagement</span>
                    <span class="table-badge">Interaction Log</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Records of dealings with suppliers - meetings, orders, issues, ratings. Helps track relationship quality.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">date</td><td><span class="field-type">DateTime</span></td><td>When the interaction happened</td></tr>
                    <tr><td class="field-name">notes</td><td><span class="field-type">String</span></td><td>What happened, what was discussed</td></tr>
                    <tr><td class="field-name">rating</td><td><span class="field-type">Int?</span></td><td>1-5 star rating for this interaction (optional)</td></tr>
                    <tr><td class="field-name">createdById</td><td><span class="field-type">String</span></td><td>Who logged this engagement</td></tr>
                </table>
            </div>
        </section>

        <!-- HR PROFILES -->
        <section id="hr">
            <div class="section-header">
                <span class="section-icon">üëî</span>
                <div>
                    <h2>HR Profiles</h2>
                    <p class="section-desc">Employee personal and employment information</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">HRProfile</span>
                    <span class="table-badge">Core Table</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Detailed employee information - personal details, documents, emergency contacts, bank details for payroll. One profile per user.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td colspan="3" style="background:#e0e7ff;font-weight:600;color:#3730a3;">Personal Information</td></tr>
                    <tr><td class="field-name">dateOfBirth</td><td><span class="field-type">DateTime?</span></td><td>Birth date</td></tr>
                    <tr><td class="field-name">gender</td><td><span class="field-type">String?</span></td><td>Male, Female, or Other</td></tr>
                    <tr><td class="field-name">nationality</td><td><span class="field-type">String?</span></td><td>Country of citizenship</td></tr>
                    <tr><td class="field-name">maritalStatus</td><td><span class="field-type">String?</span></td><td>Single, Married, Divorced, Widowed</td></tr>
                    <tr><td colspan="3" style="background:#e0e7ff;font-weight:600;color:#3730a3;">Contact Information</td></tr>
                    <tr><td class="field-name">qatarMobile</td><td><span class="field-type">String?</span></td><td>Qatar mobile number (+974)</td></tr>
                    <tr><td class="field-name">personalEmail</td><td><span class="field-type">String?</span></td><td>Personal email (not work email)</td></tr>
                    <tr><td class="field-name">qatarZone/Street/Building/Unit</td><td><span class="field-type">String?</span></td><td>Qatar address fields</td></tr>
                    <tr><td colspan="3" style="background:#e0e7ff;font-weight:600;color:#3730a3;">Emergency Contacts</td></tr>
                    <tr><td class="field-name">localEmergencyName/Phone</td><td><span class="field-type">String?</span></td><td>Qatar-based emergency contact</td></tr>
                    <tr><td class="field-name">homeEmergencyName/Phone</td><td><span class="field-type">String?</span></td><td>Home country emergency contact</td></tr>
                    <tr><td colspan="3" style="background:#e0e7ff;font-weight:600;color:#3730a3;">Legal Documents (Qatar)</td></tr>
                    <tr><td class="field-name">qidNumber</td><td><span class="field-type">String?</span></td><td>Qatar ID number</td></tr>
                    <tr><td class="field-name">qidExpiry</td><td><span class="field-type">DateTime?</span></td><td>QID expiry date (triggers alerts)</td></tr>
                    <tr><td class="field-name">passportNumber</td><td><span class="field-type">String?</span></td><td>Passport number</td></tr>
                    <tr><td class="field-name">passportExpiry</td><td><span class="field-type">DateTime?</span></td><td>Passport expiry (triggers alerts)</td></tr>
                    <tr><td class="field-name">healthCardExpiry</td><td><span class="field-type">DateTime?</span></td><td>Health card expiry (triggers alerts)</td></tr>
                    <tr><td colspan="3" style="background:#e0e7ff;font-weight:600;color:#3730a3;">Employment</td></tr>
                    <tr><td class="field-name">employeeId</td><td><span class="field-type">String?</span></td><td>Company employee ID: "ACME-EMP-001"</td></tr>
                    <tr><td class="field-name">designation</td><td><span class="field-type">String?</span></td><td>Job title</td></tr>
                    <tr><td class="field-name">dateOfJoining</td><td><span class="field-type">DateTime?</span></td><td>Start date (important for gratuity)</td></tr>
                    <tr><td class="field-name">terminationDate</td><td><span class="field-type">DateTime?</span></td><td>End date (for gratuity calculation)</td></tr>
                    <tr><td colspan="3" style="background:#e0e7ff;font-weight:600;color:#3730a3;">Bank & Payroll</td></tr>
                    <tr><td class="field-name">bankName</td><td><span class="field-type">String?</span></td><td>Bank name for salary</td></tr>
                    <tr><td class="field-name">iban</td><td><span class="field-type">String?</span></td><td>IBAN for WPS transfers</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">ProfileChangeRequest</span>
                    <span class="table-badge">Self-Service Updates</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> When employees request changes to their profile (address, phone, etc.), it goes through HR approval first.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">description</td><td><span class="field-type">String</span></td><td>What change the employee is requesting</td></tr>
                    <tr><td class="field-name">status</td><td><span class="field-type">Enum</span></td><td>PENDING, APPROVED, or REJECTED</td></tr>
                    <tr><td class="field-name">resolvedById</td><td><span class="field-type">String?</span></td><td>Which HR person approved/rejected</td></tr>
                    <tr><td class="field-name">resolverNotes</td><td><span class="field-type">String?</span></td><td>HR's notes when resolving</td></tr>
                </table>
            </div>
        </section>

        <!-- LEAVE -->
        <section id="leave">
            <div class="section-header">
                <span class="section-icon">üèñÔ∏è</span>
                <div>
                    <h2>Leave Management</h2>
                    <p class="section-desc">Time off requests and balances</p>
                </div>
            </div>

            <div class="tip">
                <div class="tip-title">üí° Qatar Labor Law Compliance</div>
                Leave types are configured to follow Qatar labor law - minimum service requirements, accrual rules, and pay tiers for sick leave.
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">LeaveType</span>
                    <span class="table-badge">Configuration</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Defines all types of leave available - Annual, Sick, Maternity, Hajj, etc. Each company configures their own rules.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">name</td><td><span class="field-type">String</span></td><td>Leave type name: "Annual Leave", "Sick Leave", "Hajj Leave"</td></tr>
                    <tr><td class="field-name">defaultDays</td><td><span class="field-type">Int</span></td><td>Standard entitlement per year</td></tr>
                    <tr><td class="field-name">isPaid</td><td><span class="field-type">Boolean</span></td><td>Is this paid leave?</td></tr>
                    <tr><td class="field-name">requiresApproval</td><td><span class="field-type">Boolean</span></td><td>Does it need manager approval?</td></tr>
                    <tr><td class="field-name">requiresDocument</td><td><span class="field-type">Boolean</span></td><td>Is a document required? (e.g., medical certificate)</td></tr>
                    <tr><td class="field-name">minNoticeDays</td><td><span class="field-type">Int</span></td><td>How many days in advance must they request?</td></tr>
                    <tr><td class="field-name">maxConsecutiveDays</td><td><span class="field-type">Int?</span></td><td>Maximum days in one request</td></tr>
                    <tr><td class="field-name">minimumServiceMonths</td><td><span class="field-type">Int</span></td><td>Months employed before eligible (0 = immediate)</td></tr>
                    <tr><td class="field-name">allowCarryForward</td><td><span class="field-type">Boolean</span></td><td>Can unused days roll over to next year?</td></tr>
                    <tr><td class="field-name">category</td><td><span class="field-type">Enum</span></td><td>STANDARD (auto-assigned), MEDICAL, PARENTAL, RELIGIOUS</td></tr>
                    <tr><td class="field-name">genderRestriction</td><td><span class="field-type">String?</span></td><td>"MALE" or "FEMALE" for gender-specific leaves</td></tr>
                    <tr><td class="field-name">color</td><td><span class="field-type">String</span></td><td>Display color on calendar</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">LeaveBalance</span>
                    <span class="table-badge">Per Employee</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Each employee's leave balance for each leave type, tracked by year. Shows entitlement, used, pending, and remaining.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">year</td><td><span class="field-type">Int</span></td><td>Which year this balance is for</td></tr>
                    <tr><td class="field-name">entitlement</td><td><span class="field-type">Decimal</span></td><td>Total days allowed this year</td></tr>
                    <tr><td class="field-name">used</td><td><span class="field-type">Decimal</span></td><td>Days already taken</td></tr>
                    <tr><td class="field-name">pending</td><td><span class="field-type">Decimal</span></td><td>Days in pending requests</td></tr>
                    <tr><td class="field-name">carriedForward</td><td><span class="field-type">Decimal</span></td><td>Days carried from last year</td></tr>
                    <tr><td class="field-name">adjustment</td><td><span class="field-type">Decimal</span></td><td>Manual adjustments (+/-)</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">LeaveRequest</span>
                    <span class="table-badge">Core Table</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Every leave request submitted by employees. Tracks dates, approval status, and supporting documents.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">requestNumber</td><td><span class="field-type">String</span></td><td>Reference number: "ACME-LR-00123"</td></tr>
                    <tr><td class="field-name">startDate / endDate</td><td><span class="field-type">DateTime</span></td><td>Leave period</td></tr>
                    <tr><td class="field-name">totalDays</td><td><span class="field-type">Decimal</span></td><td>Number of working days (excludes weekends/holidays)</td></tr>
                    <tr><td class="field-name">requestType</td><td><span class="field-type">Enum</span></td><td>FULL_DAY, HALF_DAY_AM, or HALF_DAY_PM</td></tr>
                    <tr><td class="field-name">reason</td><td><span class="field-type">String?</span></td><td>Why they need leave</td></tr>
                    <tr><td class="field-name">documentUrl</td><td><span class="field-type">String?</span></td><td>Supporting document (medical certificate, etc.)</td></tr>
                    <tr><td class="field-name">status</td><td><span class="field-type">Enum</span></td><td>PENDING, APPROVED, REJECTED, CANCELLED</td></tr>
                    <tr><td class="field-name">approverId</td><td><span class="field-type">String?</span></td><td>Who approved/rejected</td></tr>
                    <tr><td class="field-name">emergencyContact</td><td><span class="field-type">String?</span></td><td>Contact during leave</td></tr>
                </table>
            </div>
        </section>

        <!-- PAYROLL -->
        <section id="payroll">
            <div class="section-header">
                <span class="section-icon">üí∞</span>
                <div>
                    <h2>Payroll</h2>
                    <p class="section-desc">Salaries, loans, and payment processing</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">SalaryStructure</span>
                    <span class="table-badge">Per Employee</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Each employee's salary breakdown - basic salary plus all allowances. One active structure per person.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">basicSalary</td><td><span class="field-type">Decimal</span></td><td>Base salary amount (in QAR)</td></tr>
                    <tr><td class="field-name">housingAllowance</td><td><span class="field-type">Decimal</span></td><td>Housing/rent allowance</td></tr>
                    <tr><td class="field-name">transportAllowance</td><td><span class="field-type">Decimal</span></td><td>Transport/car allowance</td></tr>
                    <tr><td class="field-name">foodAllowance</td><td><span class="field-type">Decimal</span></td><td>Food/meal allowance</td></tr>
                    <tr><td class="field-name">phoneAllowance</td><td><span class="field-type">Decimal</span></td><td>Phone/communication allowance</td></tr>
                    <tr><td class="field-name">otherAllowances</td><td><span class="field-type">Decimal</span></td><td>Other allowances total</td></tr>
                    <tr><td class="field-name">grossSalary</td><td><span class="field-type">Decimal</span></td><td>Total (all components added up)</td></tr>
                    <tr><td class="field-name">effectiveFrom</td><td><span class="field-type">DateTime</span></td><td>When this salary started</td></tr>
                    <tr><td class="field-name">isActive</td><td><span class="field-type">Boolean</span></td><td>Is this the current salary?</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">PayrollRun</span>
                    <span class="table-badge">Monthly Processing</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> A payroll run for a specific month. Goes through workflow: Draft ‚Üí Submit ‚Üí Approve ‚Üí Process ‚Üí Pay.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">referenceNumber</td><td><span class="field-type">String</span></td><td>Reference: "ACME-PAY-2024-12-001"</td></tr>
                    <tr><td class="field-name">year / month</td><td><span class="field-type">Int</span></td><td>Pay period (e.g., 2024, December)</td></tr>
                    <tr><td class="field-name">status</td><td><span class="field-type">Enum</span></td><td>DRAFT, PENDING_APPROVAL, APPROVED, PROCESSED, PAID, CANCELLED</td></tr>
                    <tr><td class="field-name">totalGross</td><td><span class="field-type">Decimal</span></td><td>Total gross salaries</td></tr>
                    <tr><td class="field-name">totalDeductions</td><td><span class="field-type">Decimal</span></td><td>Total deductions (loans, unpaid leave)</td></tr>
                    <tr><td class="field-name">totalNet</td><td><span class="field-type">Decimal</span></td><td>Total net amount to pay</td></tr>
                    <tr><td class="field-name">employeeCount</td><td><span class="field-type">Int</span></td><td>Number of employees in this run</td></tr>
                    <tr><td class="field-name">wpsFileGenerated</td><td><span class="field-type">Boolean</span></td><td>Has WPS file been generated?</td></tr>
                    <tr><td class="field-name">wpsFileUrl</td><td><span class="field-type">String?</span></td><td>Download link for WPS file</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">Payslip</span>
                    <span class="table-badge">Per Employee/Month</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Individual payslip for each employee in a payroll run. Shows their salary breakdown and deductions.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">payslipNumber</td><td><span class="field-type">String</span></td><td>Payslip reference: "ACME-PS-2024-12-00001"</td></tr>
                    <tr><td class="field-name">(salary fields)</td><td><span class="field-type">Decimal</span></td><td>Snapshot of all salary components at time of payroll</td></tr>
                    <tr><td class="field-name">grossSalary</td><td><span class="field-type">Decimal</span></td><td>Gross pay before deductions</td></tr>
                    <tr><td class="field-name">totalDeductions</td><td><span class="field-type">Decimal</span></td><td>Sum of all deductions</td></tr>
                    <tr><td class="field-name">netSalary</td><td><span class="field-type">Decimal</span></td><td>Final amount to be paid</td></tr>
                    <tr><td class="field-name">bankName / iban</td><td><span class="field-type">String?</span></td><td>Bank details for WPS</td></tr>
                    <tr><td class="field-name">qidNumber</td><td><span class="field-type">String?</span></td><td>QID for WPS file</td></tr>
                    <tr><td class="field-name">isPaid</td><td><span class="field-type">Boolean</span></td><td>Has this payslip been paid?</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">EmployeeLoan</span>
                    <span class="table-badge">Loans & Advances</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Loans and salary advances given to employees. Automatically deducted from monthly payroll.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">loanNumber</td><td><span class="field-type">String</span></td><td>Loan reference: "ACME-LOAN-00001"</td></tr>
                    <tr><td class="field-name">type</td><td><span class="field-type">String</span></td><td>LOAN or ADVANCE</td></tr>
                    <tr><td class="field-name">principalAmount</td><td><span class="field-type">Decimal</span></td><td>Original amount borrowed</td></tr>
                    <tr><td class="field-name">totalAmount</td><td><span class="field-type">Decimal</span></td><td>Total including any fees</td></tr>
                    <tr><td class="field-name">monthlyDeduction</td><td><span class="field-type">Decimal</span></td><td>Amount deducted per month</td></tr>
                    <tr><td class="field-name">remainingAmount</td><td><span class="field-type">Decimal</span></td><td>Balance still owed</td></tr>
                    <tr><td class="field-name">installments</td><td><span class="field-type">Int</span></td><td>Total number of monthly payments</td></tr>
                    <tr><td class="field-name">installmentsPaid</td><td><span class="field-type">Int</span></td><td>Payments made so far</td></tr>
                    <tr><td class="field-name">status</td><td><span class="field-type">Enum</span></td><td>ACTIVE, PAUSED, COMPLETED, WRITTEN_OFF</td></tr>
                </table>
            </div>
        </section>

        <!-- PURCHASE REQUESTS -->
        <section id="purchase">
            <div class="section-header">
                <span class="section-icon">üõí</span>
                <div>
                    <h2>Purchase Requests</h2>
                    <p class="section-desc">Internal procurement and buying approvals</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">PurchaseRequest</span>
                    <span class="table-badge">Core Table</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Requests to buy things - hardware, software, services, supplies. Goes through approval workflow before purchase.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">referenceNumber</td><td><span class="field-type">String</span></td><td>PR number: "ACME-PR-2412-0001"</td></tr>
                    <tr><td class="field-name">title</td><td><span class="field-type">String</span></td><td>Short description: "New laptops for dev team"</td></tr>
                    <tr><td class="field-name">description</td><td><span class="field-type">String?</span></td><td>Detailed description</td></tr>
                    <tr><td class="field-name">justification</td><td><span class="field-type">String?</span></td><td>Business reason for purchase</td></tr>
                    <tr><td class="field-name">status</td><td><span class="field-type">Enum</span></td><td>PENDING, UNDER_REVIEW, APPROVED, REJECTED, COMPLETED</td></tr>
                    <tr><td class="field-name">priority</td><td><span class="field-type">Enum</span></td><td>LOW, MEDIUM, HIGH, URGENT</td></tr>
                    <tr><td class="field-name">purchaseType</td><td><span class="field-type">Enum</span></td><td>HARDWARE, SOFTWARE_SUBSCRIPTION, SERVICES, OFFICE_SUPPLIES, etc.</td></tr>
                    <tr><td class="field-name">costType</td><td><span class="field-type">Enum</span></td><td>OPERATING_COST or PROJECT_COST</td></tr>
                    <tr><td class="field-name">totalAmount</td><td><span class="field-type">Decimal</span></td><td>Total cost of all items</td></tr>
                    <tr><td class="field-name">neededByDate</td><td><span class="field-type">DateTime?</span></td><td>When items are needed</td></tr>
                    <tr><td class="field-name">vendorName</td><td><span class="field-type">String?</span></td><td>Preferred vendor</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">PurchaseRequestItem</span>
                    <span class="table-badge">Line Items</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Individual items within a purchase request. Each line has quantity, price, and optionally recurring billing info.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">itemNumber</td><td><span class="field-type">Int</span></td><td>Line number (1, 2, 3...)</td></tr>
                    <tr><td class="field-name">description</td><td><span class="field-type">String</span></td><td>What is being purchased</td></tr>
                    <tr><td class="field-name">quantity</td><td><span class="field-type">Int</span></td><td>How many</td></tr>
                    <tr><td class="field-name">unitPrice</td><td><span class="field-type">Decimal</span></td><td>Price per unit</td></tr>
                    <tr><td class="field-name">totalPrice</td><td><span class="field-type">Decimal</span></td><td>Quantity √ó Unit Price</td></tr>
                    <tr><td class="field-name">billingCycle</td><td><span class="field-type">Enum</span></td><td>For subscriptions: MONTHLY, YEARLY, or ONE_TIME</td></tr>
                    <tr><td class="field-name">productUrl</td><td><span class="field-type">String?</span></td><td>Link to product page</td></tr>
                </table>
            </div>
        </section>

        <!-- ASSET REQUESTS -->
        <section id="asset-requests">
            <div class="section-header">
                <span class="section-icon">üìã</span>
                <div>
                    <h2>Asset Requests</h2>
                    <p class="section-desc">Requesting, assigning, and returning equipment</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">AssetRequest</span>
                    <span class="table-badge">Workflow</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Three types of asset workflows: (1) Employee requests a spare asset, (2) Admin assigns asset to employee, (3) Employee returns an asset.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">requestNumber</td><td><span class="field-type">String</span></td><td>Request reference: "ACME-AR-241231-001"</td></tr>
                    <tr><td class="field-name">type</td><td><span class="field-type">Enum</span></td><td>EMPLOYEE_REQUEST, ADMIN_ASSIGNMENT, or RETURN_REQUEST</td></tr>
                    <tr><td class="field-name">status</td><td><span class="field-type">Enum</span></td><td>PENDING_ADMIN_APPROVAL, PENDING_USER_ACCEPTANCE, APPROVED, REJECTED, etc.</td></tr>
                    <tr><td class="field-name">assetId</td><td><span class="field-type">String</span></td><td>Which asset this request is for</td></tr>
                    <tr><td class="field-name">userId</td><td><span class="field-type">String</span></td><td>Target user (requester or assignee)</td></tr>
                    <tr><td class="field-name">reason</td><td><span class="field-type">String?</span></td><td>Why they need it or why returning</td></tr>
                    <tr><td class="field-name">expiresAt</td><td><span class="field-type">DateTime?</span></td><td>When pending request expires</td></tr>
                </table>
            </div>

            <div class="enum-section">
                <div class="enum-title">Asset Request Status Flow</div>
                <div class="enum-values">
                    <span class="enum-value">PENDING_ADMIN_APPROVAL - Waiting for admin to approve employee's request</span>
                    <span class="enum-value">PENDING_USER_ACCEPTANCE - Waiting for employee to accept admin's assignment</span>
                    <span class="enum-value">PENDING_RETURN_APPROVAL - Waiting for admin to approve return</span>
                    <span class="enum-value">ACCEPTED - Employee accepted the assignment</span>
                    <span class="enum-value">APPROVED - Request was approved</span>
                    <span class="enum-value">REJECTED - Admin rejected</span>
                    <span class="enum-value">REJECTED_BY_USER - Employee declined assignment</span>
                </div>
            </div>
        </section>

        <!-- APPROVALS -->
        <section id="approvals">
            <div class="section-header">
                <span class="section-icon">‚úÖ</span>
                <div>
                    <h2>Multi-Level Approvals</h2>
                    <p class="section-desc">Configurable approval chains</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">ApprovalPolicy</span>
                    <span class="table-badge">Rules</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Defines approval requirements based on request type and amount. E.g., "Purchase requests over 10,000 QAR need Director approval."
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">name</td><td><span class="field-type">String</span></td><td>Policy name: "High-Value Purchase Approval"</td></tr>
                    <tr><td class="field-name">module</td><td><span class="field-type">Enum</span></td><td>Which module: LEAVE_REQUEST, PURCHASE_REQUEST, ASSET_REQUEST</td></tr>
                    <tr><td class="field-name">minAmount / maxAmount</td><td><span class="field-type">Decimal?</span></td><td>Amount range this policy applies to</td></tr>
                    <tr><td class="field-name">minDays / maxDays</td><td><span class="field-type">Int?</span></td><td>For leave: day range this policy applies to</td></tr>
                    <tr><td class="field-name">isActive</td><td><span class="field-type">Boolean</span></td><td>Is this policy in use?</td></tr>
                    <tr><td class="field-name">priority</td><td><span class="field-type">Int</span></td><td>Higher = checked first (for overlapping rules)</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">ApprovalLevel</span>
                    <span class="table-badge">Chain Steps</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Each step in an approval chain. A policy might have Level 1: Manager, Level 2: Director.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">levelOrder</td><td><span class="field-type">Int</span></td><td>Step number: 1, 2, 3...</td></tr>
                    <tr><td class="field-name">approverRole</td><td><span class="field-type">Role</span></td><td>Who must approve: MANAGER, HR_MANAGER, FINANCE_MANAGER, DIRECTOR</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">ApprovalStep</span>
                    <span class="table-badge">Actual Approvals</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Tracks each approval step for a specific request. Shows who approved, when, and any notes.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">entityType</td><td><span class="field-type">Enum</span></td><td>What's being approved</td></tr>
                    <tr><td class="field-name">entityId</td><td><span class="field-type">String</span></td><td>ID of the request</td></tr>
                    <tr><td class="field-name">levelOrder</td><td><span class="field-type">Int</span></td><td>Which level in the chain</td></tr>
                    <tr><td class="field-name">requiredRole</td><td><span class="field-type">Role</span></td><td>Role needed to approve</td></tr>
                    <tr><td class="field-name">status</td><td><span class="field-type">Enum</span></td><td>PENDING, APPROVED, REJECTED, SKIPPED</td></tr>
                    <tr><td class="field-name">approverId</td><td><span class="field-type">String?</span></td><td>Who took action</td></tr>
                    <tr><td class="field-name">notes</td><td><span class="field-type">String?</span></td><td>Approver's comments</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">ApproverDelegation</span>
                    <span class="table-badge">Temporary Coverage</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> When an approver is on leave, they can delegate their approval authority to someone else temporarily.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">delegatorId</td><td><span class="field-type">String</span></td><td>Who is delegating (the one on leave)</td></tr>
                    <tr><td class="field-name">delegateeId</td><td><span class="field-type">String</span></td><td>Who receives the authority</td></tr>
                    <tr><td class="field-name">startDate / endDate</td><td><span class="field-type">DateTime</span></td><td>When delegation is active</td></tr>
                    <tr><td class="field-name">reason</td><td><span class="field-type">String?</span></td><td>Why delegating: "On annual leave"</td></tr>
                    <tr><td class="field-name">isActive</td><td><span class="field-type">Boolean</span></td><td>Is delegation currently active?</td></tr>
                </table>
            </div>
        </section>

        <!-- COMPANY DOCUMENTS -->
        <section id="docs">
            <div class="section-header">
                <span class="section-icon">üìÑ</span>
                <div>
                    <h2>Company Documents</h2>
                    <p class="section-desc">Legal documents with expiry tracking</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">CompanyDocumentType</span>
                    <span class="table-badge">Categories</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Types of company documents that need tracking: Trade License, Commercial Registration, Vehicle Insurance, etc.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">name</td><td><span class="field-type">String</span></td><td>Document type name</td></tr>
                    <tr><td class="field-name">code</td><td><span class="field-type">String</span></td><td>System code: "CR", "TRADE_LICENSE"</td></tr>
                    <tr><td class="field-name">category</td><td><span class="field-type">String</span></td><td>COMPANY or VEHICLE</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">CompanyDocument</span>
                    <span class="table-badge">Actual Documents</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Actual company documents with expiry dates. System sends alerts before expiry.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">referenceNumber</td><td><span class="field-type">String?</span></td><td>Document's official number</td></tr>
                    <tr><td class="field-name">expiryDate</td><td><span class="field-type">DateTime</span></td><td>When it expires (triggers alerts)</td></tr>
                    <tr><td class="field-name">issuedBy</td><td><span class="field-type">String?</span></td><td>Issuing authority</td></tr>
                    <tr><td class="field-name">documentUrl</td><td><span class="field-type">String?</span></td><td>Uploaded document file</td></tr>
                    <tr><td class="field-name">assetId</td><td><span class="field-type">String?</span></td><td>For vehicle docs: which vehicle</td></tr>
                    <tr><td class="field-name">renewalCost</td><td><span class="field-type">Decimal?</span></td><td>Cost to renew</td></tr>
                </table>
            </div>
        </section>

        <!-- DEPRECIATION -->
        <section id="depreciation">
            <div class="section-header">
                <span class="section-icon">üìâ</span>
                <div>
                    <h2>Asset Depreciation</h2>
                    <p class="section-desc">Qatar tax rates and value tracking</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">DepreciationCategory</span>
                    <span class="table-badge">Tax Rates</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Asset categories with Qatar tax depreciation rates. Buildings: 4%, Vehicles: 20%, IT Equipment: 33%, etc.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">name</td><td><span class="field-type">String</span></td><td>Category name: "Buildings", "Vehicles"</td></tr>
                    <tr><td class="field-name">code</td><td><span class="field-type">String</span></td><td>System code: "BUILDINGS", "VEHICLES"</td></tr>
                    <tr><td class="field-name">annualRate</td><td><span class="field-type">Decimal</span></td><td>Yearly depreciation rate: 4.00, 20.00, 33.33</td></tr>
                    <tr><td class="field-name">usefulLifeYears</td><td><span class="field-type">Int</span></td><td>Expected lifespan in years</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">DepreciationRecord</span>
                    <span class="table-badge">Calculations</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Monthly/quarterly depreciation calculations for each asset. Tracks accumulated depreciation and net book value.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">periodStart / periodEnd</td><td><span class="field-type">DateTime</span></td><td>Period this calculation covers</td></tr>
                    <tr><td class="field-name">depreciationAmount</td><td><span class="field-type">Decimal</span></td><td>Amount depreciated this period</td></tr>
                    <tr><td class="field-name">accumulatedAmount</td><td><span class="field-type">Decimal</span></td><td>Total depreciation to date</td></tr>
                    <tr><td class="field-name">netBookValue</td><td><span class="field-type">Decimal</span></td><td>Current value after depreciation</td></tr>
                    <tr><td class="field-name">calculationType</td><td><span class="field-type">String</span></td><td>SCHEDULED (automatic) or MANUAL</td></tr>
                </table>
            </div>
        </section>

        <!-- NOTIFICATIONS -->
        <section id="notifications">
            <div class="section-header">
                <span class="section-icon">üîî</span>
                <div>
                    <h2>Notifications</h2>
                    <p class="section-desc">In-app alerts and updates</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">Notification</span>
                    <span class="table-badge">Bell Alerts</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> In-app notifications shown in the bell icon dropdown. Leave approvals, asset assignments, document expiry warnings, etc.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">type</td><td><span class="field-type">Enum</span></td><td>Notification type: LEAVE_REQUEST_APPROVED, ASSET_ASSIGNED, etc.</td></tr>
                    <tr><td class="field-name">title</td><td><span class="field-type">String</span></td><td>Notification headline</td></tr>
                    <tr><td class="field-name">message</td><td><span class="field-type">String</span></td><td>Detailed message</td></tr>
                    <tr><td class="field-name">link</td><td><span class="field-type">String?</span></td><td>URL to navigate when clicked</td></tr>
                    <tr><td class="field-name">isRead</td><td><span class="field-type">Boolean</span></td><td>Has user seen this?</td></tr>
                    <tr><td class="field-name">readAt</td><td><span class="field-type">DateTime?</span></td><td>When it was read</td></tr>
                </table>
            </div>
        </section>

        <!-- ACTIVITY -->
        <section id="activity">
            <div class="section-header">
                <span class="section-icon">üìù</span>
                <div>
                    <h2>Activity & Audit Logs</h2>
                    <p class="section-desc">Complete history of all actions</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">ActivityLog</span>
                    <span class="table-badge">Audit Trail</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Records every significant action in the system. Who did what, when, and to which record. Never deleted.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">actorUserId</td><td><span class="field-type">String?</span></td><td>Who performed the action</td></tr>
                    <tr><td class="field-name">action</td><td><span class="field-type">String</span></td><td>What was done: "created", "updated", "deleted", "approved"</td></tr>
                    <tr><td class="field-name">entityType</td><td><span class="field-type">String?</span></td><td>What type of record: "Asset", "LeaveRequest"</td></tr>
                    <tr><td class="field-name">entityId</td><td><span class="field-type">String?</span></td><td>Which specific record</td></tr>
                    <tr><td class="field-name">payload</td><td><span class="field-type">Json?</span></td><td>Additional details about the action</td></tr>
                    <tr><td class="field-name">at</td><td><span class="field-type">DateTime</span></td><td>When it happened</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">AppSetting / SystemSettings</span>
                    <span class="table-badge">Configuration</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Key-value settings storage. AppSetting is global, SystemSettings is per-company.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">key</td><td><span class="field-type">String</span></td><td>Setting name: "exchange_rate_USD", "default_leave_days"</td></tr>
                    <tr><td class="field-name">value</td><td><span class="field-type">String</span></td><td>Setting value (stored as text)</td></tr>
                </table>
            </div>
        </section>

        <!-- AI -->
        <section id="ai">
            <div class="section-header">
                <span class="section-icon">ü§ñ</span>
                <div>
                    <h2>AI Chat Assistant</h2>
                    <p class="section-desc">Conversational AI for data queries</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">ChatConversation / ChatMessage</span>
                    <span class="table-badge">Chat History</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Stores AI chat conversations and messages. Users can ask questions about their data in natural language.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">title</td><td><span class="field-type">String?</span></td><td>Conversation title (auto-generated)</td></tr>
                    <tr><td class="field-name">role</td><td><span class="field-type">String</span></td><td>Who sent message: "user" or "assistant"</td></tr>
                    <tr><td class="field-name">content</td><td><span class="field-type">Text</span></td><td>Message text</td></tr>
                    <tr><td class="field-name">functionCalls</td><td><span class="field-type">Json?</span></td><td>AI function calls made to fetch data</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">AIChatUsage</span>
                    <span class="table-badge">Token Tracking</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Tracks AI token usage for billing and quota management. Each company has a monthly token budget.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">promptTokens</td><td><span class="field-type">Int</span></td><td>Tokens in the question</td></tr>
                    <tr><td class="field-name">completionTokens</td><td><span class="field-type">Int</span></td><td>Tokens in the answer</td></tr>
                    <tr><td class="field-name">totalTokens</td><td><span class="field-type">Int</span></td><td>Total tokens used</td></tr>
                    <tr><td class="field-name">model</td><td><span class="field-type">String</span></td><td>AI model used: "gpt-4o-mini"</td></tr>
                    <tr><td class="field-name">costUsd</td><td><span class="field-type">Float</span></td><td>Estimated cost in USD</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">AIChatAuditLog</span>
                    <span class="table-badge">Security Log</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Security audit log for AI usage. Tracks what data was accessed without storing actual query content (privacy-safe).
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">queryHash</td><td><span class="field-type">String</span></td><td>Hash of query (for pattern detection)</td></tr>
                    <tr><td class="field-name">functionsCalled</td><td><span class="field-type">Json</span></td><td>Which data functions were called</td></tr>
                    <tr><td class="field-name">dataAccessed</td><td><span class="field-type">Json</span></td><td>Summary of data types accessed</td></tr>
                    <tr><td class="field-name">flagged</td><td><span class="field-type">Boolean</span></td><td>Was this query flagged as suspicious?</td></tr>
                    <tr><td class="field-name">riskScore</td><td><span class="field-type">Int</span></td><td>Risk score (0-100)</td></tr>
                </table>
            </div>
        </section>

        <!-- WHATSAPP -->
        <section id="whatsapp">
            <div class="section-header">
                <span class="section-icon">üí¨</span>
                <div>
                    <h2>WhatsApp Integration</h2>
                    <p class="section-desc">Approval notifications via WhatsApp Business API</p>
                </div>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">WhatsAppConfig</span>
                    <span class="table-badge">Per-Company</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> WhatsApp Business API credentials for each company. Can use platform's shared config or their own.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">phoneNumberId</td><td><span class="field-type">String</span></td><td>Meta Phone Number ID</td></tr>
                    <tr><td class="field-name">businessAccountId</td><td><span class="field-type">String</span></td><td>WhatsApp Business Account ID</td></tr>
                    <tr><td class="field-name">accessTokenEncrypted</td><td><span class="field-type">String</span></td><td>Encrypted API access token</td></tr>
                    <tr><td class="field-name">isActive</td><td><span class="field-type">Boolean</span></td><td>Is WhatsApp enabled?</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">WhatsAppUserPhone</span>
                    <span class="table-badge">Phone Numbers</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Maps users to their WhatsApp phone numbers for receiving approval notifications.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">phoneNumber</td><td><span class="field-type">String</span></td><td>WhatsApp number in E.164 format: +974XXXXXXXX</td></tr>
                    <tr><td class="field-name">isVerified</td><td><span class="field-type">Boolean</span></td><td>Has the number been verified?</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">WhatsAppActionToken</span>
                    <span class="table-badge">Quick Actions</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> One-time tokens for WhatsApp button actions. Approvers can tap "Approve" or "Reject" directly in WhatsApp.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">token</td><td><span class="field-type">String</span></td><td>Encrypted action token</td></tr>
                    <tr><td class="field-name">entityType</td><td><span class="field-type">String</span></td><td>What's being approved: LEAVE_REQUEST, etc.</td></tr>
                    <tr><td class="field-name">action</td><td><span class="field-type">String</span></td><td>"approve" or "reject"</td></tr>
                    <tr><td class="field-name">used</td><td><span class="field-type">Boolean</span></td><td>Has token been used? (One-time only)</td></tr>
                    <tr><td class="field-name">expiresAt</td><td><span class="field-type">DateTime</span></td><td>Token expires after 60 minutes</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">WhatsAppMessageLog</span>
                    <span class="table-badge">Delivery Tracking</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Logs all WhatsApp messages sent. Tracks delivery status for debugging and audit.
                </div>
                <table>
                    <tr><th>Field</th><th>Type</th><th>What it stores</th></tr>
                    <tr><td class="field-name">messageId</td><td><span class="field-type">String?</span></td><td>Meta message ID (for tracking)</td></tr>
                    <tr><td class="field-name">recipientPhone</td><td><span class="field-type">String</span></td><td>Who received the message</td></tr>
                    <tr><td class="field-name">templateName</td><td><span class="field-type">String</span></td><td>Which message template was used</td></tr>
                    <tr><td class="field-name">status</td><td><span class="field-type">String</span></td><td>sent, delivered, read, or failed</td></tr>
                    <tr><td class="field-name">errorMessage</td><td><span class="field-type">String?</span></td><td>Error details if failed</td></tr>
                </table>
            </div>

            <div class="table-card">
                <div class="table-header">
                    <span class="table-name">PlatformWhatsAppConfig</span>
                    <span class="table-badge">Super Admin</span>
                </div>
                <div class="table-purpose">
                    <strong>What is this?</strong> Platform-wide WhatsApp configuration. Companies can use this shared config instead of setting up their own.
                </div>
            </div>
        </section>

        <footer>
            <p>Durj Database Guide ‚Ä¢ Last updated: December 2024 ‚Ä¢ 54 Tables</p>
            <p style="margin-top:10px;font-size:0.85em;">
                This document explains the database structure for non-technical review.<br>
                For technical details, see <code>prisma/schema.prisma</code>
            </p>
        </footer>
    </div>
</body>
</html>
