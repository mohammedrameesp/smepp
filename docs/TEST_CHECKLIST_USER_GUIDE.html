<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Durj Platform - Comprehensive Test Checklist (4100 Test Cases)</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        header { text-align: center; color: white; padding: 40px 20px; margin-bottom: 30px; }
        header h1 { font-size: 2.5em; margin-bottom: 10px; }
        header p { font-size: 1.2em; opacity: 0.9; }
        .stats-bar { display: flex; justify-content: center; gap: 20px; margin-top: 20px; flex-wrap: wrap; }
        .stat { background: rgba(255,255,255,0.2); padding: 15px 25px; border-radius: 10px; text-align: center; min-width: 100px; }
        .stat-number { font-size: 1.8em; font-weight: bold; }
        .stat-label { font-size: 0.85em; opacity: 0.9; }
        .controls-bar {
            background: white; border-radius: 15px; padding: 20px; margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px;
        }
        .search-box { flex: 1; min-width: 250px; max-width: 400px; }
        .search-box input {
            width: 100%; padding: 12px 15px; border: 2px solid #e5e7eb;
            border-radius: 8px; font-size: 1em;
        }
        .search-box input:focus { outline: none; border-color: #667eea; }
        .btn-group { display: flex; gap: 10px; flex-wrap: wrap; }
        .btn {
            padding: 10px 20px; border: none; border-radius: 8px;
            cursor: pointer; font-size: 0.9em; transition: all 0.2s;
        }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .btn-secondary { background: #f3f4f6; color: #374151; }
        .btn-danger { background: #ef4444; color: white; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .toc { background: white; border-radius: 15px; margin-bottom: 25px; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
        .toc-header {
            padding: 20px 25px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white; cursor: pointer; display: flex; justify-content: space-between; align-items: center;
        }
        .toc-header h2 { font-size: 1.3em; }
        .toc-content { padding: 20px 25px; display: none; max-height: 500px; overflow-y: auto; }
        .toc-content.active { display: block; }
        .toc-list { column-count: 3; column-gap: 30px; list-style: none; }
        .toc-list li { break-inside: avoid; margin-bottom: 8px; }
        .toc-list a { color: #4b5563; text-decoration: none; font-size: 0.9em; display: block; padding: 5px 10px; border-radius: 5px; transition: all 0.2s; }
        .toc-list a:hover { background: #f3f4f6; color: #667eea; }
        .section { background: white; border-radius: 15px; margin-bottom: 20px; overflow: hidden; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
        .section-header {
            padding: 18px 25px; cursor: pointer; display: flex; justify-content: space-between;
            align-items: center; background: #f9fafb; border-bottom: 1px solid #e5e7eb;
        }
        .section-header:hover { background: #f3f4f6; }
        .section-title { display: flex; align-items: center; gap: 15px; }
        .section-title h3 { font-size: 1.1em; color: #1f2937; }
        .section-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white; padding: 4px 10px; border-radius: 20px; font-size: 0.75em; font-weight: 600;
        }
        .section-progress { display: flex; align-items: center; gap: 10px; }
        .progress-text { font-size: 0.85em; color: #6b7280; min-width: 60px; text-align: right; }
        .progress-bar-mini { width: 100px; height: 6px; background: #e5e7eb; border-radius: 3px; overflow: hidden; }
        .progress-fill-mini { height: 100%; background: linear-gradient(90deg, #10b981, #3b82f6); border-radius: 3px; transition: width 0.3s; }
        .toggle-icon { font-size: 1.2em; color: #9ca3af; transition: transform 0.3s; }
        .section.active .toggle-icon { transform: rotate(180deg); }
        .section-content { display: none; padding: 25px; }
        .section.active .section-content { display: block; }
        .subsection { margin-bottom: 25px; }
        .subsection-header {
            color: #6b7280; font-size: 0.85em; text-transform: uppercase; letter-spacing: 1px;
            margin-bottom: 12px; padding-bottom: 8px; border-bottom: 2px solid #e5e7eb;
        }
        .checklist { list-style: none; }
        .checklist li {
            padding: 10px 15px; margin-bottom: 6px; background: #f9fafb;
            border-radius: 8px; display: flex; align-items: flex-start; gap: 12px;
            transition: all 0.2s; border-left: 3px solid transparent;
        }
        .checklist li:hover { background: #f3f4f6; transform: translateX(3px); }
        .checklist li.checked { background: #ecfdf5; border-left-color: #10b981; }
        .checklist li.critical { border-left-color: #ef4444; }
        .checklist input[type="checkbox"] { width: 18px; height: 18px; margin-top: 2px; cursor: pointer; accent-color: #667eea; }
        .checklist label { flex: 1; cursor: pointer; line-height: 1.5; font-size: 0.95em; }
        .checklist li.checked label { color: #059669; }
        .file-ref {
            background: #fef3c7; border-left: 4px solid #f59e0b; padding: 12px 15px;
            margin-bottom: 15px; border-radius: 0 8px 8px 0; font-size: 0.85em;
        }
        .file-ref strong { color: #92400e; }
        .file-ref code { background: rgba(0,0,0,0.05); padding: 2px 6px; border-radius: 4px; font-family: 'Consolas', monospace; font-size: 0.9em; }
        footer { text-align: center; color: white; padding: 30px; opacity: 0.9; }
        .overall-progress { margin-top: 15px; }
        .overall-progress .progress-bar { width: 100%; max-width: 400px; height: 12px; background: rgba(255,255,255,0.3); border-radius: 6px; margin: 10px auto; overflow: hidden; }
        .overall-progress .progress-fill { height: 100%; background: white; border-radius: 6px; transition: width 0.3s; }
        .print-btn {
            position: fixed; bottom: 20px; right: 20px; background: white; border: none;
            padding: 15px 25px; border-radius: 50px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            cursor: pointer; font-size: 1em; display: flex; align-items: center; gap: 8px; z-index: 1000;
        }
        .print-btn:hover { transform: scale(1.05); }
        @media (max-width: 1024px) { .toc-list { column-count: 2; } }
        @media (max-width: 768px) {
            header h1 { font-size: 1.8em; }
            .stats-bar { gap: 10px; }
            .stat { padding: 10px 15px; min-width: 80px; }
            .toc-list { column-count: 1; }
            .controls-bar { flex-direction: column; }
            .search-box { max-width: 100%; }
            .progress-bar-mini { display: none; }
        }
        @media print {
            body { background: white; padding: 0; }
            .print-btn, .controls-bar, .toc { display: none !important; }
            .section { break-inside: avoid; box-shadow: none; border: 1px solid #e5e7eb; }
            .section-content { display: block !important; }
            .checklist input[type="checkbox"] { -webkit-appearance: none; appearance: none; width: 14px; height: 14px; border: 2px solid #333; border-radius: 2px; }
            header { color: #333; padding: 20px; }
            .stat { background: #f3f4f6; color: #333; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Durj Platform - Comprehensive Test Checklist</h1>
            <p>Complete manual testing checklist with 4100 test cases across 79 sections</p>
            <div class="stats-bar">
                <div class="stat">
                    <div class="stat-number" id="total-tests">4100</div>
                    <div class="stat-label">Total Tests</div>
                </div>
                <div class="stat">
                    <div class="stat-number">79</div>
                    <div class="stat-label">Sections</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="completed-count">0</div>
                    <div class="stat-label">Completed</div>
                </div>
                <div class="stat">
                    <div class="stat-number" id="remaining-count">4100</div>
                    <div class="stat-label">Remaining</div>
                </div>
            </div>
        </header>

        <div class="controls-bar">
            <div class="search-box">
                <input type="text" id="search-input" placeholder="Search test cases..." oninput="filterTests()">
            </div>
            <div class="btn-group">
                <button class="btn btn-secondary" onclick="expandAll()">Expand All</button>
                <button class="btn btn-secondary" onclick="collapseAll()">Collapse All</button>
                <button class="btn btn-primary" onclick="exportProgress()">Export Progress</button>
                <button class="btn btn-danger" onclick="resetProgress()">Reset All</button>
            </div>
        </div>

        <div class="toc">
            <div class="toc-header" onclick="toggleToc()">
                <h2>Table of Contents (79 Sections)</h2>
                <span class="toggle-icon">&#9660;</span>
            </div>
            <div class="toc-content" id="toc-content">
                <ul class="toc-list">
                    <li><a href="#section-1">Section 1: AUTHENTICATION &amp; SESSION MANAGEMENT</a></li>
                    <li><a href="#section-2">Section 2: MULTI-TENANT ISOLATION</a></li>
                    <li><a href="#section-3">Section 3: ROLE-BASED ACCESS CONTROL (RBAC)</a></li>
                    <li><a href="#section-4">Section 4: ASSETS MODULE</a></li>
                    <li><a href="#section-5">Section 5: EMPLOYEES MODULE (HR)</a></li>
                    <li><a href="#section-6">Section 6: LEAVE MANAGEMENT MODULE</a></li>
                    <li><a href="#section-7">Section 7: PAYROLL MODULE</a></li>
                    <li><a href="#section-8">Section 8: SUBSCRIPTIONS MODULE</a></li>
                    <li><a href="#section-9">Section 9: SUPPLIERS MODULE</a></li>
                    <li><a href="#section-10">Section 10: PURCHASE REQUESTS MODULE</a></li>
                    <li><a href="#section-11">Section 11: APPROVAL WORKFLOWS</a></li>
                    <li><a href="#section-12">Section 12: DELEGATIONS MODULE</a></li>
                    <li><a href="#section-13">Section 13: NOTIFICATIONS MODULE</a></li>
                    <li><a href="#section-14">Section 14: ORGANIZATIONS &amp; TEAM MANAGEMENT</a></li>
                    <li><a href="#section-15">Section 15: COMPANY DOCUMENTS MODULE</a></li>
                    <li><a href="#section-16">Section 16: LOCATIONS MODULE</a></li>
                    <li><a href="#section-17">Section 17: SUPER-ADMIN SYSTEM</a></li>
                    <li><a href="#section-18">Section 18: FILE UPLOADS &amp; STORAGE</a></li>
                    <li><a href="#section-19">Section 19: SCHEDULED JOBS (CRON)</a></li>
                    <li><a href="#section-20">Section 20: CSRF PROTECTION</a></li>
                    <li><a href="#section-21">Section 21: ERROR RESPONSE CODES</a></li>
                    <li><a href="#section-22">Section 22: ASSET REQUESTS MODULE</a></li>
                    <li><a href="#section-23">Section 23: USERS MODULE</a></li>
                    <li><a href="#section-24">Section 24: ONBOARDING MODULE</a></li>
                    <li><a href="#section-25">Section 25: SETTINGS MODULE</a></li>
                    <li><a href="#section-26">Section 26: ADDITIONAL EDGE CASES</a></li>
                    <li><a href="#section-27">Section 27: WHATSAPP APPROVAL INTEGRATION</a></li>
                    <li><a href="#section-28">Section 28: DATE FORMATTING UTILITIES</a></li>
                    <li><a href="#section-29">Section 29: QATAR TIMEZONE UTILITIES</a></li>
                    <li><a href="#section-30">Section 30: ASSET IMPORT/EXPORT</a></li>
                    <li><a href="#section-31">Section 31: ASSET MAINTENANCE</a></li>
                    <li><a href="#section-32">Section 32: BILLING CYCLE UTILITIES</a></li>
                    <li><a href="#section-33">Section 33: LEAVE REQUEST VALIDATION DETAILS</a></li>
                    <li><a href="#section-34">Section 34: LEAVE DEDUCTION CALCULATIONS</a></li>
                    <li><a href="#section-35">Section 35: CLIENT-SIDE CACHING</a></li>
                    <li><a href="#section-36">Section 36: ACTIVITY LOGGING SERVICE</a></li>
                    <li><a href="#section-37">Section 37: IMPERSONATION SECURITY</a></li>
                    <li><a href="#section-38">Section 38: APPROVAL DELEGATION DETAILS</a></li>
                    <li><a href="#section-39">Section 39: ORGANIZATION CONFIGURATION TABS</a></li>
                    <li><a href="#section-40">Section 40: CSV PARSING UTILITIES</a></li>
                    <li><a href="#section-41">Section 41: IMPORT UTILITIES</a></li>
                    <li><a href="#section-42">Section 42: SUBSCRIPTION RENEWAL DATE UTILITIES</a></li>
                    <li><a href="#section-43">Section 43: SECURITY HEADERS</a></li>
                    <li><a href="#section-44">Section 44: CLASSNAME MERGE UTILITY (cn)</a></li>
                    <li><a href="#section-45">Section 45: DEPRECIATION VALIDATION SCHEMAS</a></li>
                    <li><a href="#section-46">Section 46: APPROVAL ENGINE</a></li>
                    <li><a href="#section-47">Section 47: WPS FILE GENERATION (QATAR)</a></li>
                    <li><a href="#section-48">Section 48: FEATURE FLAGS &amp; TIER CONFIGURATION</a></li>
                    <li><a href="#section-49">Section 49: TENANT USAGE LIMITS</a></li>
                    <li><a href="#section-50">Section 50: API HANDLER WRAPPER</a></li>
                    <li><a href="#section-51">Section 51: HTTP ERROR UTILITIES</a></li>
                    <li><a href="#section-52">Section 52: OAUTH UTILITIES</a></li>
                    <li><a href="#section-53">Section 53: HR UTILITIES</a></li>
                    <li><a href="#section-54">Section 54: ASSET LIFECYCLE MANAGEMENT</a></li>
                    <li><a href="#section-55">Section 55: NOTIFICATION SERVICE</a></li>
                    <li><a href="#section-56">Section 56: SUBSCRIPTION LIFECYCLE</a></li>
                    <li><a href="#section-57">Section 57: PRISMA TENANT ISOLATION</a></li>
                    <li><a href="#section-58">Section 58: PAYROLL PREVIEW CALCULATIONS</a></li>
                    <li><a href="#section-59">Section 59: PAYROLL UTILITIES</a></li>
                    <li><a href="#section-60">Section 60: ASSET TAG GENERATION</a></li>
                    <li><a href="#section-61">Section 61: PURCHASE REQUEST UTILITIES</a></li>
                    <li><a href="#section-62">Section 62: PAYROLL VALIDATION SCHEMAS</a></li>
                    <li><a href="#section-63">Section 63: SUBDOMAIN &amp; TENANT ROUTING</a></li>
                    <li><a href="#section-64">Section 64: DEPRECIATION CONSTANTS (QATAR TAX)</a></li>
                    <li><a href="#section-65">Section 65: ASSET VALIDATION SCHEMAS</a></li>
                    <li><a href="#section-66">Section 66: SUPPLIER VALIDATION SCHEMAS</a></li>
                    <li><a href="#section-67">Section 67: CSRF PROTECTION DETAILS</a></li>
                    <li><a href="#section-68">Section 68: PASSWORD VALIDATION</a></li>
                    <li><a href="#section-69">Section 69: LEAVE REQUEST VALIDATION</a></li>
                    <li><a href="#section-70">Section 70: ASSET IMPORT</a></li>
                    <li><a href="#section-71">Section 71: HR PROFILE VALIDATION SCHEMAS</a></li>
                    <li><a href="#section-72">Section 72: SUBSCRIPTION VALIDATION SCHEMAS</a></li>
                    <li><a href="#section-73">Section 73: ASSET EXPORT</a></li>
                    <li><a href="#section-74">Section 74: USER VALIDATION SCHEMAS</a></li>
                    <li><a href="#section-75">Section 75: ASSET MAINTENANCE RECORDS</a></li>
                    <li><a href="#section-76">Section 76: CHAT / AI INTEGRATION</a></li>
                    <li><a href="#section-77">Section 77: BACKUP &amp; RESTORE PROCEDURES</a></li>
                    <li><a href="#section-78">Section 78: DATA EXPORT (GDPR COMPLIANCE)</a></li>
                    <li><a href="#section-79">Section 79: WHATSAPP NOTIFICATIONS</a></li>
                </ul>
            </div>
        </div>


        <div class="section" id="section-1" data-section="1">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 1</span>
                    <h3>AUTHENTICATION &amp; SESSION MANAGEMENT</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/security/account-lockout.test.ts tests/unit/security/password-validation.test.ts tests/unit/security/password-validation.test.ts tests/unit/security/password-validation.test.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>1.1 Login Functionality</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1" onchange="updateProgress()"><label for="c1">Email/password login with valid credentials</label></li>
                        <li><input type="checkbox" id="c2" onchange="updateProgress()"><label for="c2">Email/password login with invalid email format</label></li>
                        <li><input type="checkbox" id="c3" onchange="updateProgress()"><label for="c3">Email/password login with non-existent email</label></li>
                        <li><input type="checkbox" id="c4" onchange="updateProgress()"><label for="c4">Email/password login with wrong password</label></li>
                        <li><input type="checkbox" id="c5" onchange="updateProgress()"><label for="c5">Google OAuth login (new user - creates account)</label></li>
                        <li><input type="checkbox" id="c6" onchange="updateProgress()"><label for="c6">Google OAuth login (existing user - signs in)</label></li>
                        <li><input type="checkbox" id="c7" onchange="updateProgress()"><label for="c7">Microsoft/Azure AD OAuth login (new user)</label></li>
                        <li><input type="checkbox" id="c8" onchange="updateProgress()"><label for="c8">Microsoft/Azure AD OAuth login (existing user)</label></li>
                        <li><input type="checkbox" id="c9" onchange="updateProgress()"><label for="c9">Custom OAuth per organization (Google with org-specific client)</label></li>
                        <li><input type="checkbox" id="c10" onchange="updateProgress()"><label for="c10">Custom OAuth per organization (Azure with org-specific client)</label></li>
                        <li><input type="checkbox" id="c11" onchange="updateProgress()"><label for="c11">Login redirect to correct subdomain after auth</label></li>
                        <li><input type="checkbox" id="c12" onchange="updateProgress()"><label for="c12">Login preserves return URL after authentication</label></li>
                        <li><input type="checkbox" id="c13" onchange="updateProgress()"><label for="c13">Session expiration after timeout</label></li>
                        <li><input type="checkbox" id="c14" onchange="updateProgress()"><label for="c14">Session refresh mechanism</label></li>
                        <li><input type="checkbox" id="c15" onchange="updateProgress()"><label for="c15">Logout clears session completely</label></li>
                        <li><input type="checkbox" id="c16" onchange="updateProgress()"><label for="c16">Logout from all devices option</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Progressive Lockout Thresholds</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c17" onchange="updateProgress()"><label for="c17">5 failed attempts → 5 minute lockout</label></li>
                        <li><input type="checkbox" id="c18" onchange="updateProgress()"><label for="c18">10 failed attempts → 15 minute lockout</label></li>
                        <li><input type="checkbox" id="c19" onchange="updateProgress()"><label for="c19">15 failed attempts → 30 minute lockout</label></li>
                        <li><input type="checkbox" id="c20" onchange="updateProgress()"><label for="c20">20+ failed attempts → 60 minute lockout</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Lockout Behavior</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c21" onchange="updateProgress()"><label for="c21">Lockout clears automatically after duration expires</label></li>
                        <li><input type="checkbox" id="c22" onchange="updateProgress()"><label for="c22">Successful login resets failed attempt counter to 0</label></li>
                        <li><input type="checkbox" id="c23" onchange="updateProgress()"><label for="c23">Lockout applies per user/email (not per IP)</label></li>
                        <li><input type="checkbox" id="c24" onchange="updateProgress()"><label for="c24">Admin can manually unlock account via `unlockAccount()`</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Security - Information Disclosure Prevention</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c25" onchange="updateProgress()"><label for="c25">Lockout response does NOT reveal if email exists in system</label></li>
                        <li><input type="checkbox" id="c26" onchange="updateProgress()"><label for="c26">Non-existent email returns plausible &quot;not locked&quot; response</label></li>
                        <li><input type="checkbox" id="c27" onchange="updateProgress()"><label for="c27">`attemptsRemaining` returned to give user feedback</label></li>
                        <li><input type="checkbox" id="c28" onchange="updateProgress()"><label for="c28">Email normalized to lowercase before lookup</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c29" onchange="updateProgress()"><label for="c29">User with no `lockedUntil` date → not locked</label></li>
                        <li><input type="checkbox" id="c30" onchange="updateProgress()"><label for="c30">Non-existent user → not locked (no error revealed)</label></li>
                        <li><input type="checkbox" id="c31" onchange="updateProgress()"><label for="c31">`lockedUntil` in future → locked, returns `minutesRemaining`</label></li>
                        <li><input type="checkbox" id="c32" onchange="updateProgress()"><label for="c32">Expired lock (past date) → auto-cleared, returns not locked</label></li>
                        <li><input type="checkbox" id="c33" onchange="updateProgress()"><label for="c33">`getLockoutStatus()` throws &quot;User not found&quot; for non-existent user (admin API only)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>TeamMember Lockout (Organization Users)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c34" onchange="updateProgress()"><label for="c34">Separate lockout tracking for TeamMember entities</label></li>
                        <li><input type="checkbox" id="c35" onchange="updateProgress()"><label for="c35">Same progressive lockout durations apply</label></li>
                        <li><input type="checkbox" id="c36" onchange="updateProgress()"><label for="c36">`isTeamMemberLocked()` checks organization user lockout</label></li>
                        <li><input type="checkbox" id="c37" onchange="updateProgress()"><label for="c37">`recordTeamMemberFailedLogin()` increments attempts</label></li>
                        <li><input type="checkbox" id="c38" onchange="updateProgress()"><label for="c38">`clearTeamMemberFailedLogins()` resets on successful login</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>1.3 Password Validation (Default Users)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c39" onchange="updateProgress()"><label for="c39">**Minimum 8 characters required** - &quot;Password must be at least 8 characters&quot;</label></li>
                        <li><input type="checkbox" id="c40" onchange="updateProgress()"><label for="c40">7-character password rejected (e.g., &quot;Short1!&quot;)</label></li>
                        <li><input type="checkbox" id="c41" onchange="updateProgress()"><label for="c41">8-character password accepted (e.g., &quot;LongEnough1&quot;)</label></li>
                        <li><input type="checkbox" id="c42" onchange="updateProgress()"><label for="c42">**Uppercase letter required** - &quot;Password must contain at least one uppercase letter&quot;</label></li>
                        <li><input type="checkbox" id="c43" onchange="updateProgress()"><label for="c43">All lowercase rejected (e.g., &quot;lowercase123&quot;)</label></li>
                        <li><input type="checkbox" id="c44" onchange="updateProgress()"><label for="c44">**Lowercase letter required** - &quot;Password must contain at least one lowercase letter&quot;</label></li>
                        <li><input type="checkbox" id="c45" onchange="updateProgress()"><label for="c45">All uppercase rejected (e.g., &quot;UPPERCASE123&quot;)</label></li>
                        <li><input type="checkbox" id="c46" onchange="updateProgress()"><label for="c46">**Number required** - &quot;Password must contain at least one number&quot;</label></li>
                        <li><input type="checkbox" id="c47" onchange="updateProgress()"><label for="c47">No numbers rejected (e.g., &quot;NoNumbers!&quot;)</label></li>
                        <li><input type="checkbox" id="c48" onchange="updateProgress()"><label for="c48">Special character optional but increases score</label></li>
                        <li><input type="checkbox" id="c49" onchange="updateProgress()"><label for="c49">**Strength Classification:**</label></li>
                        <li><input type="checkbox" id="c50" onchange="updateProgress()"><label for="c50">**Common Password Detection (score = 0):**</label></li>
                        <li><input type="checkbox" id="c51" onchange="updateProgress()"><label for="c51">**Pattern Penalties:**</label></li>
                        <li><input type="checkbox" id="c52" onchange="updateProgress()"><label for="c52">**Length Bonuses:**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>1.4 Password Validation (Admin Users - Stricter)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c53" onchange="updateProgress()"><label for="c53">**Minimum 12 characters required for admins** (ADMIN_PASSWORD_REQUIREMENTS)</label></li>
                        <li><input type="checkbox" id="c54" onchange="updateProgress()"><label for="c54">11-character admin password rejected (e.g., &quot;ShortPass1!&quot;)</label></li>
                        <li><input type="checkbox" id="c55" onchange="updateProgress()"><label for="c55">12-character admin password accepted (e.g., &quot;AdminPass123!&quot;)</label></li>
                        <li><input type="checkbox" id="c56" onchange="updateProgress()"><label for="c56">Uppercase letter required</label></li>
                        <li><input type="checkbox" id="c57" onchange="updateProgress()"><label for="c57">Lowercase letter required</label></li>
                        <li><input type="checkbox" id="c58" onchange="updateProgress()"><label for="c58">Number required</label></li>
                        <li><input type="checkbox" id="c59" onchange="updateProgress()"><label for="c59">**Special character REQUIRED for admins** - &quot;Password must contain at least one special character (!@#$%^&amp;*...)&quot;</label></li>
                        <li><input type="checkbox" id="c60" onchange="updateProgress()"><label for="c60">Admin password without special char rejected (e.g., &quot;AdminPass123&quot;)</label></li>
                        <li><input type="checkbox" id="c61" onchange="updateProgress()"><label for="c61">Accepts: !@#$%^&amp;* and similar special characters</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>1.4a Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c62" onchange="updateProgress()"><label for="c62">Empty string: invalid with multiple errors</label></li>
                        <li><input type="checkbox" id="c63" onchange="updateProgress()"><label for="c63">Very long password (100+ chars): valid and scores &quot;strong&quot;</label></li>
                        <li><input type="checkbox" id="c64" onchange="updateProgress()"><label for="c64">**Unicode characters accepted** (e.g., &quot;Pässwörd123!&quot;)</label></li>
                        <li><input type="checkbox" id="c65" onchange="updateProgress()"><label for="c65">**Whitespace in passwords allowed** (e.g., &quot;Pass word 123!&quot;) - increases entropy</label></li>
                        <li><input type="checkbox" id="c66" onchange="updateProgress()"><label for="c66">Only special characters valid with custom requirements (e.g., &quot;!@#$%^&amp;*()&quot;)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>1.5 Signup Flow</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c67" onchange="updateProgress()"><label for="c67">Create account with valid email</label></li>
                        <li><input type="checkbox" id="c68" onchange="updateProgress()"><label for="c68">Email verification sent after signup</label></li>
                        <li><input type="checkbox" id="c69" onchange="updateProgress()"><label for="c69">Cannot login until email verified</label></li>
                        <li><input type="checkbox" id="c70" onchange="updateProgress()"><label for="c70">Resend verification email option</label></li>
                        <li><input type="checkbox" id="c71" onchange="updateProgress()"><label for="c71">Verification link expires after 24 hours</label></li>
                        <li><input type="checkbox" id="c72" onchange="updateProgress()"><label for="c72">Organization creation after account verification</label></li>
                        <li><input type="checkbox" id="c73" onchange="updateProgress()"><label for="c73">Organization name validation (2-100 chars)</label></li>
                        <li><input type="checkbox" id="c74" onchange="updateProgress()"><label for="c74">Organization slug auto-generation from name</label></li>
                        <li><input type="checkbox" id="c75" onchange="updateProgress()"><label for="c75">Organization slug uniqueness validation</label></li>
                        <li><input type="checkbox" id="c76" onchange="updateProgress()"><label for="c76">Organization slug format (alphanumeric + hyphens, 3-63 chars)</label></li>
                        <li><input type="checkbox" id="c77" onchange="updateProgress()"><label for="c77">Duplicate slug gets counter suffix (-1, -2, etc.)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>1.6 Invitation Flow</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c78" onchange="updateProgress()"><label for="c78">Invite team member with valid email</label></li>
                        <li><input type="checkbox" id="c79" onchange="updateProgress()"><label for="c79">Cannot invite email already in organization</label></li>
                        <li><input type="checkbox" id="c80" onchange="updateProgress()"><label for="c80">Cannot invite email already invited (pending)</label></li>
                        <li><input type="checkbox" id="c81" onchange="updateProgress()"><label for="c81">Invitation link sent via email</label></li>
                        <li><input type="checkbox" id="c82" onchange="updateProgress()"><label for="c82">Invitation expires after 7 days</label></li>
                        <li><input type="checkbox" id="c83" onchange="updateProgress()"><label for="c83">Accepting invitation joins organization</label></li>
                        <li><input type="checkbox" id="c84" onchange="updateProgress()"><label for="c84">Accepting invitation with SSO creates account</label></li>
                        <li><input type="checkbox" id="c85" onchange="updateProgress()"><label for="c85">Accepting invitation with credentials requires password setup</label></li>
                        <li><input type="checkbox" id="c86" onchange="updateProgress()"><label for="c86">Revoke invitation before acceptance</label></li>
                        <li><input type="checkbox" id="c87" onchange="updateProgress()"><label for="c87">Resend invitation email</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>1.7 Password Change</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c88" onchange="updateProgress()"><label for="c88">Current password required to change</label></li>
                        <li><input type="checkbox" id="c89" onchange="updateProgress()"><label for="c89">New password must meet strength requirements</label></li>
                        <li><input type="checkbox" id="c90" onchange="updateProgress()"><label for="c90">Confirmation must match new password</label></li>
                        <li><input type="checkbox" id="c91" onchange="updateProgress()"><label for="c91">Password change invalidates other sessions (optional)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>1.8 Rate Limiting</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c92" onchange="updateProgress()"><label for="c92">General API: 60 requests per 60 seconds</label></li>
                        <li><input type="checkbox" id="c93" onchange="updateProgress()"><label for="c93">Authentication: 5 attempts per 15 minutes</label></li>
                        <li><input type="checkbox" id="c94" onchange="updateProgress()"><label for="c94">Rate limit returns 429 status with Retry-After header</label></li>
                        <li><input type="checkbox" id="c95" onchange="updateProgress()"><label for="c95">Rate limit per user (authenticated)</label></li>
                        <li><input type="checkbox" id="c96" onchange="updateProgress()"><label for="c96">Rate limit per IP (unauthenticated)</label></li>
                        <li><input type="checkbox" id="c97" onchange="updateProgress()"><label for="c97">Rate limit per tenant + IP combination</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-2" data-section="2">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 2</span>
                    <h3>MULTI-TENANT ISOLATION</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/multi-tenant/subdomain.test.ts tests/unit/multi-tenant/limits.test.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>2.1 Data Isolation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c98" onchange="updateProgress()"><label for="c98">User can only see data from their organization</label></li>
                        <li><input type="checkbox" id="c99" onchange="updateProgress()"><label for="c99">Assets filtered by tenantId automatically</label></li>
                        <li><input type="checkbox" id="c100" onchange="updateProgress()"><label for="c100">Employees filtered by tenantId automatically</label></li>
                        <li><input type="checkbox" id="c101" onchange="updateProgress()"><label for="c101">Leave requests filtered by tenantId automatically</label></li>
                        <li><input type="checkbox" id="c102" onchange="updateProgress()"><label for="c102">Payroll runs filtered by tenantId automatically</label></li>
                        <li><input type="checkbox" id="c103" onchange="updateProgress()"><label for="c103">Subscriptions filtered by tenantId automatically</label></li>
                        <li><input type="checkbox" id="c104" onchange="updateProgress()"><label for="c104">Suppliers filtered by tenantId automatically</label></li>
                        <li><input type="checkbox" id="c105" onchange="updateProgress()"><label for="c105">Purchase requests filtered by tenantId automatically</label></li>
                        <li><input type="checkbox" id="c106" onchange="updateProgress()"><label for="c106">Notifications filtered by tenantId automatically</label></li>
                        <li><input type="checkbox" id="c107" onchange="updateProgress()"><label for="c107">Approval policies filtered by tenantId automatically</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>2.2 IDOR Prevention (Insecure Direct Object Reference)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c108" onchange="updateProgress()"><label for="c108">Cannot access asset by ID from another organization</label></li>
                        <li><input type="checkbox" id="c109" onchange="updateProgress()"><label for="c109">Cannot access employee by ID from another organization</label></li>
                        <li><input type="checkbox" id="c110" onchange="updateProgress()"><label for="c110">Cannot access leave request by ID from another organization</label></li>
                        <li><input type="checkbox" id="c111" onchange="updateProgress()"><label for="c111">Cannot access payroll run by ID from another organization</label></li>
                        <li><input type="checkbox" id="c112" onchange="updateProgress()"><label for="c112">Cannot access subscription by ID from another organization</label></li>
                        <li><input type="checkbox" id="c113" onchange="updateProgress()"><label for="c113">Cannot access supplier by ID from another organization</label></li>
                        <li><input type="checkbox" id="c114" onchange="updateProgress()"><label for="c114">Cannot access purchase request by ID from another organization</label></li>
                        <li><input type="checkbox" id="c115" onchange="updateProgress()"><label for="c115">Cannot update asset from another organization</label></li>
                        <li><input type="checkbox" id="c116" onchange="updateProgress()"><label for="c116">Cannot delete asset from another organization</label></li>
                        <li><input type="checkbox" id="c117" onchange="updateProgress()"><label for="c117">findUnique operations verify tenant ownership post-fetch</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>2.3 Subdomain Routing</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c118" onchange="updateProgress()"><label for="c118">Organization accessible via {slug}.durj.com</label></li>
                        <li><input type="checkbox" id="c119" onchange="updateProgress()"><label for="c119">Redirect to correct subdomain if user accesses wrong one</label></li>
                        <li><input type="checkbox" id="c120" onchange="updateProgress()"><label for="c120">Subdomain extracted from host header</label></li>
                        <li><input type="checkbox" id="c121" onchange="updateProgress()"><label for="c121">Invalid subdomain shows 404 or redirect</label></li>
                        <li><input type="checkbox" id="c122" onchange="updateProgress()"><label for="c122">Localhost subdomain handling in development</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>2.4 Cross-Tenant Headers</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c123" onchange="updateProgress()"><label for="c123">x-tenant-id header injected by middleware</label></li>
                        <li><input type="checkbox" id="c124" onchange="updateProgress()"><label for="c124">x-tenant-slug header injected by middleware</label></li>
                        <li><input type="checkbox" id="c125" onchange="updateProgress()"><label for="c125">x-user-id header injected by middleware</label></li>
                        <li><input type="checkbox" id="c126" onchange="updateProgress()"><label for="c126">Headers read by API handler for context</label></li>
                        <li><input type="checkbox" id="c127" onchange="updateProgress()"><label for="c127">Missing tenant context returns 401/403</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Reserved Subdomains</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c128" onchange="updateProgress()"><label for="c128">**Reserved system subdomains blocked:**</label></li>
                        <li><input type="checkbox" id="c129" onchange="updateProgress()"><label for="c129">`isReservedSubdomain()` returns true for all reserved words</label></li>
                        <li><input type="checkbox" id="c130" onchange="updateProgress()"><label for="c130">Reserved check is case-insensitive (&quot;WWW&quot; = &quot;www&quot;)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Slug Format Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c131" onchange="updateProgress()"><label for="c131">**Length:** 3-63 characters (minimum 3, maximum 63)</label></li>
                        <li><input type="checkbox" id="c132" onchange="updateProgress()"><label for="c132">**Characters allowed:** lowercase alphanumeric only [a-z0-9]</label></li>
                        <li><input type="checkbox" id="c133" onchange="updateProgress()"><label for="c133">**Hyphens:** allowed in middle, NOT at start/end</label></li>
                        <li><input type="checkbox" id="c134" onchange="updateProgress()"><label for="c134">Valid slugs accepted: &quot;acme-corp&quot;, &quot;company123&quot;, &quot;my-org&quot;</label></li>
                        <li class="critical"><input type="checkbox" id="c135" onchange="updateProgress()"><label for="c135">**CRITICAL:** Slugs &lt; 3 chars rejected (e.g., &quot;ab&quot;)</label></li>
                        <li class="critical"><input type="checkbox" id="c136" onchange="updateProgress()"><label for="c136">**CRITICAL:** Slugs &gt; 63 chars rejected</label></li>
                        <li class="critical"><input type="checkbox" id="c137" onchange="updateProgress()"><label for="c137">**CRITICAL:** Uppercase rejected - must be lowercase</label></li>
                        <li class="critical"><input type="checkbox" id="c138" onchange="updateProgress()"><label for="c138">**CRITICAL:** Special characters rejected (underscores, dots, etc.)</label></li>
                        <li><input type="checkbox" id="c139" onchange="updateProgress()"><label for="c139">Empty string rejected</label></li>
                        <li><input type="checkbox" id="c140" onchange="updateProgress()"><label for="c140">Null/undefined returns false (not valid)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Slug Generation from Organization Name</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c141" onchange="updateProgress()"><label for="c141">`generateSlug()` converts name to valid slug</label></li>
                        <li><input type="checkbox" id="c142" onchange="updateProgress()"><label for="c142">Converts to lowercase</label></li>
                        <li><input type="checkbox" id="c143" onchange="updateProgress()"><label for="c143">Replaces spaces with hyphens</label></li>
                        <li><input type="checkbox" id="c144" onchange="updateProgress()"><label for="c144">Removes non-alphanumeric characters (except hyphens)</label></li>
                        <li><input type="checkbox" id="c145" onchange="updateProgress()"><label for="c145">Trims leading/trailing hyphens</label></li>
                        <li><input type="checkbox" id="c146" onchange="updateProgress()"><label for="c146">Truncates to max 63 characters</label></li>
                        <li><input type="checkbox" id="c147" onchange="updateProgress()"><label for="c147">Example: &quot;Acme Corp!&quot; → &quot;acme-corp&quot;</label></li>
                        <li><input type="checkbox" id="c148" onchange="updateProgress()"><label for="c148">Example: &quot;My Company 123&quot; → &quot;my-company-123&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Unique Slug Generation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c149" onchange="updateProgress()"><label for="c149">`generateUniqueSlug()` ensures uniqueness in database</label></li>
                        <li><input type="checkbox" id="c150" onchange="updateProgress()"><label for="c150">If slug exists, appends counter suffix: &quot;-1&quot;, &quot;-2&quot;, etc.</label></li>
                        <li><input type="checkbox" id="c151" onchange="updateProgress()"><label for="c151">Example: &quot;acme-corp&quot; exists → generates &quot;acme-corp-1&quot;</label></li>
                        <li><input type="checkbox" id="c152" onchange="updateProgress()"><label for="c152">Checks against existing Organization slugs</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Security Validations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c153" onchange="updateProgress()"><label for="c153">**SQL injection prevention:** alphanumeric-only prevents injection</label></li>
                        <li><input type="checkbox" id="c154" onchange="updateProgress()"><label for="c154">**Path traversal prevention:** no slashes, dots, or special chars</label></li>
                        <li><input type="checkbox" id="c155" onchange="updateProgress()"><label for="c155">Reserved subdomain check blocks system routes hijacking</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Resource Types</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c156" onchange="updateProgress()"><label for="c156">Users resource limit checking</label></li>
                        <li><input type="checkbox" id="c157" onchange="updateProgress()"><label for="c157">Assets resource limit checking</label></li>
                        <li><input type="checkbox" id="c158" onchange="updateProgress()"><label for="c158">Subscriptions resource limit checking</label></li>
                        <li><input type="checkbox" id="c159" onchange="updateProgress()"><label for="c159">Suppliers resource limit checking</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Usage Counting Logic</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c160" onchange="updateProgress()"><label for="c160">**Users counted with:** `tenantId` AND `isDeleted: false`</label></li>
                        <li><input type="checkbox" id="c161" onchange="updateProgress()"><label for="c161">Deleted users NOT counted against limit</label></li>
                        <li><input type="checkbox" id="c162" onchange="updateProgress()"><label for="c162">Count query is tenant-scoped</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Limit Checking Response</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c163" onchange="updateProgress()"><label for="c163">Returns `{ current: number, limit: number, isAtLimit: boolean }`</label></li>
                        <li><input type="checkbox" id="c164" onchange="updateProgress()"><label for="c164">`isAtLimit` = true when current &gt;= limit</label></li>
                        <li><input type="checkbox" id="c165" onchange="updateProgress()"><label for="c165">Currently returns unlimited (-1) with `isAtLimit: false` (placeholder)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Tier-Based Limits</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c166" onchange="updateProgress()"><label for="c166">FREE tier: 5 users, 50 assets</label></li>
                        <li><input type="checkbox" id="c167" onchange="updateProgress()"><label for="c167">STARTER tier: 15 users, 200 assets</label></li>
                        <li><input type="checkbox" id="c168" onchange="updateProgress()"><label for="c168">PROFESSIONAL tier: 50 users, 1000 assets</label></li>
                        <li><input type="checkbox" id="c169" onchange="updateProgress()"><label for="c169">ENTERPRISE tier: unlimited (-1)</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-3" data-section="3">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 3</span>
                    <h3>ROLE-BASED ACCESS CONTROL (RBAC)</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/multi-tenant/feature-flags.test.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>3.1 Team Member Roles</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c170" onchange="updateProgress()"><label for="c170">ADMIN can access all admin routes</label></li>
                        <li><input type="checkbox" id="c171" onchange="updateProgress()"><label for="c171">ADMIN can manage users</label></li>
                        <li><input type="checkbox" id="c172" onchange="updateProgress()"><label for="c172">ADMIN can manage settings</label></li>
                        <li><input type="checkbox" id="c173" onchange="updateProgress()"><label for="c173">ADMIN can view all data</label></li>
                        <li><input type="checkbox" id="c174" onchange="updateProgress()"><label for="c174">MEMBER cannot access admin-only routes</label></li>
                        <li><input type="checkbox" id="c175" onchange="updateProgress()"><label for="c175">MEMBER can only see own profile</label></li>
                        <li><input type="checkbox" id="c176" onchange="updateProgress()"><label for="c176">MEMBER can only see own leave requests</label></li>
                        <li><input type="checkbox" id="c177" onchange="updateProgress()"><label for="c177">MEMBER can only see own payslips</label></li>
                        <li><input type="checkbox" id="c178" onchange="updateProgress()"><label for="c178">MEMBER can request assets (not assign)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>3.2 Organization Roles</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c179" onchange="updateProgress()"><label for="c179">OWNER can access billing settings</label></li>
                        <li><input type="checkbox" id="c180" onchange="updateProgress()"><label for="c180">OWNER can transfer ownership</label></li>
                        <li><input type="checkbox" id="c181" onchange="updateProgress()"><label for="c181">OWNER can delete organization</label></li>
                        <li><input type="checkbox" id="c182" onchange="updateProgress()"><label for="c182">ADMIN can manage team members</label></li>
                        <li><input type="checkbox" id="c183" onchange="updateProgress()"><label for="c183">ADMIN cannot access billing (OWNER only)</label></li>
                        <li><input type="checkbox" id="c184" onchange="updateProgress()"><label for="c184">MANAGER can approve requests</label></li>
                        <li><input type="checkbox" id="c185" onchange="updateProgress()"><label for="c185">MANAGER cannot manage users</label></li>
                        <li><input type="checkbox" id="c186" onchange="updateProgress()"><label for="c186">MEMBER has basic self-service access</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>3.3 Approval Roles</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c187" onchange="updateProgress()"><label for="c187">MANAGER can approve first-level requests</label></li>
                        <li><input type="checkbox" id="c188" onchange="updateProgress()"><label for="c188">HR_MANAGER can approve leave requests</label></li>
                        <li><input type="checkbox" id="c189" onchange="updateProgress()"><label for="c189">FINANCE_MANAGER can approve purchase requests</label></li>
                        <li><input type="checkbox" id="c190" onchange="updateProgress()"><label for="c190">DIRECTOR can approve high-value requests</label></li>
                        <li><input type="checkbox" id="c191" onchange="updateProgress()"><label for="c191">Non-approvers cannot access approval endpoints</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>3.4 Module Access Control</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c192" onchange="updateProgress()"><label for="c192">Disabled modules return 403 on access</label></li>
                        <li><input type="checkbox" id="c193" onchange="updateProgress()"><label for="c193">Disabled modules hide navigation items</label></li>
                        <li><input type="checkbox" id="c194" onchange="updateProgress()"><label for="c194">Module can be enabled by admin</label></li>
                        <li><input type="checkbox" id="c195" onchange="updateProgress()"><label for="c195">Module can be disabled by admin</label></li>
                        <li><input type="checkbox" id="c196" onchange="updateProgress()"><label for="c196">Core modules cannot be uninstalled</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Tier Configuration</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c197" onchange="updateProgress()"><label for="c197">**FREE tier:**</label></li>
                        <li><input type="checkbox" id="c198" onchange="updateProgress()"><label for="c198">**PLUS tier:**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Module Access Functions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c199" onchange="updateProgress()"><label for="c199">`hasModuleAccess()` always returns true (restrictions disabled)</label></li>
                        <li><input type="checkbox" id="c200" onchange="updateProgress()"><label for="c200">All tiers have same module access (no tier-based restrictions)</label></li>
                        <li><input type="checkbox" id="c201" onchange="updateProgress()"><label for="c201">Unknown modules return true (lenient behavior)</label></li>
                        <li><input type="checkbox" id="c202" onchange="updateProgress()"><label for="c202">Modules: assets, subscriptions, suppliers, leave, payroll, purchase-requests, documents</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Feature Access Functions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c203" onchange="updateProgress()"><label for="c203">`hasFeatureAccess()` always returns true (restrictions disabled)</label></li>
                        <li><input type="checkbox" id="c204" onchange="updateProgress()"><label for="c204">Features: basic_reports, advanced_reports, in_app_notifications, email_notifications, whatsapp_notifications, api_access, google_sso, microsoft_sso, custom_branding, subdomain</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Tier Configuration Lookup</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c205" onchange="updateProgress()"><label for="c205">`getTierConfig('FREE')` returns FREE config</label></li>
                        <li><input type="checkbox" id="c206" onchange="updateProgress()"><label for="c206">`getTierConfig('PLUS')` returns PLUS config</label></li>
                        <li><input type="checkbox" id="c207" onchange="updateProgress()"><label for="c207">`getTierConfig('UNKNOWN')` fallbacks to FREE config</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Upgrade Requirement Functions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c208" onchange="updateProgress()"><label for="c208">`needsUpgradeForModule()` always returns null (no upgrade needed)</label></li>
                        <li><input type="checkbox" id="c209" onchange="updateProgress()"><label for="c209">`needsUpgradeForFeature()` always returns null (no upgrade needed)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Module Metadata</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c210" onchange="updateProgress()"><label for="c210">Each module has: name, description, icon</label></li>
                        <li><input type="checkbox" id="c211" onchange="updateProgress()"><label for="c211">Assets: &quot;Asset Management&quot;, icon &quot;Package&quot;</label></li>
                        <li><input type="checkbox" id="c212" onchange="updateProgress()"><label for="c212">Subscriptions: &quot;Subscription Tracking&quot;, icon &quot;CreditCard&quot;</label></li>
                        <li><input type="checkbox" id="c213" onchange="updateProgress()"><label for="c213">Suppliers: &quot;Supplier Management&quot;, icon &quot;Truck&quot;</label></li>
                        <li><input type="checkbox" id="c214" onchange="updateProgress()"><label for="c214">Leave: &quot;Leave Management&quot;, icon &quot;Calendar&quot;</label></li>
                        <li><input type="checkbox" id="c215" onchange="updateProgress()"><label for="c215">Payroll: &quot;Payroll Processing&quot;, icon &quot;DollarSign&quot;</label></li>
                        <li><input type="checkbox" id="c216" onchange="updateProgress()"><label for="c216">Purchase Requests: &quot;Purchase Requests&quot;, icon &quot;ShoppingCart&quot;</label></li>
                        <li><input type="checkbox" id="c217" onchange="updateProgress()"><label for="c217">Documents: &quot;Company Documents&quot;, icon &quot;FileCheck&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Module Naming Convention</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c218" onchange="updateProgress()"><label for="c218">Multi-word modules use hyphens: &quot;purchase-requests&quot;</label></li>
                        <li><input type="checkbox" id="c219" onchange="updateProgress()"><label for="c219">No spaces in module names</label></li>
                        <li><input type="checkbox" id="c220" onchange="updateProgress()"><label for="c220">Pattern: `^[a-z-]+$`</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-4" data-section="4">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 4</span>
                    <h3>ASSETS MODULE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/validations/assets.test.ts tests/unit/lib/validations/assets.test.ts</code>, <code>tests/unit/assets/asset-lifecycle.test.ts tests/unit/assets/depreciation.test.ts tests/unit/assets/asset-lifecycle.test.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>4.1 Asset Creation Validations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c221" onchange="updateProgress()"><label for="c221">Asset tag auto-generates if empty (format: ORG-CAT-YYSEQ)</label></li>
                        <li><input type="checkbox" id="c222" onchange="updateProgress()"><label for="c222">Asset tag uniqueness validation within organization</label></li>
                        <li><input type="checkbox" id="c223" onchange="updateProgress()"><label for="c223">Type field required (min 1 char)</label></li>
                        <li><input type="checkbox" id="c224" onchange="updateProgress()"><label for="c224">Model field required (min 1 char)</label></li>
                        <li><input type="checkbox" id="c225" onchange="updateProgress()"><label for="c225">Category ID optional (transforms empty string to null)</label></li>
                        <li><input type="checkbox" id="c226" onchange="updateProgress()"><label for="c226">Brand optional</label></li>
                        <li><input type="checkbox" id="c227" onchange="updateProgress()"><label for="c227">Serial number optional</label></li>
                        <li><input type="checkbox" id="c228" onchange="updateProgress()"><label for="c228">Configuration optional (hardware specs)</label></li>
                        <li><input type="checkbox" id="c229" onchange="updateProgress()"><label for="c229">Purchase date optional (ISO date format)</label></li>
                        <li><input type="checkbox" id="c230" onchange="updateProgress()"><label for="c230">Warranty expiry optional (ISO date format)</label></li>
                        <li><input type="checkbox" id="c231" onchange="updateProgress()"><label for="c231">Price must be positive if provided (zero not allowed)</label></li>
                        <li><input type="checkbox" id="c232" onchange="updateProgress()"><label for="c232">Price cannot be negative</label></li>
                        <li><input type="checkbox" id="c233" onchange="updateProgress()"><label for="c233">Price currency optional (defaults to QAR)</label></li>
                        <li><input type="checkbox" id="c234" onchange="updateProgress()"><label for="c234">PriceQAR auto-calculated from price + currency + exchange rate</label></li>
                        <li><input type="checkbox" id="c235" onchange="updateProgress()"><label for="c235">Status defaults to IN_USE</label></li>
                        <li><input type="checkbox" id="c236" onchange="updateProgress()"><label for="c236">Location ID optional (transforms empty to null)</label></li>
                        <li><input type="checkbox" id="c237" onchange="updateProgress()"><label for="c237">isShared defaults to false</label></li>
                        <li><input type="checkbox" id="c238" onchange="updateProgress()"><label for="c238">Depreciation category ID optional (transforms empty to null)</label></li>
                        <li><input type="checkbox" id="c239" onchange="updateProgress()"><label for="c239">Empty strings transformed to null for optional fields</label></li>
                        <li><input type="checkbox" id="c240" onchange="updateProgress()"><label for="c240">Invoice number optional</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>4.2 Asset Status Rules</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c241" onchange="updateProgress()"><label for="c241">Status IN_USE requires assignedMemberId (unless isShared=true)</label></li>
                        <li><input type="checkbox" id="c242" onchange="updateProgress()"><label for="c242">Status IN_USE requires assignmentDate (unless isShared=true)</label></li>
                        <li><input type="checkbox" id="c243" onchange="updateProgress()"><label for="c243">Shared assets (isShared=true) can be IN_USE without assignee</label></li>
                        <li><input type="checkbox" id="c244" onchange="updateProgress()"><label for="c244">Status SPARE does not require assignment</label></li>
                        <li><input type="checkbox" id="c245" onchange="updateProgress()"><label for="c245">Status MAINTENANCE does not require assignment</label></li>
                        <li><input type="checkbox" id="c246" onchange="updateProgress()"><label for="c246">Status DISPOSED cannot be changed back</label></li>
                        <li class="critical"><input type="checkbox" id="c247" onchange="updateProgress()"><label for="c247">**CRITICAL:** Assignment date cannot be before purchase date</label></li>
                        <li><input type="checkbox" id="c248" onchange="updateProgress()"><label for="c248">Assignment date = purchase date is allowed (same day)</label></li>
                        <li><input type="checkbox" id="c249" onchange="updateProgress()"><label for="c249">Assignment date after purchase date is allowed</label></li>
                        <li><input type="checkbox" id="c250" onchange="updateProgress()"><label for="c250">Status change auto-unassigns if changing from IN_USE</label></li>
                        <li><input type="checkbox" id="c251" onchange="updateProgress()"><label for="c251">Status change records statusChangeDate</label></li>
                        <li><input type="checkbox" id="c252" onchange="updateProgress()"><label for="c252">Validation error message: &quot;Assignment date cannot be before purchase date&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>4.3 Asset Assignment Flow</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c253" onchange="updateProgress()"><label for="c253">Admin can assign asset to member</label></li>
                        <li><input type="checkbox" id="c254" onchange="updateProgress()"><label for="c254">Validate member exists in same organization</label></li>
                        <li><input type="checkbox" id="c255" onchange="updateProgress()"><label for="c255">Cannot assign to same member (already assigned)</label></li>
                        <li><input type="checkbox" id="c256" onchange="updateProgress()"><label for="c256">If member canLogin=true → creates PENDING_USER_ACCEPTANCE request</label></li>
                        <li><input type="checkbox" id="c257" onchange="updateProgress()"><label for="c257">If member canLogin=false → direct immediate assignment</label></li>
                        <li><input type="checkbox" id="c258" onchange="updateProgress()"><label for="c258">Reassignment auto-unassigns from previous member</label></li>
                        <li><input type="checkbox" id="c259" onchange="updateProgress()"><label for="c259">Cannot assign if pending request exists (409 conflict)</label></li>
                        <li><input type="checkbox" id="c260" onchange="updateProgress()"><label for="c260">Assignment creates AssetHistory entry</label></li>
                        <li><input type="checkbox" id="c261" onchange="updateProgress()"><label for="c261">Assignment sends email notification to assignee (awaited for serverless reliability)</label></li>
                        <li><input type="checkbox" id="c262" onchange="updateProgress()"><label for="c262">Assignment sends in-app notification to assignee</label></li>
                        <li><input type="checkbox" id="c262a" onchange="updateProgress()"><label for="c262a">Reassignment notifies previous assignee (awaited for serverless reliability)</label></li>
                        <li><input type="checkbox" id="c262b" onchange="updateProgress()"><label for="c262b">Default assignment reason: &quot;This asset has been assigned to you. Please review and accept...&quot;</label></li>
                        <li><input type="checkbox" id="c263" onchange="updateProgress()"><label for="c263">Email failure falls back to admin notification</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>4.4 Asset Unassignment (Check-out)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c264" onchange="updateProgress()"><label for="c264">Admin can unassign asset directly (no approval needed)</label></li>
                        <li><input type="checkbox" id="c265" onchange="updateProgress()"><label for="c265">Validates asset is currently assigned</label></li>
                        <li><input type="checkbox" id="c268" onchange="updateProgress()"><label for="c268">Unassignment sets status to SPARE</label></li>
                        <li><input type="checkbox" id="c269" onchange="updateProgress()"><label for="c269">Unassignment creates AssetHistory entry</label></li>
                        <li><input type="checkbox" id="c270" onchange="updateProgress()"><label for="c270">Unassignment sends notification to previous assignee (awaited for reliability)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>4.5 Asset Request Acceptance</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c271" onchange="updateProgress()"><label for="c271">User sees pending assignment requests</label></li>
                        <li><input type="checkbox" id="c272" onchange="updateProgress()"><label for="c272">User can accept assignment → status changes to ACCEPTED</label></li>
                        <li><input type="checkbox" id="c273" onchange="updateProgress()"><label for="c273">Accept updates asset assignedMemberId</label></li>
                        <li><input type="checkbox" id="c274" onchange="updateProgress()"><label for="c274">Accept updates asset status to IN_USE</label></li>
                        <li><input type="checkbox" id="c275" onchange="updateProgress()"><label for="c275">Accept creates AssetHistory with ASSIGNED action</label></li>
                        <li><input type="checkbox" id="c276" onchange="updateProgress()"><label for="c276">User can decline assignment → status changes to DECLINED</label></li>
                        <li><input type="checkbox" id="c277" onchange="updateProgress()"><label for="c277">Decline reverts asset status to SPARE</label></li>
                        <li><input type="checkbox" id="c278" onchange="updateProgress()"><label for="c278">Decline notifies admin</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>4.6 Asset Return Request</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c279" onchange="updateProgress()"><label for="c279">User can request return of assigned asset</label></li>
                        <li><input type="checkbox" id="c280" onchange="updateProgress()"><label for="c280">Return request creates PENDING_RETURN_APPROVAL</label></li>
                        <li><input type="checkbox" id="c281" onchange="updateProgress()"><label for="c281">Admin can approve return → unassigns asset</label></li>
                        <li><input type="checkbox" id="c282" onchange="updateProgress()"><label for="c282">Admin can reject return → asset remains assigned</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>4.7 Asset Update Validations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c283" onchange="updateProgress()"><label for="c283">Cannot change asset tag to existing tag (unique constraint)</label></li>
                        <li><input type="checkbox" id="c284" onchange="updateProgress()"><label for="c284">Currency change triggers QAR recalculation</label></li>
                        <li><input type="checkbox" id="c285" onchange="updateProgress()"><label for="c285">Pending assignment prevents status update to IN_USE</label></li>
                        <li><input type="checkbox" id="c286" onchange="updateProgress()"><label for="c286">Change detection skips tracked fields (creates history instead)</label></li>
                        <li><input type="checkbox" id="c287" onchange="updateProgress()"><label for="c287">Location change creates history entry</label></li>
                        <li><input type="checkbox" id="c288" onchange="updateProgress()"><label for="c288">All changes logged for audit</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>4.8 Asset Soft Delete &amp; Trash</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c289" onchange="updateProgress()"><label for="c289">Admin can delete asset (soft delete - sets deletedAt timestamp)</label></li>
                        <li class="critical"><input type="checkbox" id="c290" onchange="updateProgress()"><label for="c290">**Cannot delete assigned assets** - must unassign first (returns 400)</label></li>
                        <li><input type="checkbox" id="c291" onchange="updateProgress()"><label for="c291">Deleted asset moved to trash with 7-day recovery window</label></li>
                        <li><input type="checkbox" id="c292" onchange="updateProgress()"><label for="c292">deletedAt timestamp recorded on soft delete</label></li>
                        <li><input type="checkbox" id="c293" onchange="updateProgress()"><label for="c293">deletedById tracks which admin deleted the asset</label></li>
                        <li><input type="checkbox" id="c293a" onchange="updateProgress()"><label for="c293a">Soft-deleted assets excluded from normal asset list queries (deletedAt: null filter)</label></li>
                        <li><input type="checkbox" id="c293b" onchange="updateProgress()"><label for="c293b">Trash button shows on admin assets page only when deleted items exist</label></li>
                        <li><input type="checkbox" id="c293c" onchange="updateProgress()"><label for="c293c">Trash page lists all soft-deleted assets (/admin/assets/deleted)</label></li>
                        <li><input type="checkbox" id="c293d" onchange="updateProgress()"><label for="c293d">Trash page shows days remaining before auto-purge (7-day countdown)</label></li>
                        <li><input type="checkbox" id="c293e" onchange="updateProgress()"><label for="c293e">Urgent styling (red) when 2 or fewer days remaining</label></li>
                        <li><input type="checkbox" id="c293f" onchange="updateProgress()"><label for="c293f">Admin can restore asset from trash (POST /api/assets/[id]/restore)</label></li>
                        <li><input type="checkbox" id="c293g" onchange="updateProgress()"><label for="c293g">Restore clears deletedAt and deletedById fields</label></li>
                        <li><input type="checkbox" id="c293h" onchange="updateProgress()"><label for="c293h">Admin can permanently delete asset from trash (DELETE /api/assets/[id]/permanent-delete)</label></li>
                        <li><input type="checkbox" id="c293i" onchange="updateProgress()"><label for="c293i">Permanent delete only allowed on already soft-deleted assets</label></li>
                        <li><input type="checkbox" id="c293j" onchange="updateProgress()"><label for="c293j">Permanent delete cascades to AssetHistory</label></li>
                        <li><input type="checkbox" id="c293k" onchange="updateProgress()"><label for="c293k">Permanent delete cascades to maintenance records</label></li>
                        <li><input type="checkbox" id="c293l" onchange="updateProgress()"><label for="c293l">Disposed assets can be deleted (goes to trash like other assets)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>4.9 Asset Search &amp; Filtering</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c294" onchange="updateProgress()"><label for="c294">Search by asset tag</label></li>
                        <li><input type="checkbox" id="c295" onchange="updateProgress()"><label for="c295">Search by model</label></li>
                        <li><input type="checkbox" id="c296" onchange="updateProgress()"><label for="c296">Search by brand</label></li>
                        <li><input type="checkbox" id="c297" onchange="updateProgress()"><label for="c297">Search by serial number</label></li>
                        <li><input type="checkbox" id="c298" onchange="updateProgress()"><label for="c298">Search by type</label></li>
                        <li><input type="checkbox" id="c299" onchange="updateProgress()"><label for="c299">Search by supplier</label></li>
                        <li><input type="checkbox" id="c300" onchange="updateProgress()"><label for="c300">Search by configuration</label></li>
                        <li><input type="checkbox" id="c301" onchange="updateProgress()"><label for="c301">Filter by status (IN_USE, SPARE, MAINTENANCE, DISPOSED)</label></li>
                        <li><input type="checkbox" id="c302" onchange="updateProgress()"><label for="c302">Filter by type (exact match)</label></li>
                        <li><input type="checkbox" id="c303" onchange="updateProgress()"><label for="c303">Filter by category ID</label></li>
                        <li><input type="checkbox" id="c304" onchange="updateProgress()"><label for="c304">Filter by assigned member ID</label></li>
                        <li><input type="checkbox" id="c305" onchange="updateProgress()"><label for="c305">Filter by assignment: mine, others, unassigned, all</label></li>
                        <li><input type="checkbox" id="c306" onchange="updateProgress()"><label for="c306">Exclude status filter</label></li>
                        <li><input type="checkbox" id="c307" onchange="updateProgress()"><label for="c307">Pagination (page, pageSize max 100)</label></li>
                        <li><input type="checkbox" id="c308" onchange="updateProgress()"><label for="c308">Sort by: model, brand, type, category, purchaseDate, warrantyExpiry, priceQAR, createdAt, assetTag</label></li>
                        <li><input type="checkbox" id="c309" onchange="updateProgress()"><label for="c309">Order: asc, desc</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>assignDepreciationCategorySchema Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c310" onchange="updateProgress()"><label for="c310">**depreciationCategoryId required** (non-empty string)</label></li>
                        <li><input type="checkbox" id="c311" onchange="updateProgress()"><label for="c311">Empty depreciationCategoryId rejected</label></li>
                        <li><input type="checkbox" id="c312" onchange="updateProgress()"><label for="c312">**salvageValue:** defaults to 0, min 0</label></li>
                        <li><input type="checkbox" id="c313" onchange="updateProgress()"><label for="c313">Negative salvageValue rejected</label></li>
                        <li><input type="checkbox" id="c314" onchange="updateProgress()"><label for="c314">Zero salvageValue accepted</label></li>
                        <li><input type="checkbox" id="c315" onchange="updateProgress()"><label for="c315">**customUsefulLifeMonths:** min 1 (integer)</label></li>
                        <li><input type="checkbox" id="c316" onchange="updateProgress()"><label for="c316">customUsefulLifeMonths = 0 rejected</label></li>
                        <li><input type="checkbox" id="c317" onchange="updateProgress()"><label for="c317">Non-integer customUsefulLifeMonths rejected (e.g., 12.5)</label></li>
                        <li><input type="checkbox" id="c318" onchange="updateProgress()"><label for="c318">**depreciationStartDate:** ISO datetime format</label></li>
                        <li><input type="checkbox" id="c319" onchange="updateProgress()"><label for="c319">All optional fields accepted together</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>depreciationRecordsQuerySchema Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c320" onchange="updateProgress()"><label for="c320">Defaults: limit=50, offset=0, order=&quot;desc&quot;</label></li>
                        <li><input type="checkbox" id="c321" onchange="updateProgress()"><label for="c321">Limit parsed from string (e.g., &quot;25&quot; → 25)</label></li>
                        <li><input type="checkbox" id="c322" onchange="updateProgress()"><label for="c322">Offset parsed from string (e.g., &quot;100&quot; → 100)</label></li>
                        <li><input type="checkbox" id="c323" onchange="updateProgress()"><label for="c323">**Order:** only &quot;asc&quot; or &quot;desc&quot; accepted</label></li>
                        <li><input type="checkbox" id="c324" onchange="updateProgress()"><label for="c324">Invalid order rejected (e.g., &quot;random&quot;)</label></li>
                        <li><input type="checkbox" id="c325" onchange="updateProgress()"><label for="c325">**Limit range:** 1-200</label></li>
                        <li><input type="checkbox" id="c326" onchange="updateProgress()"><label for="c326">Limit &lt; 1 rejected</label></li>
                        <li><input type="checkbox" id="c327" onchange="updateProgress()"><label for="c327">Limit &gt; 200 rejected</label></li>
                        <li><input type="checkbox" id="c328" onchange="updateProgress()"><label for="c328">Negative offset rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Depreciation Calculation Logic</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c329" onchange="updateProgress()"><label for="c329">**Straight-line formula:** (purchasePrice - salvageValue) / usefulLifeYears</label></li>
                        <li><input type="checkbox" id="c330" onchange="updateProgress()"><label for="c330">Example: (10000 - 1000) / 5 = 1800 annual</label></li>
                        <li><input type="checkbox" id="c331" onchange="updateProgress()"><label for="c331">**Annual rate formula:** purchasePrice * (annualRate / 100)</label></li>
                        <li><input type="checkbox" id="c332" onchange="updateProgress()"><label for="c332">Example: 10000 * 0.25 = 2500 annual</label></li>
                        <li><input type="checkbox" id="c333" onchange="updateProgress()"><label for="c333">**Book value:** purchasePrice - totalDepreciation</label></li>
                        <li class="critical"><input type="checkbox" id="c334" onchange="updateProgress()"><label for="c334">**CRITICAL:** Book value never goes below salvage value</label></li>
                        <li><input type="checkbox" id="c335" onchange="updateProgress()"><label for="c335">Monthly depreciation = annual / 12</label></li>
                        <li><input type="checkbox" id="c336" onchange="updateProgress()"><label for="c336">Zero salvage value: full asset depreciation</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Monthly Processing</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c337" onchange="updateProgress()"><label for="c337">Pro-rata first month calculation</label></li>
                        <li><input type="checkbox" id="c338" onchange="updateProgress()"><label for="c338">Pro-rata disposal month calculation</label></li>
                        <li><input type="checkbox" id="c339" onchange="updateProgress()"><label for="c339">Accumulated depreciation updates monthly</label></li>
                        <li><input type="checkbox" id="c340" onchange="updateProgress()"><label for="c340">Net book value = Cost - Accumulated</label></li>
                        <li><input type="checkbox" id="c341" onchange="updateProgress()"><label for="c341">Fully depreciated flag when NBV reaches salvage</label></li>
                        <li><input type="checkbox" id="c342" onchange="updateProgress()"><label for="c342">View depreciation schedule (projected)</label></li>
                        <li><input type="checkbox" id="c343" onchange="updateProgress()"><label for="c343">View depreciation history records</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>4.11 Asset Disposal (IFRS Compliant)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c344" onchange="updateProgress()"><label for="c344">Admin can dispose asset</label></li>
                        <li><input type="checkbox" id="c345" onchange="updateProgress()"><label for="c345">Disposal date required (cannot be future)</label></li>
                        <li><input type="checkbox" id="c346" onchange="updateProgress()"><label for="c346">Disposal method required: SOLD, SCRAPPED, DONATED, WRITTEN_OFF, TRADED_IN</label></li>
                        <li><input type="checkbox" id="c347" onchange="updateProgress()"><label for="c347">Disposal proceeds required if SOLD (must be &gt; 0)</label></li>
                        <li><input type="checkbox" id="c348" onchange="updateProgress()"><label for="c348">Disposal proceeds optional for other methods</label></li>
                        <li><input type="checkbox" id="c349" onchange="updateProgress()"><label for="c349">Disposal calculates pro-rata depreciation up to date</label></li>
                        <li><input type="checkbox" id="c350" onchange="updateProgress()"><label for="c350">Disposal calculates gain/loss (Proceeds - NBV)</label></li>
                        <li><input type="checkbox" id="c351" onchange="updateProgress()"><label for="c351">Disposal updates asset status to DISPOSED</label></li>
                        <li><input type="checkbox" id="c352" onchange="updateProgress()"><label for="c352">Disposal notes optional (max 500 chars)</label></li>
                        <li><input type="checkbox" id="c353" onchange="updateProgress()"><label for="c353">Preview disposal without saving (read-only)</label></li>
                        <li><input type="checkbox" id="c354" onchange="updateProgress()"><label for="c354">Already disposed asset returns 400 error</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>4.12 Asset Categories</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c355" onchange="updateProgress()"><label for="c355">Create category with code (2 letters, uppercase)</label></li>
                        <li><input type="checkbox" id="c356" onchange="updateProgress()"><label for="c356">Create category with name (1-50 chars)</label></li>
                        <li><input type="checkbox" id="c357" onchange="updateProgress()"><label for="c357">Description optional (max 200 chars)</label></li>
                        <li><input type="checkbox" id="c358" onchange="updateProgress()"><label for="c358">Icon optional</label></li>
                        <li><input type="checkbox" id="c359" onchange="updateProgress()"><label for="c359">Code uniqueness within organization</label></li>
                        <li><input type="checkbox" id="c360" onchange="updateProgress()"><label for="c360">Update category code, name, description, icon</label></li>
                        <li><input type="checkbox" id="c361" onchange="updateProgress()"><label for="c361">Deactivate category (isActive = false)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Assignment Period Tracking</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c362" onchange="updateProgress()"><label for="c362">Track assignment periods per member</label></li>
                        <li><input type="checkbox" id="c363" onchange="updateProgress()"><label for="c363">Calculate days between start and end dates</label></li>
                        <li><input type="checkbox" id="c364" onchange="updateProgress()"><label for="c364">Same date = 0 days</label></li>
                        <li><input type="checkbox" id="c365" onchange="updateProgress()"><label for="c365">1 day difference = 1 day</label></li>
                        <li><input type="checkbox" id="c366" onchange="updateProgress()"><label for="c366">Handles leap years correctly (2024 = 366 days)</label></li>
                        <li><input type="checkbox" id="c367" onchange="updateProgress()"><label for="c367">Handles reverse order dates (absolute difference)</label></li>
                        <li><input type="checkbox" id="c368" onchange="updateProgress()"><label for="c368">Handles dates across year boundaries</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Overlapping Period Merging</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c369" onchange="updateProgress()"><label for="c369">Merge overlapping periods for same member</label></li>
                        <li><input type="checkbox" id="c370" onchange="updateProgress()"><label for="c370">Merge adjacent periods (end date = next start date)</label></li>
                        <li><input type="checkbox" id="c371" onchange="updateProgress()"><label for="c371">Do NOT merge non-overlapping periods</label></li>
                        <li><input type="checkbox" id="c372" onchange="updateProgress()"><label for="c372">Do NOT merge periods for different members</label></li>
                        <li><input type="checkbox" id="c373" onchange="updateProgress()"><label for="c373">Concatenate notes when merging periods</label></li>
                        <li><input type="checkbox" id="c374" onchange="updateProgress()"><label for="c374">Handle ongoing assignments (null endDate)</label></li>
                        <li><input type="checkbox" id="c375" onchange="updateProgress()"><label for="c375">Recalculate days after merging</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Asset Utilization Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c376" onchange="updateProgress()"><label for="c376">Use purchaseDate as birth date when available</label></li>
                        <li><input type="checkbox" id="c377" onchange="updateProgress()"><label for="c377">Fall back to createdAt when no purchaseDate</label></li>
                        <li><input type="checkbox" id="c378" onchange="updateProgress()"><label for="c378">Utilization % = (assigned days / owned days) * 100</label></li>
                        <li><input type="checkbox" id="c379" onchange="updateProgress()"><label for="c379">Cap utilization at 100% (handle data issues)</label></li>
                        <li><input type="checkbox" id="c380" onchange="updateProgress()"><label for="c380">Handle zero owned days (return 0%)</label></li>
                        <li><input type="checkbox" id="c381" onchange="updateProgress()"><label for="c381">Round utilization to 2 decimal places</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Member Asset History</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c382" onchange="updateProgress()"><label for="c382">Return currently assigned assets</label></li>
                        <li><input type="checkbox" id="c383" onchange="updateProgress()"><label for="c383">Include past assignments from history</label></li>
                        <li><input type="checkbox" id="c384" onchange="updateProgress()"><label for="c384">Combine current and past asset IDs (deduplicated)</label></li>
                        <li><input type="checkbox" id="c385" onchange="updateProgress()"><label for="c385">Sort currently assigned assets first</label></li>
                        <li><input type="checkbox" id="c386" onchange="updateProgress()"><label for="c386">Calculate total days for all member periods</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c387" onchange="updateProgress()"><label for="c387">Reassignment without explicit unassignment → auto-close previous</label></li>
                        <li><input type="checkbox" id="c388" onchange="updateProgress()"><label for="c388">Multiple reassignments to same member → separate periods</label></li>
                        <li><input type="checkbox" id="c389" onchange="updateProgress()"><label for="c389">Period starts before asset existed → adjust to asset birth date</label></li>
                        <li><input type="checkbox" id="c390" onchange="updateProgress()"><label for="c390">Set sort order for display</label></li>
                        <li><input type="checkbox" id="c391" onchange="updateProgress()"><label for="c391">Query includes/excludes inactive categories</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>4.13 Asset Import/Export</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c392" onchange="updateProgress()"><label for="c392">Export assets to CSV</label></li>
                        <li><input type="checkbox" id="c393" onchange="updateProgress()"><label for="c393">Export assets to Excel</label></li>
                        <li><input type="checkbox" id="c394" onchange="updateProgress()"><label for="c394">Import assets from CSV</label></li>
                        <li><input type="checkbox" id="c395" onchange="updateProgress()"><label for="c395">Import validates all required fields</label></li>
                        <li><input type="checkbox" id="c396" onchange="updateProgress()"><label for="c396">Import handles duplicate asset tags</label></li>
                        <li><input type="checkbox" id="c397" onchange="updateProgress()"><label for="c397">Import supports bulk operations</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>4.14 Asset History &amp; Maintenance</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c398" onchange="updateProgress()"><label for="c398">View asset change history</label></li>
                        <li><input type="checkbox" id="c399" onchange="updateProgress()"><label for="c399">View asset maintenance records</label></li>
                        <li><input type="checkbox" id="c400" onchange="updateProgress()"><label for="c400">Add maintenance record</label></li>
                        <li><input type="checkbox" id="c401" onchange="updateProgress()"><label for="c401">View asset utilization stats</label></li>
                        <li><input type="checkbox" id="c402" onchange="updateProgress()"><label for="c402">Clone asset configuration</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-5" data-section="5">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 5</span>
                    <h3>EMPLOYEES MODULE (HR)</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/validations/hr-profile.test.ts tests/unit/lib/validations/hr-profile.test.ts tests/unit/lib/validations/hr-profile.test.ts tests/unit/lib/validations/hr-profile.test.ts tests/unit/lib/hr-utils.test.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>5.1 Employee Creation (via User/Team Member)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c403" onchange="updateProgress()"><label for="c403">Name required (1-100 chars)</label></li>
                        <li><input type="checkbox" id="c404" onchange="updateProgress()"><label for="c404">Email optional but required if canLogin=true</label></li>
                        <li><input type="checkbox" id="c405" onchange="updateProgress()"><label for="c405">Email must be valid format</label></li>
                        <li><input type="checkbox" id="c406" onchange="updateProgress()"><label for="c406">Role required (ADMIN or EMPLOYEE)</label></li>
                        <li><input type="checkbox" id="c407" onchange="updateProgress()"><label for="c407">Password optional (8-100 chars)</label></li>
                        <li><input type="checkbox" id="c408" onchange="updateProgress()"><label for="c408">Employee ID optional (max 50 chars)</label></li>
                        <li><input type="checkbox" id="c409" onchange="updateProgress()"><label for="c409">Designation optional (max 100 chars)</label></li>
                        <li><input type="checkbox" id="c410" onchange="updateProgress()"><label for="c410">isEmployee defaults to true</label></li>
                        <li><input type="checkbox" id="c411" onchange="updateProgress()"><label for="c411">canLogin defaults to true</label></li>
                        <li><input type="checkbox" id="c412" onchange="updateProgress()"><label for="c412">isOnWps defaults to true (Qatar Wage Protection)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>5.2 HR Profile - Personal Information</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c413" onchange="updateProgress()"><label for="c413">Date of birth optional (ISO date)</label></li>
                        <li><input type="checkbox" id="c414" onchange="updateProgress()"><label for="c414">Gender optional</label></li>
                        <li><input type="checkbox" id="c414a" onchange="updateProgress()"><label for="c414a">Gender transformed to uppercase for Prisma enum (e.g., "Male" → "MALE")</label></li>
                        <li><input type="checkbox" id="c414b" onchange="updateProgress()"><label for="c414b">Gender accepts: MALE, FEMALE (case-insensitive input)</label></li>
                        <li><input type="checkbox" id="c415" onchange="updateProgress()"><label for="c415">Marital status optional</label></li>
                        <li><input type="checkbox" id="c415a" onchange="updateProgress()"><label for="c415a">Marital status transformed to uppercase for Prisma enum (e.g., "Single" → "SINGLE")</label></li>
                        <li><input type="checkbox" id="c415b" onchange="updateProgress()"><label for="c415b">Marital status accepts: SINGLE, MARRIED, DIVORCED, WIDOWED (case-insensitive input)</label></li>
                        <li><input type="checkbox" id="c416" onchange="updateProgress()"><label for="c416">Nationality optional</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>5.3 HR Profile - Contact Information (Qatar-Specific)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c417" onchange="updateProgress()"><label for="c417">**Qatar mobile:** exactly 8 digits (e.g., 33445566, 55667788)</label></li>
                        <li><input type="checkbox" id="c418" onchange="updateProgress()"><label for="c418">Qatar mobile with 7 digits rejected</label></li>
                        <li><input type="checkbox" id="c419" onchange="updateProgress()"><label for="c419">Qatar mobile with 9 digits rejected</label></li>
                        <li><input type="checkbox" id="c420" onchange="updateProgress()"><label for="c420">Qatar mobile with non-numeric rejected (e.g., +9743344)</label></li>
                        <li><input type="checkbox" id="c421" onchange="updateProgress()"><label for="c421">Other mobile code optional</label></li>
                        <li><input type="checkbox" id="c422" onchange="updateProgress()"><label for="c422">Other mobile number: 5-15 digits after stripping</label></li>
                        <li><input type="checkbox" id="c423" onchange="updateProgress()"><label for="c423">Other mobile &lt; 5 digits rejected</label></li>
                        <li><input type="checkbox" id="c424" onchange="updateProgress()"><label for="c424">Personal email: valid email format</label></li>
                        <li><input type="checkbox" id="c425" onchange="updateProgress()"><label for="c425">Invalid email rejected (e.g., &quot;invalid-email&quot;)</label></li>
                        <li><input type="checkbox" id="c426" onchange="updateProgress()"><label for="c426">Qatar zone, street, building, unit: optional address fields</label></li>
                        <li><input type="checkbox" id="c427" onchange="updateProgress()"><label for="c427">Home country address optional</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>5.4 HR Profile - Emergency Contacts</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c428" onchange="updateProgress()"><label for="c428">Local emergency name optional</label></li>
                        <li><input type="checkbox" id="c429" onchange="updateProgress()"><label for="c429">Local emergency relation optional</label></li>
                        <li><input type="checkbox" id="c430" onchange="updateProgress()"><label for="c430">Local emergency phone code optional</label></li>
                        <li><input type="checkbox" id="c431" onchange="updateProgress()"><label for="c431">Local emergency phone: 5-15 digits</label></li>
                        <li><input type="checkbox" id="c432" onchange="updateProgress()"><label for="c432">Local emergency phone &lt; 5 digits rejected</label></li>
                        <li><input type="checkbox" id="c433" onchange="updateProgress()"><label for="c433">Home emergency contact: same fields as local</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>5.5 HR Profile - Identification (Qatar Legal)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c434" onchange="updateProgress()"><label for="c434">**QID number:** exactly 11 digits (e.g., 28412345678)</label></li>
                        <li><input type="checkbox" id="c435" onchange="updateProgress()"><label for="c435">QID with 10 digits rejected</label></li>
                        <li><input type="checkbox" id="c436" onchange="updateProgress()"><label for="c436">QID with 12 digits rejected</label></li>
                        <li><input type="checkbox" id="c437" onchange="updateProgress()"><label for="c437">QID with non-numeric rejected (e.g., 1234567890A)</label></li>
                        <li><input type="checkbox" id="c438" onchange="updateProgress()"><label for="c438">QID with hyphens rejected (e.g., 12345-67890)</label></li>
                        <li><input type="checkbox" id="c439" onchange="updateProgress()"><label for="c439">QID expiry optional (ISO date)</label></li>
                        <li><input type="checkbox" id="c440" onchange="updateProgress()"><label for="c440">**Passport number:** 5-20 alphanumeric uppercase</label></li>
                        <li><input type="checkbox" id="c441" onchange="updateProgress()"><label for="c441">Passport &lt; 5 chars rejected (e.g., &quot;AB&quot;)</label></li>
                        <li><input type="checkbox" id="c442" onchange="updateProgress()"><label for="c442">Passport &gt; 20 chars rejected</label></li>
                        <li><input type="checkbox" id="c443" onchange="updateProgress()"><label for="c443">Passport with special chars rejected (e.g., &quot;AB-123456&quot;)</label></li>
                        <li><input type="checkbox" id="c444" onchange="updateProgress()"><label for="c444">Passport with spaces rejected</label></li>
                        <li><input type="checkbox" id="c445" onchange="updateProgress()"><label for="c445">Passport case-insensitive (lowercase accepted, converted to upper)</label></li>
                        <li><input type="checkbox" id="c446" onchange="updateProgress()"><label for="c446">Passport expiry optional (ISO date)</label></li>
                        <li><input type="checkbox" id="c447" onchange="updateProgress()"><label for="c447">Health card expiry optional (ISO date)</label></li>
                        <li><input type="checkbox" id="c448" onchange="updateProgress()"><label for="c448">Sponsorship type optional</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>5.6 HR Profile - Bank &amp; Payroll</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c449" onchange="updateProgress()"><label for="c449">Bank name optional</label></li>
                        <li><input type="checkbox" id="c450" onchange="updateProgress()"><label for="c450">**IBAN:** format ^[A-Z]{2}\d{2}[A-Z0-9]{11,30}$</label></li>
                        <li><input type="checkbox" id="c451" onchange="updateProgress()"><label for="c451">Valid IBANs: QA12QNBA000000000012345678901, DE89370400440532013000</label></li>
                        <li><input type="checkbox" id="c452" onchange="updateProgress()"><label for="c452">IBAN with spaces accepted (spaces stripped internally)</label></li>
                        <li><input type="checkbox" id="c453" onchange="updateProgress()"><label for="c453">IBAN case-insensitive (lowercase accepted)</label></li>
                        <li><input type="checkbox" id="c454" onchange="updateProgress()"><label for="c454">Invalid IBAN rejected (e.g., &quot;INVALID&quot;, &quot;12345678&quot;)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>5.7 HR Profile - Education</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c455" onchange="updateProgress()"><label for="c455">Highest qualification optional</label></li>
                        <li><input type="checkbox" id="c456" onchange="updateProgress()"><label for="c456">Specialization optional</label></li>
                        <li><input type="checkbox" id="c457" onchange="updateProgress()"><label for="c457">Institution name optional</label></li>
                        <li><input type="checkbox" id="c458" onchange="updateProgress()"><label for="c458">**Graduation year:** 1950 to current year (integer)</label></li>
                        <li><input type="checkbox" id="c459" onchange="updateProgress()"><label for="c459">Graduation year before 1950 rejected</label></li>
                        <li><input type="checkbox" id="c460" onchange="updateProgress()"><label for="c460">Graduation year in future rejected</label></li>
                        <li><input type="checkbox" id="c461" onchange="updateProgress()"><label for="c461">Current year as graduation year accepted</label></li>
                        <li><input type="checkbox" id="c462" onchange="updateProgress()"><label for="c462">Graduation year coerced from string (e.g., &quot;2015&quot; → 2015)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>5.8 HR Profile - Documents (URLs)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c463" onchange="updateProgress()"><label for="c463">QID URL optional</label></li>
                        <li><input type="checkbox" id="c464" onchange="updateProgress()"><label for="c464">Passport copy URL optional</label></li>
                        <li><input type="checkbox" id="c465" onchange="updateProgress()"><label for="c465">Photo URL optional</label></li>
                        <li><input type="checkbox" id="c466" onchange="updateProgress()"><label for="c466">Contract copy URL optional</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>5.9 HR Profile - Additional</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c467" onchange="updateProgress()"><label for="c467">Has driving license: boolean default false</label></li>
                        <li><input type="checkbox" id="c468" onchange="updateProgress()"><label for="c468">License expiry optional (ISO date)</label></li>
                        <li><input type="checkbox" id="c469" onchange="updateProgress()"><label for="c469">Languages known: JSON array as string</label></li>
                        <li><input type="checkbox" id="c470" onchange="updateProgress()"><label for="c470">Skills/certifications: JSON array as string</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>5.10 HR Profile - Onboarding</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c471" onchange="updateProgress()"><label for="c471">Onboarding step: 0-10 integer</label></li>
                        <li><input type="checkbox" id="c472" onchange="updateProgress()"><label for="c472">Onboarding complete: boolean</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>5.11 Employee Listing &amp; Filtering</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c473" onchange="updateProgress()"><label for="c473">Search by name</label></li>
                        <li><input type="checkbox" id="c474" onchange="updateProgress()"><label for="c474">Search by email</label></li>
                        <li><input type="checkbox" id="c475" onchange="updateProgress()"><label for="c475">Search by employee code</label></li>
                        <li><input type="checkbox" id="c476" onchange="updateProgress()"><label for="c476">Search by QID number</label></li>
                        <li><input type="checkbox" id="c477" onchange="updateProgress()"><label for="c477">Filter by sponsorship type</label></li>
                        <li><input type="checkbox" id="c478" onchange="updateProgress()"><label for="c478">Filter by profile status (complete/incomplete)</label></li>
                        <li><input type="checkbox" id="c479" onchange="updateProgress()"><label for="c479">Filter by expiry status (expired/expiring/valid)</label></li>
                        <li><input type="checkbox" id="c480" onchange="updateProgress()"><label for="c480">Document expiry tracking: QID, Passport, Health Card</label></li>
                        <li><input type="checkbox" id="c481" onchange="updateProgress()"><label for="c481">Profile completion percentage calculation</label></li>
                        <li><input type="checkbox" id="c482" onchange="updateProgress()"><label for="c482">Expiry alerts: expired, expiring (30 days)</label></li>
                        <li><input type="checkbox" id="c483" onchange="updateProgress()"><label for="c483">Asset count per employee</label></li>
                        <li><input type="checkbox" id="c484" onchange="updateProgress()"><label for="c484">Stats: total, incomplete, expiring, expired</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>5.12 Employee Profile by Employee</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c485" onchange="updateProgress()"><label for="c485">Employees can update own HR profile</label></li>
                        <li><input type="checkbox" id="c486" onchange="updateProgress()"><label for="c486">Employees CANNOT change their own employeeId</label></li>
                        <li><input type="checkbox" id="c487" onchange="updateProgress()"><label for="c487">Employees can view own profile completion status</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>5.13 Nationality-Based Country Code Auto-Population</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c487a" onchange="updateProgress()"><label for="c487a">When nationality is selected, "Other Mobile" country code auto-updates to match</label></li>
                        <li><input type="checkbox" id="c487b" onchange="updateProgress()"><label for="c487b">When nationality is selected, "Home Emergency Phone" country code auto-updates to match</label></li>
                        <li><input type="checkbox" id="c487c" onchange="updateProgress()"><label for="c487c">Auto-update only happens if current code is default (+91) or empty</label></li>
                        <li><input type="checkbox" id="c487d" onchange="updateProgress()"><label for="c487d">User-selected country codes are NOT overwritten by nationality change</label></li>
                        <li><input type="checkbox" id="c487e" onchange="updateProgress()"><label for="c487e">Pakistan nationality → +92 country code</label></li>
                        <li><input type="checkbox" id="c487f" onchange="updateProgress()"><label for="c487f">India nationality → +91 country code</label></li>
                        <li><input type="checkbox" id="c487g" onchange="updateProgress()"><label for="c487g">Philippines nationality → +63 country code</label></li>
                        <li><input type="checkbox" id="c487h" onchange="updateProgress()"><label for="c487h">Bangladesh nationality → +880 country code</label></li>
                        <li><input type="checkbox" id="c487i" onchange="updateProgress()"><label for="c487i">Nepal nationality → +977 country code</label></li>
                        <li><input type="checkbox" id="c487j" onchange="updateProgress()"><label for="c487j">Sri Lanka nationality → +94 country code</label></li>
                        <li><input type="checkbox" id="c487k" onchange="updateProgress()"><label for="c487k">United Kingdom nationality → +44 country code (handles "UK" mapping)</label></li>
                        <li><input type="checkbox" id="c487l" onchange="updateProgress()"><label for="c487l">United States nationality → +1 country code (handles "USA/Canada" mapping)</label></li>
                        <li><input type="checkbox" id="c487m" onchange="updateProgress()"><label for="c487m">United Arab Emirates nationality → +971 country code (handles "UAE" mapping)</label></li>
                        <li><input type="checkbox" id="c487n" onchange="updateProgress()"><label for="c487n">Works in Employee Onboarding wizard (EmployeeOnboardingClient.tsx)</label></li>
                        <li><input type="checkbox" id="c487o" onchange="updateProgress()"><label for="c487o">Works in Admin HR Profile form (hr-profile-form.tsx)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Expiry Status Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c488" onchange="updateProgress()"><label for="c488">**EXPIRY_WARNING_DAYS:** 30 days threshold</label></li>
                        <li><input type="checkbox" id="c489" onchange="updateProgress()"><label for="c489">Null/undefined date → null status</label></li>
                        <li><input type="checkbox" id="c490" onchange="updateProgress()"><label for="c490">Past date → &quot;expired&quot;</label></li>
                        <li><input type="checkbox" id="c491" onchange="updateProgress()"><label for="c491">Within 30 days → &quot;expiring&quot;</label></li>
                        <li><input type="checkbox" id="c492" onchange="updateProgress()"><label for="c492">Exactly 30 days from now → &quot;expiring&quot;</label></li>
                        <li><input type="checkbox" id="c493" onchange="updateProgress()"><label for="c493">More than 30 days away → &quot;valid&quot;</label></li>
                        <li><input type="checkbox" id="c494" onchange="updateProgress()"><label for="c494">Handles ISO date strings</label></li>
                        <li><input type="checkbox" id="c495" onchange="updateProgress()"><label for="c495">Custom warning days parameter supported</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Overall Expiry Status</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c496" onchange="updateProgress()"><label for="c496">Empty array → null</label></li>
                        <li><input type="checkbox" id="c497" onchange="updateProgress()"><label for="c497">Array of nulls → null</label></li>
                        <li><input type="checkbox" id="c498" onchange="updateProgress()"><label for="c498">Any &quot;expired&quot; → returns &quot;expired&quot; (worst case)</label></li>
                        <li><input type="checkbox" id="c499" onchange="updateProgress()"><label for="c499">Worst is &quot;expiring&quot; → returns &quot;expiring&quot;</label></li>
                        <li><input type="checkbox" id="c500" onchange="updateProgress()"><label for="c500">All &quot;valid&quot; → returns &quot;valid&quot;</label></li>
                        <li><input type="checkbox" id="c501" onchange="updateProgress()"><label for="c501">Ignores null values in array</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Profile Completion Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c502" onchange="updateProgress()"><label for="c502">**PROFILE_COMPLETION_THRESHOLD:** 80%</label></li>
                        <li><input type="checkbox" id="c503" onchange="updateProgress()"><label for="c503">Null/undefined profile → 0%</label></li>
                        <li><input type="checkbox" id="c504" onchange="updateProgress()"><label for="c504">Empty profile → 0%</label></li>
                        <li><input type="checkbox" id="c505" onchange="updateProgress()"><label for="c505">**Empty strings NOT counted as filled**</label></li>
                        <li><input type="checkbox" id="c506" onchange="updateProgress()"><label for="c506">Profile &gt;= 80% → isComplete: true</label></li>
                        <li><input type="checkbox" id="c507" onchange="updateProgress()"><label for="c507">Returns: percentage, filledFields, totalFields, missingFields, isComplete</label></li>
                        <li><input type="checkbox" id="c508" onchange="updateProgress()"><label for="c508">Custom required fields parameter supported</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Tenure Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c509" onchange="updateProgress()"><label for="c509">Null/undefined → &quot;-&quot;</label></li>
                        <li><input type="checkbox" id="c510" onchange="updateProgress()"><label for="c510">Today → &quot;Today&quot;</label></li>
                        <li><input type="checkbox" id="c511" onchange="updateProgress()"><label for="c511">Future date → &quot;-&quot;</label></li>
                        <li><input type="checkbox" id="c512" onchange="updateProgress()"><label for="c512">Recent (&lt; 1 month) → &quot;Xd&quot;</label></li>
                        <li><input type="checkbox" id="c513" onchange="updateProgress()"><label for="c513">Few months → &quot;Xm&quot; or &quot;Xm Yd&quot;</label></li>
                        <li><input type="checkbox" id="c514" onchange="updateProgress()"><label for="c514">Years → &quot;Xy Xm&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Data Masking (QID, IBAN)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c515" onchange="updateProgress()"><label for="c515">Null/undefined/empty → &quot;-&quot;</label></li>
                        <li><input type="checkbox" id="c516" onchange="updateProgress()"><label for="c516">Shows last 4 characters by default</label></li>
                        <li><input type="checkbox" id="c517" onchange="updateProgress()"><label for="c517">Short strings (&lt; 4 chars) → fully masked</label></li>
                        <li><input type="checkbox" id="c518" onchange="updateProgress()"><label for="c518">Custom showLast parameter</label></li>
                        <li><input type="checkbox" id="c519" onchange="updateProgress()"><label for="c519">Custom mask character</label></li>
                        <li><input type="checkbox" id="c520" onchange="updateProgress()"><label for="c520">Works with IBAN (e.g., &quot;QA58DOHA...CDEF&quot; → &quot;****CDEF&quot;)</label></li>
                        <li><input type="checkbox" id="c521" onchange="updateProgress()"><label for="c521">Works with QID (e.g., &quot;28412345678&quot; → &quot;*******5678&quot;)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>JSON Array Parsing</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c522" onchange="updateProgress()"><label for="c522">Null/undefined/empty string → []</label></li>
                        <li><input type="checkbox" id="c523" onchange="updateProgress()"><label for="c523">Array input → returns as-is</label></li>
                        <li><input type="checkbox" id="c524" onchange="updateProgress()"><label for="c524">Valid JSON array string → parsed array</label></li>
                        <li><input type="checkbox" id="c525" onchange="updateProgress()"><label for="c525">Invalid JSON → []</label></li>
                        <li><input type="checkbox" id="c526" onchange="updateProgress()"><label for="c526">JSON object (not array) → []</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Date Formatting</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c527" onchange="updateProgress()"><label for="c527">Null/undefined → &quot;&quot;</label></li>
                        <li><input type="checkbox" id="c528" onchange="updateProgress()"><label for="c528">Date object → &quot;YYYY-MM-DD&quot;</label></li>
                        <li><input type="checkbox" id="c529" onchange="updateProgress()"><label for="c529">ISO date string → &quot;YYYY-MM-DD&quot;</label></li>
                        <li><input type="checkbox" id="c530" onchange="updateProgress()"><label for="c530">Invalid date → &quot;&quot;</label></li>
                        <li><input type="checkbox" id="c531" onchange="updateProgress()"><label for="c531">Handles single digit months/days (zero-padded)</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-6" data-section="6">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 6</span>
                    <h3>LEAVE MANAGEMENT MODULE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/validations/leave.test.ts tests/unit/lib/validations/leave.test.ts</code>, <code>tests/unit/leave/leave-request-validation.test.ts tests/unit/leave/leave-request-validation.test.ts tests/unit/leave/leave-request-validation.test.ts tests/unit/leave/leave-utils.test.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>6.1 Leave Type Creation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c532" onchange="updateProgress()"><label for="c532">Name required (1-100 chars)</label></li>
                        <li><input type="checkbox" id="c533" onchange="updateProgress()"><label for="c533">Name empty string rejected</label></li>
                        <li><input type="checkbox" id="c534" onchange="updateProgress()"><label for="c534">Name exceeding 100 chars rejected</label></li>
                        <li><input type="checkbox" id="c535" onchange="updateProgress()"><label for="c535">Description optional (max 500 chars)</label></li>
                        <li><input type="checkbox" id="c536" onchange="updateProgress()"><label for="c536">Description exceeding 500 chars rejected</label></li>
                        <li><input type="checkbox" id="c537" onchange="updateProgress()"><label for="c537">Color: hex format #RRGGBB (default #3B82F6)</label></li>
                        <li><input type="checkbox" id="c538" onchange="updateProgress()"><label for="c538">Invalid color format rejected (e.g., &quot;invalid-color&quot;)</label></li>
                        <li><input type="checkbox" id="c539" onchange="updateProgress()"><label for="c539">Valid hex colors: #3B82F6, #FFFFFF, #000000, #abcdef</label></li>
                        <li><input type="checkbox" id="c540" onchange="updateProgress()"><label for="c540">Default days: integer min 0 (default 0)</label></li>
                        <li><input type="checkbox" id="c541" onchange="updateProgress()"><label for="c541">Negative default days rejected</label></li>
                        <li><input type="checkbox" id="c542" onchange="updateProgress()"><label for="c542">Requires approval: boolean (default true)</label></li>
                        <li><input type="checkbox" id="c543" onchange="updateProgress()"><label for="c543">Requires document: boolean (default false)</label></li>
                        <li><input type="checkbox" id="c544" onchange="updateProgress()"><label for="c544">Is paid: boolean (default true)</label></li>
                        <li><input type="checkbox" id="c545" onchange="updateProgress()"><label for="c545">Is active: boolean (default true)</label></li>
                        <li><input type="checkbox" id="c546" onchange="updateProgress()"><label for="c546">Max consecutive days: integer min 1 (optional)</label></li>
                        <li><input type="checkbox" id="c547" onchange="updateProgress()"><label for="c547">Max consecutive days = 0 rejected</label></li>
                        <li><input type="checkbox" id="c548" onchange="updateProgress()"><label for="c548">Min notice days: integer min 0 (default 0)</label></li>
                        <li><input type="checkbox" id="c549" onchange="updateProgress()"><label for="c549">Allow carry forward: boolean (default false)</label></li>
                        <li><input type="checkbox" id="c550" onchange="updateProgress()"><label for="c550">**RULE:** If allowCarryForward=true, maxCarryForwardDays required</label></li>
                        <li><input type="checkbox" id="c551" onchange="updateProgress()"><label for="c551">Null maxCarryForwardDays allowed when allowCarryForward=false</label></li>
                        <li><input type="checkbox" id="c552" onchange="updateProgress()"><label for="c552">Minimum service months: integer min 0 (default 0)</label></li>
                        <li><input type="checkbox" id="c553" onchange="updateProgress()"><label for="c553">Is once in employment: boolean (default false) - e.g., Hajj</label></li>
                        <li><input type="checkbox" id="c554" onchange="updateProgress()"><label for="c554">Service based entitlement: JSON map of months → days</label></li>
                        <li><input type="checkbox" id="c555" onchange="updateProgress()"><label for="c555">Pay tiers: array for progressive leave like sick</label></li>
                        <li><input type="checkbox" id="c556" onchange="updateProgress()"><label for="c556">Category: STANDARD, MEDICAL, PARENTAL, RELIGIOUS</label></li>
                        <li><input type="checkbox" id="c557" onchange="updateProgress()"><label for="c557">Gender restriction: MALE or FEMALE (optional)</label></li>
                        <li><input type="checkbox" id="c558" onchange="updateProgress()"><label for="c558">Accrual based: boolean (default false)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>6.2 Qatar Labor Law Leave Types (Default Seeded)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c559" onchange="updateProgress()"><label for="c559">Annual Leave: 21 days (&lt;5yr) / 28 days (5+yr), accrual-based</label></li>
                        <li><input type="checkbox" id="c560" onchange="updateProgress()"><label for="c560">Sick Leave: 14 days full-pay, requires certificate, 3-month minimum service</label></li>
                        <li><input type="checkbox" id="c561" onchange="updateProgress()"><label for="c561">Maternity Leave: 50 days, female-only, paid if 1+ year service</label></li>
                        <li><input type="checkbox" id="c562" onchange="updateProgress()"><label for="c562">Paternity Leave: 3 days, male-only</label></li>
                        <li><input type="checkbox" id="c563" onchange="updateProgress()"><label for="c563">Hajj Leave: 20 days, unpaid, once per employment, 12-month minimum</label></li>
                        <li><input type="checkbox" id="c564" onchange="updateProgress()"><label for="c564">Unpaid Leave: max 30 days, 14 days notice required</label></li>
                        <li><input type="checkbox" id="c565" onchange="updateProgress()"><label for="c565">Compassionate Leave: 5 days, no notice required</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>6.3 Leave Request Creation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c566" onchange="updateProgress()"><label for="c566">Leave type ID required</label></li>
                        <li><input type="checkbox" id="c567" onchange="updateProgress()"><label for="c567">Start date required (ISO string)</label></li>
                        <li><input type="checkbox" id="c568" onchange="updateProgress()"><label for="c568">End date required (ISO string)</label></li>
                        <li class="critical"><input type="checkbox" id="c569" onchange="updateProgress()"><label for="c569">**CRITICAL:** End date must be &gt;= start date</label></li>
                        <li><input type="checkbox" id="c570" onchange="updateProgress()"><label for="c570">End date before start date rejected with error on endDate path</label></li>
                        <li><input type="checkbox" id="c571" onchange="updateProgress()"><label for="c571">Start date = end date allowed (single day leave)</label></li>
                        <li><input type="checkbox" id="c572" onchange="updateProgress()"><label for="c572">Request type: FULL_DAY, HALF_DAY_AM, HALF_DAY_PM (default FULL_DAY)</label></li>
                        <li class="critical"><input type="checkbox" id="c573" onchange="updateProgress()"><label for="c573">**CRITICAL:** Half-day requests must have same start/end date</label></li>
                        <li><input type="checkbox" id="c574" onchange="updateProgress()"><label for="c574">Half-day spanning multiple days rejected</label></li>
                        <li><input type="checkbox" id="c575" onchange="updateProgress()"><label for="c575">Invalid request type rejected (e.g., &quot;INVALID_TYPE&quot;)</label></li>
                        <li><input type="checkbox" id="c576" onchange="updateProgress()"><label for="c576">Reason optional (max 1000 chars)</label></li>
                        <li><input type="checkbox" id="c577" onchange="updateProgress()"><label for="c577">Reason exceeding 1000 chars rejected</label></li>
                        <li><input type="checkbox" id="c578" onchange="updateProgress()"><label for="c578">Document URL optional (valid URL format)</label></li>
                        <li><input type="checkbox" id="c579" onchange="updateProgress()"><label for="c579">Invalid document URL rejected (e.g., &quot;not-a-url&quot;)</label></li>
                        <li><input type="checkbox" id="c580" onchange="updateProgress()"><label for="c580">Null accepted for all optional fields</label></li>
                        <li><input type="checkbox" id="c581" onchange="updateProgress()"><label for="c581">Emergency contact optional (max 100 chars)</label></li>
                        <li><input type="checkbox" id="c582" onchange="updateProgress()"><label for="c582">Emergency phone optional (max 20 chars)</label></li>
                        <li><input type="checkbox" id="c583" onchange="updateProgress()"><label for="c583">Admin override notice: boolean (default false)</label></li>
                        <li><input type="checkbox" id="c584" onchange="updateProgress()"><label for="c584">Employee ID optional (for admin creating on behalf)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>6.4 Leave Request Validations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c585" onchange="updateProgress()"><label for="c585">Validate leave type eligibility (admin assignment for PARENTAL/RELIGIOUS)</label></li>
                        <li><input type="checkbox" id="c586" onchange="updateProgress()"><label for="c586">PARENTAL/RELIGIOUS without balance: &quot;must be assigned by administrator&quot;</label></li>
                        <li><input type="checkbox" id="c587" onchange="updateProgress()"><label for="c587">Validate gender restriction matches employee gender</label></li>
                        <li><input type="checkbox" id="c588" onchange="updateProgress()"><label for="c588">Maternity rejected for male: &quot;only available for female employees&quot;</label></li>
                        <li><input type="checkbox" id="c589" onchange="updateProgress()"><label for="c589">Paternity rejected for female: &quot;only available for male employees&quot;</label></li>
                        <li><input type="checkbox" id="c590" onchange="updateProgress()"><label for="c590">Gender not recorded: &quot;gender is not recorded in your HR profile&quot;</label></li>
                        <li><input type="checkbox" id="c591" onchange="updateProgress()"><label for="c591">Validate minimum service months requirement</label></li>
                        <li><input type="checkbox" id="c592" onchange="updateProgress()"><label for="c592">Service not met: &quot;must complete service to be eligible&quot;</label></li>
                        <li><input type="checkbox" id="c593" onchange="updateProgress()"><label for="c593">Date of joining not recorded: &quot;date of joining is not recorded&quot;</label></li>
                        <li><input type="checkbox" id="c594" onchange="updateProgress()"><label for="c594">Validate once-in-employment (hajjLeaveTaken flag check)</label></li>
                        <li><input type="checkbox" id="c595" onchange="updateProgress()"><label for="c595">Hajj already taken: &quot;already used this leave&quot;</label></li>
                        <li><input type="checkbox" id="c596" onchange="updateProgress()"><label for="c596">Existing pending/approved Hajj request: &quot;already have a [status] request&quot;</label></li>
                        <li><input type="checkbox" id="c597" onchange="updateProgress()"><label for="c597">Validate notice period requirement (minNoticeDays)</label></li>
                        <li><input type="checkbox" id="c598" onchange="updateProgress()"><label for="c598">Notice not met: &quot;requires at least X days advance notice&quot;</label></li>
                        <li><input type="checkbox" id="c599" onchange="updateProgress()"><label for="c599">Admin can override notice with adminOverrideNotice=true</label></li>
                        <li><input type="checkbox" id="c600" onchange="updateProgress()"><label for="c600">User with bypassNoticeRequirement=true skips notice check</label></li>
                        <li><input type="checkbox" id="c601" onchange="updateProgress()"><label for="c601">Validate max consecutive days limit</label></li>
                        <li><input type="checkbox" id="c602" onchange="updateProgress()"><label for="c602">Exceeded max days: &quot;maximum of X consecutive days&quot;</label></li>
                        <li><input type="checkbox" id="c603" onchange="updateProgress()"><label for="c603">Validate no overlapping leave requests</label></li>
                        <li><input type="checkbox" id="c604" onchange="updateProgress()"><label for="c604">Overlap: &quot;already have a pending or approved leave request that overlaps&quot;</label></li>
                        <li><input type="checkbox" id="c605" onchange="updateProgress()"><label for="c605">Partial overlap (start) detected</label></li>
                        <li><input type="checkbox" id="c606" onchange="updateProgress()"><label for="c606">Partial overlap (end) detected</label></li>
                        <li><input type="checkbox" id="c607" onchange="updateProgress()"><label for="c607">New request encompassing existing detected</label></li>
                        <li><input type="checkbox" id="c608" onchange="updateProgress()"><label for="c608">Validate sufficient balance (for paid leave)</label></li>
                        <li><input type="checkbox" id="c609" onchange="updateProgress()"><label for="c609">Insufficient: &quot;INSUFFICIENT_BALANCE:X&quot; (X = available days)</label></li>
                        <li><input type="checkbox" id="c610" onchange="updateProgress()"><label for="c610">Unpaid leave bypasses balance check</label></li>
                        <li class="critical"><input type="checkbox" id="c611" onchange="updateProgress()"><label for="c611">**CRITICAL:** Document requirement skipped for 1-day leave</label></li>
                        <li><input type="checkbox" id="c612" onchange="updateProgress()"><label for="c612">Document requirement skipped for 0.5-day (half-day) leave</label></li>
                        <li><input type="checkbox" id="c613" onchange="updateProgress()"><label for="c613">Document required for multi-day leave when requiresDocument=true</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>6.5 Leave Balance Calculations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c614" onchange="updateProgress()"><label for="c614">Remaining = Entitlement + CarriedForward + Adjustment - Used - Pending</label></li>
                        <li><input type="checkbox" id="c615" onchange="updateProgress()"><label for="c615">Available = Entitlement + CarriedForward + Adjustment - Used</label></li>
                        <li><input type="checkbox" id="c616" onchange="updateProgress()"><label for="c616">Balance check includes pending requests</label></li>
                        <li><input type="checkbox" id="c617" onchange="updateProgress()"><label for="c617">Balance insufficient error shows available amount</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>6.6 Working Days Calculation (Qatar)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c618" onchange="updateProgress()"><label for="c618">Weekend: Friday (day 5) and Saturday (day 6) excluded</label></li>
                        <li><input type="checkbox" id="c619" onchange="updateProgress()"><label for="c619">Sunday through Thursday are working days</label></li>
                        <li><input type="checkbox" id="c620" onchange="updateProgress()"><label for="c620">Half-day: always 0.5 days regardless of date range</label></li>
                        <li><input type="checkbox" id="c621" onchange="updateProgress()"><label for="c621">Friday-Saturday only selection = 0 working days</label></li>
                        <li><input type="checkbox" id="c622" onchange="updateProgress()"><label for="c622">&quot;No working days in the selected date range&quot; error shown</label></li>
                        <li><input type="checkbox" id="c623" onchange="updateProgress()"><label for="c623">**Annual Leave:** includes all calendar days (accrualBased=true)</label></li>
                        <li><input type="checkbox" id="c624" onchange="updateProgress()"><label for="c624">Non-accrual leave excludes Friday/Saturday</label></li>
                        <li><input type="checkbox" id="c625" onchange="updateProgress()"><label for="c625">Example: Sun-Thu (5 days) = 5 working days</label></li>
                        <li><input type="checkbox" id="c626" onchange="updateProgress()"><label for="c626">Example: Sun-Sat (7 days) = 5 working days (non-accrual)</label></li>
                        <li><input type="checkbox" id="c627" onchange="updateProgress()"><label for="c627">Example: Sun-Sat (7 days) = 7 calendar days (accrual)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>6.7 Sick Leave Pay Tiers (Qatar Law)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c628" onchange="updateProgress()"><label for="c628">Days 1-14: Full pay (100%)</label></li>
                        <li><input type="checkbox" id="c629" onchange="updateProgress()"><label for="c629">Days 15-42: Half pay (50%)</label></li>
                        <li><input type="checkbox" id="c630" onchange="updateProgress()"><label for="c630">Days 43+: Unpaid (0%)</label></li>
                        <li><input type="checkbox" id="c631" onchange="updateProgress()"><label for="c631">Requires medical certificate</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>6.8 Leave Request Approval</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c632" onchange="updateProgress()"><label for="c632">Admin/Manager/HR_Manager can approve</label></li>
                        <li><input type="checkbox" id="c633" onchange="updateProgress()"><label for="c633">Status changes: PENDING → APPROVED</label></li>
                        <li><input type="checkbox" id="c634" onchange="updateProgress()"><label for="c634">Balance update: pending -= totalDays, used += totalDays</label></li>
                        <li><input type="checkbox" id="c635" onchange="updateProgress()"><label for="c635">Creates LeaveRequestHistory entry</label></li>
                        <li><input type="checkbox" id="c636" onchange="updateProgress()"><label for="c636">Marks hajjLeaveTaken=true if once-in-employment</label></li>
                        <li><input type="checkbox" id="c637" onchange="updateProgress()"><label for="c637">Invalidates WhatsApp action tokens</label></li>
                        <li><input type="checkbox" id="c638" onchange="updateProgress()"><label for="c638">Sends notification to requester</label></li>
                        <li><input type="checkbox" id="c639" onchange="updateProgress()"><label for="c639">Transaction atomic (balance + status)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>6.9 Leave Request Rejection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c640" onchange="updateProgress()"><label for="c640">Admin/Manager/HR_Manager can reject</label></li>
                        <li><input type="checkbox" id="c641" onchange="updateProgress()"><label for="c641">Rejection reason required (1-500 chars)</label></li>
                        <li><input type="checkbox" id="c642" onchange="updateProgress()"><label for="c642">Status changes: PENDING → REJECTED</label></li>
                        <li><input type="checkbox" id="c643" onchange="updateProgress()"><label for="c643">Balance reverts: returns days to available</label></li>
                        <li><input type="checkbox" id="c644" onchange="updateProgress()"><label for="c644">Sends notification to requester</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>6.10 Leave Request Cancellation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c645" onchange="updateProgress()"><label for="c645">Requester can cancel own PENDING request</label></li>
                        <li><input type="checkbox" id="c646" onchange="updateProgress()"><label for="c646">Requester can cancel APPROVED with future start date</label></li>
                        <li><input type="checkbox" id="c647" onchange="updateProgress()"><label for="c647">Admin can cancel any request</label></li>
                        <li><input type="checkbox" id="c648" onchange="updateProgress()"><label for="c648">Cancellation reason required (1-500 chars)</label></li>
                        <li><input type="checkbox" id="c649" onchange="updateProgress()"><label for="c649">Status changes: PENDING/APPROVED → CANCELLED</label></li>
                        <li><input type="checkbox" id="c650" onchange="updateProgress()"><label for="c650">Balance reverts appropriately</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>6.11 Leave Balance Adjustment</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c651" onchange="updateProgress()"><label for="c651">Admin can adjust balance</label></li>
                        <li><input type="checkbox" id="c652" onchange="updateProgress()"><label for="c652">Adjustment: -365 to +365 days</label></li>
                        <li><input type="checkbox" id="c653" onchange="updateProgress()"><label for="c653">Adjustment notes required (1-500 chars)</label></li>
                        <li><input type="checkbox" id="c654" onchange="updateProgress()"><label for="c654">Creates audit trail</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>6.12 Leave Balance Initialization</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c655" onchange="updateProgress()"><label for="c655">Member ID required</label></li>
                        <li><input type="checkbox" id="c656" onchange="updateProgress()"><label for="c656">Leave type ID required</label></li>
                        <li><input type="checkbox" id="c657" onchange="updateProgress()"><label for="c657">Year required (2000-2100)</label></li>
                        <li><input type="checkbox" id="c658" onchange="updateProgress()"><label for="c658">Custom entitlement optional</label></li>
                        <li><input type="checkbox" id="c659" onchange="updateProgress()"><label for="c659">Carried forward optional</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>6.13 Leave Queries</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c660" onchange="updateProgress()"><label for="c660">Filter by status</label></li>
                        <li><input type="checkbox" id="c661" onchange="updateProgress()"><label for="c661">Filter by member ID</label></li>
                        <li><input type="checkbox" id="c662" onchange="updateProgress()"><label for="c662">Filter by leave type ID</label></li>
                        <li><input type="checkbox" id="c663" onchange="updateProgress()"><label for="c663">Filter by year</label></li>
                        <li><input type="checkbox" id="c664" onchange="updateProgress()"><label for="c664">Filter by date range (startDate, endDate)</label></li>
                        <li><input type="checkbox" id="c665" onchange="updateProgress()"><label for="c665">Pagination (p, ps)</label></li>
                        <li><input type="checkbox" id="c666" onchange="updateProgress()"><label for="c666">Non-admin: only see own requests</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>6.14 Team Calendar</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c667" onchange="updateProgress()"><label for="c667">View leave calendar by month</label></li>
                        <li><input type="checkbox" id="c668" onchange="updateProgress()"><label for="c668">Filter by status</label></li>
                        <li><input type="checkbox" id="c669" onchange="updateProgress()"><label for="c669">Filter by leave type</label></li>
                        <li><input type="checkbox" id="c670" onchange="updateProgress()"><label for="c670">Shows all team members' leave</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Service Months Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c671" onchange="updateProgress()"><label for="c671">Same month = 0 months</label></li>
                        <li><input type="checkbox" id="c672" onchange="updateProgress()"><label for="c672">Exactly 1 year = 12 months</label></li>
                        <li><input type="checkbox" id="c673" onchange="updateProgress()"><label for="c673">Partial month (day not reached) = subtract 1</label></li>
                        <li><input type="checkbox" id="c674" onchange="updateProgress()"><label for="c674">Exact month boundary = full count</label></li>
                        <li><input type="checkbox" id="c675" onchange="updateProgress()"><label for="c675">Reference date before join date = 0</label></li>
                        <li><input type="checkbox" id="c676" onchange="updateProgress()"><label for="c676">Year boundary crossing handled correctly</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Service Years Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c677" onchange="updateProgress()"><label for="c677">Less than 12 months = 0 years</label></li>
                        <li><input type="checkbox" id="c678" onchange="updateProgress()"><label for="c678">Exactly 12 months = 1 year</label></li>
                        <li><input type="checkbox" id="c679" onchange="updateProgress()"><label for="c679">Floor calculation (no rounding up)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Service-Based Entitlement (Qatar Law)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c680" onchange="updateProgress()"><label for="c680">&lt; 12 months service = 0 days</label></li>
                        <li><input type="checkbox" id="c681" onchange="updateProgress()"><label for="c681">12-59 months (1-5 years) = 21 days annual leave</label></li>
                        <li><input type="checkbox" id="c682" onchange="updateProgress()"><label for="c682">60+ months (5+ years) = 28 days annual leave</label></li>
                        <li><input type="checkbox" id="c683" onchange="updateProgress()"><label for="c683">Null joinDate = 0 days</label></li>
                        <li><input type="checkbox" id="c684" onchange="updateProgress()"><label for="c684">Null config = 0 days</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Sick Leave Pay Breakdown (Qatar Law)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c685" onchange="updateProgress()"><label for="c685">&lt;= 14 days: all full pay</label></li>
                        <li><input type="checkbox" id="c686" onchange="updateProgress()"><label for="c686">15-42 days: 14 full pay + remainder half pay</label></li>
                        <li><input type="checkbox" id="c687" onchange="updateProgress()"><label for="c687">&gt; 42 days: 14 full pay + 28 half pay + remainder unpaid</label></li>
                        <li><input type="checkbox" id="c688" onchange="updateProgress()"><label for="c688">Example: 84 days = 14 full + 28 half + 42 unpaid</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Balance Calculations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c689" onchange="updateProgress()"><label for="c689">Available = entitlement + carriedForward + adjustment - used</label></li>
                        <li><input type="checkbox" id="c690" onchange="updateProgress()"><label for="c690">Remaining = available - pending</label></li>
                        <li><input type="checkbox" id="c691" onchange="updateProgress()"><label for="c691">Negative balance possible when over-used</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Date Overlap Detection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c692" onchange="updateProgress()"><label for="c692">Full overlap: true</label></li>
                        <li><input type="checkbox" id="c693" onchange="updateProgress()"><label for="c693">Partial overlap (start): true</label></li>
                        <li><input type="checkbox" id="c694" onchange="updateProgress()"><label for="c694">Partial overlap (end): true</label></li>
                        <li><input type="checkbox" id="c695" onchange="updateProgress()"><label for="c695">Adjacent dates: true (same end/start)</label></li>
                        <li><input type="checkbox" id="c696" onchange="updateProgress()"><label for="c696">Non-overlapping: false</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Leave Request Actions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c697" onchange="updateProgress()"><label for="c697">Can cancel: PENDING/APPROVED with future start only</label></li>
                        <li><input type="checkbox" id="c698" onchange="updateProgress()"><label for="c698">Cannot cancel: REJECTED/CANCELLED</label></li>
                        <li><input type="checkbox" id="c699" onchange="updateProgress()"><label for="c699">Cannot cancel: past or today start date</label></li>
                        <li><input type="checkbox" id="c700" onchange="updateProgress()"><label for="c700">Can edit: PENDING with future start only</label></li>
                        <li><input type="checkbox" id="c701" onchange="updateProgress()"><label for="c701">Cannot edit: APPROVED/REJECTED/CANCELLED</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Notice Days Check</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c702" onchange="updateProgress()"><label for="c702">minNoticeDays = 0: always passes</label></li>
                        <li><input type="checkbox" id="c703" onchange="updateProgress()"><label for="c703">Sufficient notice: passes</label></li>
                        <li><input type="checkbox" id="c704" onchange="updateProgress()"><label for="c704">Insufficient notice: fails</label></li>
                        <li><input type="checkbox" id="c705" onchange="updateProgress()"><label for="c705">Exactly meeting requirement: passes</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Max Consecutive Days Check</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c706" onchange="updateProgress()"><label for="c706">maxConsecutiveDays = null: no limit (always passes)</label></li>
                        <li><input type="checkbox" id="c707" onchange="updateProgress()"><label for="c707">Within limit: passes</label></li>
                        <li><input type="checkbox" id="c708" onchange="updateProgress()"><label for="c708">At limit: passes</label></li>
                        <li><input type="checkbox" id="c709" onchange="updateProgress()"><label for="c709">Exceeding limit: fails</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Leave Request Number Generation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c710" onchange="updateProgress()"><label for="c710">Format: LR-XXXXX (5-digit zero-padded)</label></li>
                        <li><input type="checkbox" id="c711" onchange="updateProgress()"><label for="c711">First request: LR-00001</label></li>
                        <li><input type="checkbox" id="c712" onchange="updateProgress()"><label for="c712">Sequential numbering</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-7" data-section="7">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 7</span>
                    <h3>PAYROLL MODULE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/payroll/payroll-validations.test.ts tests/unit/payroll/payroll-validations.test.ts tests/unit/payroll/payroll-validations.test.ts tests/unit/payroll/payroll-validations.test.ts tests/unit/payroll/payroll-validations.test.ts tests/unit/payroll/gratuity.test.ts tests/unit/lib/payroll/wps.test.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c713" onchange="updateProgress()"><label for="c713">**User ID required** (non-empty string)</label></li>
                        <li><input type="checkbox" id="c714" onchange="updateProgress()"><label for="c714">**Basic salary required:** 0 to 999,999,999 QAR</label></li>
                        <li><input type="checkbox" id="c715" onchange="updateProgress()"><label for="c715">Negative basic salary rejected</label></li>
                        <li><input type="checkbox" id="c716" onchange="updateProgress()"><label for="c716">Basic salary &gt; 999,999,999 rejected</label></li>
                        <li><input type="checkbox" id="c717" onchange="updateProgress()"><label for="c717">**Effective from date required** (ISO string)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Allowances (all optional, default to 0)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c718" onchange="updateProgress()"><label for="c718">Housing allowance: min 0 (default 0)</label></li>
                        <li><input type="checkbox" id="c719" onchange="updateProgress()"><label for="c719">Transport allowance: min 0 (default 0)</label></li>
                        <li><input type="checkbox" id="c720" onchange="updateProgress()"><label for="c720">Food allowance: min 0 (default 0)</label></li>
                        <li><input type="checkbox" id="c721" onchange="updateProgress()"><label for="c721">Phone allowance: min 0 (default 0)</label></li>
                        <li><input type="checkbox" id="c722" onchange="updateProgress()"><label for="c722">Other allowances: min 0 (default 0)</label></li>
                        <li><input type="checkbox" id="c723" onchange="updateProgress()"><label for="c723">**Other allowances details:** array of {name: string, amount: number}</label></li>
                        <li><input type="checkbox" id="c724" onchange="updateProgress()"><label for="c724">Each allowance detail requires name and non-negative amount</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c725" onchange="updateProgress()"><label for="c725">Notes optional (max 500 chars)</label></li>
                        <li><input type="checkbox" id="c726" onchange="updateProgress()"><label for="c726">Notes &gt; 500 chars rejected</label></li>
                        <li><input type="checkbox" id="c727" onchange="updateProgress()"><label for="c727">isActive flag for payroll inclusion</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c728" onchange="updateProgress()"><label for="c728">**Year required:** 2020-2100 (integer)</label></li>
                        <li><input type="checkbox" id="c729" onchange="updateProgress()"><label for="c729">Year before 2020 rejected</label></li>
                        <li><input type="checkbox" id="c730" onchange="updateProgress()"><label for="c730">Year after 2100 rejected</label></li>
                        <li><input type="checkbox" id="c731" onchange="updateProgress()"><label for="c731">Non-integer year rejected (e.g., 2024.5)</label></li>
                        <li><input type="checkbox" id="c732" onchange="updateProgress()"><label for="c732">**Month required:** 1-12 (integer)</label></li>
                        <li><input type="checkbox" id="c733" onchange="updateProgress()"><label for="c733">Month = 0 rejected</label></li>
                        <li><input type="checkbox" id="c734" onchange="updateProgress()"><label for="c734">Month = 13 rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Business Rules</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c735" onchange="updateProgress()"><label for="c735">Duplicate run for same year/month returns 400 with existingId</label></li>
                        <li><input type="checkbox" id="c736" onchange="updateProgress()"><label for="c736">Requires active salary structures</label></li>
                        <li><input type="checkbox" id="c737" onchange="updateProgress()"><label for="c737">Requires minimum 1 employee</label></li>
                        <li><input type="checkbox" id="c738" onchange="updateProgress()"><label for="c738">Reference number generated: PAY-YYYY-MM-SEQ</label></li>
                        <li><input type="checkbox" id="c739" onchange="updateProgress()"><label for="c739">Period start/end calculated</label></li>
                        <li><input type="checkbox" id="c740" onchange="updateProgress()"><label for="c740">Creates PayrollHistory entry</label></li>
                        <li><input type="checkbox" id="c741" onchange="updateProgress()"><label for="c741">Status: DRAFT</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>7.3 Payroll Run Status Workflow</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c742" onchange="updateProgress()"><label for="c742">DRAFT → SUBMITTED (via submit)</label></li>
                        <li><input type="checkbox" id="c743" onchange="updateProgress()"><label for="c743">SUBMITTED → APPROVED (via approve)</label></li>
                        <li><input type="checkbox" id="c744" onchange="updateProgress()"><label for="c744">APPROVED → PROCESSED (via process)</label></li>
                        <li><input type="checkbox" id="c745" onchange="updateProgress()"><label for="c745">PROCESSED → PAID (via pay)</label></li>
                        <li><input type="checkbox" id="c746" onchange="updateProgress()"><label for="c746">Any status → CANCELLED (via cancel)</label></li>
                        <li><input type="checkbox" id="c747" onchange="updateProgress()"><label for="c747">Cannot modify after SUBMITTED</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>7.4 Payroll Processing</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c748" onchange="updateProgress()"><label for="c748">Calculates gross salary from structure</label></li>
                        <li><input type="checkbox" id="c749" onchange="updateProgress()"><label for="c749">Applies leave deductions</label></li>
                        <li><input type="checkbox" id="c750" onchange="updateProgress()"><label for="c750">Applies loan deductions</label></li>
                        <li><input type="checkbox" id="c751" onchange="updateProgress()"><label for="c751">Calculates net = gross - deductions</label></li>
                        <li><input type="checkbox" id="c752" onchange="updateProgress()"><label for="c752">Creates payslips per employee</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>7.5 Payroll Submission</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c753" onchange="updateProgress()"><label for="c753">Requires DRAFT status</label></li>
                        <li><input type="checkbox" id="c754" onchange="updateProgress()"><label for="c754">Status changes to SUBMITTED</label></li>
                        <li><input type="checkbox" id="c755" onchange="updateProgress()"><label for="c755">Locks run from modification</label></li>
                        <li><input type="checkbox" id="c756" onchange="updateProgress()"><label for="c756">Notes optional (max 500 chars)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>7.6 Payroll Approval</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c757" onchange="updateProgress()"><label for="c757">Finance approver required</label></li>
                        <li><input type="checkbox" id="c758" onchange="updateProgress()"><label for="c758">Requires SUBMITTED status</label></li>
                        <li><input type="checkbox" id="c759" onchange="updateProgress()"><label for="c759">Status changes to APPROVED</label></li>
                        <li><input type="checkbox" id="c760" onchange="updateProgress()"><label for="c760">Notes optional (max 500 chars)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>7.7 Payroll Payment</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c761" onchange="updateProgress()"><label for="c761">Requires PROCESSED status</label></li>
                        <li><input type="checkbox" id="c762" onchange="updateProgress()"><label for="c762">Status changes to PAID</label></li>
                        <li><input type="checkbox" id="c763" onchange="updateProgress()"><label for="c763">Records paidAt timestamp</label></li>
                        <li><input type="checkbox" id="c764" onchange="updateProgress()"><label for="c764">Payment reference optional (max 100 chars)</label></li>
                        <li><input type="checkbox" id="c765" onchange="updateProgress()"><label for="c765">Notes optional (max 500 chars)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>7.8 Payroll Cancellation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c766" onchange="updateProgress()"><label for="c766">Reverses all payslip deductions</label></li>
                        <li><input type="checkbox" id="c767" onchange="updateProgress()"><label for="c767">Leaves run in cancelled state</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c768" onchange="updateProgress()"><label for="c768">**User ID required** (non-empty string)</label></li>
                        <li><input type="checkbox" id="c769" onchange="updateProgress()"><label for="c769">**Type required:** LOAN or ADVANCE</label></li>
                        <li><input type="checkbox" id="c770" onchange="updateProgress()"><label for="c770">Invalid type rejected (e.g., &quot;INVALID&quot;)</label></li>
                        <li><input type="checkbox" id="c771" onchange="updateProgress()"><label for="c771">**Description required:** 1-500 characters</label></li>
                        <li><input type="checkbox" id="c772" onchange="updateProgress()"><label for="c772">Empty description rejected</label></li>
                        <li><input type="checkbox" id="c773" onchange="updateProgress()"><label for="c773">**Principal amount required:** min 1 QAR</label></li>
                        <li><input type="checkbox" id="c774" onchange="updateProgress()"><label for="c774">Principal amount = 0 rejected</label></li>
                        <li><input type="checkbox" id="c775" onchange="updateProgress()"><label for="c775">**Monthly deduction required:** min 1 QAR</label></li>
                        <li><input type="checkbox" id="c776" onchange="updateProgress()"><label for="c776">**Start date required** (ISO string)</label></li>
                        <li><input type="checkbox" id="c777" onchange="updateProgress()"><label for="c777">**Installments required:** min 1 (integer)</label></li>
                        <li><input type="checkbox" id="c778" onchange="updateProgress()"><label for="c778">Installments = 0 rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c779" onchange="updateProgress()"><label for="c779">Notes optional (max 500 chars)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Operations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c780" onchange="updateProgress()"><label for="c780">Pause loan installments</label></li>
                        <li><input type="checkbox" id="c781" onchange="updateProgress()"><label for="c781">Resume loan installments</label></li>
                        <li><input type="checkbox" id="c782" onchange="updateProgress()"><label for="c782">Write off remaining balance</label></li>
                        <li><input type="checkbox" id="c783" onchange="updateProgress()"><label for="c783">Track repayments</label></li>
                        <li><input type="checkbox" id="c784" onchange="updateProgress()"><label for="c784">Status: ACTIVE, PAUSED, COMPLETED, WRITTEN_OFF</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c785" onchange="updateProgress()"><label for="c785">**Amount required:** min 0.01 QAR</label></li>
                        <li><input type="checkbox" id="c786" onchange="updateProgress()"><label for="c786">Amount = 0 rejected</label></li>
                        <li><input type="checkbox" id="c787" onchange="updateProgress()"><label for="c787">**Payment method required:** SALARY_DEDUCTION, CASH, BANK_TRANSFER</label></li>
                        <li><input type="checkbox" id="c788" onchange="updateProgress()"><label for="c788">Invalid payment method rejected (e.g., &quot;CHECK&quot;)</label></li>
                        <li><input type="checkbox" id="c789" onchange="updateProgress()"><label for="c789">**Payment date required** (ISO string)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c790" onchange="updateProgress()"><label for="c790">Reference optional (max 100 chars)</label></li>
                        <li><input type="checkbox" id="c791" onchange="updateProgress()"><label for="c791">Notes optional (max 500 chars)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c792" onchange="updateProgress()"><label for="c792">**Type required:** LOAN_REPAYMENT, UNPAID_LEAVE, ADVANCE_RECOVERY, TAX, SOCIAL_INSURANCE, OTHER</label></li>
                        <li><input type="checkbox" id="c793" onchange="updateProgress()"><label for="c793">Invalid type rejected (e.g., &quot;INVALID_TYPE&quot;)</label></li>
                        <li><input type="checkbox" id="c794" onchange="updateProgress()"><label for="c794">**Description required:** 1-200 characters</label></li>
                        <li><input type="checkbox" id="c795" onchange="updateProgress()"><label for="c795">Empty description rejected</label></li>
                        <li><input type="checkbox" id="c796" onchange="updateProgress()"><label for="c796">Description &gt; 200 chars rejected</label></li>
                        <li><input type="checkbox" id="c797" onchange="updateProgress()"><label for="c797">**Amount required:** min 0.01 QAR</label></li>
                        <li><input type="checkbox" id="c798" onchange="updateProgress()"><label for="c798">Amount = 0 rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c799" onchange="updateProgress()"><label for="c799">Leave request ID optional (for UNPAID_LEAVE type)</label></li>
                        <li><input type="checkbox" id="c800" onchange="updateProgress()"><label for="c800">Loan ID optional (for LOAN_REPAYMENT type)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Formula: 3 weeks of BASIC salary per completed year</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c801" onchange="updateProgress()"><label for="c801">Weekly rate = (Basic / 30) * 7</label></li>
                        <li><input type="checkbox" id="c802" onchange="updateProgress()"><label for="c802">Annual gratuity = 3 * Weekly rate per year</label></li>
                        <li><input type="checkbox" id="c803" onchange="updateProgress()"><label for="c803">**Monthly rate = Weekly rate * 3 / 12**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Minimum Service Requirement</span>
                    </div>
                    <ul class="checklist">
                        <li class="critical"><input type="checkbox" id="c804" onchange="updateProgress()"><label for="c804">**CRITICAL: &lt; 12 months service = INELIGIBLE (0 gratuity)**</label></li>
                        <li><input type="checkbox" id="c805" onchange="updateProgress()"><label for="c805">11 months service → eligible: false, amount: 0</label></li>
                        <li><input type="checkbox" id="c806" onchange="updateProgress()"><label for="c806">Exactly 12 months service → eligible: true, calculates gratuity</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Service Period Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c807" onchange="updateProgress()"><label for="c807">Service months = complete months between joiningDate and endDate</label></li>
                        <li><input type="checkbox" id="c808" onchange="updateProgress()"><label for="c808">**Day-of-month comparison:** if endDate.day &lt; joiningDate.day, subtract 1 month</label></li>
                        <li><input type="checkbox" id="c809" onchange="updateProgress()"><label for="c809">Example: Jan 15 to Feb 14 = 0 months (not complete)</label></li>
                        <li><input type="checkbox" id="c810" onchange="updateProgress()"><label for="c810">Example: Jan 15 to Feb 15 = 1 month (complete)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Test Cases by Duration</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c811" onchange="updateProgress()"><label for="c811">**12 months (1 year):** eligible, yearlyAmount = 3 * weekly</label></li>
                        <li><input type="checkbox" id="c812" onchange="updateProgress()"><label for="c812">**24 months (2 years):** 2 * 3 * weekly</label></li>
                        <li><input type="checkbox" id="c813" onchange="updateProgress()"><label for="c813">**36 months (3 years):** 3 * 3 * weekly</label></li>
                        <li><input type="checkbox" id="c814" onchange="updateProgress()"><label for="c814">**60 months (5 years):** 5 * 3 * weekly</label></li>
                        <li><input type="checkbox" id="c815" onchange="updateProgress()"><label for="c815">**120 months (10 years):** 10 * 3 * weekly</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Pro-rata Calculation (Partial Years)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c816" onchange="updateProgress()"><label for="c816">**18 months (1.5 years):** 1 * 3 * weekly + (6/12) * 3 * weekly</label></li>
                        <li><input type="checkbox" id="c817" onchange="updateProgress()"><label for="c817">**30 months (2.5 years):** 2 * 3 * weekly + (6/12) * 3 * weekly</label></li>
                        <li><input type="checkbox" id="c818" onchange="updateProgress()"><label for="c818">Total = (fullYears * monthlyRate * 12) + (remainingMonths * monthlyRate)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Concrete Example</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c819" onchange="updateProgress()"><label for="c819">Basic salary: 10,000 QAR</label></li>
                        <li><input type="checkbox" id="c820" onchange="updateProgress()"><label for="c820">Weekly rate: (10000 / 30) * 7 = 2333.33 QAR</label></li>
                        <li><input type="checkbox" id="c821" onchange="updateProgress()"><label for="c821">Monthly rate: 2333.33 * 3 / 12 = 583.33 QAR</label></li>
                        <li><input type="checkbox" id="c822" onchange="updateProgress()"><label for="c822">12 months: 583.33 * 12 = 7000 QAR</label></li>
                        <li><input type="checkbox" id="c823" onchange="updateProgress()"><label for="c823">24 months: 583.33 * 24 = 14000 QAR</label></li>
                        <li><input type="checkbox" id="c824" onchange="updateProgress()"><label for="c824">18 months: 583.33 * 18 = 10500 QAR</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Projection Feature</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c825" onchange="updateProgress()"><label for="c825">Project gratuity at 1, 3, 5, 10 years from current date</label></li>
                        <li><input type="checkbox" id="c826" onchange="updateProgress()"><label for="c826">Used for employee dashboard display</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>SIF File Structure</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c827" onchange="updateProgress()"><label for="c827">File contains: SCR (header) + SDR records (employees) + ETR (trailer)</label></li>
                        <li><input type="checkbox" id="c828" onchange="updateProgress()"><label for="c828">Uses Windows-style line endings (`\r\n`)</label></li>
                        <li><input type="checkbox" id="c829" onchange="updateProgress()"><label for="c829">Empty employee list generates: SCR + ETR only (2 lines)</label></li>
                        <li><input type="checkbox" id="c830" onchange="updateProgress()"><label for="c830">Single employee generates: SCR + SDR + ETR (3 lines)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Header Record (SCR)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c831" onchange="updateProgress()"><label for="c831">Employer MOL ID included</label></li>
                        <li><input type="checkbox" id="c832" onchange="updateProgress()"><label for="c832">Employer name UPPERCASE</label></li>
                        <li><input type="checkbox" id="c833" onchange="updateProgress()"><label for="c833">Payment date format: YYYYMMDD</label></li>
                        <li><input type="checkbox" id="c834" onchange="updateProgress()"><label for="c834">Total records count</label></li>
                        <li><input type="checkbox" id="c835" onchange="updateProgress()"><label for="c835">Total amount in fils</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Employee Records (SDR)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c836" onchange="updateProgress()"><label for="c836">Employee name UPPERCASE</label></li>
                        <li><input type="checkbox" id="c837" onchange="updateProgress()"><label for="c837">QID number (11 digits)</label></li>
                        <li><input type="checkbox" id="c838" onchange="updateProgress()"><label for="c838">Bank code (4 chars)</label></li>
                        <li><input type="checkbox" id="c839" onchange="updateProgress()"><label for="c839">IBAN</label></li>
                        <li><input type="checkbox" id="c840" onchange="updateProgress()"><label for="c840">**Amounts in fils:** Net salary * 1000 = fils</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Trailer Record (ETR)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c841" onchange="updateProgress()"><label for="c841">Record count zero-padded to 6 chars: 2 records → &quot;000002&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Bank Code Lookup (`getBankCode`)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c842" onchange="updateProgress()"><label for="c842">QNB → QNBA</label></li>
                        <li><input type="checkbox" id="c843" onchange="updateProgress()"><label for="c843">Commercial Bank → CBQQ</label></li>
                        <li><input type="checkbox" id="c844" onchange="updateProgress()"><label for="c844">Doha Bank → DHBQ</label></li>
                        <li><input type="checkbox" id="c845" onchange="updateProgress()"><label for="c845">Qatar Islamic Bank / QIB → QISB</label></li>
                        <li><input type="checkbox" id="c846" onchange="updateProgress()"><label for="c846">Masraf Al Rayan / MAR → MAFQ</label></li>
                        <li><input type="checkbox" id="c847" onchange="updateProgress()"><label for="c847">**Case-insensitive:** &quot;qnb&quot; = &quot;QNB&quot; = &quot;Qatar National Bank&quot;</label></li>
                        <li><input type="checkbox" id="c848" onchange="updateProgress()"><label for="c848">**Unknown bank → &quot;XXXX&quot;**</label></li>
                        <li><input type="checkbox" id="c849" onchange="updateProgress()"><label for="c849">**Empty/null/undefined → &quot;XXXX&quot;**</label></li>
                        <li><input type="checkbox" id="c850" onchange="updateProgress()"><label for="c850">Trims whitespace: &quot;  QNB  &quot; → QNBA</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Qatar Bank Codes</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c851" onchange="updateProgress()"><label for="c851">All major banks: QNB, Commercial Bank, Doha Bank, QIB, Masraf Al Rayan, Ahli Bank, Dukhan Bank, HSBC</label></li>
                        <li><input type="checkbox" id="c852" onchange="updateProgress()"><label for="c852">All codes exactly 4 characters</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Record Validation (`validateWPSRecord`)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c853" onchange="updateProgress()"><label for="c853">**QID must be exactly 11 digits**</label></li>
                        <li><input type="checkbox" id="c854" onchange="updateProgress()"><label for="c854">**Employee name required**</label></li>
                        <li><input type="checkbox" id="c855" onchange="updateProgress()"><label for="c855">**Valid IBAN required**</label></li>
                        <li><input type="checkbox" id="c856" onchange="updateProgress()"><label for="c856">**Known bank code required**</label></li>
                        <li><input type="checkbox" id="c857" onchange="updateProgress()"><label for="c857">**Net salary must be &gt; 0**</label></li>
                        <li><input type="checkbox" id="c858" onchange="updateProgress()"><label for="c858">Multiple validation errors returned as array</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Filename Generation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c859" onchange="updateProgress()"><label for="c859">Format: `WPS_{MOL_ID}_{YYYYMM}_{HHMMSS}.sif`</label></li>
                        <li><input type="checkbox" id="c860" onchange="updateProgress()"><label for="c860">Month zero-padded: month 3 → &quot;03&quot;</label></li>
                        <li><input type="checkbox" id="c861" onchange="updateProgress()"><label for="c861">.sif extension</label></li>
                        <li><input type="checkbox" id="c862" onchange="updateProgress()"><label for="c862">Includes timestamp for uniqueness</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c863" onchange="updateProgress()"><label for="c863">Special characters in employer name preserved: &quot;Company &amp; Sons (LLC)&quot;</label></li>
                        <li><input type="checkbox" id="c864" onchange="updateProgress()"><label for="c864">Long employer name truncated to 40 characters</label></li>
                        <li><input type="checkbox" id="c865" onchange="updateProgress()"><label for="c865">Decimal amounts rounded: 12345.678 QAR → 12345678 fils</label></li>
                        <li><input type="checkbox" id="c866" onchange="updateProgress()"><label for="c866">Large amounts: 999,999.99 QAR → 999999990 fils</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>7.13 Payroll Queries</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c867" onchange="updateProgress()"><label for="c867">Filter by year</label></li>
                        <li><input type="checkbox" id="c868" onchange="updateProgress()"><label for="c868">Filter by status</label></li>
                        <li><input type="checkbox" id="c869" onchange="updateProgress()"><label for="c869">Pagination (max 100)</label></li>
                        <li><input type="checkbox" id="c870" onchange="updateProgress()"><label for="c870">Includes: createdBy, submittedBy, approvedBy, processedBy, paidBy</label></li>
                        <li><input type="checkbox" id="c871" onchange="updateProgress()"><label for="c871">Includes payslips count</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-8" data-section="8">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 8</span>
                    <h3>SUBSCRIPTIONS MODULE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/validations/subscriptions.test.ts tests/unit/subscriptions/subscription-lifecycle.test.ts tests/unit/subscriptions/subscription-lifecycle.test.ts tests/unit/subscriptions/subscription-lifecycle.test.ts tests/unit/subscriptions/subscriptions-route.test.ts tests/unit/subscriptions/subscriptions-route.test.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c872" onchange="updateProgress()"><label for="c872">**Service name required** (1-255 chars)</label></li>
                        <li><input type="checkbox" id="c873" onchange="updateProgress()"><label for="c873">Empty service name rejected</label></li>
                        <li><input type="checkbox" id="c874" onchange="updateProgress()"><label for="c874">Service name &gt; 255 chars rejected</label></li>
                        <li><input type="checkbox" id="c875" onchange="updateProgress()"><label for="c875">**Billing cycle required:** MONTHLY, YEARLY, ONE_TIME</label></li>
                        <li><input type="checkbox" id="c876" onchange="updateProgress()"><label for="c876">Invalid billing cycle rejected (e.g., &quot;WEEKLY&quot;)</label></li>
                        <li><input type="checkbox" id="c877" onchange="updateProgress()"><label for="c877">**Purchase date required** (ISO datetime string)</label></li>
                        <li><input type="checkbox" id="c878" onchange="updateProgress()"><label for="c878">Invalid date format rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Date Validations</span>
                    </div>
                    <ul class="checklist">
                        <li class="critical"><input type="checkbox" id="c879" onchange="updateProgress()"><label for="c879">**CRITICAL: Renewal date must be after purchase date** (Qatar timezone)</label></li>
                        <li><input type="checkbox" id="c880" onchange="updateProgress()"><label for="c880">Renewal date = purchase date rejected</label></li>
                        <li><input type="checkbox" id="c881" onchange="updateProgress()"><label for="c881">Renewal date before purchase date rejected</label></li>
                        <li><input type="checkbox" id="c882" onchange="updateProgress()"><label for="c882">Both dates on same day but renewal time &gt;= purchase time: valid</label></li>
                        <li><input type="checkbox" id="c883" onchange="updateProgress()"><label for="c883">Renewal date optional (can be null for ONE_TIME)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields with Constraints</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c884" onchange="updateProgress()"><label for="c884">Category optional (max 100 chars)</label></li>
                        <li><input type="checkbox" id="c885" onchange="updateProgress()"><label for="c885">Account ID optional (max 100 chars)</label></li>
                        <li><input type="checkbox" id="c886" onchange="updateProgress()"><label for="c886">Cost per cycle: positive number optional, coerced from string</label></li>
                        <li><input type="checkbox" id="c887" onchange="updateProgress()"><label for="c887">Cost per cycle: 0 allowed</label></li>
                        <li><input type="checkbox" id="c888" onchange="updateProgress()"><label for="c888">Cost per cycle: negative rejected</label></li>
                        <li><input type="checkbox" id="c889" onchange="updateProgress()"><label for="c889">Cost currency optional (defaults to QAR)</label></li>
                        <li><input type="checkbox" id="c890" onchange="updateProgress()"><label for="c890">Cost QAR: positive number optional (auto-calculated)</label></li>
                        <li><input type="checkbox" id="c891" onchange="updateProgress()"><label for="c891">Vendor optional (max 255 chars)</label></li>
                        <li><input type="checkbox" id="c892" onchange="updateProgress()"><label for="c892">Notes optional (max 1000 chars)</label></li>
                        <li><input type="checkbox" id="c893" onchange="updateProgress()"><label for="c893">Payment method optional (max 100 chars)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Assignment Rules</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c894" onchange="updateProgress()"><label for="c894">Assigned member ID required</label></li>
                        <li><input type="checkbox" id="c895" onchange="updateProgress()"><label for="c895">Assignment date required when member assigned</label></li>
                        <li><input type="checkbox" id="c896" onchange="updateProgress()"><label for="c896">Member must exist in same organization</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Defaults</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c897" onchange="updateProgress()"><label for="c897">Status: defaults to ACTIVE</label></li>
                        <li><input type="checkbox" id="c898" onchange="updateProgress()"><label for="c898">Auto renew: boolean (default true)</label></li>
                        <li><input type="checkbox" id="c899" onchange="updateProgress()"><label for="c899">Currency: defaults to QAR</label></li>
                        <li><input type="checkbox" id="c900" onchange="updateProgress()"><label for="c900">Subscription tag auto-generated: {ORG_PREFIX}-SUB-YYMMDD-XXX</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>8.2 Subscription Cost Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c901" onchange="updateProgress()"><label for="c901">Multi-currency support with QAR conversion</label></li>
                        <li><input type="checkbox" id="c902" onchange="updateProgress()"><label for="c902">Always calculates costQAR (SAFEGUARD)</label></li>
                        <li><input type="checkbox" id="c903" onchange="updateProgress()"><label for="c903">Uses tenant-specific exchange rates</label></li>
                        <li><input type="checkbox" id="c904" onchange="updateProgress()"><label for="c904">Defaults currency to QAR if not specified</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>State Transitions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c905" onchange="updateProgress()"><label for="c905">ACTIVE → PAUSED (suspend)</label></li>
                        <li><input type="checkbox" id="c906" onchange="updateProgress()"><label for="c906">PAUSED → ACTIVE (reactivate)</label></li>
                        <li><input type="checkbox" id="c907" onchange="updateProgress()"><label for="c907">ACTIVE → CANCELLED (cancel)</label></li>
                        <li><input type="checkbox" id="c908" onchange="updateProgress()"><label for="c908">CANCELLED → ACTIVE (reactivate)</label></li>
                        <li><input type="checkbox" id="c909" onchange="updateProgress()"><label for="c909">**Cannot cancel already CANCELLED subscription**</label></li>
                        <li><input type="checkbox" id="c910" onchange="updateProgress()"><label for="c910">**Cannot cancel PAUSED subscription** (must be ACTIVE)</label></li>
                        <li><input type="checkbox" id="c911" onchange="updateProgress()"><label for="c911">**Cannot reactivate ACTIVE subscription**</label></li>
                        <li><input type="checkbox" id="c912" onchange="updateProgress()"><label for="c912">**Cannot reactivate PAUSED subscription** (must be CANCELLED)</label></li>
                        <li><input type="checkbox" id="c913" onchange="updateProgress()"><label for="c913">Same status transition rejected (ACTIVE→ACTIVE, CANCELLED→CANCELLED)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Cancellation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c914" onchange="updateProgress()"><label for="c914">Sets status to CANCELLED</label></li>
                        <li><input type="checkbox" id="c915" onchange="updateProgress()"><label for="c915">Sets cancelledAt timestamp</label></li>
                        <li><input type="checkbox" id="c916" onchange="updateProgress()"><label for="c916">Preserves lastActiveRenewalDate</label></li>
                        <li><input type="checkbox" id="c917" onchange="updateProgress()"><label for="c917">Creates CANCELLED history entry</label></li>
                        <li><input type="checkbox" id="c918" onchange="updateProgress()"><label for="c918">Not found subscription throws error</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Reactivation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c919" onchange="updateProgress()"><label for="c919">Sets status to ACTIVE</label></li>
                        <li><input type="checkbox" id="c920" onchange="updateProgress()"><label for="c920">Sets new renewalDate (required)</label></li>
                        <li><input type="checkbox" id="c921" onchange="updateProgress()"><label for="c921">Sets reactivatedAt timestamp</label></li>
                        <li><input type="checkbox" id="c922" onchange="updateProgress()"><label for="c922">Creates REACTIVATED history entry</label></li>
                        <li><input type="checkbox" id="c923" onchange="updateProgress()"><label for="c923">Uses provided reactivation date or defaults to current</label></li>
                        <li><input type="checkbox" id="c924" onchange="updateProgress()"><label for="c924">Not found subscription throws error</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>8.4 Billing Cycle Calculations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c925" onchange="updateProgress()"><label for="c925">**ONE_TIME: always returns 1 cycle** (regardless of date range)</label></li>
                        <li><input type="checkbox" id="c926" onchange="updateProgress()"><label for="c926">MONTHLY: counts months between dates</label></li>
                        <li><input type="checkbox" id="c927" onchange="updateProgress()"><label for="c927">YEARLY: counts years between dates</label></li>
                        <li><input type="checkbox" id="c928" onchange="updateProgress()"><label for="c928">Returns 1 if end date is before first renewal</label></li>
                        <li><input type="checkbox" id="c929" onchange="updateProgress()"><label for="c929">Same day end and renewal: counts that renewal</label></li>
                        <li><input type="checkbox" id="c930" onchange="updateProgress()"><label for="c930">Example: Jan 15 to Apr 20 (monthly) = 4 cycles</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Adding Billing Cycles</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c931" onchange="updateProgress()"><label for="c931">MONTHLY: adds N months to date</label></li>
                        <li><input type="checkbox" id="c932" onchange="updateProgress()"><label for="c932">YEARLY: adds N years to date</label></li>
                        <li><input type="checkbox" id="c933" onchange="updateProgress()"><label for="c933">Handles year overflow (Nov + 3 months = Feb next year)</label></li>
                        <li><input type="checkbox" id="c934" onchange="updateProgress()"><label for="c934">Does NOT modify original date (creates new Date)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>8.5 Subscription Renewal</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c935" onchange="updateProgress()"><label for="c935">Updates renewal date</label></li>
                        <li><input type="checkbox" id="c936" onchange="updateProgress()"><label for="c936">Updates status if needed</label></li>
                        <li><input type="checkbox" id="c937" onchange="updateProgress()"><label for="c937">Creates history record</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>8.6 Subscription Search &amp; Filtering</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c938" onchange="updateProgress()"><label for="c938">Search by service name</label></li>
                        <li><input type="checkbox" id="c939" onchange="updateProgress()"><label for="c939">Search by account ID</label></li>
                        <li><input type="checkbox" id="c940" onchange="updateProgress()"><label for="c940">Search by vendor</label></li>
                        <li><input type="checkbox" id="c941" onchange="updateProgress()"><label for="c941">Search by category</label></li>
                        <li><input type="checkbox" id="c942" onchange="updateProgress()"><label for="c942">Filter by status: ACTIVE, CANCELLED, EXPIRED</label></li>
                        <li><input type="checkbox" id="c943" onchange="updateProgress()"><label for="c943">Filter by category</label></li>
                        <li><input type="checkbox" id="c944" onchange="updateProgress()"><label for="c944">Filter by billing cycle</label></li>
                        <li><input type="checkbox" id="c945" onchange="updateProgress()"><label for="c945">Filter by renewal window (N days)</label></li>
                        <li><input type="checkbox" id="c946" onchange="updateProgress()"><label for="c946">Filter by project ID</label></li>
                        <li><input type="checkbox" id="c947" onchange="updateProgress()"><label for="c947">Pagination (max 100)</label></li>
                        <li><input type="checkbox" id="c948" onchange="updateProgress()"><label for="c948">Sort by: serviceName, renewalDate, costPerCycle, createdAt</label></li>
                        <li><input type="checkbox" id="c949" onchange="updateProgress()"><label for="c949">Order: asc, desc</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Active Periods Tracking</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c950" onchange="updateProgress()"><label for="c950">Track active periods per member</label></li>
                        <li><input type="checkbox" id="c951" onchange="updateProgress()"><label for="c951">Handle REASSIGNED events (newMemberId, oldMemberId)</label></li>
                        <li><input type="checkbox" id="c952" onchange="updateProgress()"><label for="c952">Identify current period (null endDate)</label></li>
                        <li><input type="checkbox" id="c953" onchange="updateProgress()"><label for="c953">Empty periods for new subscription with no history</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Cost Calculations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c954" onchange="updateProgress()"><label for="c954">Sum costs from all active periods</label></li>
                        <li><input type="checkbox" id="c955" onchange="updateProgress()"><label for="c955">Handle null costPerCycle (defaults to 0)</label></li>
                        <li><input type="checkbox" id="c956" onchange="updateProgress()"><label for="c956">Convert Decimal to number</label></li>
                        <li><input type="checkbox" id="c957" onchange="updateProgress()"><label for="c957">Handle zero cost periods</label></li>
                        <li><input type="checkbox" id="c958" onchange="updateProgress()"><label for="c958">Total cost across all periods</label></li>
                        <li><input type="checkbox" id="c959" onchange="updateProgress()"><label for="c959">Total months of usage</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c960" onchange="updateProgress()"><label for="c960">Missing renewal date: use purchaseDate as fallback</label></li>
                        <li><input type="checkbox" id="c961" onchange="updateProgress()"><label for="c961">Missing purchaseDate: use createdAt as fallback</label></li>
                        <li><input type="checkbox" id="c962" onchange="updateProgress()"><label for="c962">Handle cancel-reactivate sequences</label></li>
                        <li><input type="checkbox" id="c963" onchange="updateProgress()"><label for="c963">Handle multiple cancel-reactivate cycles</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>API Tenant Context</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c964" onchange="updateProgress()"><label for="c964">GET /api/subscriptions returns 403 when tenant context missing</label></li>
                        <li><input type="checkbox" id="c965" onchange="updateProgress()"><label for="c965">POST /api/subscriptions returns 403 when tenant context missing</label></li>
                        <li><input type="checkbox" id="c966" onchange="updateProgress()"><label for="c966">Subscription list only returns current tenant's subscriptions</label></li>
                        <li><input type="checkbox" id="c967" onchange="updateProgress()"><label for="c967">Cannot retrieve subscription by ID from different tenant (returns null/404)</label></li>
                        <li><input type="checkbox" id="c968" onchange="updateProgress()"><label for="c968">Create subscription automatically sets correct tenantId</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Data Isolation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c969" onchange="updateProgress()"><label for="c969">Create subscription in Org A, verify NOT visible in Org B</label></li>
                        <li><input type="checkbox" id="c970" onchange="updateProgress()"><label for="c970">Search results do not include other tenant's data</label></li>
                        <li><input type="checkbox" id="c971" onchange="updateProgress()"><label for="c971">Subscription count only counts current tenant</label></li>
                        <li><input type="checkbox" id="c972" onchange="updateProgress()"><label for="c972">Assigned member must belong to same tenant</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>SubscriptionHistory Isolation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c973" onchange="updateProgress()"><label for="c973">History entries linked via subscriptionId (FK isolation)</label></li>
                        <li><input type="checkbox" id="c974" onchange="updateProgress()"><label for="c974">Cannot query history directly without going through Subscription</label></li>
                        <li><input type="checkbox" id="c975" onchange="updateProgress()"><label for="c975">Backup/restore respects tenant boundaries</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Search &amp; Filtering</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c976" onchange="updateProgress()"><label for="c976">Search with special characters (%, _, quotes) handled safely</label></li>
                        <li><input type="checkbox" id="c977" onchange="updateProgress()"><label for="c977">Empty search returns all subscriptions (paginated)</label></li>
                        <li><input type="checkbox" id="c978" onchange="updateProgress()"><label for="c978">Filter combination: status + category + billingCycle</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Renewal Window Filter</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c979" onchange="updateProgress()"><label for="c979">renewalWindowDays=0 returns subscriptions expiring today only</label></li>
                        <li><input type="checkbox" id="c980" onchange="updateProgress()"><label for="c980">renewalWindowDays=30 includes subscriptions within 30 days</label></li>
                        <li><input type="checkbox" id="c981" onchange="updateProgress()"><label for="c981">renewalWindowDays=365 is maximum allowed value</label></li>
                        <li><input type="checkbox" id="c982" onchange="updateProgress()"><label for="c982">Filter uses Qatar timezone (UTC+3) for date calculations</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Currency Conversion</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c983" onchange="updateProgress()"><label for="c983">QAR currency requires no conversion</label></li>
                        <li><input type="checkbox" id="c984" onchange="updateProgress()"><label for="c984">USD, EUR, GBP conversion uses tenant exchange rates</label></li>
                        <li><input type="checkbox" id="c985" onchange="updateProgress()"><label for="c985">SAR, AED, KWD, BHD, OMR regional currencies supported</label></li>
                        <li><input type="checkbox" id="c986" onchange="updateProgress()"><label for="c986">Invalid currency code returns error with clear message</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Subscription Tag Generation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c987" onchange="updateProgress()"><label for="c987">Format: {ORG_PREFIX}-SUB-YYMM-SEQ (e.g., ORG-SUB-2501-001)</label></li>
                        <li><input type="checkbox" id="c988" onchange="updateProgress()"><label for="c988">Sequence resets each month per organization</label></li>
                        <li><input type="checkbox" id="c989" onchange="updateProgress()"><label for="c989">Sequence padded to 3 digits (001, 010, 100)</label></li>
                        <li><input type="checkbox" id="c990" onchange="updateProgress()"><label for="c990">Concurrent creation generates unique tags (retry logic)</label></li>
                        <li><input type="checkbox" id="c991" onchange="updateProgress()"><label for="c991">Database unique constraint [tenantId, subscriptionTag]</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Pagination</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c992" onchange="updateProgress()"><label for="c992">Page 1 is minimum valid page</label></li>
                        <li><input type="checkbox" id="c993" onchange="updateProgress()"><label for="c993">Page size 1-100 range enforced</label></li>
                        <li><input type="checkbox" id="c994" onchange="updateProgress()"><label for="c994">hasMore flag correct for last page</label></li>
                        <li><input type="checkbox" id="c995" onchange="updateProgress()"><label for="c995">totalPages calculated correctly (Math.ceil)</label></li>
                        <li><input type="checkbox" id="c996" onchange="updateProgress()"><label for="c996">Large page number returns empty results (not error)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>8.10 Module Access Control</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c997" onchange="updateProgress()"><label for="c997">GET requires authentication (401 without session)</label></li>
                        <li><input type="checkbox" id="c998" onchange="updateProgress()"><label for="c998">POST requires admin role (403 for non-admin)</label></li>
                        <li><input type="checkbox" id="c999" onchange="updateProgress()"><label for="c999">Both require 'subscriptions' module enabled</label></li>
                        <li><input type="checkbox" id="c1000" onchange="updateProgress()"><label for="c1000">Module disabled returns 403 with clear message</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-9" data-section="9">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 9</span>
                    <h3>SUPPLIERS MODULE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/validations/suppliers.test.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1001" onchange="updateProgress()"><label for="c1001">**Name required** (non-empty string)</label></li>
                        <li><input type="checkbox" id="c1002" onchange="updateProgress()"><label for="c1002">Empty name rejected</label></li>
                        <li><input type="checkbox" id="c1003" onchange="updateProgress()"><label for="c1003">**Category required** (non-empty string)</label></li>
                        <li><input type="checkbox" id="c1004" onchange="updateProgress()"><label for="c1004">Empty category rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Website Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1005" onchange="updateProgress()"><label for="c1005">**Website:** domain regex pattern</label></li>
                        <li><input type="checkbox" id="c1006" onchange="updateProgress()"><label for="c1006">Valid websites:</label></li>
                        <li><input type="checkbox" id="c1007" onchange="updateProgress()"><label for="c1007">Invalid websites rejected:</label></li>
                        <li><input type="checkbox" id="c1008" onchange="updateProgress()"><label for="c1008">Website optional (can be null/empty)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Establishment Year Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1009" onchange="updateProgress()"><label for="c1009">**Establishment year:** 1800 to current year</label></li>
                        <li><input type="checkbox" id="c1010" onchange="updateProgress()"><label for="c1010">Year before 1800 rejected (e.g., 1799)</label></li>
                        <li><input type="checkbox" id="c1011" onchange="updateProgress()"><label for="c1011">Year in future rejected (e.g., 2030)</label></li>
                        <li><input type="checkbox" id="c1012" onchange="updateProgress()"><label for="c1012">Year = 1800 accepted (boundary)</label></li>
                        <li><input type="checkbox" id="c1013" onchange="updateProgress()"><label for="c1013">Year = current year accepted (boundary)</label></li>
                        <li><input type="checkbox" id="c1014" onchange="updateProgress()"><label for="c1014">Year coerced from string (e.g., &quot;2010&quot; → 2010)</label></li>
                        <li><input type="checkbox" id="c1015" onchange="updateProgress()"><label for="c1015">Non-integer rejected (e.g., 2010.5)</label></li>
                        <li><input type="checkbox" id="c1016" onchange="updateProgress()"><label for="c1016">Establishment year optional (can be null)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Contact Information</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1017" onchange="updateProgress()"><label for="c1017">**Primary contact name required** (non-empty string)</label></li>
                        <li><input type="checkbox" id="c1018" onchange="updateProgress()"><label for="c1018">Primary contact title optional</label></li>
                        <li><input type="checkbox" id="c1019" onchange="updateProgress()"><label for="c1019">**Primary contact email:** valid email format if provided</label></li>
                        <li><input type="checkbox" id="c1020" onchange="updateProgress()"><label for="c1020">Invalid email rejected (e.g., &quot;invalid-email&quot;)</label></li>
                        <li><input type="checkbox" id="c1021" onchange="updateProgress()"><label for="c1021">**Either primary contact email OR mobile required**</label></li>
                        <li><input type="checkbox" id="c1022" onchange="updateProgress()"><label for="c1022">Primary contact mobile code required when mobile provided</label></li>
                        <li><input type="checkbox" id="c1023" onchange="updateProgress()"><label for="c1023">Secondary contact: all fields optional</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Other Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1024" onchange="updateProgress()"><label for="c1024">Address optional</label></li>
                        <li><input type="checkbox" id="c1025" onchange="updateProgress()"><label for="c1025">City optional</label></li>
                        <li><input type="checkbox" id="c1026" onchange="updateProgress()"><label for="c1026">Country optional</label></li>
                        <li><input type="checkbox" id="c1027" onchange="updateProgress()"><label for="c1027">Payment terms optional</label></li>
                        <li><input type="checkbox" id="c1028" onchange="updateProgress()"><label for="c1028">Additional info optional</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Status &amp; Auto-Generation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1029" onchange="updateProgress()"><label for="c1029">Status: defaults to PENDING (requires admin approval)</label></li>
                        <li><input type="checkbox" id="c1030" onchange="updateProgress()"><label for="c1030">Supplier code auto-generated: {ORG_PREFIX}-SUP-YYMMDD-XXX</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>9.2 Supplier Approval Workflow</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1031" onchange="updateProgress()"><label for="c1031">Admin can approve supplier</label></li>
                        <li><input type="checkbox" id="c1032" onchange="updateProgress()"><label for="c1032">Requires approver ID</label></li>
                        <li><input type="checkbox" id="c1033" onchange="updateProgress()"><label for="c1033">Status changes: PENDING → APPROVED</label></li>
                        <li><input type="checkbox" id="c1034" onchange="updateProgress()"><label for="c1034">Records approvedBy and approvedAt</label></li>
                        <li><input type="checkbox" id="c1035" onchange="updateProgress()"><label for="c1035">Admin can reject supplier</label></li>
                        <li><input type="checkbox" id="c1036" onchange="updateProgress()"><label for="c1036">Rejection reason required</label></li>
                        <li><input type="checkbox" id="c1037" onchange="updateProgress()"><label for="c1037">Status changes: PENDING → REJECTED</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>9.3 Supplier Visibility by Role</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1038" onchange="updateProgress()"><label for="c1038">EMPLOYEE: only sees APPROVED suppliers</label></li>
                        <li><input type="checkbox" id="c1039" onchange="updateProgress()"><label for="c1039">ADMIN/OWNER: sees all suppliers</label></li>
                        <li><input type="checkbox" id="c1040" onchange="updateProgress()"><label for="c1040">ADMIN can filter by status</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>9.4 Supplier Engagement Logging</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1041" onchange="updateProgress()"><label for="c1041">Date required (ISO)</label></li>
                        <li><input type="checkbox" id="c1042" onchange="updateProgress()"><label for="c1042">Notes required</label></li>
                        <li><input type="checkbox" id="c1043" onchange="updateProgress()"><label for="c1043">Rating optional (1-5 stars)</label></li>
                        <li><input type="checkbox" id="c1044" onchange="updateProgress()"><label for="c1044">Created by ID required</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>9.5 Supplier Search &amp; Filtering</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1045" onchange="updateProgress()"><label for="c1045">Search by name</label></li>
                        <li><input type="checkbox" id="c1046" onchange="updateProgress()"><label for="c1046">Search by supplier code</label></li>
                        <li><input type="checkbox" id="c1047" onchange="updateProgress()"><label for="c1047">Search by category</label></li>
                        <li><input type="checkbox" id="c1048" onchange="updateProgress()"><label for="c1048">Search by city</label></li>
                        <li><input type="checkbox" id="c1049" onchange="updateProgress()"><label for="c1049">Search by country</label></li>
                        <li><input type="checkbox" id="c1050" onchange="updateProgress()"><label for="c1050">Filter by status</label></li>
                        <li><input type="checkbox" id="c1051" onchange="updateProgress()"><label for="c1051">Filter by category</label></li>
                        <li><input type="checkbox" id="c1052" onchange="updateProgress()"><label for="c1052">Pagination (max 100)</label></li>
                        <li><input type="checkbox" id="c1053" onchange="updateProgress()"><label for="c1053">Sort by: name, category, suppCode, createdAt</label></li>
                        <li><input type="checkbox" id="c1054" onchange="updateProgress()"><label for="c1054">Order: asc, desc</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-10" data-section="10">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 10</span>
                    <h3>PURCHASE REQUESTS MODULE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/validations/purchase-request.test.ts tests/unit/lib/validations/purchase-request.test.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1055" onchange="updateProgress()"><label for="c1055">**Title required:** 1-200 characters</label></li>
                        <li><input type="checkbox" id="c1056" onchange="updateProgress()"><label for="c1056">Empty title rejected</label></li>
                        <li><input type="checkbox" id="c1057" onchange="updateProgress()"><label for="c1057">Title &gt; 200 chars rejected</label></li>
                        <li><input type="checkbox" id="c1058" onchange="updateProgress()"><label for="c1058">**Items required:** minimum 1 item</label></li>
                        <li><input type="checkbox" id="c1059" onchange="updateProgress()"><label for="c1059">Empty items array rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Enums - Purchase Type</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1060" onchange="updateProgress()"><label for="c1060">Valid types: HARDWARE, SOFTWARE_SUBSCRIPTION, SERVICES, OFFICE_SUPPLIES, MARKETING, TRAVEL, TRAINING, OTHER</label></li>
                        <li><input type="checkbox" id="c1061" onchange="updateProgress()"><label for="c1061">Invalid type rejected (e.g., &quot;INVALID_TYPE&quot;)</label></li>
                        <li><input type="checkbox" id="c1062" onchange="updateProgress()"><label for="c1062">Defaults to OTHER</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Enums - Priority</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1063" onchange="updateProgress()"><label for="c1063">Valid priorities: LOW, MEDIUM, HIGH, URGENT</label></li>
                        <li class="critical"><input type="checkbox" id="c1064" onchange="updateProgress()"><label for="c1064">Invalid priority rejected (e.g., &quot;CRITICAL&quot;)</label></li>
                        <li><input type="checkbox" id="c1065" onchange="updateProgress()"><label for="c1065">Defaults to MEDIUM</label></li>
                    </ul>
                </div>

                <!-- Cost Type removed from UI - defaults to OPERATING_COST server-side -->

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Enums - Payment Mode</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1072" onchange="updateProgress()"><label for="c1072">Valid modes: BANK_TRANSFER, CREDIT_CARD, CASH, CHEQUE, INTERNAL_TRANSFER</label></li>
                        <li><input type="checkbox" id="c1073" onchange="updateProgress()"><label for="c1073">Invalid payment mode rejected (e.g., &quot;CRYPTO&quot;)</label></li>
                        <li><input type="checkbox" id="c1074" onchange="updateProgress()"><label for="c1074">Defaults to BANK_TRANSFER</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1075" onchange="updateProgress()"><label for="c1075">Description optional</label></li>
                        <li><input type="checkbox" id="c1076" onchange="updateProgress()"><label for="c1076">Justification optional</label></li>
                        <li><input type="checkbox" id="c1077" onchange="updateProgress()"><label for="c1077">Needed by date optional (ISO date)</label></li>
                        <li><input type="checkbox" id="c1078" onchange="updateProgress()"><label for="c1078">Vendor name optional</label></li>
                        <li><input type="checkbox" id="c1079" onchange="updateProgress()"><label for="c1079">Vendor contact optional</label></li>
                        <li><input type="checkbox" id="c1080" onchange="updateProgress()"><label for="c1080">**Vendor email:** valid email format if provided</label></li>
                        <li><input type="checkbox" id="c1081" onchange="updateProgress()"><label for="c1081">Invalid vendor email rejected (e.g., &quot;invalid-email&quot;)</label></li>
                        <li><input type="checkbox" id="c1082" onchange="updateProgress()"><label for="c1082">Empty vendor email accepted</label></li>
                        <li><input type="checkbox" id="c1083" onchange="updateProgress()"><label for="c1083">Additional notes optional</label></li>
                        <li><input type="checkbox" id="c1084" onchange="updateProgress()"><label for="c1084">Currency: 1-5 chars (default QAR)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1085" onchange="updateProgress()"><label for="c1085">**Description required:** 1-500 characters</label></li>
                        <li><input type="checkbox" id="c1086" onchange="updateProgress()"><label for="c1086">Empty description rejected</label></li>
                        <li><input type="checkbox" id="c1087" onchange="updateProgress()"><label for="c1087">Description &gt; 500 chars rejected</label></li>
                        <li><input type="checkbox" id="c1088" onchange="updateProgress()"><label for="c1088">**Quantity required:** integer minimum 1</label></li>
                        <li><input type="checkbox" id="c1089" onchange="updateProgress()"><label for="c1089">Quantity = 0 rejected</label></li>
                        <li><input type="checkbox" id="c1090" onchange="updateProgress()"><label for="c1090">Negative quantity rejected</label></li>
                        <li><input type="checkbox" id="c1091" onchange="updateProgress()"><label for="c1091">**Unit price required:** minimum 0</label></li>
                        <li><input type="checkbox" id="c1092" onchange="updateProgress()"><label for="c1092">Negative unit price rejected</label></li>
                        <li><input type="checkbox" id="c1093" onchange="updateProgress()"><label for="c1093">Zero unit price accepted (for free samples)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1094" onchange="updateProgress()"><label for="c1094">Currency: defaults to QAR</label></li>
                        <li><input type="checkbox" id="c1095" onchange="updateProgress()"><label for="c1095">Category optional</label></li>
                        <li><input type="checkbox" id="c1096" onchange="updateProgress()"><label for="c1096">Supplier optional</label></li>
                        <li><input type="checkbox" id="c1097" onchange="updateProgress()"><label for="c1097">Notes optional</label></li>
                        <li><input type="checkbox" id="c1098" onchange="updateProgress()"><label for="c1098">Billing cycle: ONE_TIME, MONTHLY, YEARLY (default ONE_TIME)</label></li>
                        <li><input type="checkbox" id="c1099" onchange="updateProgress()"><label for="c1099">Invalid billing cycle rejected (e.g., &quot;WEEKLY&quot;)</label></li>
                        <li><input type="checkbox" id="c1100" onchange="updateProgress()"><label for="c1100">Duration months: integer min 1 (for recurring)</label></li>
                        <li><input type="checkbox" id="c1101" onchange="updateProgress()"><label for="c1101">Amount per cycle: min 0 (for recurring)</label></li>
                        <li><input type="checkbox" id="c1102" onchange="updateProgress()"><label for="c1102">**Product URL:** valid URL if provided</label></li>
                        <li><input type="checkbox" id="c1103" onchange="updateProgress()"><label for="c1103">Invalid product URL rejected (e.g., &quot;not-a-valid-url&quot;)</label></li>
                        <li><input type="checkbox" id="c1104" onchange="updateProgress()"><label for="c1104">Empty product URL accepted</label></li>
                        <li><input type="checkbox" id="c1105" onchange="updateProgress()"><label for="c1105">Valid product URL accepted (e.g., &quot;https://example.com/product&quot;)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>10.3 Purchase Request Calculations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1106" onchange="updateProgress()"><label for="c1106">Auto-calculates totalAmount</label></li>
                        <li><input type="checkbox" id="c1107" onchange="updateProgress()"><label for="c1107">Auto-calculates totalAmountQAR</label></li>
                        <li><input type="checkbox" id="c1108" onchange="updateProgress()"><label for="c1108">Separate tracking: totalOneTime, totalMonthly, totalContractValue</label></li>
                        <li><input type="checkbox" id="c1109" onchange="updateProgress()"><label for="c1109">Currency conversion support</label></li>
                        <li><input type="checkbox" id="c1110" onchange="updateProgress()"><label for="c1110">Request number auto-generation</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>10.4 Purchase Request Status Workflow</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1111" onchange="updateProgress()"><label for="c1111">PENDING (initial state)</label></li>
                        <li><input type="checkbox" id="c1112" onchange="updateProgress()"><label for="c1112">PENDING → SUBMITTED (submit for approval)</label></li>
                        <li><input type="checkbox" id="c1113" onchange="updateProgress()"><label for="c1113">SUBMITTED → UNDER_REVIEW</label></li>
                        <li><input type="checkbox" id="c1114" onchange="updateProgress()"><label for="c1114">UNDER_REVIEW → APPROVED</label></li>
                        <li><input type="checkbox" id="c1115" onchange="updateProgress()"><label for="c1115">UNDER_REVIEW → REJECTED</label></li>
                        <li><input type="checkbox" id="c1116" onchange="updateProgress()"><label for="c1116">APPROVED → COMPLETED</label></li>
                        <li><input type="checkbox" id="c1117" onchange="updateProgress()"><label for="c1117">Review notes optional</label></li>
                        <li><input type="checkbox" id="c1118" onchange="updateProgress()"><label for="c1118">Completion notes optional</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>10.5 Purchase Request Updates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1119" onchange="updateProgress()"><label for="c1119">Only editable in PENDING status</label></li>
                        <li><input type="checkbox" id="c1120" onchange="updateProgress()"><label for="c1120">Requester or Admin can edit</label></li>
                        <li><input type="checkbox" id="c1121" onchange="updateProgress()"><label for="c1121">Recalculates totals if items change</label></li>
                        <li><input type="checkbox" id="c1122" onchange="updateProgress()"><label for="c1122">Atomic: deletes old items, creates new</label></li>
                        <li><input type="checkbox" id="c1123" onchange="updateProgress()"><label for="c1123">Creates history entry</label></li>
                        <li><input type="checkbox" id="c1124" onchange="updateProgress()"><label for="c1124">Logs changes</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>10.6 Purchase Request Deletion</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1125" onchange="updateProgress()"><label for="c1125">Only PENDING can be deleted</label></li>
                        <li><input type="checkbox" id="c1126" onchange="updateProgress()"><label for="c1126">Requester or Admin can delete</label></li>
                        <li><input type="checkbox" id="c1127" onchange="updateProgress()"><label for="c1127">Cascades items and history</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>10.7 Purchase Request Queries</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1128" onchange="updateProgress()"><label for="c1128">Filter by status</label></li>
                        <li><input type="checkbox" id="c1129" onchange="updateProgress()"><label for="c1129">Filter by priority</label></li>
                        <li><input type="checkbox" id="c1130" onchange="updateProgress()"><label for="c1130">Filter by purchase type</label></li>
                        <li><input type="checkbox" id="c1132" onchange="updateProgress()"><label for="c1132">Non-admin: only see own requests</label></li>
                        <li><input type="checkbox" id="c1133" onchange="updateProgress()"><label for="c1133">Pagination with sorting</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-11" data-section="11">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 11</span>
                    <h3>APPROVAL WORKFLOWS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/approvals/approval-engine.test.ts tests/unit/lib/approvals/approval-engine.test.ts tests/unit/lib/approvals/approval-engine.test.ts tests/unit/lib/approvals/approval-engine.test.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>11.1 Approval Policy Creation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1134" onchange="updateProgress()"><label for="c1134">Name required (1-100 chars)</label></li>
                        <li><input type="checkbox" id="c1135" onchange="updateProgress()"><label for="c1135">Module: LEAVE_REQUEST, PURCHASE_REQUEST, ASSET_REQUEST</label></li>
                        <li><input type="checkbox" id="c1136" onchange="updateProgress()"><label for="c1136">Is active: boolean (default true)</label></li>
                        <li><input type="checkbox" id="c1137" onchange="updateProgress()"><label for="c1137">Min amount: non-negative (for purchase/asset)</label></li>
                        <li><input type="checkbox" id="c1138" onchange="updateProgress()"><label for="c1138">Max amount: non-negative (for purchase/asset)</label></li>
                        <li><input type="checkbox" id="c1139" onchange="updateProgress()"><label for="c1139">Min days: integer non-negative (for leave)</label></li>
                        <li><input type="checkbox" id="c1140" onchange="updateProgress()"><label for="c1140">Max days: integer non-negative (for leave)</label></li>
                        <li><input type="checkbox" id="c1141" onchange="updateProgress()"><label for="c1141">Priority: integer (default 0), higher = higher priority</label></li>
                        <li><input type="checkbox" id="c1142" onchange="updateProgress()"><label for="c1142">Levels: 1-5 approval levels required</label></li>
                        <li><input type="checkbox" id="c1143" onchange="updateProgress()"><label for="c1143">Level order: 1-5 integer per level</label></li>
                        <li><input type="checkbox" id="c1144" onchange="updateProgress()"><label for="c1144">Approver role: MANAGER, HR_MANAGER, FINANCE_MANAGER, DIRECTOR</label></li>
                        <li><input type="checkbox" id="c1145" onchange="updateProgress()"><label for="c1145">Leave policies require days threshold</label></li>
                        <li><input type="checkbox" id="c1146" onchange="updateProgress()"><label for="c1146">Purchase/asset policies require amount threshold</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>11.1a Policy Matching Logic</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1147" onchange="updateProgress()"><label for="c1147">**No policies exist:** returns null</label></li>
                        <li><input type="checkbox" id="c1148" onchange="updateProgress()"><label for="c1148">Match leave request policy by days threshold</label></li>
                        <li><input type="checkbox" id="c1149" onchange="updateProgress()"><label for="c1149">Days exceed maxDays: no match (returns null)</label></li>
                        <li><input type="checkbox" id="c1150" onchange="updateProgress()"><label for="c1150">Match purchase request policy by amount threshold</label></li>
                        <li><input type="checkbox" id="c1151" onchange="updateProgress()"><label for="c1151">Amount below minAmount: no match (returns null)</label></li>
                        <li><input type="checkbox" id="c1152" onchange="updateProgress()"><label for="c1152">First active policy returned when no thresholds specified</label></li>
                        <li><input type="checkbox" id="c1153" onchange="updateProgress()"><label for="c1153">Filter by tenantId when provided</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Step Initialization</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1154" onchange="updateProgress()"><label for="c1154">Creates approval steps for each policy level</label></li>
                        <li><input type="checkbox" id="c1155" onchange="updateProgress()"><label for="c1155">Initial status: PENDING</label></li>
                        <li><input type="checkbox" id="c1156" onchange="updateProgress()"><label for="c1156">Ordered by levelOrder</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>User Authority Check (canUserApprove)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1157" onchange="updateProgress()"><label for="c1157">ADMIN can approve any step</label></li>
                        <li><input type="checkbox" id="c1158" onchange="updateProgress()"><label for="c1158">User with matching approvalRole can approve</label></li>
                        <li><input type="checkbox" id="c1159" onchange="updateProgress()"><label for="c1159">User without matching role: rejected with reason</label></li>
                        <li><input type="checkbox" id="c1160" onchange="updateProgress()"><label for="c1160">Non-existent user: &quot;Member not found&quot;</label></li>
                        <li><input type="checkbox" id="c1161" onchange="updateProgress()"><label for="c1161">**User with delegation can approve** (viaDelegation: true)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Process Approval</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1162" onchange="updateProgress()"><label for="c1162">APPROVE: updates step status to APPROVED</label></li>
                        <li><input type="checkbox" id="c1163" onchange="updateProgress()"><label for="c1163">APPROVE: records approverId and notes</label></li>
                        <li><input type="checkbox" id="c1164" onchange="updateProgress()"><label for="c1164">If no more pending steps: chain complete, allApproved = true</label></li>
                        <li><input type="checkbox" id="c1165" onchange="updateProgress()"><label for="c1165">REJECT: updates step status to REJECTED</label></li>
                        <li><input type="checkbox" id="c1166" onchange="updateProgress()"><label for="c1166">**REJECT: skips all remaining steps** (status = SKIPPED)</label></li>
                        <li><input type="checkbox" id="c1167" onchange="updateProgress()"><label for="c1167">**Step not found:** throws &quot;Approval step not found&quot;</label></li>
                        <li><input type="checkbox" id="c1168" onchange="updateProgress()"><label for="c1168">**Already processed step:** throws &quot;Step already approved&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>11.3 Approval Chain Completion</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1169" onchange="updateProgress()"><label for="c1169">If all steps approved → entity APPROVED</label></li>
                        <li><input type="checkbox" id="c1170" onchange="updateProgress()"><label for="c1170">LEAVE_REQUEST: updates balance atomically</label></li>
                        <li><input type="checkbox" id="c1171" onchange="updateProgress()"><label for="c1171">LEAVE_REQUEST: marks hajjLeaveTaken if applicable</label></li>
                        <li><input type="checkbox" id="c1172" onchange="updateProgress()"><label for="c1172">PURCHASE_REQUEST: sets reviewedBy, reviewedAt</label></li>
                        <li><input type="checkbox" id="c1173" onchange="updateProgress()"><label for="c1173">ASSET_REQUEST: sets processedBy, processedAt</label></li>
                        <li><input type="checkbox" id="c1174" onchange="updateProgress()"><label for="c1174">Sends notification to requester</label></li>
                        <li><input type="checkbox" id="c1175" onchange="updateProgress()"><label for="c1175">If not complete → notifies next approver</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>11.4 Approval Rejection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1176" onchange="updateProgress()"><label for="c1176">Step status → REJECTED</label></li>
                        <li><input type="checkbox" id="c1177" onchange="updateProgress()"><label for="c1177">Entity returns to previous status</label></li>
                        <li><input type="checkbox" id="c1178" onchange="updateProgress()"><label for="c1178">Requester notified</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>11.5 Admin Bypass</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1179" onchange="updateProgress()"><label for="c1179">Admin can approve all pending steps at once</label></li>
                        <li><input type="checkbox" id="c1180" onchange="updateProgress()"><label for="c1180">Default notes: &quot;Approved by admin (bypass)&quot;</label></li>
                        <li><input type="checkbox" id="c1181" onchange="updateProgress()"><label for="c1181">Custom notes supported</label></li>
                        <li><input type="checkbox" id="c1182" onchange="updateProgress()"><label for="c1182">All PENDING steps become APPROVED</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>hasApprovalChain</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1183" onchange="updateProgress()"><label for="c1183">Returns true when steps exist</label></li>
                        <li><input type="checkbox" id="c1184" onchange="updateProgress()"><label for="c1184">Returns false when no steps exist</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>isFullyApproved</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1185" onchange="updateProgress()"><label for="c1185">Returns true when ALL steps APPROVED</label></li>
                        <li><input type="checkbox" id="c1186" onchange="updateProgress()"><label for="c1186">Returns false when any step PENDING</label></li>
                        <li><input type="checkbox" id="c1187" onchange="updateProgress()"><label for="c1187">Returns false when no steps exist</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>wasRejected</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1188" onchange="updateProgress()"><label for="c1188">Returns true when any step REJECTED</label></li>
                        <li><input type="checkbox" id="c1189" onchange="updateProgress()"><label for="c1189">Returns false when no step rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>getApprovalChainSummary</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1190" onchange="updateProgress()"><label for="c1190">NOT_STARTED: no steps exist</label></li>
                        <li><input type="checkbox" id="c1191" onchange="updateProgress()"><label for="c1191">PENDING: some steps pending, shows currentStep</label></li>
                        <li><input type="checkbox" id="c1192" onchange="updateProgress()"><label for="c1192">APPROVED: all steps approved</label></li>
                        <li><input type="checkbox" id="c1193" onchange="updateProgress()"><label for="c1193">REJECTED: any step rejected, shows rejecting step</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>getPendingApprovalsForUser</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1194" onchange="updateProgress()"><label for="c1194">ADMIN: returns all pending approvals</label></li>
                        <li><input type="checkbox" id="c1195" onchange="updateProgress()"><label for="c1195">Non-existent user: returns empty array</label></li>
                        <li><input type="checkbox" id="c1196" onchange="updateProgress()"><label for="c1196">Includes delegated approvals</label></li>
                        <li><input type="checkbox" id="c1197" onchange="updateProgress()"><label for="c1197">Filter by tenantId when provided</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-12" data-section="12">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 12</span>
                    <h3>DELEGATIONS MODULE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/approvals/delegation.test.ts tests/unit/approvals/delegation.test.ts tests/unit/approvals/delegation.test.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1198" onchange="updateProgress()"><label for="c1198">Delegatee ID required (CUID format)</label></li>
                        <li><input type="checkbox" id="c1199" onchange="updateProgress()"><label for="c1199">Start date required (datetime)</label></li>
                        <li><input type="checkbox" id="c1200" onchange="updateProgress()"><label for="c1200">End date required (datetime)</label></li>
                        <li><input type="checkbox" id="c1201" onchange="updateProgress()"><label for="c1201">**End date must be after start date**</label></li>
                        <li><input type="checkbox" id="c1202" onchange="updateProgress()"><label for="c1202">Reason optional (max 255 chars)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Business Rules</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1203" onchange="updateProgress()"><label for="c1203">Current user must have approver role</label></li>
                        <li><input type="checkbox" id="c1204" onchange="updateProgress()"><label for="c1204">Delegatee must be ADMIN role</label></li>
                        <li><input type="checkbox" id="c1205" onchange="updateProgress()"><label for="c1205">Delegatee must exist in same tenant</label></li>
                        <li><input type="checkbox" id="c1206" onchange="updateProgress()"><label for="c1206">**Cannot delegate to self** (isSelfDelegation check)</label></li>
                        <li><input type="checkbox" id="c1207" onchange="updateProgress()"><label for="c1207">**No overlapping active delegations allowed**</label></li>
                        <li><input type="checkbox" id="c1208" onchange="updateProgress()"><label for="c1208">isActive = true on creation</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Date Validations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1209" onchange="updateProgress()"><label for="c1209">**Start date cannot be in the past**</label></li>
                        <li><input type="checkbox" id="c1210" onchange="updateProgress()"><label for="c1210">**Maximum delegation period: 90 days**</label></li>
                        <li><input type="checkbox" id="c1211" onchange="updateProgress()"><label for="c1211">Exceeding 90 days rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Overlap Detection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1212" onchange="updateProgress()"><label for="c1212">Fully overlapping delegations: rejected</label></li>
                        <li><input type="checkbox" id="c1213" onchange="updateProgress()"><label for="c1213">Partially overlapping delegations: rejected</label></li>
                        <li><input type="checkbox" id="c1214" onchange="updateProgress()"><label for="c1214">Contained delegation: rejected</label></li>
                        <li><input type="checkbox" id="c1215" onchange="updateProgress()"><label for="c1215">**Adjacent delegations allowed** (end day 1, start day 2)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Delegatee Selection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1216" onchange="updateProgress()"><label for="c1216">Inactive member cannot be delegatee</label></li>
                        <li><input type="checkbox" id="c1217" onchange="updateProgress()"><label for="c1217">Same department optionally enforced</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>12.2 Delegation Visibility</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1218" onchange="updateProgress()"><label for="c1218">Tenant-scoped always</label></li>
                        <li><input type="checkbox" id="c1219" onchange="updateProgress()"><label for="c1219">Non-admin: only own delegations (as delegator or delegatee)</label></li>
                        <li><input type="checkbox" id="c1220" onchange="updateProgress()"><label for="c1220">Admin: can see all with ?all=true</label></li>
                        <li><input type="checkbox" id="c1221" onchange="updateProgress()"><label for="c1221">Includes delegator &amp; delegatee details</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>12.3 Delegation Updates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1222" onchange="updateProgress()"><label for="c1222">Can update start/end dates</label></li>
                        <li><input type="checkbox" id="c1223" onchange="updateProgress()"><label for="c1223">Can update reason</label></li>
                        <li><input type="checkbox" id="c1224" onchange="updateProgress()"><label for="c1224">Can deactivate (isActive = false)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>12.4 Delegation Activity Check</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1225" onchange="updateProgress()"><label for="c1225">**Currently active:** isActive=true AND checkDate between start/end</label></li>
                        <li><input type="checkbox" id="c1226" onchange="updateProgress()"><label for="c1226">Not yet started: returns false</label></li>
                        <li><input type="checkbox" id="c1227" onchange="updateProgress()"><label for="c1227">Expired (past end date): returns false</label></li>
                        <li><input type="checkbox" id="c1228" onchange="updateProgress()"><label for="c1228">Deactivated: returns false (regardless of dates)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>12.5 Delegation Duration</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1229" onchange="updateProgress()"><label for="c1229">Single day delegation: 1 day (same start/end)</label></li>
                        <li><input type="checkbox" id="c1230" onchange="updateProgress()"><label for="c1230">Multi-day: counts inclusive (both start and end)</label></li>
                        <li><input type="checkbox" id="c1231" onchange="updateProgress()"><label for="c1231">Example: Jan 15 - Jan 20 = 6 days</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>12.6 Delegation Notifications</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1232" onchange="updateProgress()"><label for="c1232">DELEGATION_CREATED: sent to delegatee</label></li>
                        <li><input type="checkbox" id="c1233" onchange="updateProgress()"><label for="c1233">DELEGATION_REVOKED: sent to delegatee</label></li>
                        <li><input type="checkbox" id="c1234" onchange="updateProgress()"><label for="c1234">DELEGATION_STARTING: reminder before start</label></li>
                        <li><input type="checkbox" id="c1235" onchange="updateProgress()"><label for="c1235">DELEGATION_ENDING: reminder before end</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>12.7 Delegation Audit Trail</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1236" onchange="updateProgress()"><label for="c1236">DELEGATION_CREATED: logs delegateeId, reason</label></li>
                        <li><input type="checkbox" id="c1237" onchange="updateProgress()"><label for="c1237">DELEGATION_REVOKED: logs revokedEarly flag</label></li>
                        <li><input type="checkbox" id="c1238" onchange="updateProgress()"><label for="c1238">Timestamp recorded on all actions</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>12.8 Delegation Deactivation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1239" onchange="updateProgress()"><label for="c1239">Sets isActive = false immediately</label></li>
                        <li><input type="checkbox" id="c1240" onchange="updateProgress()"><label for="c1240">Stops forwarding approvals</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-13" data-section="13">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 13</span>
                    <h3>NOTIFICATIONS MODULE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/core/email-branding.test.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>13.1 Notification Listing</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1241" onchange="updateProgress()"><label for="c1241">Pagination: page, pageSize (default 20, max 100)</label></li>
                        <li><input type="checkbox" id="c1242" onchange="updateProgress()"><label for="c1242">Filter by isRead</label></li>
                        <li><input type="checkbox" id="c1243" onchange="updateProgress()"><label for="c1243">Tenant-scoped only</label></li>
                        <li><input type="checkbox" id="c1244" onchange="updateProgress()"><label for="c1244">Ordered newest first</label></li>
                        <li><input type="checkbox" id="c1245" onchange="updateProgress()"><label for="c1245">Returns pagination metadata</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>13.2 Notification Operations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1246" onchange="updateProgress()"><label for="c1246">Mark all as read (bulk)</label></li>
                        <li><input type="checkbox" id="c1247" onchange="updateProgress()"><label for="c1247">Mark single as read</label></li>
                        <li><input type="checkbox" id="c1248" onchange="updateProgress()"><label for="c1248">Get unread count</label></li>
                        <li><input type="checkbox" id="c1249" onchange="updateProgress()"><label for="c1249">readAt timestamp recorded</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>13.3 Notification Templates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1250" onchange="updateProgress()"><label for="c1250">assetAssigned: Direct assignment</label></li>
                        <li><input type="checkbox" id="c1251" onchange="updateProgress()"><label for="c1251">assetAssignmentPending: Awaiting acceptance</label></li>
                        <li><input type="checkbox" id="c1252" onchange="updateProgress()"><label for="c1252">assetUnassigned: Reassigned away</label></li>
                        <li><input type="checkbox" id="c1253" onchange="updateProgress()"><label for="c1253">assetRequestApproved</label></li>
                        <li><input type="checkbox" id="c1254" onchange="updateProgress()"><label for="c1254">leaveApproved</label></li>
                        <li><input type="checkbox" id="c1255" onchange="updateProgress()"><label for="c1255">leaveRejected</label></li>
                        <li><input type="checkbox" id="c1256" onchange="updateProgress()"><label for="c1256">purchaseRequestApproved</label></li>
                        <li><input type="checkbox" id="c1257" onchange="updateProgress()"><label for="c1257">purchaseRequestRejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>13.4 Notification Delivery</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1258" onchange="updateProgress()"><label for="c1258">In-app notifications (bell icon)</label></li>
                        <li><input type="checkbox" id="c1259" onchange="updateProgress()"><label for="c1259">Email notifications (when applicable)</label></li>
                        <li><input type="checkbox" id="c1260" onchange="updateProgress()"><label for="c1260">Fire-and-forget pattern (non-blocking)</label></li>
                        <li><input type="checkbox" id="c1261" onchange="updateProgress()"><label for="c1261">Admin fallback on email failure</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Default Brand Color</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1262" onchange="updateProgress()"><label for="c1262">**Default color:** #3B82F6 (blue)</label></li>
                        <li><input type="checkbox" id="c1263" onchange="updateProgress()"><label for="c1263">Used when no primaryColor provided</label></li>
                        <li><input type="checkbox" id="c1264" onchange="updateProgress()"><label for="c1264">Used when primaryColor is undefined</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Custom Brand Color Application</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1265" onchange="updateProgress()"><label for="c1265">Custom brand color applied to email header background</label></li>
                        <li><input type="checkbox" id="c1266" onchange="updateProgress()"><label for="c1266">Supports any hex color: #FF5733, #DC2626, #16A34A, #9333EA, etc.</label></li>
                        <li><input type="checkbox" id="c1267" onchange="updateProgress()"><label for="c1267">6-digit hex format: #AABBCC</label></li>
                        <li><input type="checkbox" id="c1268" onchange="updateProgress()"><label for="c1268">3-digit hex format: #ABC</label></li>
                        <li><input type="checkbox" id="c1269" onchange="updateProgress()"><label for="c1269">Lowercase hex accepted: #aabbcc</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Email HTML Structure</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1270" onchange="updateProgress()"><label for="c1270">Valid HTML5 document structure</label></li>
                        <li><input type="checkbox" id="c1271" onchange="updateProgress()"><label for="c1271">Table-based layout for email client compatibility</label></li>
                        <li><input type="checkbox" id="c1272" onchange="updateProgress()"><label for="c1272">Max-width: 600px for proper rendering</label></li>
                        <li><input type="checkbox" id="c1273" onchange="updateProgress()"><label for="c1273">Viewport meta tag for mobile</label></li>
                        <li><input type="checkbox" id="c1274" onchange="updateProgress()"><label for="c1274">`role=&quot;presentation&quot;` on layout tables</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Organization Name Display</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1275" onchange="updateProgress()"><label for="c1275">Organization name in header (white text on brand color)</label></li>
                        <li><input type="checkbox" id="c1276" onchange="updateProgress()"><label for="c1276">Organization name in footer (&quot;This is an automated message from {OrgName}&quot;)</label></li>
                        <li><input type="checkbox" id="c1277" onchange="updateProgress()"><label for="c1277">Special characters preserved: &quot;O'Brien &amp; Sons&quot;</label></li>
                        <li><input type="checkbox" id="c1278" onchange="updateProgress()"><label for="c1278">Unicode characters supported: Arabic, Chinese, etc.</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Content Injection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1279" onchange="updateProgress()"><label for="c1279">HTML content preserved in email body</label></li>
                        <li><input type="checkbox" id="c1280" onchange="updateProgress()"><label for="c1280">Lists, paragraphs, links maintained</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Accessibility</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1281" onchange="updateProgress()"><label for="c1281">White text (#ffffff) on colored header for contrast</label></li>
                        <li><input type="checkbox" id="c1282" onchange="updateProgress()"><label for="c1282">Gray text (#888888) in footer for readability</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Email Template Types</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1283" onchange="updateProgress()"><label for="c1283">Welcome email applies brand color</label></li>
                        <li><input type="checkbox" id="c1284" onchange="updateProgress()"><label for="c1284">Asset assignment email applies brand color</label></li>
                        <li><input type="checkbox" id="c1285" onchange="updateProgress()"><label for="c1285">Leave request email applies brand color</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-14" data-section="14">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 14</span>
                    <h3>ORGANIZATIONS &amp; TEAM MANAGEMENT</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                

                <div class="subsection">
                    <div class="subsection-header">
                        <span>14.1 Organization Creation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1286" onchange="updateProgress()"><label for="c1286">Name required (2-100 chars)</label></li>
                        <li><input type="checkbox" id="c1287" onchange="updateProgress()"><label for="c1287">Slug optional (3-63 chars, alphanumeric + hyphens)</label></li>
                        <li><input type="checkbox" id="c1288" onchange="updateProgress()"><label for="c1288">Slug auto-generated from name if not provided</label></li>
                        <li><input type="checkbox" id="c1289" onchange="updateProgress()"><label for="c1289">Slug sanitized (alphanumeric + hyphens only)</label></li>
                        <li><input type="checkbox" id="c1290" onchange="updateProgress()"><label for="c1290">Duplicate slug gets counter suffix</label></li>
                        <li><input type="checkbox" id="c1291" onchange="updateProgress()"><label for="c1291">Timezone optional (default provided)</label></li>
                        <li><input type="checkbox" id="c1292" onchange="updateProgress()"><label for="c1292">Currency optional (default QAR)</label></li>
                        <li><input type="checkbox" id="c1293" onchange="updateProgress()"><label for="c1293">Creates owner as TeamMember with ADMIN role</label></li>
                        <li><input type="checkbox" id="c1294" onchange="updateProgress()"><label for="c1294">Creates OrganizationSetupProgress tracker</label></li>
                        <li><input type="checkbox" id="c1295" onchange="updateProgress()"><label for="c1295">FREE tier with default limits (5 users, 50 assets)</label></li>
                        <li><input type="checkbox" id="c1296" onchange="updateProgress()"><label for="c1296">Slug taken returns 409</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>14.2 Organization Settings</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1297" onchange="updateProgress()"><label for="c1297">Admin can update name</label></li>
                        <li><input type="checkbox" id="c1298" onchange="updateProgress()"><label for="c1298">Admin can update timezone</label></li>
                        <li><input type="checkbox" id="c1299" onchange="updateProgress()"><label for="c1299">Admin can update currency</label></li>
                        <li><input type="checkbox" id="c1300" onchange="updateProgress()"><label for="c1300">Admin can update primary color (branding)</label></li>
                        <li><input type="checkbox" id="c1301" onchange="updateProgress()"><label for="c1301">Admin can update max users (if tier allows)</label></li>
                        <li><input type="checkbox" id="c1302" onchange="updateProgress()"><label for="c1302">Admin can update max assets (if tier allows)</label></li>
                        <li><input type="checkbox" id="c1303" onchange="updateProgress()"><label for="c1303">Owner can access billing settings</label></li>
                        <li><input type="checkbox" id="c1304" onchange="updateProgress()"><label for="c1304">Owner can transfer ownership</label></li>
                        <li><input type="checkbox" id="c1305" onchange="updateProgress()"><label for="c1305">Owner can delete organization</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>14.3 Team Member Management</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1306" onchange="updateProgress()"><label for="c1306">Admin can view all members</label></li>
                        <li><input type="checkbox" id="c1307" onchange="updateProgress()"><label for="c1307">Status detection: credentialsPending, ssoPending, isExpired</label></li>
                        <li><input type="checkbox" id="c1308" onchange="updateProgress()"><label for="c1308">Invitation expiry tracking</label></li>
                        <li><input type="checkbox" id="c1309" onchange="updateProgress()"><label for="c1309">Auth config display (allowed methods, SSO flags)</label></li>
                        <li><input type="checkbox" id="c1310" onchange="updateProgress()"><label for="c1310">Custom OAuth availability</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>14.4 Team Member Invitation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1311" onchange="updateProgress()"><label for="c1311">Admin only can invite</label></li>
                        <li><input type="checkbox" id="c1312" onchange="updateProgress()"><label for="c1312">Email format validation</label></li>
                        <li><input type="checkbox" id="c1313" onchange="updateProgress()"><label for="c1313">Cannot invite existing member</label></li>
                        <li><input type="checkbox" id="c1314" onchange="updateProgress()"><label for="c1314">Cannot invite pending invitation</label></li>
                        <li><input type="checkbox" id="c1315" onchange="updateProgress()"><label for="c1315">Creates OrganizationInvitation (7 day expiry)</label></li>
                        <li><input type="checkbox" id="c1316" onchange="updateProgress()"><label for="c1316">Sends invite email</label></li>
                        <li><input type="checkbox" id="c1317" onchange="updateProgress()"><label for="c1317">Limits check (maxUsers)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>14.5 Team Member Update</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1318" onchange="updateProgress()"><label for="c1318">Admin can update name</label></li>
                        <li><input type="checkbox" id="c1319" onchange="updateProgress()"><label for="c1319">Admin can update designation</label></li>
                        <li><input type="checkbox" id="c1320" onchange="updateProgress()"><label for="c1320">Admin can update role</label></li>
                        <li><input type="checkbox" id="c1321" onchange="updateProgress()"><label for="c1321">Admin can update canLogin flag</label></li>
                        <li><input type="checkbox" id="c1322" onchange="updateProgress()"><label for="c1322">Logs changes</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>14.6 Team Member Removal</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1323" onchange="updateProgress()"><label for="c1323">Admin only can remove</label></li>
                        <li><input type="checkbox" id="c1324" onchange="updateProgress()"><label for="c1324">Soft delete: isDeleted=true</label></li>
                        <li><input type="checkbox" id="c1325" onchange="updateProgress()"><label for="c1325">Cascades: invitations, delegations</label></li>
                        <li><input type="checkbox" id="c1326" onchange="updateProgress()"><label for="c1326">Revokes access</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>14.7 Email Availability Check</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1327" onchange="updateProgress()"><label for="c1327">Returns available: boolean</label></li>
                        <li><input type="checkbox" id="c1328" onchange="updateProgress()"><label for="c1328">Checks: not member, not invited, not deleted</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-15" data-section="15">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 15</span>
                    <h3>COMPANY DOCUMENTS MODULE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                

                <div class="subsection">
                    <div class="subsection-header">
                        <span>15.1 Document Type Creation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1329" onchange="updateProgress()"><label for="c1329">Name required (1-100 chars)</label></li>
                        <li><input type="checkbox" id="c1330" onchange="updateProgress()"><label for="c1330">Code required (1-50 chars, uppercase/digits/underscores)</label></li>
                        <li><input type="checkbox" id="c1331" onchange="updateProgress()"><label for="c1331">Category required: COMPANY or VEHICLE</label></li>
                        <li><input type="checkbox" id="c1332" onchange="updateProgress()"><label for="c1332">Description optional (max 500 chars)</label></li>
                        <li><input type="checkbox" id="c1333" onchange="updateProgress()"><label for="c1333">Is active: boolean (default true)</label></li>
                        <li><input type="checkbox" id="c1334" onchange="updateProgress()"><label for="c1334">Sort order: integer min 0 (default 0)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>15.2 Document Creation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1335" onchange="updateProgress()"><label for="c1335">Document type name required (1-100 chars)</label></li>
                        <li><input type="checkbox" id="c1336" onchange="updateProgress()"><label for="c1336">Reference number optional (max 100 chars)</label></li>
                        <li><input type="checkbox" id="c1337" onchange="updateProgress()"><label for="c1337">Expiry date required (ISO)</label></li>
                        <li><input type="checkbox" id="c1338" onchange="updateProgress()"><label for="c1338">Document URL optional (valid URL)</label></li>
                        <li><input type="checkbox" id="c1339" onchange="updateProgress()"><label for="c1339">Asset ID optional (link to asset)</label></li>
                        <li><input type="checkbox" id="c1340" onchange="updateProgress()"><label for="c1340">Renewal cost: positive number or null (handles NaN)</label></li>
                        <li><input type="checkbox" id="c1341" onchange="updateProgress()"><label for="c1341">Notes optional (max 1000 chars)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>15.3 Document Queries</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1342" onchange="updateProgress()"><label for="c1342">Filter by document type name</label></li>
                        <li><input type="checkbox" id="c1343" onchange="updateProgress()"><label for="c1343">Filter by asset ID (CUID format)</label></li>
                        <li><input type="checkbox" id="c1344" onchange="updateProgress()"><label for="c1344">Filter by expiry status: all, expired, expiring, valid</label></li>
                        <li><input type="checkbox" id="c1345" onchange="updateProgress()"><label for="c1345">Search by text</label></li>
                        <li><input type="checkbox" id="c1346" onchange="updateProgress()"><label for="c1346">Pagination: page, limit (max 100)</label></li>
                        <li><input type="checkbox" id="c1347" onchange="updateProgress()"><label for="c1347">Sort by: expiryDate, createdAt, documentTypeName</label></li>
                        <li><input type="checkbox" id="c1348" onchange="updateProgress()"><label for="c1348">Sort order: asc, desc</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-16" data-section="16">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 16</span>
                    <h3>LOCATIONS MODULE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                

                <div class="subsection">
                    <div class="subsection-header">
                        <span>16.1 Location Management</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1349" onchange="updateProgress()"><label for="c1349">Create location with name (1-100 chars)</label></li>
                        <li><input type="checkbox" id="c1350" onchange="updateProgress()"><label for="c1350">Description optional (max 500 chars)</label></li>
                        <li><input type="checkbox" id="c1351" onchange="updateProgress()"><label for="c1351">Update location name</label></li>
                        <li><input type="checkbox" id="c1352" onchange="updateProgress()"><label for="c1352">Update location description</label></li>
                        <li><input type="checkbox" id="c1353" onchange="updateProgress()"><label for="c1353">Deactivate location (isActive = false)</label></li>
                        <li><input type="checkbox" id="c1354" onchange="updateProgress()"><label for="c1354">Query includes/excludes inactive</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-17" data-section="17">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 17</span>
                    <h3>SUPER-ADMIN SYSTEM</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/two-factor/totp.test.ts tests/unit/security/impersonation.test.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>17.1 Super-Admin Authentication</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1355" onchange="updateProgress()"><label for="c1355">Username/password login</label></li>
                        <li><input type="checkbox" id="c1356" onchange="updateProgress()"><label for="c1356">2FA challenge if enabled</label></li>
                        <li><input type="checkbox" id="c1357" onchange="updateProgress()"><label for="c1357">Returns JWT token with admin privileges</label></li>
                        <li><input type="checkbox" id="c1358" onchange="updateProgress()"><label for="c1358">Setup 2FA (QR code)</label></li>
                        <li><input type="checkbox" id="c1359" onchange="updateProgress()"><label for="c1359">Verify 2FA code</label></li>
                        <li><input type="checkbox" id="c1360" onchange="updateProgress()"><label for="c1360">Generate backup codes</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>TOTP Configuration</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1361" onchange="updateProgress()"><label for="c1361">**Code digits:** exactly 6 digits</label></li>
                        <li><input type="checkbox" id="c1362" onchange="updateProgress()"><label for="c1362">**Time step:** 30 seconds</label></li>
                        <li><input type="checkbox" id="c1363" onchange="updateProgress()"><label for="c1363">**Window tolerance:** 1 step before/after for clock drift</label></li>
                        <li><input type="checkbox" id="c1364" onchange="updateProgress()"><label for="c1364">**Code format regex:** `^\d{6}$`</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>TOTP Setup Data Structure</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1365" onchange="updateProgress()"><label for="c1365">`secret`: encrypted string, non-empty</label></li>
                        <li><input type="checkbox" id="c1366" onchange="updateProgress()"><label for="c1366">`qrCodeDataUrl`: must start with `data:image/png;base64,`</label></li>
                        <li><input type="checkbox" id="c1367" onchange="updateProgress()"><label for="c1367">`manualEntryKey`: formatted string, non-empty</label></li>
                        <li><input type="checkbox" id="c1368" onchange="updateProgress()"><label for="c1368">Validation rejects: empty secret, invalid QR URL, empty manual key</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Manual Entry Key Formatting</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1369" onchange="updateProgress()"><label for="c1369">Secret formatted into groups of 4 characters with spaces</label></li>
                        <li><input type="checkbox" id="c1370" onchange="updateProgress()"><label for="c1370">Example: &quot;ABCDEFGHIJKLMNOP&quot; → &quot;ABCD EFGH IJKL MNOP&quot;</label></li>
                        <li><input type="checkbox" id="c1371" onchange="updateProgress()"><label for="c1371">Short secrets handled: &quot;ABCD&quot; → &quot;ABCD&quot;</label></li>
                        <li><input type="checkbox" id="c1372" onchange="updateProgress()"><label for="c1372">Secrets with remainder: &quot;ABCDEFGHIJ&quot; → &quot;ABCD EFGH IJ&quot;</label></li>
                        <li><input type="checkbox" id="c1373" onchange="updateProgress()"><label for="c1373">Empty string returns empty string</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>OTPAuth URL Generation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1374" onchange="updateProgress()"><label for="c1374">URL format: `otpauth://totp/{APP}:{EMAIL}?secret={SECRET}&amp;issuer={APP}`</label></li>
                        <li><input type="checkbox" id="c1375" onchange="updateProgress()"><label for="c1375">App name: &quot;Durj Admin&quot;</label></li>
                        <li><input type="checkbox" id="c1376" onchange="updateProgress()"><label for="c1376">Email encoded: `user@example.com` → `user%40example.com`</label></li>
                        <li><input type="checkbox" id="c1377" onchange="updateProgress()"><label for="c1377">App name encoded: &quot;Durj Admin&quot; → &quot;Durj%20Admin&quot;</label></li>
                        <li><input type="checkbox" id="c1378" onchange="updateProgress()"><label for="c1378">Special characters in email encoded: `user+test@` → `user%2Btest%40`</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Time-Based Calculations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1379" onchange="updateProgress()"><label for="c1379">`getTimeRemaining()` returns value between 1 and step (30)</label></li>
                        <li><input type="checkbox" id="c1380" onchange="updateProgress()"><label for="c1380">TOTP counter calculated as `Math.floor(time / step)`</label></li>
                        <li><input type="checkbox" id="c1381" onchange="updateProgress()"><label for="c1381">At time 0, counter = 0</label></li>
                        <li><input type="checkbox" id="c1382" onchange="updateProgress()"><label for="c1382">At time 30, counter = 1</label></li>
                        <li><input type="checkbox" id="c1383" onchange="updateProgress()"><label for="c1383">At time 60, counter = 2</label></li>
                        <li><input type="checkbox" id="c1384" onchange="updateProgress()"><label for="c1384">Custom step supported (e.g., 60 seconds)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Code Validation Logic</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1385" onchange="updateProgress()"><label for="c1385">**Valid codes:** exactly 6 digits (123456, 000000, 999999)</label></li>
                        <li><input type="checkbox" id="c1386" onchange="updateProgress()"><label for="c1386">**Rejected:** wrong length (5 digits, 7 digits)</label></li>
                        <li><input type="checkbox" id="c1387" onchange="updateProgress()"><label for="c1387">**Rejected:** non-numeric (12345a, abcdef)</label></li>
                        <li><input type="checkbox" id="c1388" onchange="updateProgress()"><label for="c1388">**Rejected:** codes with spaces (123 456)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Code Window Validation (Clock Drift Tolerance)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1389" onchange="updateProgress()"><label for="c1389">Code in current window (counter match): accepted</label></li>
                        <li><input type="checkbox" id="c1390" onchange="updateProgress()"><label for="c1390">Code 1 step behind: accepted (drift tolerance)</label></li>
                        <li><input type="checkbox" id="c1391" onchange="updateProgress()"><label for="c1391">Code 1 step ahead: accepted (drift tolerance)</label></li>
                        <li><input type="checkbox" id="c1392" onchange="updateProgress()"><label for="c1392">Code 2+ steps off: rejected with window=1</label></li>
                        <li><input type="checkbox" id="c1393" onchange="updateProgress()"><label for="c1393">Wider window (2) accepts 2 steps off</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Secret Encryption</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1394" onchange="updateProgress()"><label for="c1394">Encrypted secrets: 32+ characters, base64 format `[A-Za-z0-9+/=]+`</label></li>
                        <li><input type="checkbox" id="c1395" onchange="updateProgress()"><label for="c1395">Raw unencrypted secrets (short): rejected</label></li>
                        <li><input type="checkbox" id="c1396" onchange="updateProgress()"><label for="c1396">Secrets must be encrypted before storage</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>QR Code Data URL Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1397" onchange="updateProgress()"><label for="c1397">Must start with `data:image/png;base64,`</label></li>
                        <li><input type="checkbox" id="c1398" onchange="updateProgress()"><label for="c1398">Must be &gt; 100 characters (actual QR data)</label></li>
                        <li><input type="checkbox" id="c1399" onchange="updateProgress()"><label for="c1399">Non-PNG format rejected (jpeg, etc.)</label></li>
                        <li><input type="checkbox" id="c1400" onchange="updateProgress()"><label for="c1400">Too-short data URL rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Recovery Codes</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1401" onchange="updateProgress()"><label for="c1401">**Format:** `XXXX-XXXX` (4 chars + hyphen + 4 chars)</label></li>
                        <li><input type="checkbox" id="c1402" onchange="updateProgress()"><label for="c1402">**Characters:** uppercase alphanumeric [A-Z0-9]</label></li>
                        <li><input type="checkbox" id="c1403" onchange="updateProgress()"><label for="c1403">**Total length:** 9 characters including hyphen</label></li>
                        <li><input type="checkbox" id="c1404" onchange="updateProgress()"><label for="c1404">Codes must be unique (10 generated codes all different)</label></li>
                        <li><input type="checkbox" id="c1405" onchange="updateProgress()"><label for="c1405">`isValidRecoveryCode()` validates format</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Two-Factor Status</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1406" onchange="updateProgress()"><label for="c1406">Ready when: `enabled: true` AND `verifiedAt` exists</label></li>
                        <li><input type="checkbox" id="c1407" onchange="updateProgress()"><label for="c1407">Not ready when: `enabled: false` (even if verified)</label></li>
                        <li><input type="checkbox" id="c1408" onchange="updateProgress()"><label for="c1408">Not ready when: `enabled: true` but not verified</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Error Handling</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1409" onchange="updateProgress()"><label for="c1409">Missing secret: returns `{ valid: false, error: 'No secret provided' }`</label></li>
                        <li><input type="checkbox" id="c1410" onchange="updateProgress()"><label for="c1410">Missing code: returns `{ valid: false, error: 'No code provided' }`</label></li>
                        <li><input type="checkbox" id="c1411" onchange="updateProgress()"><label for="c1411">Invalid format: returns `{ valid: false, error: 'Invalid code format' }`</label></li>
                        <li><input type="checkbox" id="c1412" onchange="updateProgress()"><label for="c1412">Valid inputs: returns `{ valid: true, error: undefined }`</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>17.2 Organization Management (Platform-Wide)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1413" onchange="updateProgress()"><label for="c1413">List all organizations (pagination)</label></li>
                        <li><input type="checkbox" id="c1414" onchange="updateProgress()"><label for="c1414">Filter by subscription tier</label></li>
                        <li><input type="checkbox" id="c1415" onchange="updateProgress()"><label for="c1415">Filter by created date</label></li>
                        <li><input type="checkbox" id="c1416" onchange="updateProgress()"><label for="c1416">Search by name</label></li>
                        <li><input type="checkbox" id="c1417" onchange="updateProgress()"><label for="c1417">Get org details with billing info</label></li>
                        <li><input type="checkbox" id="c1418" onchange="updateProgress()"><label for="c1418">Update billing tier</label></li>
                        <li><input type="checkbox" id="c1419" onchange="updateProgress()"><label for="c1419">Update limits</label></li>
                        <li><input type="checkbox" id="c1420" onchange="updateProgress()"><label for="c1420">Reset org data (keeps settings)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Token Generation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1421" onchange="updateProgress()"><label for="c1421">Generate signed JWT for tenant access</label></li>
                        <li><input type="checkbox" id="c1422" onchange="updateProgress()"><label for="c1422">**JTI format:** `imp_` prefix + 32 hex characters (16 random bytes)</label></li>
                        <li><input type="checkbox" id="c1423" onchange="updateProgress()"><label for="c1423">JTI uniqueness: each call generates unique token</label></li>
                        <li><input type="checkbox" id="c1424" onchange="updateProgress()"><label for="c1424">JTI format validation regex: `/^imp_[a-f0-9]{32}$/`</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Token Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1425" onchange="updateProgress()"><label for="c1425">Validate impersonation token</label></li>
                        <li><input type="checkbox" id="c1426" onchange="updateProgress()"><label for="c1426">Cookie: `durj-impersonation` (HttpOnly, Secure)</label></li>
                        <li><input type="checkbox" id="c1427" onchange="updateProgress()"><label for="c1427">`x-impersonation-jti` header checked per request</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Token Revocation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1428" onchange="updateProgress()"><label for="c1428">`revokeImpersonationToken(jti)` invalidates token</label></li>
                        <li><input type="checkbox" id="c1429" onchange="updateProgress()"><label for="c1429">Revoked tokens stored in `ImpersonationRevocation` table</label></li>
                        <li class="critical"><input type="checkbox" id="c1430" onchange="updateProgress()"><label for="c1430">**CRITICAL - Fail-Safe Behavior:** On database error, returns `true` (revoked)</label></li>
                        <li><input type="checkbox" id="c1431" onchange="updateProgress()"><label for="c1431">`isImpersonationTokenRevoked(jti)` checks revocation status</label></li>
                        <li><input type="checkbox" id="c1432" onchange="updateProgress()"><label for="c1432">Valid (non-revoked) JTI returns `false`</label></li>
                        <li><input type="checkbox" id="c1433" onchange="updateProgress()"><label for="c1433">Revoked JTI returns `true`</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Revocation Cleanup</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1434" onchange="updateProgress()"><label for="c1434">`cleanupExpiredRevocations()` deletes old records</label></li>
                        <li><input type="checkbox" id="c1435" onchange="updateProgress()"><label for="c1435">Cleanup based on `revokedAt` timestamp + retention period</label></li>
                        <li><input type="checkbox" id="c1436" onchange="updateProgress()"><label for="c1436">Prevents table from growing indefinitely</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Revocation History</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1437" onchange="updateProgress()"><label for="c1437">`getRevocationHistory(limit)` returns audit trail</label></li>
                        <li><input type="checkbox" id="c1438" onchange="updateProgress()"><label for="c1438">Default limit: 20 records</label></li>
                        <li><input type="checkbox" id="c1439" onchange="updateProgress()"><label for="c1439">Ordered by `revokedAt` descending (most recent first)</label></li>
                        <li><input type="checkbox" id="c1440" onchange="updateProgress()"><label for="c1440">Returns: jti, reason, revokedAt, revokedBy</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>17.4 Analytics &amp; Monitoring</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1441" onchange="updateProgress()"><label for="c1441">Total orgs, users, subscriptions</label></li>
                        <li><input type="checkbox" id="c1442" onchange="updateProgress()"><label for="c1442">Tier distribution</label></li>
                        <li><input type="checkbox" id="c1443" onchange="updateProgress()"><label for="c1443">Monthly growth</label></li>
                        <li><input type="checkbox" id="c1444" onchange="updateProgress()"><label for="c1444">Feature usage</label></li>
                        <li><input type="checkbox" id="c1445" onchange="updateProgress()"><label for="c1445">Billing metrics</label></li>
                        <li><input type="checkbox" id="c1446" onchange="updateProgress()"><label for="c1446">AI feature usage tracking</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>17.5 Backup &amp; Restore</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1447" onchange="updateProgress()"><label for="c1447">List org backups</label></li>
                        <li><input type="checkbox" id="c1448" onchange="updateProgress()"><label for="c1448">Trigger full org backup</label></li>
                        <li><input type="checkbox" id="c1449" onchange="updateProgress()"><label for="c1449">Restore from backup (atomic with rollback)</label></li>
                        <li><input type="checkbox" id="c1450" onchange="updateProgress()"><label for="c1450">Scheduled daily backup (1 AM UTC)</label></li>
                        <li><input type="checkbox" id="c1451" onchange="updateProgress()"><label for="c1451">CRON_SECRET authentication</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-18" data-section="18">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 18</span>
                    <h3>FILE UPLOADS &amp; STORAGE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                

                <div class="subsection">
                    <div class="subsection-header">
                        <span>18.1 Upload Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1452" onchange="updateProgress()"><label for="c1452">Entity type required: asset, subscription</label></li>
                        <li><input type="checkbox" id="c1453" onchange="updateProgress()"><label for="c1453">Entity ID required</label></li>
                        <li><input type="checkbox" id="c1454" onchange="updateProgress()"><label for="c1454">Project code optional</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>18.2 Signed URL Generation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1455" onchange="updateProgress()"><label for="c1455">Path required</label></li>
                        <li><input type="checkbox" id="c1456" onchange="updateProgress()"><label for="c1456">Expires in seconds: 60 to 86400 (default 3600)</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-19" data-section="19">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 19</span>
                    <h3>SCHEDULED JOBS (CRON)</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                

                <div class="subsection">
                    <div class="subsection-header">
                        <span>19.1 Monthly Depreciation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1457" onchange="updateProgress()"><label for="c1457">Runs 1st of month, 00:05 UTC</label></li>
                        <li><input type="checkbox" id="c1458" onchange="updateProgress()"><label for="c1458">Finds assets with depreciation categories</label></li>
                        <li><input type="checkbox" id="c1459" onchange="updateProgress()"><label for="c1459">Calculates monthly amount</label></li>
                        <li><input type="checkbox" id="c1460" onchange="updateProgress()"><label for="c1460">Creates depreciation records</label></li>
                        <li><input type="checkbox" id="c1461" onchange="updateProgress()"><label for="c1461">Updates accumulated depreciation</label></li>
                        <li><input type="checkbox" id="c1462" onchange="updateProgress()"><label for="c1462">Updates net book value</label></li>
                        <li><input type="checkbox" id="c1463" onchange="updateProgress()"><label for="c1463">Marks last depreciation date</label></li>
                        <li><input type="checkbox" id="c1464" onchange="updateProgress()"><label for="c1464">Flags fully depreciated assets</label></li>
                        <li><input type="checkbox" id="c1465" onchange="updateProgress()"><label for="c1465">Processes all organizations</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>19.2 User Cleanup</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1466" onchange="updateProgress()"><label for="c1466">Finds soft-deleted users (isDeleted=true)</label></li>
                        <li><input type="checkbox" id="c1467" onchange="updateProgress()"><label for="c1467">90-day retention</label></li>
                        <li><input type="checkbox" id="c1468" onchange="updateProgress()"><label for="c1468">Permanent deletion of data</label></li>
                        <li><input type="checkbox" id="c1469" onchange="updateProgress()"><label for="c1469">Revokes all tokens</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>19.3 Expiry Alerts</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1470" onchange="updateProgress()"><label for="c1470">Warranty expiry notifications (30-day window before/after expiry only)</label></li>
                        <li><input type="checkbox" id="c1471" onchange="updateProgress()"><label for="c1471">Subscription renewal reminders</label></li>
                        <li><input type="checkbox" id="c1472" onchange="updateProgress()"><label for="c1472">Employee document expiry alerts</label></li>
                        <li><input type="checkbox" id="c1473" onchange="updateProgress()"><label for="c1473">Company document expiry alerts</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>19.4 Asset Trash Cleanup</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1473a" onchange="updateProgress()"><label for="c1473a">Scheduled to run daily at 3 AM UTC</label></li>
                        <li><input type="checkbox" id="c1473b" onchange="updateProgress()"><label for="c1473b">Requires CRON_SECRET authorization (Bearer token)</label></li>
                        <li><input type="checkbox" id="c1473c" onchange="updateProgress()"><label for="c1473c">Returns 401 Unauthorized without valid CRON_SECRET</label></li>
                        <li><input type="checkbox" id="c1473d" onchange="updateProgress()"><label for="c1473d">Finds assets with deletedAt older than 7 days (RETENTION_DAYS)</label></li>
                        <li><input type="checkbox" id="c1473e" onchange="updateProgress()"><label for="c1473e">Permanently deletes expired soft-deleted assets</label></li>
                        <li><input type="checkbox" id="c1473f" onchange="updateProgress()"><label for="c1473f">Logs each deletion with assetId, assetTag, tenantId</label></li>
                        <li><input type="checkbox" id="c1473g" onchange="updateProgress()"><label for="c1473g">Returns deletedCount and failedCount in response</label></li>
                        <li><input type="checkbox" id="c1473h" onchange="updateProgress()"><label for="c1473h">Handles individual deletion failures gracefully (continues processing)</label></li>
                        <li><input type="checkbox" id="c1473i" onchange="updateProgress()"><label for="c1473i">Returns &quot;No assets to permanently delete&quot; when trash is empty</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-20" data-section="20">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 20</span>
                    <h3>CSRF PROTECTION</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/security/csrf.test.ts tests/unit/security/csrf.test.ts tests/unit/security/headers.test.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Origin Header Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1474" onchange="updateProgress()"><label for="c1474">Same-origin requests (no Origin header): valid</label></li>
                        <li><input type="checkbox" id="c1475" onchange="updateProgress()"><label for="c1475">Valid Referer from same domain: valid</label></li>
                        <li><input type="checkbox" id="c1476" onchange="updateProgress()"><label for="c1476">Valid Referer from subdomain (*.example.com): valid</label></li>
                        <li><input type="checkbox" id="c1477" onchange="updateProgress()"><label for="c1477">Localhost in development: valid</label></li>
                        <li><input type="checkbox" id="c1478" onchange="updateProgress()"><label for="c1478">**Cross-origin from unknown domain: rejected**</label></li>
                        <li><input type="checkbox" id="c1479" onchange="updateProgress()"><label for="c1479">**Invalid Origin URL: rejected**</label></li>
                        <li><input type="checkbox" id="c1480" onchange="updateProgress()"><label for="c1480">No token required for valid Origin</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Token Generation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1481" onchange="updateProgress()"><label for="c1481">**64-character hex token** (32 bytes)</label></li>
                        <li><input type="checkbox" id="c1482" onchange="updateProgress()"><label for="c1482">Unique tokens generated each time</label></li>
                        <li><input type="checkbox" id="c1483" onchange="updateProgress()"><label for="c1483">HMAC-SHA256 signing using NEXTAUTH_SECRET</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Token Format</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1484" onchange="updateProgress()"><label for="c1484">Format: `{token}.{signature}`</label></li>
                        <li><input type="checkbox" id="c1485" onchange="updateProgress()"><label for="c1485">Signed token contains dot separator</label></li>
                        <li><input type="checkbox" id="c1486" onchange="updateProgress()"><label for="c1486">Invalid signature: rejected</label></li>
                        <li><input type="checkbox" id="c1487" onchange="updateProgress()"><label for="c1487">Token without signature: rejected</label></li>
                        <li><input type="checkbox" id="c1488" onchange="updateProgress()"><label for="c1488">Empty token: rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Cookie Settings</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1489" onchange="updateProgress()"><label for="c1489">Cookie name: `__Host-csrf-token` (secure prefix)</label></li>
                        <li><input type="checkbox" id="c1490" onchange="updateProgress()"><label for="c1490">**HttpOnly: true** (prevents JS access)</label></li>
                        <li><input type="checkbox" id="c1491" onchange="updateProgress()"><label for="c1491">**SameSite: strict** (prevents CSRF from other sites)</label></li>
                        <li><input type="checkbox" id="c1492" onchange="updateProgress()"><label for="c1492">**Secure: true in production** (HTTPS only)</label></li>
                        <li><input type="checkbox" id="c1493" onchange="updateProgress()"><label for="c1493">Secure: false in development (allows HTTP)</label></li>
                        <li><input type="checkbox" id="c1494" onchange="updateProgress()"><label for="c1494">Path: /</label></li>
                        <li><input type="checkbox" id="c1495" onchange="updateProgress()"><label for="c1495">Max-Age: 86400 (24 hours)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Request Protection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1496" onchange="updateProgress()"><label for="c1496">Safe methods skip CSRF: GET, HEAD, OPTIONS</label></li>
                        <li><input type="checkbox" id="c1497" onchange="updateProgress()"><label for="c1497">**Protected methods: POST, PUT, PATCH, DELETE**</label></li>
                        <li><input type="checkbox" id="c1498" onchange="updateProgress()"><label for="c1498">Only protects /api/ routes</label></li>
                        <li><input type="checkbox" id="c1499" onchange="updateProgress()"><label for="c1499">**Excluded: /api/auth/** (NextAuth handles)</label></li>
                        <li><input type="checkbox" id="c1500" onchange="updateProgress()"><label for="c1500">**Excluded: /api/webhooks/** (signature-verified)</label></li>
                        <li><input type="checkbox" id="c1501" onchange="updateProgress()"><label for="c1501">Invalid CSRF returns 403</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Token Management</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1502" onchange="updateProgress()"><label for="c1502">Existing valid token reused from cookie</label></li>
                        <li><input type="checkbox" id="c1503" onchange="updateProgress()"><label for="c1503">New token generated if cookie missing</label></li>
                        <li><input type="checkbox" id="c1504" onchange="updateProgress()"><label for="c1504">Token rotation optional</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Security Headers</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1505" onchange="updateProgress()"><label for="c1505">**X-Frame-Options: DENY** - Prevents clickjacking</label></li>
                        <li><input type="checkbox" id="c1506" onchange="updateProgress()"><label for="c1506">**X-Content-Type-Options: nosniff** - Prevents MIME type sniffing</label></li>
                        <li><input type="checkbox" id="c1507" onchange="updateProgress()"><label for="c1507">**X-XSS-Protection: 1; mode=block** - Browser XSS filter</label></li>
                        <li><input type="checkbox" id="c1508" onchange="updateProgress()"><label for="c1508">**Referrer-Policy: strict-origin-when-cross-origin**</label></li>
                        <li><input type="checkbox" id="c1509" onchange="updateProgress()"><label for="c1509">**X-Download-Options: noopen** - Prevents auto file execution</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Strict-Transport-Security (HSTS)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1510" onchange="updateProgress()"><label for="c1510">**Production:** `max-age=31536000; includeSubDomains` (1 year)</label></li>
                        <li><input type="checkbox" id="c1511" onchange="updateProgress()"><label for="c1511">**Development:** HSTS header NOT added</label></li>
                        <li><input type="checkbox" id="c1512" onchange="updateProgress()"><label for="c1512">includeSubDomains protects all subdomains</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Content-Security-Policy (CSP)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1513" onchange="updateProgress()"><label for="c1513">**Production:** Strict CSP (`script-src 'self'`, no unsafe-eval)</label></li>
                        <li><input type="checkbox" id="c1514" onchange="updateProgress()"><label for="c1514">**Development:** Relaxed CSP (`'unsafe-inline'`, `'unsafe-eval'` for dev tools)</label></li>
                        <li><input type="checkbox" id="c1515" onchange="updateProgress()"><label for="c1515">`default-src 'self'` baseline policy</label></li>
                        <li><input type="checkbox" id="c1516" onchange="updateProgress()"><label for="c1516">`img-src` allows HTTPS and data URIs</label></li>
                        <li><input type="checkbox" id="c1517" onchange="updateProgress()"><label for="c1517">`font-src` allows data URIs</label></li>
                        <li><input type="checkbox" id="c1518" onchange="updateProgress()"><label for="c1518">Blob URLs allowed for file handling</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>OWASP Top 10 Coverage</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1519" onchange="updateProgress()"><label for="c1519">All 6 recommended headers present in production:</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-21" data-section="21">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 21</span>
                    <h3>ERROR RESPONSE CODES</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                

                <div class="subsection">
                    <div class="subsection-header">
                        <span>21.1 Standard HTTP Responses</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1520" onchange="updateProgress()"><label for="c1520">200: Success</label></li>
                        <li><input type="checkbox" id="c1521" onchange="updateProgress()"><label for="c1521">201: Created</label></li>
                        <li><input type="checkbox" id="c1522" onchange="updateProgress()"><label for="c1522">400: Bad request / validation failed</label></li>
                        <li><input type="checkbox" id="c1523" onchange="updateProgress()"><label for="c1523">401: Unauthorized (not authenticated)</label></li>
                        <li><input type="checkbox" id="c1524" onchange="updateProgress()"><label for="c1524">403: Forbidden (no permission)</label></li>
                        <li><input type="checkbox" id="c1525" onchange="updateProgress()"><label for="c1525">404: Not found</label></li>
                        <li><input type="checkbox" id="c1526" onchange="updateProgress()"><label for="c1526">409: Conflict (duplicate, race condition)</label></li>
                        <li><input type="checkbox" id="c1527" onchange="updateProgress()"><label for="c1527">422: Unprocessable entity</label></li>
                        <li><input type="checkbox" id="c1528" onchange="updateProgress()"><label for="c1528">429: Rate limited (with Retry-After)</label></li>
                        <li><input type="checkbox" id="c1529" onchange="updateProgress()"><label for="c1529">500: Server error</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>21.2 Error Response Format</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1530" onchange="updateProgress()"><label for="c1530">Error message in response body</label></li>
                        <li><input type="checkbox" id="c1531" onchange="updateProgress()"><label for="c1531">Validation issues included for 400</label></li>
                        <li><input type="checkbox" id="c1532" onchange="updateProgress()"><label for="c1532">Helpful messages (not exposing internals)</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-22" data-section="22">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 22</span>
                    <h3>ASSET REQUESTS MODULE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                

                <div class="subsection">
                    <div class="subsection-header">
                        <span>22.1 Employee Asset Request</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1533" onchange="updateProgress()"><label for="c1533">Employee can request available asset</label></li>
                        <li><input type="checkbox" id="c1534" onchange="updateProgress()"><label for="c1534">Request number auto-generated: {ORG_PREFIX}-AR-YYMMDD-XXX</label></li>
                        <li><input type="checkbox" id="c1535" onchange="updateProgress()"><label for="c1535">Request requires: assetId, reason</label></li>
                        <li><input type="checkbox" id="c1536" onchange="updateProgress()"><label for="c1536">Asset must be SPARE status</label></li>
                        <li><input type="checkbox" id="c1537" onchange="updateProgress()"><label for="c1537">Asset must not have pending requests</label></li>
                        <li><input type="checkbox" id="c1538" onchange="updateProgress()"><label for="c1538">Creates PENDING_ADMIN_APPROVAL status</label></li>
                        <li><input type="checkbox" id="c1539" onchange="updateProgress()"><label for="c1539">Notifies all admins via email</label></li>
                        <li><input type="checkbox" id="c1540" onchange="updateProgress()"><label for="c1540">WhatsApp notification to approvers (if configured)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>22.2 Admin Assignment Request</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1541" onchange="updateProgress()"><label for="c1541">Admin can assign asset to member via `/api/assets/[id]/assign`</label></li>
                        <li><input type="checkbox" id="c1542" onchange="updateProgress()"><label for="c1542">If member canLogin=true → creates PENDING_USER_ACCEPTANCE</label></li>
                        <li><input type="checkbox" id="c1543" onchange="updateProgress()"><label for="c1543">If member canLogin=false → direct immediate assignment</label></li>
                        <li><input type="checkbox" id="c1544" onchange="updateProgress()"><label for="c1544">Cannot assign if pending request exists (409 conflict)</label></li>
                        <li><input type="checkbox" id="c1545" onchange="updateProgress()"><label for="c1545">Notifies target user via email and in-app</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>22.3 Return Request</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1546" onchange="updateProgress()"><label for="c1546">User can request return of assigned asset</label></li>
                        <li><input type="checkbox" id="c1547" onchange="updateProgress()"><label for="c1547">Asset must be IN_USE status</label></li>
                        <li><input type="checkbox" id="c1548" onchange="updateProgress()"><label for="c1548">Asset must be assigned to requesting user</label></li>
                        <li><input type="checkbox" id="c1549" onchange="updateProgress()"><label for="c1549">Creates PENDING_RETURN_APPROVAL status</label></li>
                        <li><input type="checkbox" id="c1550" onchange="updateProgress()"><label for="c1550">Notifies all admins</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>22.4 Request Approval Flow</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1551" onchange="updateProgress()"><label for="c1551">Admin can approve PENDING_ADMIN_APPROVAL → PENDING_USER_ACCEPTANCE</label></li>
                        <li><input type="checkbox" id="c1552" onchange="updateProgress()"><label for="c1552">Admin can approve PENDING_RETURN_APPROVAL → asset unassigned</label></li>
                        <li><input type="checkbox" id="c1553" onchange="updateProgress()"><label for="c1553">Asset status changes to SPARE on return approval</label></li>
                        <li><input type="checkbox" id="c1554" onchange="updateProgress()"><label for="c1554">Creates AssetHistory entry for each status change</label></li>
                        <li><input type="checkbox" id="c1555" onchange="updateProgress()"><label for="c1555">Sends notification to requester</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>22.5 Request Rejection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1556" onchange="updateProgress()"><label for="c1556">Admin can reject any pending request</label></li>
                        <li><input type="checkbox" id="c1557" onchange="updateProgress()"><label for="c1557">Rejection reason required (1-500 chars)</label></li>
                        <li><input type="checkbox" id="c1558" onchange="updateProgress()"><label for="c1558">Status changes to REJECTED</label></li>
                        <li><input type="checkbox" id="c1559" onchange="updateProgress()"><label for="c1559">Notifies requester with reason</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>22.6 User Acceptance</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1560" onchange="updateProgress()"><label for="c1560">User can accept PENDING_USER_ACCEPTANCE</label></li>
                        <li><input type="checkbox" id="c1561" onchange="updateProgress()"><label for="c1561">Status changes to ACCEPTED</label></li>
                        <li><input type="checkbox" id="c1562" onchange="updateProgress()"><label for="c1562">Asset assigned to user (assignedMemberId updated)</label></li>
                        <li><input type="checkbox" id="c1563" onchange="updateProgress()"><label for="c1563">Asset status changes to IN_USE</label></li>
                        <li><input type="checkbox" id="c1564" onchange="updateProgress()"><label for="c1564">Creates AssetHistory with ASSIGNED action</label></li>
                        <li><input type="checkbox" id="c1565" onchange="updateProgress()"><label for="c1565">Notifies admins</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>22.7 User Decline</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1566" onchange="updateProgress()"><label for="c1566">User can decline PENDING_USER_ACCEPTANCE</label></li>
                        <li><input type="checkbox" id="c1567" onchange="updateProgress()"><label for="c1567">Decline reason optional</label></li>
                        <li><input type="checkbox" id="c1568" onchange="updateProgress()"><label for="c1568">Status changes to REJECTED_BY_USER</label></li>
                        <li><input type="checkbox" id="c1569" onchange="updateProgress()"><label for="c1569">Asset status reverts to SPARE</label></li>
                        <li><input type="checkbox" id="c1570" onchange="updateProgress()"><label for="c1570">Notifies admins</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>22.8 Request History &amp; Audit</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1571" onchange="updateProgress()"><label for="c1571">All actions logged in AssetRequestHistory</label></li>
                        <li><input type="checkbox" id="c1572" onchange="updateProgress()"><label for="c1572">Tracks: action, oldStatus, newStatus, notes, performedById</label></li>
                        <li><input type="checkbox" id="c1573" onchange="updateProgress()"><label for="c1573">Request statistics available via `/api/asset-requests/stats`</label></li>
                        <li><input type="checkbox" id="c1574" onchange="updateProgress()"><label for="c1574">User's pending requests via `/api/asset-requests/my-pending`</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-23" data-section="23">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 23</span>
                    <h3>USERS MODULE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/validations/users.test.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>createUserSchema Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1575" onchange="updateProgress()"><label for="c1575">**Name required:** 1-100 characters</label></li>
                        <li><input type="checkbox" id="c1576" onchange="updateProgress()"><label for="c1576">Empty name rejected</label></li>
                        <li><input type="checkbox" id="c1577" onchange="updateProgress()"><label for="c1577">Name &gt; 100 chars rejected</label></li>
                        <li><input type="checkbox" id="c1578" onchange="updateProgress()"><label for="c1578">**Email required** (valid format)</label></li>
                        <li><input type="checkbox" id="c1579" onchange="updateProgress()"><label for="c1579">Invalid emails rejected:</label></li>
                        <li><input type="checkbox" id="c1580" onchange="updateProgress()"><label for="c1580">Valid emails accepted:</label></li>
                        <li><input type="checkbox" id="c1581" onchange="updateProgress()"><label for="c1581">**Role required:** ADMIN or EMPLOYEE</label></li>
                        <li><input type="checkbox" id="c1582" onchange="updateProgress()"><label for="c1582">Invalid role rejected (e.g., &quot;SUPER_ADMIN&quot;)</label></li>
                        <li><input type="checkbox" id="c1583" onchange="updateProgress()"><label for="c1583">**Password optional:** 8-100 characters</label></li>
                        <li><input type="checkbox" id="c1584" onchange="updateProgress()"><label for="c1584">Password &lt; 8 chars rejected</label></li>
                        <li><input type="checkbox" id="c1585" onchange="updateProgress()"><label for="c1585">Password &gt; 100 chars rejected</label></li>
                        <li><input type="checkbox" id="c1586" onchange="updateProgress()"><label for="c1586">Password exactly 8 chars accepted</label></li>
                        <li><input type="checkbox" id="c1587" onchange="updateProgress()"><label for="c1587">Password exactly 100 chars accepted</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>updateUserSchema Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1588" onchange="updateProgress()"><label for="c1588">All fields optional (partial updates)</label></li>
                        <li><input type="checkbox" id="c1589" onchange="updateProgress()"><label for="c1589">Empty object allowed (no changes)</label></li>
                        <li><input type="checkbox" id="c1590" onchange="updateProgress()"><label for="c1590">Name validation applies if provided</label></li>
                        <li><input type="checkbox" id="c1591" onchange="updateProgress()"><label for="c1591">Empty name rejected on update</label></li>
                        <li><input type="checkbox" id="c1592" onchange="updateProgress()"><label for="c1592">Role validation applies if provided</label></li>
                        <li><input type="checkbox" id="c1593" onchange="updateProgress()"><label for="c1593">Invalid role rejected on update</label></li>
                        <li><input type="checkbox" id="c1594" onchange="updateProgress()"><label for="c1594">**Email NOT allowed in update** (stripped/ignored)</label></li>
                        <li><input type="checkbox" id="c1595" onchange="updateProgress()"><label for="c1595">**Password NOT allowed in update** (stripped/ignored)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>List &amp; Operations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1596" onchange="updateProgress()"><label for="c1596">List users with filters: role, employee status, deleted status</label></li>
                        <li><input type="checkbox" id="c1597" onchange="updateProgress()"><label for="c1597">Email optional if canLogin=false</label></li>
                        <li><input type="checkbox" id="c1598" onchange="updateProgress()"><label for="c1598">Placeholder email format for non-login users: `nologin-{uuid}@{org}.internal`</label></li>
                        <li><input type="checkbox" id="c1599" onchange="updateProgress()"><label for="c1599">Soft delete: sets isDeleted=true, deletedAt timestamp</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>23.2 User Restore</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1600" onchange="updateProgress()"><label for="c1600">Restore soft-deleted user via `/api/users/[id]/restore`</label></li>
                        <li><input type="checkbox" id="c1601" onchange="updateProgress()"><label for="c1601">Sets isDeleted=false</label></li>
                        <li><input type="checkbox" id="c1602" onchange="updateProgress()"><label for="c1602">Clears deletedAt timestamp</label></li>
                        <li><input type="checkbox" id="c1603" onchange="updateProgress()"><label for="c1603">User reappears in normal lists</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>23.3 HR Profile API</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1604" onchange="updateProgress()"><label for="c1604">Admin can update any user's HR profile via `/api/users/[id]/hr-profile`</label></li>
                        <li><input type="checkbox" id="c1605" onchange="updateProgress()"><label for="c1605">User can update own HR profile via `/api/users/me/hr-profile`</label></li>
                        <li><input type="checkbox" id="c1606" onchange="updateProgress()"><label for="c1606">User cannot change own employeeId (admin only)</label></li>
                        <li><input type="checkbox" id="c1607" onchange="updateProgress()"><label for="c1607">Profile completion percentage calculated and returned</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>23.4 Profile Change Requests</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1608" onchange="updateProgress()"><label for="c1608">Employee can request profile changes via `/api/users/me/change-requests`</label></li>
                        <li><input type="checkbox" id="c1609" onchange="updateProgress()"><label for="c1609">Admin approval required for changes</label></li>
                        <li><input type="checkbox" id="c1610" onchange="updateProgress()"><label for="c1610">Audit trail maintained for all requests</label></li>
                        <li><input type="checkbox" id="c1611" onchange="updateProgress()"><label for="c1611">Status tracking: PENDING → APPROVED/REJECTED</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>23.5 User Asset/Subscription History</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1612" onchange="updateProgress()"><label for="c1612">View all assets ever assigned to user (past and present)</label></li>
                        <li><input type="checkbox" id="c1613" onchange="updateProgress()"><label for="c1613">View all subscriptions assigned to user</label></li>
                        <li><input type="checkbox" id="c1614" onchange="updateProgress()"><label for="c1614">Timeline display with assignment dates</label></li>
                        <li><input type="checkbox" id="c1615" onchange="updateProgress()"><label for="c1615">Available in user detail page tabs</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>23.6 User Expiry Alerts</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1616" onchange="updateProgress()"><label for="c1616">Get own document expiry alerts via `/api/users/me/expiry-alerts`</label></li>
                        <li><input type="checkbox" id="c1617" onchange="updateProgress()"><label for="c1617">Includes: QID, Passport, Health Card, License, Contract</label></li>
                        <li><input type="checkbox" id="c1618" onchange="updateProgress()"><label for="c1618">Get subscription renewal alerts for assigned subscriptions</label></li>
                        <li><input type="checkbox" id="c1619" onchange="updateProgress()"><label for="c1619">Combined alert list sorted by date</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>23.7 User Import/Export</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1620" onchange="updateProgress()"><label for="c1620">Import users from CSV/Excel via `/api/users/import`</label></li>
                        <li><input type="checkbox" id="c1621" onchange="updateProgress()"><label for="c1621">Export user list via `/api/users/export`</label></li>
                        <li><input type="checkbox" id="c1622" onchange="updateProgress()"><label for="c1622">Validates email uniqueness during import</label></li>
                        <li><input type="checkbox" id="c1623" onchange="updateProgress()"><label for="c1623">Includes HR profile data in export for employees</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-24" data-section="24">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 24</span>
                    <h3>ONBOARDING MODULE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/onboarding/phone-code-lookup.test.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>24.1 Setup Progress Tracking</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1624" onchange="updateProgress()"><label for="c1624">Track 5 setup steps in OrganizationSetupProgress model</label></li>
                        <li><input type="checkbox" id="c1625" onchange="updateProgress()"><label for="c1625">profileComplete: organization name &gt; 2 characters</label></li>
                        <li><input type="checkbox" id="c1626" onchange="updateProgress()"><label for="c1626">logoUploaded: logoUrl is not null</label></li>
                        <li><input type="checkbox" id="c1627" onchange="updateProgress()"><label for="c1627">brandingConfigured: primaryColor is set</label></li>
                        <li><input type="checkbox" id="c1628" onchange="updateProgress()"><label for="c1628">firstAssetAdded: asset count &gt; 0</label></li>
                        <li><input type="checkbox" id="c1629" onchange="updateProgress()"><label for="c1629">firstTeamMemberInvited: member count &gt; 1 (owner + 1)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>24.2 Progress Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1631" onchange="updateProgress()"><label for="c1631">Percentage = (completed steps / 5) * 100</label></li>
                        <li><input type="checkbox" id="c1632" onchange="updateProgress()"><label for="c1632">Returns isComplete = true when 100%</label></li>
                        <li><input type="checkbox" id="c1633" onchange="updateProgress()"><label for="c1633">Progress can be inferred from actual data if no record exists</label></li>
                        <li><input type="checkbox" id="c1634" onchange="updateProgress()"><label for="c1634">Supports re-calculation on data changes</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>24.3 Wizard UI</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1635" onchange="updateProgress()"><label for="c1635">Multi-step wizard component with 6 steps</label></li>
                        <li><input type="checkbox" id="c1636" onchange="updateProgress()"><label for="c1636">Linear step navigation (next/previous)</label></li>
                        <li><input type="checkbox" id="c1637" onchange="updateProgress()"><label for="c1637">Progress indicator showing completion percentage</label></li>
                        <li><input type="checkbox" id="c1638" onchange="updateProgress()"><label for="c1638">Skip option available for non-mandatory steps</label></li>
                        <li><input type="checkbox" id="c1639" onchange="updateProgress()"><label for="c1639">Can be invoked post-signup or from settings</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>24.4 Integration Points</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1640" onchange="updateProgress()"><label for="c1640">Wizard triggered after organization creation</label></li>
                        <li><input type="checkbox" id="c1641" onchange="updateProgress()"><label for="c1641">Can be re-invoked from Settings page</label></li>
                        <li><input type="checkbox" id="c1642" onchange="updateProgress()"><label for="c1642">Dashboard shows incomplete setup prompt</label></li>
                        <li><input type="checkbox" id="c1643" onchange="updateProgress()"><label for="c1643">Non-blocking: users can access platform with incomplete setup</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>GCC Countries</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1644" onchange="updateProgress()"><label for="c1644">Qatar → +974</label></li>
                        <li><input type="checkbox" id="c1645" onchange="updateProgress()"><label for="c1645">Saudi Arabia → +966</label></li>
                        <li><input type="checkbox" id="c1646" onchange="updateProgress()"><label for="c1646">UAE → +971</label></li>
                        <li><input type="checkbox" id="c1647" onchange="updateProgress()"><label for="c1647">Kuwait → +965</label></li>
                        <li><input type="checkbox" id="c1648" onchange="updateProgress()"><label for="c1648">Bahrain → +973</label></li>
                        <li><input type="checkbox" id="c1649" onchange="updateProgress()"><label for="c1649">Oman → +968</label></li>
                        <li><input type="checkbox" id="c1650" onchange="updateProgress()"><label for="c1650">Jordan → +962</label></li>
                        <li><input type="checkbox" id="c1651" onchange="updateProgress()"><label for="c1651">Lebanon → +961</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>South Asian Countries</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1652" onchange="updateProgress()"><label for="c1652">India → +91</label></li>
                        <li><input type="checkbox" id="c1653" onchange="updateProgress()"><label for="c1653">Pakistan → +92</label></li>
                        <li><input type="checkbox" id="c1654" onchange="updateProgress()"><label for="c1654">Bangladesh → +880</label></li>
                        <li><input type="checkbox" id="c1655" onchange="updateProgress()"><label for="c1655">Sri Lanka → +94</label></li>
                        <li><input type="checkbox" id="c1656" onchange="updateProgress()"><label for="c1656">Nepal → +977</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Southeast Asian Countries</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1657" onchange="updateProgress()"><label for="c1657">Philippines → +63</label></li>
                        <li><input type="checkbox" id="c1658" onchange="updateProgress()"><label for="c1658">Malaysia → +60</label></li>
                        <li><input type="checkbox" id="c1659" onchange="updateProgress()"><label for="c1659">Singapore → +65</label></li>
                        <li><input type="checkbox" id="c1660" onchange="updateProgress()"><label for="c1660">Indonesia → +62</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>African Countries</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1661" onchange="updateProgress()"><label for="c1661">Egypt → +20</label></li>
                        <li><input type="checkbox" id="c1662" onchange="updateProgress()"><label for="c1662">Nigeria → +234</label></li>
                        <li><input type="checkbox" id="c1663" onchange="updateProgress()"><label for="c1663">Kenya → +254</label></li>
                        <li><input type="checkbox" id="c1664" onchange="updateProgress()"><label for="c1664">South Africa → +27</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>European Countries</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1665" onchange="updateProgress()"><label for="c1665">UK → +44</label></li>
                        <li><input type="checkbox" id="c1666" onchange="updateProgress()"><label for="c1666">France → +33</label></li>
                        <li><input type="checkbox" id="c1667" onchange="updateProgress()"><label for="c1667">Germany → +49</label></li>
                        <li><input type="checkbox" id="c1668" onchange="updateProgress()"><label for="c1668">Italy → +39</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Americas</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1669" onchange="updateProgress()"><label for="c1669">USA/Canada → +1 (combined entry)</label></li>
                        <li><input type="checkbox" id="c1670" onchange="updateProgress()"><label for="c1670">Mexico → +52</label></li>
                        <li><input type="checkbox" id="c1671" onchange="updateProgress()"><label for="c1671">Brazil → +55</label></li>
                        <li><input type="checkbox" id="c1672" onchange="updateProgress()"><label for="c1672">Note: &quot;USA&quot; alone falls back to default</label></li>
                        <li><input type="checkbox" id="c1673" onchange="updateProgress()"><label for="c1673">Note: &quot;Canada&quot; alone falls back to default</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Case Insensitivity</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1674" onchange="updateProgress()"><label for="c1674">&quot;qatar&quot; = &quot;QATAR&quot; = &quot;QaTaR&quot; → +974</label></li>
                        <li><input type="checkbox" id="c1675" onchange="updateProgress()"><label for="c1675">Lookup is case-insensitive</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Fallback Behavior</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1676" onchange="updateProgress()"><label for="c1676">**Unknown country → +91 (India)**</label></li>
                        <li><input type="checkbox" id="c1677" onchange="updateProgress()"><label for="c1677">Empty string → +91</label></li>
                        <li><input type="checkbox" id="c1678" onchange="updateProgress()"><label for="c1678">Misspelled country → +91</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>COUNTRY_CODES Data Structure</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1679" onchange="updateProgress()"><label for="c1679">Each entry has: code, country, flag</label></li>
                        <li><input type="checkbox" id="c1680" onchange="updateProgress()"><label for="c1680">At least 50 country entries</label></li>
                        <li><input type="checkbox" id="c1681" onchange="updateProgress()"><label for="c1681">All codes match format: `^\+\d+$`</label></li>
                        <li><input type="checkbox" id="c1682" onchange="updateProgress()"><label for="c1682">All GCC countries present</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-25" data-section="25">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 25</span>
                    <h3>SETTINGS MODULE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/core/currency.test.ts tests/unit/assets/depreciation.test.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>25.1 Exchange Rates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1683" onchange="updateProgress()"><label for="c1683">Get exchange rates for organization</label></li>
                        <li><input type="checkbox" id="c1684" onchange="updateProgress()"><label for="c1684">Update exchange rates (admin only)</label></li>
                        <li><input type="checkbox" id="c1685" onchange="updateProgress()"><label for="c1685">Default rates: USD=3.64, EUR=3.96, GBP=4.60, SAR=0.97, AED=0.99, KWD=11.85</label></li>
                        <li><input type="checkbox" id="c1686" onchange="updateProgress()"><label for="c1686">Key format: {CURRENCY}_TO_QAR_RATE</label></li>
                        <li><input type="checkbox" id="c1687" onchange="updateProgress()"><label for="c1687">Tenant-scoped settings stored in SystemSettings</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Default Exchange Rates to QAR</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1688" onchange="updateProgress()"><label for="c1688">**QAR:** 1 (base currency)</label></li>
                        <li><input type="checkbox" id="c1689" onchange="updateProgress()"><label for="c1689">**USD:** 3.64</label></li>
                        <li><input type="checkbox" id="c1690" onchange="updateProgress()"><label for="c1690">**EUR:** 3.96</label></li>
                        <li><input type="checkbox" id="c1691" onchange="updateProgress()"><label for="c1691">**GBP:** 4.60</label></li>
                        <li><input type="checkbox" id="c1692" onchange="updateProgress()"><label for="c1692">**SAR:** 0.97</label></li>
                        <li><input type="checkbox" id="c1693" onchange="updateProgress()"><label for="c1693">**AED:** 0.99</label></li>
                        <li><input type="checkbox" id="c1694" onchange="updateProgress()"><label for="c1694">**KWD:** 11.85</label></li>
                        <li><input type="checkbox" id="c1695" onchange="updateProgress()"><label for="c1695">**BHD:** 9.66</label></li>
                        <li><input type="checkbox" id="c1696" onchange="updateProgress()"><label for="c1696">**OMR:** 9.46</label></li>
                        <li><input type="checkbox" id="c1697" onchange="updateProgress()"><label for="c1697">**INR:** 0.044</label></li>
                        <li><input type="checkbox" id="c1698" onchange="updateProgress()"><label for="c1698">**PKR:** 0.013</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>convertToQARSync Function</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1699" onchange="updateProgress()"><label for="c1699">QAR amount returns unchanged (100 QAR → 100)</label></li>
                        <li><input type="checkbox" id="c1700" onchange="updateProgress()"><label for="c1700">USD converted: 100 USD → 364 QAR</label></li>
                        <li><input type="checkbox" id="c1701" onchange="updateProgress()"><label for="c1701">EUR converted: 100 EUR → 396 QAR</label></li>
                        <li><input type="checkbox" id="c1702" onchange="updateProgress()"><label for="c1702">GBP converted: 100 GBP → 460 QAR</label></li>
                        <li><input type="checkbox" id="c1703" onchange="updateProgress()"><label for="c1703">**Unknown currency defaults to rate of 1** (100 UNKNOWN → 100)</label></li>
                        <li><input type="checkbox" id="c1704" onchange="updateProgress()"><label for="c1704">Decimal amounts handled: 50.5 USD → 183.82 QAR</label></li>
                        <li><input type="checkbox" id="c1705" onchange="updateProgress()"><label for="c1705">Zero amount returns 0: 0 USD → 0</label></li>
                        <li><input type="checkbox" id="c1706" onchange="updateProgress()"><label for="c1706">Negative amounts converted: -100 USD → -364 QAR</label></li>
                        <li><input type="checkbox" id="c1707" onchange="updateProgress()"><label for="c1707">Very small amounts: 0.01 USD → 0.0364 QAR</label></li>
                        <li><input type="checkbox" id="c1708" onchange="updateProgress()"><label for="c1708">Very large amounts: 1,000,000 USD → 3,640,000 QAR</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>formatCurrency Function</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1709" onchange="updateProgress()"><label for="c1709">**Null amount returns:** &quot;—&quot; (em dash)</label></li>
                        <li><input type="checkbox" id="c1710" onchange="updateProgress()"><label for="c1710">**Undefined amount returns:** &quot;—&quot;</label></li>
                        <li><input type="checkbox" id="c1711" onchange="updateProgress()"><label for="c1711">**NaN amount returns:** &quot;—&quot;</label></li>
                        <li><input type="checkbox" id="c1712" onchange="updateProgress()"><label for="c1712">Default currency is QAR if not specified</label></li>
                        <li><input type="checkbox" id="c1713" onchange="updateProgress()"><label for="c1713">QAR formatting includes &quot;QAR&quot; and amount</label></li>
                        <li><input type="checkbox" id="c1714" onchange="updateProgress()"><label for="c1714">USD formatting includes &quot;$&quot; symbol</label></li>
                        <li><input type="checkbox" id="c1715" onchange="updateProgress()"><label for="c1715">EUR formatting includes &quot;€&quot; symbol (or &quot;EUR&quot;)</label></li>
                        <li><input type="checkbox" id="c1716" onchange="updateProgress()"><label for="c1716">Decimal options respected: `{ minimumFractionDigits: 0, maximumFractionDigits: 0 }`</label></li>
                        <li><input type="checkbox" id="c1717" onchange="updateProgress()"><label for="c1717">Compact notation for large numbers: 1,000,000 USD → &quot;$1M&quot; (with `compact: true`)</label></li>
                        <li><input type="checkbox" id="c1718" onchange="updateProgress()"><label for="c1718">Unsupported currency fallback: &quot;XYZ 100.00&quot; format</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Rate Caching</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1719" onchange="updateProgress()"><label for="c1719">**Cache duration:** 5 minutes (300,000ms)</label></li>
                        <li><input type="checkbox" id="c1720" onchange="updateProgress()"><label for="c1720">Cache key format: `{tenantId}_{currency}`</label></li>
                        <li><input type="checkbox" id="c1721" onchange="updateProgress()"><label for="c1721">`clearRateCache()` clears all cached rates</label></li>
                        <li><input type="checkbox" id="c1722" onchange="updateProgress()"><label for="c1722">Fresh cache (&lt; 5 min old): returns cached rate</label></li>
                        <li><input type="checkbox" id="c1723" onchange="updateProgress()"><label for="c1723">Stale cache (&gt; 5 min old): fetches new rate</label></li>
                        <li><input type="checkbox" id="c1724" onchange="updateProgress()"><label for="c1724">Cache at exactly 5 minutes: still valid</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>calculatePriceInQAR Logic</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1725" onchange="updateProgress()"><label for="c1725">Explicit QAR price takes precedence over conversion</label></li>
                        <li><input type="checkbox" id="c1726" onchange="updateProgress()"><label for="c1726">Null price returns null</label></li>
                        <li><input type="checkbox" id="c1727" onchange="updateProgress()"><label for="c1727">Undefined price returns null</label></li>
                        <li><input type="checkbox" id="c1728" onchange="updateProgress()"><label for="c1728">Default currency is QAR if priceCurrency is null</label></li>
                        <li><input type="checkbox" id="c1729" onchange="updateProgress()"><label for="c1729">Price in QAR returns unchanged</label></li>
                        <li><input type="checkbox" id="c1730" onchange="updateProgress()"><label for="c1730">Price converted using default rates</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Supported Currencies List</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1731" onchange="updateProgress()"><label for="c1731">**Major:** QAR, USD, EUR, GBP</label></li>
                        <li><input type="checkbox" id="c1732" onchange="updateProgress()"><label for="c1732">**GCC:** SAR, AED, KWD, BHD, OMR</label></li>
                        <li><input type="checkbox" id="c1733" onchange="updateProgress()"><label for="c1733">**Asian:** INR, PKR, PHP, BDT, NPR, LKR, CNY, JPY, SGD, MYR, THB, IDR</label></li>
                        <li><input type="checkbox" id="c1734" onchange="updateProgress()"><label for="c1734">**Other:** EGP, JOD, AUD, CAD, CHF, ZAR, TRY, RUB, BRL, MXN</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>25.2 Payroll Settings</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1735" onchange="updateProgress()"><label for="c1735">Configure GOSI (social insurance) rates</label></li>
                        <li><input type="checkbox" id="c1736" onchange="updateProgress()"><label for="c1736">Configure tax percentages</label></li>
                        <li><input type="checkbox" id="c1737" onchange="updateProgress()"><label for="c1737">Configure other deduction rates</label></li>
                        <li><input type="checkbox" id="c1738" onchange="updateProgress()"><label for="c1738">Settings used by payroll calculations</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>25.3 Code Format Settings</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1739" onchange="updateProgress()"><label for="c1739">Configure code prefix (3 chars, uppercase alphanumeric)</label></li>
                        <li><input type="checkbox" id="c1740" onchange="updateProgress()"><label for="c1740">Format used for: Employee IDs, Asset tags, Purchase requests, Leave requests</label></li>
                        <li><input type="checkbox" id="c1741" onchange="updateProgress()"><label for="c1741">Example: BCE, JAS, INC</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>25.4 Asset Category Settings</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1742" onchange="updateProgress()"><label for="c1742">CRUD for asset categories via settings page</label></li>
                        <li><input type="checkbox" id="c1743" onchange="updateProgress()"><label for="c1743">Code: exactly 2 letters, uppercase</label></li>
                        <li><input type="checkbox" id="c1744" onchange="updateProgress()"><label for="c1744">Name: 1-50 characters</label></li>
                        <li><input type="checkbox" id="c1745" onchange="updateProgress()"><label for="c1745">Description: max 200 characters</label></li>
                        <li><input type="checkbox" id="c1746" onchange="updateProgress()"><label for="c1746">Sort order configuration for display</label></li>
                        <li><input type="checkbox" id="c1747" onchange="updateProgress()"><label for="c1747">Deactivate categories (isActive = false)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>createDepreciationCategorySchema Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1748" onchange="updateProgress()"><label for="c1748">**Name required:** 2-100 characters</label></li>
                        <li><input type="checkbox" id="c1749" onchange="updateProgress()"><label for="c1749">Name &lt; 2 chars rejected (e.g., &quot;A&quot;)</label></li>
                        <li><input type="checkbox" id="c1750" onchange="updateProgress()"><label for="c1750">Name &gt; 100 chars rejected</label></li>
                        <li><input type="checkbox" id="c1751" onchange="updateProgress()"><label for="c1751">**Code required:** 2-50 characters, uppercase alphanumeric + underscores</label></li>
                        <li><input type="checkbox" id="c1752" onchange="updateProgress()"><label for="c1752">Code &lt; 2 chars rejected (e.g., &quot;A&quot;)</label></li>
                        <li><input type="checkbox" id="c1753" onchange="updateProgress()"><label for="c1753">Code &gt; 50 chars rejected</label></li>
                        <li><input type="checkbox" id="c1754" onchange="updateProgress()"><label for="c1754">**Code format:** `^[A-Z0-9_]+$` only</label></li>
                        <li><input type="checkbox" id="c1755" onchange="updateProgress()"><label for="c1755">Lowercase code rejected (e.g., &quot;comp_equip&quot;)</label></li>
                        <li><input type="checkbox" id="c1756" onchange="updateProgress()"><label for="c1756">Code with hyphens rejected (e.g., &quot;COMP-EQUIP&quot;)</label></li>
                        <li><input type="checkbox" id="c1757" onchange="updateProgress()"><label for="c1757">Code with numbers accepted (e.g., &quot;COMP123&quot;)</label></li>
                        <li><input type="checkbox" id="c1758" onchange="updateProgress()"><label for="c1758">Code with underscores accepted (e.g., &quot;COMP_EQUIP_123&quot;)</label></li>
                        <li><input type="checkbox" id="c1759" onchange="updateProgress()"><label for="c1759">**annualRate:** 0-100 (percentage)</label></li>
                        <li><input type="checkbox" id="c1760" onchange="updateProgress()"><label for="c1760">Negative annual rate rejected</label></li>
                        <li><input type="checkbox" id="c1761" onchange="updateProgress()"><label for="c1761">Annual rate &gt; 100% rejected</label></li>
                        <li><input type="checkbox" id="c1762" onchange="updateProgress()"><label for="c1762">Annual rate = 0 accepted</label></li>
                        <li><input type="checkbox" id="c1763" onchange="updateProgress()"><label for="c1763">Annual rate = 100 accepted (full depreciation)</label></li>
                        <li><input type="checkbox" id="c1764" onchange="updateProgress()"><label for="c1764">**usefulLifeYears:** min 0, integer</label></li>
                        <li><input type="checkbox" id="c1765" onchange="updateProgress()"><label for="c1765">Negative useful life years rejected</label></li>
                        <li><input type="checkbox" id="c1766" onchange="updateProgress()"><label for="c1766">usefulLifeYears = 0 accepted</label></li>
                        <li><input type="checkbox" id="c1767" onchange="updateProgress()"><label for="c1767">Non-integer useful life years rejected (e.g., 4.5)</label></li>
                        <li><input type="checkbox" id="c1768" onchange="updateProgress()"><label for="c1768">**Description optional:** max 500 characters</label></li>
                        <li><input type="checkbox" id="c1769" onchange="updateProgress()"><label for="c1769">Description &gt; 500 chars rejected</label></li>
                        <li><input type="checkbox" id="c1770" onchange="updateProgress()"><label for="c1770">**isActive:** defaults to true</label></li>
                        <li><input type="checkbox" id="c1770a" onchange="updateProgress()"><label for="c1770a">**Form edge case:** Annual rate of 0 prevents Infinity in usefulLifeYears calculation</label></li>
                        <li><input type="checkbox" id="c1770b" onchange="updateProgress()"><label for="c1770b">**Form edge case:** isFinite() check prevents invalid usefulLifeYears (NaN/Infinity)</label></li>
                        <li><input type="checkbox" id="c1770c" onchange="updateProgress()"><label for="c1770c">**Form auto-calculation:** usefulLifeYears = Math.round(100 / annualRate) when rate &gt; 0</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>updateDepreciationCategorySchema Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1771" onchange="updateProgress()"><label for="c1771">All fields optional (partial updates)</label></li>
                        <li><input type="checkbox" id="c1772" onchange="updateProgress()"><label for="c1772">Empty object allowed (no changes)</label></li>
                        <li><input type="checkbox" id="c1773" onchange="updateProgress()"><label for="c1773">Same validation rules apply when fields are provided</label></li>
                        <li><input type="checkbox" id="c1774" onchange="updateProgress()"><label for="c1774">Can update multiple fields at once</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>25.6 Document Type Settings</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1775" onchange="updateProgress()"><label for="c1775">CRUD for company document types</label></li>
                        <li><input type="checkbox" id="c1776" onchange="updateProgress()"><label for="c1776">Predefined types: Commercial Registration, Establishment Card, Commercial License, Tenancy Contract, Vehicle Istmara, Vehicle Insurance</label></li>
                        <li><input type="checkbox" id="c1777" onchange="updateProgress()"><label for="c1777">Custom &quot;Other&quot; option with free-text name</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>25.7 Data Export/Import</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1778" onchange="updateProgress()"><label for="c1778">Export to CSV format</label></li>
                        <li><input type="checkbox" id="c1779" onchange="updateProgress()"><label for="c1779">Export to Excel format</label></li>
                        <li><input type="checkbox" id="c1780" onchange="updateProgress()"><label for="c1780">Import from CSV with validation</label></li>
                        <li><input type="checkbox" id="c1781" onchange="updateProgress()"><label for="c1781">Supported entities: Assets, Employees, Suppliers, Subscriptions</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>25.8 Database Statistics</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1782" onchange="updateProgress()"><label for="c1782">Display user count</label></li>
                        <li><input type="checkbox" id="c1783" onchange="updateProgress()"><label for="c1783">Display asset count</label></li>
                        <li><input type="checkbox" id="c1784" onchange="updateProgress()"><label for="c1784">Display subscription count</label></li>
                        <li><input type="checkbox" id="c1785" onchange="updateProgress()"><label for="c1785">Display supplier count</label></li>
                        <li><input type="checkbox" id="c1786" onchange="updateProgress()"><label for="c1786">Display activity log count</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>25.9 WhatsApp Integration Settings</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1787" onchange="updateProgress()"><label for="c1787">Configure WhatsApp Business API credentials</label></li>
                        <li><input type="checkbox" id="c1788" onchange="updateProgress()"><label for="c1788">Set up phone numbers</label></li>
                        <li><input type="checkbox" id="c1789" onchange="updateProgress()"><label for="c1789">Manage message templates</label></li>
                        <li><input type="checkbox" id="c1790" onchange="updateProgress()"><label for="c1790">Configure notification preferences</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-26" data-section="26">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 26</span>
                    <h3>ADDITIONAL EDGE CASES</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                

                <div class="subsection">
                    <div class="subsection-header">
                        <span>26.1 Location Constraints</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1791" onchange="updateProgress()"><label for="c1791">Location name must be unique within tenant</label></li>
                        <li><input type="checkbox" id="c1792" onchange="updateProgress()"><label for="c1792">Cannot delete location with assigned assets (400 error)</label></li>
                        <li><input type="checkbox" id="c1793" onchange="updateProgress()"><label for="c1793">Soft delete via isActive flag prevents hard delete issues</label></li>
                        <li><input type="checkbox" id="c1794" onchange="updateProgress()"><label for="c1794">Asset count tracked per location for validation</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>26.2 Company Document Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1795" onchange="updateProgress()"><label for="c1795">Vehicle documents can be linked via assetId</label></li>
                        <li><input type="checkbox" id="c1796" onchange="updateProgress()"><label for="c1796">Expiry status calculation: expired (past), expiring (30 days), valid</label></li>
                        <li><input type="checkbox" id="c1797" onchange="updateProgress()"><label for="c1797">Badge color mapping: red (expired), yellow (expiring), green (valid)</label></li>
                        <li><input type="checkbox" id="c1798" onchange="updateProgress()"><label for="c1798">File cleanup via cleanupStorageFile() on document delete</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>26.3 Approval Policy Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1799" onchange="updateProgress()"><label for="c1799">Policy priority: higher number = higher priority</label></li>
                        <li><input type="checkbox" id="c1800" onchange="updateProgress()"><label for="c1800">Amount thresholds for purchase/asset policies (minAmount, maxAmount)</label></li>
                        <li><input type="checkbox" id="c1801" onchange="updateProgress()"><label for="c1801">Days thresholds for leave policies (minDays, maxDays)</label></li>
                        <li><input type="checkbox" id="c1802" onchange="updateProgress()"><label for="c1802">Policy matching based on request attributes (value, days)</label></li>
                        <li><input type="checkbox" id="c1803" onchange="updateProgress()"><label for="c1803">Multiple policies can match; highest priority selected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>26.4 Delegation Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1804" onchange="updateProgress()"><label for="c1804">No overlapping active delegations for same delegator</label></li>
                        <li><input type="checkbox" id="c1805" onchange="updateProgress()"><label for="c1805">Delegatee must have ADMIN role</label></li>
                        <li><input type="checkbox" id="c1806" onchange="updateProgress()"><label for="c1806">Cannot delegate to self (400 error)</label></li>
                        <li><input type="checkbox" id="c1807" onchange="updateProgress()"><label for="c1807">Start date must be before end date</label></li>
                        <li><input type="checkbox" id="c1808" onchange="updateProgress()"><label for="c1808">Deactivation immediate on isActive = false</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>26.5 Subscription Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1809" onchange="updateProgress()"><label for="c1809">Renewal date is Qatar timezone aware (Asia/Qatar)</label></li>
                        <li><input type="checkbox" id="c1810" onchange="updateProgress()"><label for="c1810">Purchase date must be &lt;= Renewal date</label></li>
                        <li><input type="checkbox" id="c1811" onchange="updateProgress()"><label for="c1811">lastChargedRenewalDate prevents double-charging on reactivation</label></li>
                        <li><input type="checkbox" id="c1812" onchange="updateProgress()"><label for="c1812">Multi-currency conversion uses tenant-specific exchange rates</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>26.6 Leave Module Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1813" onchange="updateProgress()"><label for="c1813">Once-in-employment check for Hajj leave (hajjLeaveTaken flag)</label></li>
                        <li><input type="checkbox" id="c1814" onchange="updateProgress()"><label for="c1814">Gender restriction validation (MALE/FEMALE for specific leave types)</label></li>
                        <li><input type="checkbox" id="c1815" onchange="updateProgress()"><label for="c1815">Service-based entitlement tiers: {&quot;12&quot;: 21, &quot;60&quot;: 28}</label></li>
                        <li><input type="checkbox" id="c1816" onchange="updateProgress()"><label for="c1816">Accrual-based leave uses calendar days (all 7 days)</label></li>
                        <li><input type="checkbox" id="c1817" onchange="updateProgress()"><label for="c1817">Half-day requires same start/end date</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>26.7 Payroll Module Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1818" onchange="updateProgress()"><label for="c1818">Gratuity: &lt; 12 months service = ineligible (0 gratuity)</label></li>
                        <li><input type="checkbox" id="c1819" onchange="updateProgress()"><label for="c1819">Weekly rate calculation: (Basic / 30) * 7</label></li>
                        <li><input type="checkbox" id="c1820" onchange="updateProgress()"><label for="c1820">Pro-rata calculation for partial years</label></li>
                        <li><input type="checkbox" id="c1821" onchange="updateProgress()"><label for="c1821">WPS SIF file format compliance for Qatar banks</label></li>
                        <li><input type="checkbox" id="c1822" onchange="updateProgress()"><label for="c1822">Duplicate payroll run for same year/month returns 400 with existingId</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>26.8 Asset Module Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1823" onchange="updateProgress()"><label for="c1823">Disposal date cannot be in the future</label></li>
                        <li><input type="checkbox" id="c1824" onchange="updateProgress()"><label for="c1824">Disposal proceeds required if method = SOLD (must be &gt; 0)</label></li>
                        <li><input type="checkbox" id="c1825" onchange="updateProgress()"><label for="c1825">Pro-rata depreciation calculated up to disposal date</label></li>
                        <li><input type="checkbox" id="c1826" onchange="updateProgress()"><label for="c1826">Gain/loss calculation: Disposal Proceeds - Net Book Value</label></li>
                        <li><input type="checkbox" id="c1827" onchange="updateProgress()"><label for="c1827">Already disposed asset returns 400 error on re-disposal</label></li>
                        <li><input type="checkbox" id="c1828" onchange="updateProgress()"><label for="c1828">Pending assignment prevents status update to IN_USE</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-27" data-section="27">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 27</span>
                    <h3>WHATSAPP APPROVAL INTEGRATION</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/whatsapp/approval-integration.test.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>27.1 WhatsApp Notification Permissions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1829" onchange="updateProgress()"><label for="c1829">**All conditions required:** hasPhoneNumber AND isWhatsAppEnabled AND isNotificationOptIn</label></li>
                        <li><input type="checkbox" id="c1830" onchange="updateProgress()"><label for="c1830">Missing phone number → `{ canSend: false, reason: 'No phone number configured' }`</label></li>
                        <li><input type="checkbox" id="c1831" onchange="updateProgress()"><label for="c1831">WhatsApp disabled → `{ canSend: false, reason: 'WhatsApp notifications disabled' }`</label></li>
                        <li><input type="checkbox" id="c1832" onchange="updateProgress()"><label for="c1832">User opted out → `{ canSend: false, reason: 'User opted out of notifications' }`</label></li>
                        <li><input type="checkbox" id="c1833" onchange="updateProgress()"><label for="c1833">All conditions met → `{ canSend: true }`</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>27.2 Action Token Generation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1834" onchange="updateProgress()"><label for="c1834">**Token format:** `{entityType}-{entityId}-{action}-{randomPart}`</label></li>
                        <li><input type="checkbox" id="c1835" onchange="updateProgress()"><label for="c1835">Tokens are unique (random component)</label></li>
                        <li><input type="checkbox" id="c1836" onchange="updateProgress()"><label for="c1836">Token includes: LEAVE_REQUEST, PURCHASE_REQUEST, or ASSET_REQUEST</label></li>
                        <li><input type="checkbox" id="c1837" onchange="updateProgress()"><label for="c1837">Action: APPROVE or REJECT</label></li>
                        <li><input type="checkbox" id="c1838" onchange="updateProgress()"><label for="c1838">**Default expiry:** 24 hours</label></li>
                        <li><input type="checkbox" id="c1839" onchange="updateProgress()"><label for="c1839">Custom expiry time supported</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>27.3 Token Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1840" onchange="updateProgress()"><label for="c1840">Valid token: non-null, non-expired, not used → `{ valid: true }`</label></li>
                        <li><input type="checkbox" id="c1841" onchange="updateProgress()"><label for="c1841">Missing token → `{ valid: false, reason: 'Token not found' }`</label></li>
                        <li><input type="checkbox" id="c1842" onchange="updateProgress()"><label for="c1842">Missing expiry → `{ valid: false, reason: 'Expiry not set' }`</label></li>
                        <li><input type="checkbox" id="c1843" onchange="updateProgress()"><label for="c1843">Expired token → `{ valid: false, reason: 'Token expired' }`</label></li>
                        <li><input type="checkbox" id="c1844" onchange="updateProgress()"><label for="c1844">Already used token → `{ valid: false, reason: 'Token already used' }`</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>27.4 Token Invalidation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1845" onchange="updateProgress()"><label for="c1845">Invalidate tokens when request reaches final status</label></li>
                        <li><input type="checkbox" id="c1846" onchange="updateProgress()"><label for="c1846">Final statuses: APPROVED, REJECTED, CANCELLED</label></li>
                        <li><input type="checkbox" id="c1847" onchange="updateProgress()"><label for="c1847">PENDING status → tokens remain valid</label></li>
                        <li><input type="checkbox" id="c1848" onchange="updateProgress()"><label for="c1848">IN_PROGRESS status → tokens remain valid</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>27.5 Approval Request Type Detection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1849" onchange="updateProgress()"><label for="c1849">Leave request: has `leaveType` AND `totalDays`</label></li>
                        <li><input type="checkbox" id="c1850" onchange="updateProgress()"><label for="c1850">Purchase request: has `title` AND `totalAmount`</label></li>
                        <li><input type="checkbox" id="c1851" onchange="updateProgress()"><label for="c1851">Asset request: has `assetName`</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>27.6 WhatsApp Message Formatting</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1852" onchange="updateProgress()"><label for="c1852">Bold headers: `*New Leave Request*`</label></li>
                        <li><input type="checkbox" id="c1853" onchange="updateProgress()"><label for="c1853">Leave notification includes: Employee name, Leave type, Date range, Days count</label></li>
                        <li><input type="checkbox" id="c1854" onchange="updateProgress()"><label for="c1854">Purchase notification includes: Requester, Item title, Amount formatted with currency</label></li>
                        <li><input type="checkbox" id="c1855" onchange="updateProgress()"><label for="c1855">Date format: &quot;D Mon&quot; (e.g., &quot;15 Jan&quot;)</label></li>
                        <li><input type="checkbox" id="c1856" onchange="updateProgress()"><label for="c1856">Amount format: &quot;QAR 5,000.00&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>27.7 Role-Based Approval Authorization</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1857" onchange="updateProgress()"><label for="c1857">ADMIN can approve any role</label></li>
                        <li><input type="checkbox" id="c1858" onchange="updateProgress()"><label for="c1858">Exact role match required for non-ADMIN</label></li>
                        <li><input type="checkbox" id="c1859" onchange="updateProgress()"><label for="c1859">MANAGER can approve MANAGER-required steps</label></li>
                        <li><input type="checkbox" id="c1860" onchange="updateProgress()"><label for="c1860">HR can approve HR-required steps</label></li>
                        <li><input type="checkbox" id="c1861" onchange="updateProgress()"><label for="c1861">EMPLOYEE cannot approve unless exact match</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>27.8 Notification Status Tracking</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1862" onchange="updateProgress()"><label for="c1862">Status progression: PENDING → SENT → DELIVERED → READ</label></li>
                        <li><input type="checkbox" id="c1863" onchange="updateProgress()"><label for="c1863">SENT records `sentAt` timestamp</label></li>
                        <li><input type="checkbox" id="c1864" onchange="updateProgress()"><label for="c1864">DELIVERED records `deliveredAt` timestamp</label></li>
                        <li><input type="checkbox" id="c1865" onchange="updateProgress()"><label for="c1865">READ records `readAt` timestamp</label></li>
                        <li><input type="checkbox" id="c1866" onchange="updateProgress()"><label for="c1866">FAILED status for errors</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>27.9 Error Classification</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1867" onchange="updateProgress()"><label for="c1867">NETWORK_ERROR → retryable: true</label></li>
                        <li><input type="checkbox" id="c1868" onchange="updateProgress()"><label for="c1868">RATE_LIMITED → retryable: true</label></li>
                        <li><input type="checkbox" id="c1869" onchange="updateProgress()"><label for="c1869">INVALID_PHONE → retryable: false</label></li>
                        <li><input type="checkbox" id="c1870" onchange="updateProgress()"><label for="c1870">USER_BLOCKED → retryable: false</label></li>
                        <li><input type="checkbox" id="c1871" onchange="updateProgress()"><label for="c1871">Unknown error → retryable: false</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>27.10 Non-Blocking Notification</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1872" onchange="updateProgress()"><label for="c1872">Fire-and-forget pattern (don't await)</label></li>
                        <li><input type="checkbox" id="c1873" onchange="updateProgress()"><label for="c1873">Returns immediately: `{ started: true }`</label></li>
                        <li><input type="checkbox" id="c1874" onchange="updateProgress()"><label for="c1874">Errors logged but don't block main flow</label></li>
                        <li><input type="checkbox" id="c1875" onchange="updateProgress()"><label for="c1875">Return time &lt; 50ms even for slow sends</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-28" data-section="28">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 28</span>
                    <h3>DATE FORMATTING UTILITIES</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/core/date-format.test.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>28.1 formatDate Function</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1876" onchange="updateProgress()"><label for="c1876">**Output format:** &quot;D Mon YYYY&quot; (e.g., &quot;10 Aug 2025&quot;)</label></li>
                        <li><input type="checkbox" id="c1877" onchange="updateProgress()"><label for="c1877">Accepts Date objects</label></li>
                        <li><input type="checkbox" id="c1878" onchange="updateProgress()"><label for="c1878">Accepts ISO string dates</label></li>
                        <li><input type="checkbox" id="c1879" onchange="updateProgress()"><label for="c1879">**Null returns fallback** (default &quot;N/A&quot;)</label></li>
                        <li><input type="checkbox" id="c1880" onchange="updateProgress()"><label for="c1880">**Undefined returns fallback**</label></li>
                        <li><input type="checkbox" id="c1881" onchange="updateProgress()"><label for="c1881">**Invalid date returns fallback**</label></li>
                        <li><input type="checkbox" id="c1882" onchange="updateProgress()"><label for="c1882">Custom fallback text supported</label></li>
                        <li><input type="checkbox" id="c1883" onchange="updateProgress()"><label for="c1883">All 12 months: Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>28.2 formatDateTime Function</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1884" onchange="updateProgress()"><label for="c1884">**Output format:** &quot;D Mon YYYY HH:MM&quot; (e.g., &quot;10 Aug 2025 14:30&quot;)</label></li>
                        <li><input type="checkbox" id="c1885" onchange="updateProgress()"><label for="c1885">Hours zero-padded to 2 digits</label></li>
                        <li><input type="checkbox" id="c1886" onchange="updateProgress()"><label for="c1886">Minutes zero-padded to 2 digits</label></li>
                        <li><input type="checkbox" id="c1887" onchange="updateProgress()"><label for="c1887">Midnight: &quot;00:00&quot;</label></li>
                        <li><input type="checkbox" id="c1888" onchange="updateProgress()"><label for="c1888">Null/undefined/invalid → fallback</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>28.3 toInputDateString Function</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1889" onchange="updateProgress()"><label for="c1889">**Output format:** &quot;YYYY-MM-DD&quot; (HTML input compatible)</label></li>
                        <li><input type="checkbox" id="c1890" onchange="updateProgress()"><label for="c1890">Date object converted correctly</label></li>
                        <li><input type="checkbox" id="c1891" onchange="updateProgress()"><label for="c1891">Already formatted &quot;YYYY-MM-DD&quot; string returned as-is</label></li>
                        <li><input type="checkbox" id="c1892" onchange="updateProgress()"><label for="c1892">ISO string extracts date part before &quot;T&quot;</label></li>
                        <li><input type="checkbox" id="c1893" onchange="updateProgress()"><label for="c1893">Null/undefined → empty string</label></li>
                        <li><input type="checkbox" id="c1894" onchange="updateProgress()"><label for="c1894">Invalid Date → empty string</label></li>
                        <li><input type="checkbox" id="c1895" onchange="updateProgress()"><label for="c1895">Single-digit month/day zero-padded</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>28.4 parseInputDateString Function</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1896" onchange="updateProgress()"><label for="c1896">**Input format:** &quot;YYYY-MM-DD&quot; only</label></li>
                        <li><input type="checkbox" id="c1897" onchange="updateProgress()"><label for="c1897">Returns Date object at noon (12:00) to avoid timezone issues</label></li>
                        <li><input type="checkbox" id="c1898" onchange="updateProgress()"><label for="c1898">Null/undefined → null</label></li>
                        <li><input type="checkbox" id="c1899" onchange="updateProgress()"><label for="c1899">Invalid format → null (e.g., &quot;10/08/2025&quot;, &quot;Aug 10, 2025&quot;)</label></li>
                        <li><input type="checkbox" id="c1900" onchange="updateProgress()"><label for="c1900">Non-padded format rejected: &quot;2025-8-10&quot; → null</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>28.5 formatDateForCSV Function</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1901" onchange="updateProgress()"><label for="c1901">Same format as formatDate: &quot;D Mon YYYY&quot;</label></li>
                        <li><input type="checkbox" id="c1902" onchange="updateProgress()"><label for="c1902">Returns empty string for null (not &quot;N/A&quot;)</label></li>
                        <li><input type="checkbox" id="c1903" onchange="updateProgress()"><label for="c1903">Used for CSV export formatting</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>28.6 formatRelativeTime Function</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1904" onchange="updateProgress()"><label for="c1904">**&lt; 1 minute ago:** &quot;now&quot;</label></li>
                        <li><input type="checkbox" id="c1905" onchange="updateProgress()"><label for="c1905">**&lt; 1 hour ago:** &quot;Xm ago&quot; (e.g., &quot;5m ago&quot;)</label></li>
                        <li><input type="checkbox" id="c1906" onchange="updateProgress()"><label for="c1906">**&lt; 24 hours ago:** &quot;Xh ago&quot; (e.g., &quot;3h ago&quot;)</label></li>
                        <li><input type="checkbox" id="c1907" onchange="updateProgress()"><label for="c1907">**&lt; 7 days ago:** &quot;Xd ago&quot; (e.g., &quot;2d ago&quot;)</label></li>
                        <li><input type="checkbox" id="c1908" onchange="updateProgress()"><label for="c1908">**Same year, &gt; 7 days:** &quot;D Mon&quot; (e.g., &quot;10 Aug&quot;)</label></li>
                        <li><input type="checkbox" id="c1909" onchange="updateProgress()"><label for="c1909">**Different year:** &quot;D Mon YY&quot; (e.g., &quot;25 Dec 24&quot;)</label></li>
                        <li><input type="checkbox" id="c1910" onchange="updateProgress()"><label for="c1910">Null/invalid → empty string</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>28.7 Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1911" onchange="updateProgress()"><label for="c1911">Year boundary: Dec 31 → Jan 1 handled</label></li>
                        <li><input type="checkbox" id="c1912" onchange="updateProgress()"><label for="c1912">Leap year: Feb 29 handled</label></li>
                        <li><input type="checkbox" id="c1913" onchange="updateProgress()"><label for="c1913">Dates at midnight: preserved correctly</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-29" data-section="29">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 29</span>
                    <h3>QATAR TIMEZONE UTILITIES</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/qatar-timezone.test.ts src/lib/utils/qatar-timezone.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>29.1 Constants</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1914" onchange="updateProgress()"><label for="c1914">**QATAR_TIMEZONE** = 'Asia/Qatar'</label></li>
                        <li><input type="checkbox" id="c1915" onchange="updateProgress()"><label for="c1915">**QATAR_UTC_OFFSET** = 3 hours</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>29.2 getQatarNow</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1916" onchange="updateProgress()"><label for="c1916">Returns current date/time in Qatar timezone</label></li>
                        <li><input type="checkbox" id="c1917" onchange="updateProgress()"><label for="c1917">Time is UTC+3</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>29.3 toQatarTime</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1918" onchange="updateProgress()"><label for="c1918">Converts Date to Qatar timezone string</label></li>
                        <li><input type="checkbox" id="c1919" onchange="updateProgress()"><label for="c1919">Handles valid Date objects</label></li>
                        <li><input type="checkbox" id="c1920" onchange="updateProgress()"><label for="c1920">**Null input → null output**</label></li>
                        <li><input type="checkbox" id="c1921" onchange="updateProgress()"><label for="c1921">**Undefined input → null output**</label></li>
                        <li><input type="checkbox" id="c1922" onchange="updateProgress()"><label for="c1922">**Invalid date → null output**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>29.4 parseQatarDate</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1923" onchange="updateProgress()"><label for="c1923">Parses &quot;YYYY-MM-DD&quot; format string to Date</label></li>
                        <li><input type="checkbox" id="c1924" onchange="updateProgress()"><label for="c1924">Result is in Qatar timezone (start of day)</label></li>
                        <li><input type="checkbox" id="c1925" onchange="updateProgress()"><label for="c1925">**Empty string → throws error**</label></li>
                        <li><input type="checkbox" id="c1926" onchange="updateProgress()"><label for="c1926">**Invalid format → throws error**</label></li>
                        <li><input type="checkbox" id="c1927" onchange="updateProgress()"><label for="c1927">Whitespace trimmed before parsing</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>29.5 dateInputToQatarDate</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1928" onchange="updateProgress()"><label for="c1928">Converts HTML date input to Qatar timezone Date</label></li>
                        <li><input type="checkbox" id="c1929" onchange="updateProgress()"><label for="c1929">Handles &quot;YYYY-MM-DD&quot; format</label></li>
                        <li><input type="checkbox" id="c1930" onchange="updateProgress()"><label for="c1930">Returns start of day in Qatar timezone</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>29.6 isInPastQatar</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1931" onchange="updateProgress()"><label for="c1931">Returns true if date is before current Qatar date/time</label></li>
                        <li><input type="checkbox" id="c1932" onchange="updateProgress()"><label for="c1932">**Today at midnight → depends on current time**</label></li>
                        <li><input type="checkbox" id="c1933" onchange="updateProgress()"><label for="c1933">Yesterday → true</label></li>
                        <li><input type="checkbox" id="c1934" onchange="updateProgress()"><label for="c1934">Tomorrow → false</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>29.7 isInFutureQatar</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1935" onchange="updateProgress()"><label for="c1935">Returns true if date is after current Qatar date/time</label></li>
                        <li><input type="checkbox" id="c1936" onchange="updateProgress()"><label for="c1936">Tomorrow → true</label></li>
                        <li><input type="checkbox" id="c1937" onchange="updateProgress()"><label for="c1937">Yesterday → false</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>29.8 isTodayQatar</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1938" onchange="updateProgress()"><label for="c1938">Returns true if date is today in Qatar timezone</label></li>
                        <li><input type="checkbox" id="c1939" onchange="updateProgress()"><label for="c1939">Compares date portion only (ignores time)</label></li>
                        <li><input type="checkbox" id="c1940" onchange="updateProgress()"><label for="c1940">Yesterday → false</label></li>
                        <li><input type="checkbox" id="c1941" onchange="updateProgress()"><label for="c1941">Tomorrow → false</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>29.9 getQatarStartOfDay</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1942" onchange="updateProgress()"><label for="c1942">Returns Date at 00:00:00.000 Qatar time</label></li>
                        <li><input type="checkbox" id="c1943" onchange="updateProgress()"><label for="c1943">Midnight in Qatar timezone</label></li>
                        <li><input type="checkbox" id="c1944" onchange="updateProgress()"><label for="c1944">Useful for date range queries</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>29.10 getQatarEndOfDay</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1945" onchange="updateProgress()"><label for="c1945">Returns Date at 23:59:59.999 Qatar time</label></li>
                        <li><input type="checkbox" id="c1946" onchange="updateProgress()"><label for="c1946">End of day in Qatar timezone</label></li>
                        <li><input type="checkbox" id="c1947" onchange="updateProgress()"><label for="c1947">Useful for date range queries</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>29.11 formatQatarDate</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1948" onchange="updateProgress()"><label for="c1948">Formats Date for display in Qatar locale</label></li>
                        <li><input type="checkbox" id="c1949" onchange="updateProgress()"><label for="c1949">Human-readable format</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>29.12 getDaysUntilQatar</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1950" onchange="updateProgress()"><label for="c1950">Calculates days between now and target date</label></li>
                        <li><input type="checkbox" id="c1951" onchange="updateProgress()"><label for="c1951">Positive for future dates</label></li>
                        <li><input type="checkbox" id="c1952" onchange="updateProgress()"><label for="c1952">Negative for past dates</label></li>
                        <li><input type="checkbox" id="c1953" onchange="updateProgress()"><label for="c1953">Zero for today</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-30" data-section="30">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 30</span>
                    <h3>ASSET IMPORT/EXPORT</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/assets/asset-import.test.ts</code>, <code>tests/unit/assets/asset-export.test.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1954" onchange="updateProgress()"><label for="c1954">**Type required** - row without Type field fails validation</label></li>
                        <li><input type="checkbox" id="c1955" onchange="updateProgress()"><label for="c1955">**Model required** - row without Model field fails validation</label></li>
                        <li><input type="checkbox" id="c1956" onchange="updateProgress()"><label for="c1956">Both Type and Model missing → validation error</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Flexible Column Name Matching</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1957" onchange="updateProgress()"><label for="c1957">Column &quot;Asset Type&quot; maps to type field</label></li>
                        <li><input type="checkbox" id="c1958" onchange="updateProgress()"><label for="c1958">Column &quot;type&quot; (lowercase) maps to type field</label></li>
                        <li><input type="checkbox" id="c1959" onchange="updateProgress()"><label for="c1959">Column &quot;Type&quot; (capitalized) maps to type field</label></li>
                        <li><input type="checkbox" id="c1960" onchange="updateProgress()"><label for="c1960">Column &quot;asset_tag&quot; maps to assetTag field</label></li>
                        <li><input type="checkbox" id="c1961" onchange="updateProgress()"><label for="c1961">Column &quot;Asset Tag&quot; maps to assetTag field</label></li>
                        <li><input type="checkbox" id="c1962" onchange="updateProgress()"><label for="c1962">Column &quot;Serial Number&quot; maps to serialNumber field</label></li>
                        <li><input type="checkbox" id="c1963" onchange="updateProgress()"><label for="c1963">Column &quot;serial&quot; maps to serialNumber field</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Status Parsing</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1964" onchange="updateProgress()"><label for="c1964">&quot;IN_USE&quot; → IN_USE status</label></li>
                        <li><input type="checkbox" id="c1965" onchange="updateProgress()"><label for="c1965">&quot;SPARE&quot; → SPARE status</label></li>
                        <li><input type="checkbox" id="c1966" onchange="updateProgress()"><label for="c1966">&quot;MAINTENANCE&quot; → MAINTENANCE status</label></li>
                        <li><input type="checkbox" id="c1967" onchange="updateProgress()"><label for="c1967">**Empty status → defaults to IN_USE**</label></li>
                        <li><input type="checkbox" id="c1968" onchange="updateProgress()"><label for="c1968">**Invalid status (e.g., &quot;UNKNOWN&quot;) → defaults to IN_USE**</label></li>
                        <li><input type="checkbox" id="c1969" onchange="updateProgress()"><label for="c1969">Status parsing is case-insensitive</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Currency Parsing</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1970" onchange="updateProgress()"><label for="c1970">&quot;USD&quot; recognized</label></li>
                        <li><input type="checkbox" id="c1971" onchange="updateProgress()"><label for="c1971">&quot;EUR&quot; recognized</label></li>
                        <li><input type="checkbox" id="c1972" onchange="updateProgress()"><label for="c1972">&quot;GBP&quot; recognized</label></li>
                        <li><input type="checkbox" id="c1973" onchange="updateProgress()"><label for="c1973">**Empty currency → defaults to QAR**</label></li>
                        <li><input type="checkbox" id="c1974" onchange="updateProgress()"><label for="c1974">**Invalid currency → defaults to QAR**</label></li>
                        <li><input type="checkbox" id="c1975" onchange="updateProgress()"><label for="c1975">Currency codes case-insensitive</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Price Parsing</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1976" onchange="updateProgress()"><label for="c1976">Numeric string &quot;100&quot; → parsed as 100</label></li>
                        <li><input type="checkbox" id="c1977" onchange="updateProgress()"><label for="c1977">Decimal string &quot;99.99&quot; → parsed as 99.99</label></li>
                        <li><input type="checkbox" id="c1978" onchange="updateProgress()"><label for="c1978">**Non-numeric string &quot;abc&quot; → null**</label></li>
                        <li><input type="checkbox" id="c1979" onchange="updateProgress()"><label for="c1979">**Empty string → null**</label></li>
                        <li><input type="checkbox" id="c1980" onchange="updateProgress()"><label for="c1980">Price with currency symbol handled</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>QAR Conversion</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1981" onchange="updateProgress()"><label for="c1981">USD price converted at rate 3.64</label></li>
                        <li><input type="checkbox" id="c1982" onchange="updateProgress()"><label for="c1982">EUR, GBP converted at respective rates</label></li>
                        <li><input type="checkbox" id="c1983" onchange="updateProgress()"><label for="c1983">QAR price stored as-is</label></li>
                        <li><input type="checkbox" id="c1984" onchange="updateProgress()"><label for="c1984">priceQAR calculated from price + currency</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Export Columns (ASSET_EXPORT_COLUMNS)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c1985" onchange="updateProgress()"><label for="c1985">id column included</label></li>
                        <li><input type="checkbox" id="c1986" onchange="updateProgress()"><label for="c1986">assetTag column included</label></li>
                        <li><input type="checkbox" id="c1987" onchange="updateProgress()"><label for="c1987">type column included</label></li>
                        <li><input type="checkbox" id="c1988" onchange="updateProgress()"><label for="c1988">category column included</label></li>
                        <li><input type="checkbox" id="c1989" onchange="updateProgress()"><label for="c1989">brand column included</label></li>
                        <li><input type="checkbox" id="c1990" onchange="updateProgress()"><label for="c1990">model column included</label></li>
                        <li><input type="checkbox" id="c1991" onchange="updateProgress()"><label for="c1991">serialNumber column included</label></li>
                        <li><input type="checkbox" id="c1992" onchange="updateProgress()"><label for="c1992">status column included</label></li>
                        <li><input type="checkbox" id="c1993" onchange="updateProgress()"><label for="c1993">price column included</label></li>
                        <li><input type="checkbox" id="c1994" onchange="updateProgress()"><label for="c1994">priceCurrency column included</label></li>
                        <li><input type="checkbox" id="c1995" onchange="updateProgress()"><label for="c1995">assignedMemberName column included</label></li>
                        <li><input type="checkbox" id="c1996" onchange="updateProgress()"><label for="c1996">assignedMemberEmail column included</label></li>
                        <li><input type="checkbox" id="c1997" onchange="updateProgress()"><label for="c1997">location column included</label></li>
                        <li><input type="checkbox" id="c1998" onchange="updateProgress()"><label for="c1998">purchaseDate column included</label></li>
                        <li><input type="checkbox" id="c1999" onchange="updateProgress()"><label for="c1999">warrantyExpiry column included</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>transformAssetForExport</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2000" onchange="updateProgress()"><label for="c2000">Handles asset with all fields populated</label></li>
                        <li><input type="checkbox" id="c2001" onchange="updateProgress()"><label for="c2001">**Null assignedMember → empty string for name/email**</label></li>
                        <li><input type="checkbox" id="c2002" onchange="updateProgress()"><label for="c2002">**Null location → empty string**</label></li>
                        <li><input type="checkbox" id="c2003" onchange="updateProgress()"><label for="c2003">**Null dates → empty string or formatted**</label></li>
                        <li><input type="checkbox" id="c2004" onchange="updateProgress()"><label for="c2004">**Null price → empty or 0**</label></li>
                        <li><input type="checkbox" id="c2005" onchange="updateProgress()"><label for="c2005">Category name extracted from relation</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>transformAssetsForExport</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2006" onchange="updateProgress()"><label for="c2006">Transforms array of assets</label></li>
                        <li><input type="checkbox" id="c2007" onchange="updateProgress()"><label for="c2007">Empty array → empty result</label></li>
                        <li><input type="checkbox" id="c2008" onchange="updateProgress()"><label for="c2008">Preserves order of assets</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>getExportFilename</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2009" onchange="updateProgress()"><label for="c2009">**Format:** `{prefix}_{YYYY-MM-DD}.xlsx`</label></li>
                        <li><input type="checkbox" id="c2010" onchange="updateProgress()"><label for="c2010">Example: &quot;assets_export_2025-01-09.xlsx&quot;</label></li>
                        <li><input type="checkbox" id="c2011" onchange="updateProgress()"><label for="c2011">Uses current date</label></li>
                        <li><input type="checkbox" id="c2012" onchange="updateProgress()"><label for="c2012">Custom prefix supported</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-31" data-section="31">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 31</span>
                    <h3>ASSET MAINTENANCE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/assets/maintenance.test.ts src/app/api/assets/[id]/maintenance/route.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2013" onchange="updateProgress()"><label for="c2013">**maintenanceDate required** - missing → validation error</label></li>
                        <li><input type="checkbox" id="c2014" onchange="updateProgress()"><label for="c2014">maintenanceDate must be valid ISO date string</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2015" onchange="updateProgress()"><label for="c2015">notes field optional</label></li>
                        <li><input type="checkbox" id="c2016" onchange="updateProgress()"><label for="c2016">**Null notes accepted**</label></li>
                        <li><input type="checkbox" id="c2017" onchange="updateProgress()"><label for="c2017">**Empty string notes accepted**</label></li>
                        <li><input type="checkbox" id="c2018" onchange="updateProgress()"><label for="c2018">notes max length enforced (if any)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Maintenance Types</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2019" onchange="updateProgress()"><label for="c2019">&quot;scheduled&quot; maintenance type valid</label></li>
                        <li><input type="checkbox" id="c2020" onchange="updateProgress()"><label for="c2020">&quot;repair&quot; maintenance type valid</label></li>
                        <li><input type="checkbox" id="c2021" onchange="updateProgress()"><label for="c2021">&quot;preventive&quot; maintenance type valid</label></li>
                        <li><input type="checkbox" id="c2022" onchange="updateProgress()"><label for="c2022">&quot;warranty&quot; maintenance type valid</label></li>
                        <li><input type="checkbox" id="c2023" onchange="updateProgress()"><label for="c2023">Invalid type rejected</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>API Access Control</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2024" onchange="updateProgress()"><label for="c2024">**requireAuth: true** - unauthenticated → 401</label></li>
                        <li><input type="checkbox" id="c2025" onchange="updateProgress()"><label for="c2025">**requireAdmin: true for POST** - non-admin → 403</label></li>
                        <li><input type="checkbox" id="c2026" onchange="updateProgress()"><label for="c2026">**requireModule: 'assets'** - module disabled → 403</label></li>
                        <li><input type="checkbox" id="c2027" onchange="updateProgress()"><label for="c2027">Regular employees can view maintenance records (GET)</label></li>
                        <li><input type="checkbox" id="c2028" onchange="updateProgress()"><label for="c2028">Only admins can create maintenance records (POST)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Tenant Isolation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2029" onchange="updateProgress()"><label for="c2029">Maintenance records scoped to tenant</label></li>
                        <li><input type="checkbox" id="c2030" onchange="updateProgress()"><label for="c2030">Cannot access maintenance from other organization</label></li>
                        <li><input type="checkbox" id="c2031" onchange="updateProgress()"><label for="c2031">tenantId automatically applied to queries</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>31.3 API Response Codes</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2032" onchange="updateProgress()"><label for="c2032">**No organization context → 403** &quot;Organization not found&quot;</label></li>
                        <li><input type="checkbox" id="c2033" onchange="updateProgress()"><label for="c2033">**No asset ID in URL → 400** &quot;Asset ID required&quot;</label></li>
                        <li><input type="checkbox" id="c2034" onchange="updateProgress()"><label for="c2034">**Invalid request body → 400** with validation errors</label></li>
                        <li><input type="checkbox" id="c2035" onchange="updateProgress()"><label for="c2035">**Asset not found → 404** &quot;Asset not found&quot;</label></li>
                        <li><input type="checkbox" id="c2036" onchange="updateProgress()"><label for="c2036">**Successful creation → 201** with maintenance record</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-32" data-section="32">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 32</span>
                    <h3>BILLING CYCLE UTILITIES</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/subscriptions/billing-cycle.test.ts src/features/subscriptions/lib/billing-utils.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>32.1 formatBillingCycle</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2037" onchange="updateProgress()"><label for="c2037">&quot;MONTHLY&quot; → &quot;Monthly&quot;</label></li>
                        <li><input type="checkbox" id="c2038" onchange="updateProgress()"><label for="c2038">&quot;YEARLY&quot; → &quot;Annually&quot;</label></li>
                        <li><input type="checkbox" id="c2039" onchange="updateProgress()"><label for="c2039">&quot;ONE_TIME&quot; → &quot;One Time&quot;</label></li>
                        <li><input type="checkbox" id="c2040" onchange="updateProgress()"><label for="c2040">&quot;QUARTERLY&quot; → &quot;Quarterly&quot;</label></li>
                        <li><input type="checkbox" id="c2041" onchange="updateProgress()"><label for="c2041">&quot;SEMI_ANNUALLY&quot; → &quot;Semi-Annually&quot;</label></li>
                        <li><input type="checkbox" id="c2042" onchange="updateProgress()"><label for="c2042">&quot;WEEKLY&quot; → &quot;Weekly&quot;</label></li>
                        <li><input type="checkbox" id="c2043" onchange="updateProgress()"><label for="c2043">**Case insensitive** - &quot;monthly&quot; → &quot;Monthly&quot;</label></li>
                        <li><input type="checkbox" id="c2044" onchange="updateProgress()"><label for="c2044">Unknown value → returns original string</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>32.2 getMonthsPerCycle</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2045" onchange="updateProgress()"><label for="c2045">MONTHLY → 1 month</label></li>
                        <li><input type="checkbox" id="c2046" onchange="updateProgress()"><label for="c2046">QUARTERLY → 3 months</label></li>
                        <li><input type="checkbox" id="c2047" onchange="updateProgress()"><label for="c2047">SEMI_ANNUALLY → 6 months</label></li>
                        <li><input type="checkbox" id="c2048" onchange="updateProgress()"><label for="c2048">YEARLY → 12 months</label></li>
                        <li><input type="checkbox" id="c2049" onchange="updateProgress()"><label for="c2049">WEEKLY → 0.25 months (1 week ≈ 0.25 month)</label></li>
                        <li><input type="checkbox" id="c2050" onchange="updateProgress()"><label for="c2050">ONE_TIME → 0 months (no recurring)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>32.3 calculateAnnualCost</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2051" onchange="updateProgress()"><label for="c2051">MONTHLY × 12 = annual cost</label></li>
                        <li><input type="checkbox" id="c2052" onchange="updateProgress()"><label for="c2052">QUARTERLY × 4 = annual cost</label></li>
                        <li><input type="checkbox" id="c2053" onchange="updateProgress()"><label for="c2053">SEMI_ANNUALLY × 2 = annual cost</label></li>
                        <li><input type="checkbox" id="c2054" onchange="updateProgress()"><label for="c2054">YEARLY × 1 = annual cost (same as cost)</label></li>
                        <li><input type="checkbox" id="c2055" onchange="updateProgress()"><label for="c2055">WEEKLY × 52 = annual cost</label></li>
                        <li><input type="checkbox" id="c2056" onchange="updateProgress()"><label for="c2056">ONE_TIME × 1 = cost (not recurring)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>32.4 Billing Cycle Ordering</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2057" onchange="updateProgress()"><label for="c2057">ONE_TIME displayed first (non-recurring)</label></li>
                        <li><input type="checkbox" id="c2058" onchange="updateProgress()"><label for="c2058">WEEKLY, MONTHLY, QUARTERLY, SEMI_ANNUALLY, YEARLY order</label></li>
                        <li><input type="checkbox" id="c2059" onchange="updateProgress()"><label for="c2059">Sort order used in dropdowns</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-33" data-section="33">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 33</span>
                    <h3>LEAVE REQUEST VALIDATION DETAILS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/leave/leave-request-validation.test.ts src/features/leave/lib/leave-request-validation.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Admin-Assigned Leave Types</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2060" onchange="updateProgress()"><label for="c2060">**PARENTAL leave** requires `hasExistingBalance = true` (admin pre-assigned)</label></li>
                        <li><input type="checkbox" id="c2061" onchange="updateProgress()"><label for="c2061">**RELIGIOUS leave** (Hajj) requires `hasExistingBalance = true`</label></li>
                        <li><input type="checkbox" id="c2062" onchange="updateProgress()"><label for="c2062">Requesting PARENTAL without existing balance → &quot;not assigned by admin&quot; error</label></li>
                        <li><input type="checkbox" id="c2063" onchange="updateProgress()"><label for="c2063">Requesting RELIGIOUS without existing balance → error</label></li>
                        <li><input type="checkbox" id="c2064" onchange="updateProgress()"><label for="c2064">STANDARD and MEDICAL categories → always eligible (self-service)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Gender Restriction</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2065" onchange="updateProgress()"><label for="c2065">Leave type with gender=&quot;FEMALE&quot; → only females can request</label></li>
                        <li><input type="checkbox" id="c2066" onchange="updateProgress()"><label for="c2066">Leave type with gender=&quot;MALE&quot; → only males can request</label></li>
                        <li><input type="checkbox" id="c2067" onchange="updateProgress()"><label for="c2067">**Wrong gender → &quot;not eligible based on gender&quot; error**</label></li>
                        <li><input type="checkbox" id="c2068" onchange="updateProgress()"><label for="c2068">**Missing gender in profile → &quot;gender not set in profile&quot; error**</label></li>
                        <li><input type="checkbox" id="c2069" onchange="updateProgress()"><label for="c2069">Leave type with no gender restriction → anyone can request</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Minimum Service Requirement</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2070" onchange="updateProgress()"><label for="c2070">Leave type with minimumServiceMonths=3 → check dateOfJoining</label></li>
                        <li><input type="checkbox" id="c2071" onchange="updateProgress()"><label for="c2071">Employee with 2 months service → error &quot;requires X months of service&quot;</label></li>
                        <li><input type="checkbox" id="c2072" onchange="updateProgress()"><label for="c2072">Employee with 3+ months service → passes validation</label></li>
                        <li><input type="checkbox" id="c2073" onchange="updateProgress()"><label for="c2073">**Missing dateOfJoining → error &quot;service start date not set&quot;**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>33.2 validateOnceInEmploymentLeave (Hajj)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2074" onchange="updateProgress()"><label for="c2074">**hajjLeaveTaken = true** → error &quot;already taken&quot;</label></li>
                        <li><input type="checkbox" id="c2075" onchange="updateProgress()"><label for="c2075">**Pending request exists** for same leave type → error &quot;pending request exists&quot;</label></li>
                        <li><input type="checkbox" id="c2076" onchange="updateProgress()"><label for="c2076">**Approved request exists** for same leave type → error &quot;already approved&quot;</label></li>
                        <li><input type="checkbox" id="c2077" onchange="updateProgress()"><label for="c2077">No prior Hajj leave → passes validation</label></li>
                        <li><input type="checkbox" id="c2078" onchange="updateProgress()"><label for="c2078">Applies to all isOnceInEmployment=true leave types</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Working Days Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2079" onchange="updateProgress()"><label for="c2079">**Friday (day 5) excluded** - not a working day</label></li>
                        <li><input type="checkbox" id="c2080" onchange="updateProgress()"><label for="c2080">**Saturday (day 6) excluded** - not a working day</label></li>
                        <li><input type="checkbox" id="c2081" onchange="updateProgress()"><label for="c2081">Sunday through Thursday → working days</label></li>
                        <li><input type="checkbox" id="c2082" onchange="updateProgress()"><label for="c2082">Request spanning weekend → weekend days not counted</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Accrual-Based Leave Exception</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2083" onchange="updateProgress()"><label for="c2083">**isAccrualBased = true** → includes weekends</label></li>
                        <li><input type="checkbox" id="c2084" onchange="updateProgress()"><label for="c2084">Annual leave (accrual-based) counts Fri/Sat</label></li>
                        <li><input type="checkbox" id="c2085" onchange="updateProgress()"><label for="c2085">7-day request with weekend = 7 days (not 5)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Notice Period Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2086" onchange="updateProgress()"><label for="c2086">Leave type with minNoticeDays=14 → start date must be 14+ days away</label></li>
                        <li><input type="checkbox" id="c2087" onchange="updateProgress()"><label for="c2087">Request with 10 days notice → error &quot;requires 14 days notice&quot;</label></li>
                        <li><input type="checkbox" id="c2088" onchange="updateProgress()"><label for="c2088">Request with 14+ days notice → passes</label></li>
                        <li><input type="checkbox" id="c2089" onchange="updateProgress()"><label for="c2089">Emergency flag can bypass notice requirement</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Max Consecutive Days</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2090" onchange="updateProgress()"><label for="c2090">Leave type with maxConsecutiveDays=10 → reject 11+ day requests</label></li>
                        <li><input type="checkbox" id="c2091" onchange="updateProgress()"><label for="c2091">10-day request → passes</label></li>
                        <li><input type="checkbox" id="c2092" onchange="updateProgress()"><label for="c2092">11-day request → error &quot;maximum consecutive days exceeded&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>33.4 validateNoOverlap</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2093" onchange="updateProgress()"><label for="c2093">Existing PENDING request for same dates → error &quot;overlapping request exists&quot;</label></li>
                        <li><input type="checkbox" id="c2094" onchange="updateProgress()"><label for="c2094">Existing APPROVED request for same dates → error</label></li>
                        <li><input type="checkbox" id="c2095" onchange="updateProgress()"><label for="c2095">Partial overlap (start or end within existing) → error</label></li>
                        <li><input type="checkbox" id="c2096" onchange="updateProgress()"><label for="c2096">No overlap → passes validation</label></li>
                        <li><input type="checkbox" id="c2097" onchange="updateProgress()"><label for="c2097">CANCELLED/REJECTED requests ignored</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Balance Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2098" onchange="updateProgress()"><label for="c2098">Available = entitlement + carriedForward + adjustment - used</label></li>
                        <li><input type="checkbox" id="c2099" onchange="updateProgress()"><label for="c2099">**Pending requests counted against available** - includes pending</label></li>
                        <li><input type="checkbox" id="c2100" onchange="updateProgress()"><label for="c2100">Request for 5 days with 4 available → error &quot;insufficient balance (4 days available)&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Unpaid Leave Exception</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2101" onchange="updateProgress()"><label for="c2101">isPaid = false → balance check skipped</label></li>
                        <li><input type="checkbox" id="c2102" onchange="updateProgress()"><label for="c2102">Unpaid leave has no balance requirement</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>33.6 validateDocumentRequirement</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2103" onchange="updateProgress()"><label for="c2103">Leave type with requiresDocument=true → document URL required</label></li>
                        <li><input type="checkbox" id="c2104" onchange="updateProgress()"><label for="c2104">**Exception: 1-day or less leave** → document not required</label></li>
                        <li><input type="checkbox" id="c2105" onchange="updateProgress()"><label for="c2105">2+ day leave without document → error &quot;document required&quot;</label></li>
                        <li><input type="checkbox" id="c2106" onchange="updateProgress()"><label for="c2106">Half-day (0.5 days) → document not required</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-34" data-section="34">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 34</span>
                    <h3>LEAVE DEDUCTION CALCULATIONS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/payroll/leave-deduction.test.ts src/features/payroll/lib/leave-deductions.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Basic Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2107" onchange="updateProgress()"><label for="c2107">Leave entirely within payroll period → full days counted</label></li>
                        <li><input type="checkbox" id="c2108" onchange="updateProgress()"><label for="c2108">Leave starting before period → only count from period start</label></li>
                        <li><input type="checkbox" id="c2109" onchange="updateProgress()"><label for="c2109">Leave ending after period → only count until period end</label></li>
                        <li><input type="checkbox" id="c2110" onchange="updateProgress()"><label for="c2110">Leave spanning entire period → period length days</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Boundary Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2111" onchange="updateProgress()"><label for="c2111">Leave starts on period first day → included</label></li>
                        <li><input type="checkbox" id="c2112" onchange="updateProgress()"><label for="c2112">Leave ends on period last day → included</label></li>
                        <li><input type="checkbox" id="c2113" onchange="updateProgress()"><label for="c2113">Leave outside period → 0 days</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>34.2 Daily Salary Rate</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2114" onchange="updateProgress()"><label for="c2114">**Qatar standard: 30-day month** for salary calculation</label></li>
                        <li><input type="checkbox" id="c2115" onchange="updateProgress()"><label for="c2115">Daily rate = grossSalary / 30</label></li>
                        <li><input type="checkbox" id="c2116" onchange="updateProgress()"><label for="c2116">Example: 9000 QAR salary → 300 QAR/day</label></li>
                        <li><input type="checkbox" id="c2117" onchange="updateProgress()"><label for="c2117">Consistent regardless of actual month length (28-31 days)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>34.3 Deduction Amount</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2118" onchange="updateProgress()"><label for="c2118">Deduction = daysInPeriod × dailyRate</label></li>
                        <li><input type="checkbox" id="c2119" onchange="updateProgress()"><label for="c2119">3 days × 300 QAR = 900 QAR deduction</label></li>
                        <li><input type="checkbox" id="c2120" onchange="updateProgress()"><label for="c2120">**Half-day supported** - 0.5 × 300 = 150 QAR</label></li>
                        <li><input type="checkbox" id="c2121" onchange="updateProgress()"><label for="c2121">Rounded to 2 decimal places</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>34.4 Leave Type Filter</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2122" onchange="updateProgress()"><label for="c2122">**Only APPROVED leave deducted** - PENDING ignored</label></li>
                        <li><input type="checkbox" id="c2123" onchange="updateProgress()"><label for="c2123">**Only unpaid leave deducted** - isPaid=true ignored</label></li>
                        <li><input type="checkbox" id="c2124" onchange="updateProgress()"><label for="c2124">CANCELLED leave ignored</label></li>
                        <li><input type="checkbox" id="c2125" onchange="updateProgress()"><label for="c2125">REJECTED leave ignored</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>getPeriodStart</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2126" onchange="updateProgress()"><label for="c2126">Returns 1st day of the month</label></li>
                        <li><input type="checkbox" id="c2127" onchange="updateProgress()"><label for="c2127">Time set to start of day (00:00:00)</label></li>
                        <li><input type="checkbox" id="c2128" onchange="updateProgress()"><label for="c2128">Correct month and year</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>getPeriodEnd</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2129" onchange="updateProgress()"><label for="c2129">Returns last day of the month</label></li>
                        <li><input type="checkbox" id="c2130" onchange="updateProgress()"><label for="c2130">January → 31, February → 28/29, etc.</label></li>
                        <li><input type="checkbox" id="c2131" onchange="updateProgress()"><label for="c2131">Time set to end of day (23:59:59)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>34.6 Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2132" onchange="updateProgress()"><label for="c2132">Leap year February (29 days) handled</label></li>
                        <li><input type="checkbox" id="c2133" onchange="updateProgress()"><label for="c2133">Leave spanning month boundary → split calculation</label></li>
                        <li><input type="checkbox" id="c2134" onchange="updateProgress()"><label for="c2134">Multiple unpaid leaves in same period → sum deductions</label></li>
                        <li><input type="checkbox" id="c2135" onchange="updateProgress()"><label for="c2135">Zero unpaid leaves → 0 deduction</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-35" data-section="35">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 35</span>
                    <h3>CLIENT-SIDE CACHING</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/core/cache.test.ts src/lib/core/cache.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>35.1 Cache Key Generation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2136" onchange="updateProgress()"><label for="c2136">**Prefix:** All cache keys use &quot;durj_cache_&quot; prefix</label></li>
                        <li><input type="checkbox" id="c2137" onchange="updateProgress()"><label for="c2137">Complex keys supported (e.g., &quot;user:123:settings&quot;)</label></li>
                        <li><input type="checkbox" id="c2138" onchange="updateProgress()"><label for="c2138">Special characters in key allowed (colons, slashes)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>35.2 Cache Item Structure</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2139" onchange="updateProgress()"><label for="c2139">Cache item contains `data` and `expiry` fields</label></li>
                        <li><input type="checkbox" id="c2140" onchange="updateProgress()"><label for="c2140">Expiry is Unix timestamp (milliseconds)</label></li>
                        <li><input type="checkbox" id="c2141" onchange="updateProgress()"><label for="c2141">Correct expiration calculation (minutes × 60 × 1000)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>35.3 Cache Expiration Logic</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2142" onchange="updateProgress()"><label for="c2142">**Non-expired cache:** now &lt; expiry → returns data</label></li>
                        <li><input type="checkbox" id="c2143" onchange="updateProgress()"><label for="c2143">**Expired cache:** now &gt; expiry → returns null</label></li>
                        <li><input type="checkbox" id="c2144" onchange="updateProgress()"><label for="c2144">**At exact expiry:** treated as expired</label></li>
                        <li><input type="checkbox" id="c2145" onchange="updateProgress()"><label for="c2145">**Just before expiry:** still valid</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>35.4 Cache Set Operations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2146" onchange="updateProgress()"><label for="c2146">Stores data with durj_cache_ prefix</label></li>
                        <li><input type="checkbox" id="c2147" onchange="updateProgress()"><label for="c2147">Serializes to JSON</label></li>
                        <li><input type="checkbox" id="c2148" onchange="updateProgress()"><label for="c2148">Handles complex nested objects</label></li>
                        <li><input type="checkbox" id="c2149" onchange="updateProgress()"><label for="c2149">Handles arrays</label></li>
                        <li><input type="checkbox" id="c2150" onchange="updateProgress()"><label for="c2150">Handles primitive strings</label></li>
                        <li><input type="checkbox" id="c2151" onchange="updateProgress()"><label for="c2151">**Handles null values**</label></li>
                        <li><input type="checkbox" id="c2152" onchange="updateProgress()"><label for="c2152">Returns false on storage failure (try/catch)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>35.5 Cache Get Operations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2153" onchange="updateProgress()"><label for="c2153">Retrieves non-expired data correctly</label></li>
                        <li><input type="checkbox" id="c2154" onchange="updateProgress()"><label for="c2154">**Returns null for expired data**</label></li>
                        <li><input type="checkbox" id="c2155" onchange="updateProgress()"><label for="c2155">**Removes expired data from storage automatically**</label></li>
                        <li><input type="checkbox" id="c2156" onchange="updateProgress()"><label for="c2156">Returns null for non-existent key</label></li>
                        <li><input type="checkbox" id="c2157" onchange="updateProgress()"><label for="c2157">**Returns null for corrupted/invalid JSON** (graceful degradation)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>35.6 Cache Remove/Clear</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2158" onchange="updateProgress()"><label for="c2158">Remove single item by key</label></li>
                        <li><input type="checkbox" id="c2159" onchange="updateProgress()"><label for="c2159">Non-existent key removal doesn't throw</label></li>
                        <li><input type="checkbox" id="c2160" onchange="updateProgress()"><label for="c2160">Clear removes all durj_cache_ items</label></li>
                        <li><input type="checkbox" id="c2161" onchange="updateProgress()"><label for="c2161">**Clear preserves non-cache items** (other localStorage keys)</label></li>
                        <li><input type="checkbox" id="c2162" onchange="updateProgress()"><label for="c2162">Empty storage clear doesn't throw</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>35.7 Expiration Durations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2163" onchange="updateProgress()"><label for="c2163">1 minute = 60,000 ms</label></li>
                        <li><input type="checkbox" id="c2164" onchange="updateProgress()"><label for="c2164">5 minutes = 300,000 ms (default)</label></li>
                        <li><input type="checkbox" id="c2165" onchange="updateProgress()"><label for="c2165">60 minutes = 3,600,000 ms</label></li>
                        <li><input type="checkbox" id="c2166" onchange="updateProgress()"><label for="c2166">24 hours = 86,400,000 ms</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>35.8 JSON Serialization Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2167" onchange="updateProgress()"><label for="c2167">Date objects convert to ISO string</label></li>
                        <li><input type="checkbox" id="c2168" onchange="updateProgress()"><label for="c2168">**Undefined values become null/omitted**</label></li>
                        <li><input type="checkbox" id="c2169" onchange="updateProgress()"><label for="c2169">Nested objects preserved</label></li>
                        <li><input type="checkbox" id="c2170" onchange="updateProgress()"><label for="c2170">Mixed-type arrays preserved</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-36" data-section="36">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 36</span>
                    <h3>ACTIVITY LOGGING SERVICE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/core/activity.test.ts src/lib/core/activity.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Asset Actions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2171" onchange="updateProgress()"><label for="c2171">ASSET_CREATED, ASSET_UPDATED, ASSET_DELETED</label></li>
                        <li><input type="checkbox" id="c2172" onchange="updateProgress()"><label for="c2172">ASSET_ASSIGNED, ASSET_LINKED_PROJECT</label></li>
                        <li><input type="checkbox" id="c2173" onchange="updateProgress()"><label for="c2173">ASSET_CATEGORY_CREATED, ASSET_CATEGORY_UPDATED, ASSET_CATEGORY_DELETED</label></li>
                        <li><input type="checkbox" id="c2174" onchange="updateProgress()"><label for="c2174">ASSET_REQUEST_CREATED, ASSET_REQUEST_APPROVED, ASSET_REQUEST_REJECTED, ASSET_REQUEST_CANCELLED</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Subscription Actions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2175" onchange="updateProgress()"><label for="c2175">SUBSCRIPTION_CREATED, SUBSCRIPTION_UPDATED, SUBSCRIPTION_DELETED</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Project Actions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2176" onchange="updateProgress()"><label for="c2176">PROJECT_CREATED, PROJECT_UPDATED, PROJECT_DELETED</label></li>
                        <li><input type="checkbox" id="c2177" onchange="updateProgress()"><label for="c2177">PROJECT_ARCHIVED, PROJECT_STATUS_CHANGED</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Leave Actions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2178" onchange="updateProgress()"><label for="c2178">LEAVE_REQUEST_CREATED, LEAVE_REQUEST_APPROVED</label></li>
                        <li><input type="checkbox" id="c2179" onchange="updateProgress()"><label for="c2179">LEAVE_REQUEST_REJECTED, LEAVE_REQUEST_CANCELLED</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Payroll Actions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2180" onchange="updateProgress()"><label for="c2180">PAYROLL_RUN_CREATED, PAYROLL_RUN_APPROVED</label></li>
                        <li><input type="checkbox" id="c2181" onchange="updateProgress()"><label for="c2181">PAYROLL_RUN_REJECTED, PAYROLL_RUN_PROCESSED, PAYROLL_RUN_PAID</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Security Actions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2182" onchange="updateProgress()"><label for="c2182">SECURITY_IMPERSONATION_STARTED, SECURITY_IMPERSONATION_ENDED</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>36.2 Activity Log Structure</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2183" onchange="updateProgress()"><label for="c2183">Required fields: id, tenantId, actorMemberId, action, createdAt</label></li>
                        <li><input type="checkbox" id="c2184" onchange="updateProgress()"><label for="c2184">Optional fields: entityType, entityId, payload</label></li>
                        <li><input type="checkbox" id="c2185" onchange="updateProgress()"><label for="c2185">**Null actorMemberId allowed** for system actions</label></li>
                        <li><input type="checkbox" id="c2186" onchange="updateProgress()"><label for="c2186">Payload deeply serialized (JSON)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>36.3 TenantId Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2187" onchange="updateProgress()"><label for="c2187">Valid tenantId string → true</label></li>
                        <li><input type="checkbox" id="c2188" onchange="updateProgress()"><label for="c2188">**Null tenantId → false** (multi-tenancy violation)</label></li>
                        <li><input type="checkbox" id="c2189" onchange="updateProgress()"><label for="c2189">**Undefined tenantId → false**</label></li>
                        <li><input type="checkbox" id="c2190" onchange="updateProgress()"><label for="c2190">**Empty string tenantId → false**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>36.4 Payload Serialization</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2191" onchange="updateProgress()"><label for="c2191">Object payload serialized correctly</label></li>
                        <li><input type="checkbox" id="c2192" onchange="updateProgress()"><label for="c2192">Null payload → null</label></li>
                        <li><input type="checkbox" id="c2193" onchange="updateProgress()"><label for="c2193">Undefined payload → null</label></li>
                        <li><input type="checkbox" id="c2194" onchange="updateProgress()"><label for="c2194">**Undefined values removed from object**</label></li>
                        <li><input type="checkbox" id="c2195" onchange="updateProgress()"><label for="c2195">Date objects → ISO string</label></li>
                        <li><input type="checkbox" id="c2196" onchange="updateProgress()"><label for="c2196">Nested objects preserved</label></li>
                        <li><input type="checkbox" id="c2197" onchange="updateProgress()"><label for="c2197">Arrays preserved</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>36.5 Entity Types Supported</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2198" onchange="updateProgress()"><label for="c2198">Asset, AssetCategory, AssetRequest</label></li>
                        <li><input type="checkbox" id="c2199" onchange="updateProgress()"><label for="c2199">Subscription, Supplier</label></li>
                        <li><input type="checkbox" id="c2200" onchange="updateProgress()"><label for="c2200">Project, Task, Board</label></li>
                        <li><input type="checkbox" id="c2201" onchange="updateProgress()"><label for="c2201">Employee, User</label></li>
                        <li><input type="checkbox" id="c2202" onchange="updateProgress()"><label for="c2202">LeaveRequest, LeaveType</label></li>
                        <li><input type="checkbox" id="c2203" onchange="updateProgress()"><label for="c2203">PayrollRun, Payslip, Loan</label></li>
                        <li><input type="checkbox" id="c2204" onchange="updateProgress()"><label for="c2204">Organization, CompanyDocument</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>36.6 Action Naming Convention</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2205" onchange="updateProgress()"><label for="c2205">**Format:** ENTITY_ACTION (e.g., ASSET_CREATED)</label></li>
                        <li><input type="checkbox" id="c2206" onchange="updateProgress()"><label for="c2206">**Uppercase snake_case** only</label></li>
                        <li><input type="checkbox" id="c2207" onchange="updateProgress()"><label for="c2207">No spaces or hyphens</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>36.7 Audit Trail Requirements</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2208" onchange="updateProgress()"><label for="c2208">**Who:** actorMemberId (null for system)</label></li>
                        <li><input type="checkbox" id="c2209" onchange="updateProgress()"><label for="c2209">**What:** changedFields, previousValue, newValue in payload</label></li>
                        <li><input type="checkbox" id="c2210" onchange="updateProgress()"><label for="c2210">**When:** createdAt timestamp</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-37" data-section="37">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 37</span>
                    <h3>IMPERSONATION SECURITY</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/security/impersonation.test.ts src/lib/security/impersonation.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>37.1 JTI (JWT ID) Generation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2211" onchange="updateProgress()"><label for="c2211">**Prefix:** &quot;imp_&quot; for all impersonation tokens</label></li>
                        <li><input type="checkbox" id="c2212" onchange="updateProgress()"><label for="c2212">Uses 16 random bytes (32 hex characters)</label></li>
                        <li><input type="checkbox" id="c2213" onchange="updateProgress()"><label for="c2213">Format: imp_[32-char-hex]</label></li>
                        <li><input type="checkbox" id="c2214" onchange="updateProgress()"><label for="c2214">Cryptographically secure (crypto.randomBytes)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>37.2 Token Revocation Check (isTokenRevoked)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2215" onchange="updateProgress()"><label for="c2215">**Empty JTI → false** (doesn't query DB)</label></li>
                        <li><input type="checkbox" id="c2216" onchange="updateProgress()"><label for="c2216">Token not in revocation list → false</label></li>
                        <li><input type="checkbox" id="c2217" onchange="updateProgress()"><label for="c2217">Token in revocation list → true</label></li>
                        <li><input type="checkbox" id="c2218" onchange="updateProgress()"><label for="c2218">**Database error → true (fail-safe)**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>37.3 Revoke Token</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2219" onchange="updateProgress()"><label for="c2219">Upserts revocation record</label></li>
                        <li><input type="checkbox" id="c2220" onchange="updateProgress()"><label for="c2220">Records: jti, revokedBy, reason, superAdminId</label></li>
                        <li><input type="checkbox" id="c2221" onchange="updateProgress()"><label for="c2221">Records: organizationId, organizationSlug</label></li>
                        <li><input type="checkbox" id="c2222" onchange="updateProgress()"><label for="c2222">Records: issuedAt, expiresAt</label></li>
                        <li><input type="checkbox" id="c2223" onchange="updateProgress()"><label for="c2223">Reason optional (can be undefined)</label></li>
                        <li><input type="checkbox" id="c2224" onchange="updateProgress()"><label for="c2224">Updates revokedAt timestamp on re-revocation</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>37.4 Revoke All Tokens for Super Admin</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2225" onchange="updateProgress()"><label for="c2225">Logs audit action when organizationId provided</label></li>
                        <li><input type="checkbox" id="c2226" onchange="updateProgress()"><label for="c2226">**Skips audit when organizationId not provided**</label></li>
                        <li><input type="checkbox" id="c2227" onchange="updateProgress()"><label for="c2227">Audit includes: superAdminId, revokedBy, reason, timestamp</label></li>
                        <li><input type="checkbox" id="c2228" onchange="updateProgress()"><label for="c2228">Returns count of revoked tokens</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>37.5 Cleanup Expired Revocations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2229" onchange="updateProgress()"><label for="c2229">Deletes records where expiresAt &lt; now</label></li>
                        <li><input type="checkbox" id="c2230" onchange="updateProgress()"><label for="c2230">Returns count of deleted records</label></li>
                        <li><input type="checkbox" id="c2231" onchange="updateProgress()"><label for="c2231">Returns 0 when nothing to clean</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>37.6 Impersonation History</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2232" onchange="updateProgress()"><label for="c2232">Returns history for specific super admin</label></li>
                        <li><input type="checkbox" id="c2233" onchange="updateProgress()"><label for="c2233">Default limit: 20 records</label></li>
                        <li><input type="checkbox" id="c2234" onchange="updateProgress()"><label for="c2234">Custom limit supported</label></li>
                        <li><input type="checkbox" id="c2235" onchange="updateProgress()"><label for="c2235">Ordered by revokedAt descending (newest first)</label></li>
                        <li><input type="checkbox" id="c2236" onchange="updateProgress()"><label for="c2236">Returns: id, organizationId, organizationSlug, issuedAt, expiresAt, revokedAt, reason</label></li>
                        <li><input type="checkbox" id="c2237" onchange="updateProgress()"><label for="c2237">**Empty array when no history**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>37.7 Security Considerations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2238" onchange="updateProgress()"><label for="c2238">**Recognizable prefix** (imp_) for log identification</label></li>
                        <li><input type="checkbox" id="c2239" onchange="updateProgress()"><label for="c2239">**Fail-safe:** Block access when database unavailable</label></li>
                        <li><input type="checkbox" id="c2240" onchange="updateProgress()"><label for="c2240">**Audit trail:** Records who revoked, why, and for which org</label></li>
                        <li><input type="checkbox" id="c2241" onchange="updateProgress()"><label for="c2241">**Cleanup:** Prevents database bloat from expired tokens</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-38" data-section="38">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 38</span>
                    <h3>APPROVAL DELEGATION DETAILS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/approvals/delegation.test.ts src/features/delegations/lib/delegation-utils.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>38.1 Delegation Structure</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2242" onchange="updateProgress()"><label for="c2242">Required fields: delegatorId, delegateeId, startDate, endDate</label></li>
                        <li><input type="checkbox" id="c2243" onchange="updateProgress()"><label for="c2243">isActive defaults to true on creation</label></li>
                        <li><input type="checkbox" id="c2244" onchange="updateProgress()"><label for="c2244">Optional reason field supported</label></li>
                        <li><input type="checkbox" id="c2245" onchange="updateProgress()"><label for="c2245">createdAt timestamp recorded</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>38.2 Delegation Validity Check</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2246" onchange="updateProgress()"><label for="c2246">**Active + within date range → true**</label></li>
                        <li><input type="checkbox" id="c2247" onchange="updateProgress()"><label for="c2247">**Not yet started → false** (startDate in future)</label></li>
                        <li><input type="checkbox" id="c2248" onchange="updateProgress()"><label for="c2248">**Expired → false** (endDate in past)</label></li>
                        <li><input type="checkbox" id="c2249" onchange="updateProgress()"><label for="c2249">**Deactivated (isActive=false) → false**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>38.3 Delegation Date Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2250" onchange="updateProgress()"><label for="c2250">**Start date cannot be in the past**</label></li>
                        <li><input type="checkbox" id="c2251" onchange="updateProgress()"><label for="c2251">**End date must be after start date**</label></li>
                        <li><input type="checkbox" id="c2252" onchange="updateProgress()"><label for="c2252">**Maximum 90 days** duration enforced</label></li>
                        <li><input type="checkbox" id="c2253" onchange="updateProgress()"><label for="c2253">Exceeding max days → error &quot;cannot exceed 90 days&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>38.4 Delegation Overlap Detection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2254" onchange="updateProgress()"><label for="c2254">**Overlapping start/end dates detected**</label></li>
                        <li><input type="checkbox" id="c2255" onchange="updateProgress()"><label for="c2255">**Contained delegation detected** (new within existing)</label></li>
                        <li><input type="checkbox" id="c2256" onchange="updateProgress()"><label for="c2256">**Adjacent delegations allowed** (end day = start day - 1)</label></li>
                        <li><input type="checkbox" id="c2257" onchange="updateProgress()"><label for="c2257">Non-overlapping delegations pass validation</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>38.5 Self-Delegation Prevention</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2258" onchange="updateProgress()"><label for="c2258">**delegatorId === delegateeId → rejected**</label></li>
                        <li><input type="checkbox" id="c2259" onchange="updateProgress()"><label for="c2259">Different user IDs → allowed</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>38.6 Delegatee Permission Check</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2260" onchange="updateProgress()"><label for="c2260">Delegatee acts with **delegator's role** for approvals</label></li>
                        <li><input type="checkbox" id="c2261" onchange="updateProgress()"><label for="c2261">If delegator has MANAGER role, delegatee can approve MANAGER-level</label></li>
                        <li><input type="checkbox" id="c2262" onchange="updateProgress()"><label for="c2262">Delegator without required role → delegation insufficient</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>38.7 Delegatee Selection Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2263" onchange="updateProgress()"><label for="c2263">**Inactive member cannot be delegatee**</label></li>
                        <li><input type="checkbox" id="c2264" onchange="updateProgress()"><label for="c2264">Active member → valid delegatee</label></li>
                        <li><input type="checkbox" id="c2265" onchange="updateProgress()"><label for="c2265">Optional: same department enforcement</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>38.8 Delegation Notifications</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2266" onchange="updateProgress()"><label for="c2266">DELEGATION_CREATED notification type</label></li>
                        <li><input type="checkbox" id="c2267" onchange="updateProgress()"><label for="c2267">DELEGATION_REVOKED notification type</label></li>
                        <li><input type="checkbox" id="c2268" onchange="updateProgress()"><label for="c2268">DELEGATION_STARTING notification type</label></li>
                        <li><input type="checkbox" id="c2269" onchange="updateProgress()"><label for="c2269">DELEGATION_ENDING notification type</label></li>
                        <li><input type="checkbox" id="c2270" onchange="updateProgress()"><label for="c2270">Includes delegatorName, dates</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>38.9 Delegation Audit Trail</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2271" onchange="updateProgress()"><label for="c2271">Action: DELEGATION_CREATED with delegateeId, reason</label></li>
                        <li><input type="checkbox" id="c2272" onchange="updateProgress()"><label for="c2272">Action: DELEGATION_REVOKED with revokedEarly flag</label></li>
                        <li><input type="checkbox" id="c2273" onchange="updateProgress()"><label for="c2273">Timestamp included in all entries</label></li>
                        <li><input type="checkbox" id="c2274" onchange="updateProgress()"><label for="c2274">performedBy tracked</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>38.10 Delegation Duration Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2275" onchange="updateProgress()"><label for="c2275">**Single day: start = end → 1 day**</label></li>
                        <li><input type="checkbox" id="c2276" onchange="updateProgress()"><label for="c2276">Inclusive counting (both start and end dates)</label></li>
                        <li><input type="checkbox" id="c2277" onchange="updateProgress()"><label for="c2277">Jan 15 to Jan 20 → 6 days</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>38.11 Active Delegations Query</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2278" onchange="updateProgress()"><label for="c2278">Filter by delegator or delegatee role</label></li>
                        <li><input type="checkbox" id="c2279" onchange="updateProgress()"><label for="c2279">Excludes expired delegations</label></li>
                        <li><input type="checkbox" id="c2280" onchange="updateProgress()"><label for="c2280">Excludes deactivated delegations</label></li>
                        <li><input type="checkbox" id="c2281" onchange="updateProgress()"><label for="c2281">Returns only currently active</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-39" data-section="39">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 39</span>
                    <h3>ORGANIZATION CONFIGURATION TABS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/organization/config-tabs.test.ts src/features/settings/components/organization-tabs.tsx</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>39.1 Configuration Sub-Tab Structure</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2282" onchange="updateProgress()"><label for="c2282">**4 sub-tabs:** General, Assets, Financial, HR</label></li>
                        <li><input type="checkbox" id="c2283" onchange="updateProgress()"><label for="c2283">General tab always accessible (requiresModule: null)</label></li>
                        <li><input type="checkbox" id="c2284" onchange="updateProgress()"><label for="c2284">Financial tab always accessible</label></li>
                        <li><input type="checkbox" id="c2285" onchange="updateProgress()"><label for="c2285">Assets tab requires &quot;assets&quot; module enabled</label></li>
                        <li><input type="checkbox" id="c2286" onchange="updateProgress()"><label for="c2286">HR tab requires &quot;payroll&quot; module enabled</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>39.2 General Tab Settings</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2287" onchange="updateProgress()"><label for="c2287">Code prefix configuration</label></li>
                        <li><input type="checkbox" id="c2288" onchange="updateProgress()"><label for="c2288">Code formats configuration</label></li>
                        <li><input type="checkbox" id="c2289" onchange="updateProgress()"><label for="c2289">Enabled modules selection</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>39.3 Assets Tab Settings</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2290" onchange="updateProgress()"><label for="c2290">Asset categories management</label></li>
                        <li><input type="checkbox" id="c2291" onchange="updateProgress()"><label for="c2291">Asset type mappings</label></li>
                        <li><input type="checkbox" id="c2292" onchange="updateProgress()"><label for="c2292">Depreciation categories</label></li>
                        <li><input type="checkbox" id="c2293" onchange="updateProgress()"><label for="c2293">Locations management</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>39.4 Financial Tab Settings</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2294" onchange="updateProgress()"><label for="c2294">Additional currencies selection</label></li>
                        <li><input type="checkbox" id="c2295" onchange="updateProgress()"><label for="c2295">Exchange rates configuration</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>39.5 HR Tab Settings</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2296" onchange="updateProgress()"><label for="c2296">Payroll settings configuration</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>39.6 Module Visibility Logic</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2297" onchange="updateProgress()"><label for="c2297">All modules enabled → all tabs show content</label></li>
                        <li><input type="checkbox" id="c2298" onchange="updateProgress()"><label for="c2298">Minimal modules (assets, subscriptions, suppliers) → HR shows placeholder</label></li>
                        <li><input type="checkbox" id="c2299" onchange="updateProgress()"><label for="c2299">No modules enabled → Assets and HR show placeholders</label></li>
                        <li><input type="checkbox" id="c2300" onchange="updateProgress()"><label for="c2300">Only payroll enabled → Assets placeholder, HR shows content</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>39.7 Module Toggle Logic</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2301" onchange="updateProgress()"><label for="c2301">**Toggle adds module** when not present</label></li>
                        <li><input type="checkbox" id="c2302" onchange="updateProgress()"><label for="c2302">**Toggle removes module** when present</label></li>
                        <li><input type="checkbox" id="c2303" onchange="updateProgress()"><label for="c2303">Other modules not affected by toggle</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>39.8 Available Modules</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2304" onchange="updateProgress()"><label for="c2304">**8 modules total**</label></li>
                        <li><input type="checkbox" id="c2305" onchange="updateProgress()"><label for="c2305">Core: assets, subscriptions, suppliers</label></li>
                        <li><input type="checkbox" id="c2306" onchange="updateProgress()"><label for="c2306">HR: employees, leave, payroll</label></li>
                        <li><input type="checkbox" id="c2307" onchange="updateProgress()"><label for="c2307">Other: purchase-requests, documents</label></li>
                        <li><input type="checkbox" id="c2308" onchange="updateProgress()"><label for="c2308">Each module has id, name, description</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>39.9 Currency Toggle Logic</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2309" onchange="updateProgress()"><label for="c2309">Add currency when not in list</label></li>
                        <li><input type="checkbox" id="c2310" onchange="updateProgress()"><label for="c2310">Remove currency when in list</label></li>
                        <li><input type="checkbox" id="c2311" onchange="updateProgress()"><label for="c2311">Preserve order of existing currencies</label></li>
                        <li><input type="checkbox" id="c2312" onchange="updateProgress()"><label for="c2312">Handle empty currency list</label></li>
                        <li><input type="checkbox" id="c2313" onchange="updateProgress()"><label for="c2313">Handle removing last currency</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>39.10 Default Enabled Modules</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2314" onchange="updateProgress()"><label for="c2314">**assets** enabled by default</label></li>
                        <li><input type="checkbox" id="c2315" onchange="updateProgress()"><label for="c2315">**subscriptions** enabled by default</label></li>
                        <li><input type="checkbox" id="c2316" onchange="updateProgress()"><label for="c2316">**suppliers** enabled by default</label></li>
                        <li><input type="checkbox" id="c2317" onchange="updateProgress()"><label for="c2317">Exactly 3 default modules</label></li>
                        <li><input type="checkbox" id="c2318" onchange="updateProgress()"><label for="c2318">payroll NOT enabled by default</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-40" data-section="40">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 40</span>
                    <h3>CSV PARSING UTILITIES</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/core/csv-utils.test.ts src/lib/utils/csv-utils.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>40.1 CSV Line Parsing</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2319" onchange="updateProgress()"><label for="c2319">Simple comma-separated values parsed</label></li>
                        <li><input type="checkbox" id="c2320" onchange="updateProgress()"><label for="c2320">**Quoted values** have quotes removed</label></li>
                        <li><input type="checkbox" id="c2321" onchange="updateProgress()"><label for="c2321">**Commas inside quotes** preserved</label></li>
                        <li><input type="checkbox" id="c2322" onchange="updateProgress()"><label for="c2322">**Empty values** handled (,, → empty string)</label></li>
                        <li><input type="checkbox" id="c2323" onchange="updateProgress()"><label for="c2323">Whitespace trimmed from values</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>40.2 Header Mapping</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2324" onchange="updateProgress()"><label for="c2324">Map display headers to field names (e.g., &quot;Asset Name&quot; → &quot;name&quot;)</label></li>
                        <li><input type="checkbox" id="c2325" onchange="updateProgress()"><label for="c2325">Unmapped headers kept as-is</label></li>
                        <li><input type="checkbox" id="c2326" onchange="updateProgress()"><label for="c2326">Case-sensitive mapping</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>40.3 formatDateForCSV</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2327" onchange="updateProgress()"><label for="c2327">**Output format:** dd/mm/yyyy (e.g., &quot;10/08/2025&quot;)</label></li>
                        <li><input type="checkbox" id="c2328" onchange="updateProgress()"><label for="c2328">Accepts Date objects</label></li>
                        <li><input type="checkbox" id="c2329" onchange="updateProgress()"><label for="c2329">Accepts ISO date strings</label></li>
                        <li><input type="checkbox" id="c2330" onchange="updateProgress()"><label for="c2330">**Null → empty string**</label></li>
                        <li><input type="checkbox" id="c2331" onchange="updateProgress()"><label for="c2331">**Invalid date → empty string**</label></li>
                        <li><input type="checkbox" id="c2332" onchange="updateProgress()"><label for="c2332">Single-digit day/month zero-padded</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>40.4 formatCurrencyForCSV</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2333" onchange="updateProgress()"><label for="c2333">Number to string conversion</label></li>
                        <li><input type="checkbox" id="c2334" onchange="updateProgress()"><label for="c2334">**Null → empty string**</label></li>
                        <li><input type="checkbox" id="c2335" onchange="updateProgress()"><label for="c2335">Zero handled (→ &quot;0&quot;)</label></li>
                        <li><input type="checkbox" id="c2336" onchange="updateProgress()"><label for="c2336">Negative numbers preserved</label></li>
                        <li><input type="checkbox" id="c2337" onchange="updateProgress()"><label for="c2337">Decimal precision preserved</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>40.5 CSV Value Cleanup</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2338" onchange="updateProgress()"><label for="c2338">Surrounding quotes removed</label></li>
                        <li><input type="checkbox" id="c2339" onchange="updateProgress()"><label for="c2339">**Empty string → null**</label></li>
                        <li><input type="checkbox" id="c2340" onchange="updateProgress()"><label for="c2340">**&quot;null&quot; string → null**</label></li>
                        <li><input type="checkbox" id="c2341" onchange="updateProgress()"><label for="c2341">**&quot;undefined&quot; string → null**</label></li>
                        <li><input type="checkbox" id="c2342" onchange="updateProgress()"><label for="c2342">Non-string values passed through</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>40.6 Row Validation (hasData)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2343" onchange="updateProgress()"><label for="c2343">Row with any data → true</label></li>
                        <li><input type="checkbox" id="c2344" onchange="updateProgress()"><label for="c2344">**All null/undefined/empty → false**</label></li>
                        <li><input type="checkbox" id="c2345" onchange="updateProgress()"><label for="c2345">**Zero (0) is valid data → true**</label></li>
                        <li><input type="checkbox" id="c2346" onchange="updateProgress()"><label for="c2346">**False is valid data → true**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>40.7 File Type Detection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2347" onchange="updateProgress()"><label for="c2347">Contains commas = CSV</label></li>
                        <li><input type="checkbox" id="c2348" onchange="updateProgress()"><label for="c2348">Starts with &quot;PK&quot; = Excel (ZIP archive)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>40.8 Export Header Configuration</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2349" onchange="updateProgress()"><label for="c2349">Headers have key, header, width</label></li>
                        <li><input type="checkbox" id="c2350" onchange="updateProgress()"><label for="c2350">Default width: 20</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>40.9 Template Generation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2351" onchange="updateProgress()"><label for="c2351">Generate example row from header examples</label></li>
                        <li><input type="checkbox" id="c2352" onchange="updateProgress()"><label for="c2352">Skip headers without example</label></li>
                        <li><input type="checkbox" id="c2353" onchange="updateProgress()"><label for="c2353">Empty object if no examples</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>40.10 Multi-Sheet Support</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2354" onchange="updateProgress()"><label for="c2354">Validate sheet has name</label></li>
                        <li><input type="checkbox" id="c2355" onchange="updateProgress()"><label for="c2355">Validate sheet has headers</label></li>
                        <li><input type="checkbox" id="c2356" onchange="updateProgress()"><label for="c2356">Validate sheet has data array</label></li>
                        <li><input type="checkbox" id="c2357" onchange="updateProgress()"><label for="c2357">Reject empty sheets array</label></li>
                        <li><input type="checkbox" id="c2358" onchange="updateProgress()"><label for="c2358">Reject sheet without name</label></li>
                        <li><input type="checkbox" id="c2359" onchange="updateProgress()"><label for="c2359">Reject sheet with empty headers</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>40.11 Line Splitting</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2360" onchange="updateProgress()"><label for="c2360">Split by Unix newline (\n)</label></li>
                        <li><input type="checkbox" id="c2361" onchange="updateProgress()"><label for="c2361">Split by Windows newline (\r\n)</label></li>
                        <li><input type="checkbox" id="c2362" onchange="updateProgress()"><label for="c2362">Filter empty lines</label></li>
                        <li><input type="checkbox" id="c2363" onchange="updateProgress()"><label for="c2363">Filter whitespace-only lines</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>40.12 Safe Number Parsing</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2364" onchange="updateProgress()"><label for="c2364">Valid number string → number</label></li>
                        <li><input type="checkbox" id="c2365" onchange="updateProgress()"><label for="c2365">**Empty string → null**</label></li>
                        <li><input type="checkbox" id="c2366" onchange="updateProgress()"><label for="c2366">**Null → null**</label></li>
                        <li><input type="checkbox" id="c2367" onchange="updateProgress()"><label for="c2367">**Non-numeric string → null**</label></li>
                        <li><input type="checkbox" id="c2368" onchange="updateProgress()"><label for="c2368">Zero → 0 (not null)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>40.13 Asset Import Headers</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2369" onchange="updateProgress()"><label for="c2369">Required: name, assetTag, categoryId, status</label></li>
                        <li><input type="checkbox" id="c2370" onchange="updateProgress()"><label for="c2370">Optional: serialNumber, purchaseDate, purchasePrice, warrantyExpiry</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>40.14 Employee Import Headers</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2371" onchange="updateProgress()"><label for="c2371">Required: firstName, lastName, email, employeeNumber, joinDate</label></li>
                        <li><input type="checkbox" id="c2372" onchange="updateProgress()"><label for="c2372">Optional: jobTitle, department</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-41" data-section="41">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 41</span>
                    <h3>IMPORT UTILITIES</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/core/import-utils.test.ts src/lib/utils/import-utils.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>41.1 Row Value Getter (createRowValueGetter)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2373" onchange="updateProgress()"><label for="c2373">Returns value for matching column name</label></li>
                        <li><input type="checkbox" id="c2374" onchange="updateProgress()"><label for="c2374">**Tries multiple column names**, returns first match</label></li>
                        <li><input type="checkbox" id="c2375" onchange="updateProgress()"><label for="c2375">**Undefined if no column matches**</label></li>
                        <li><input type="checkbox" id="c2376" onchange="updateProgress()"><label for="c2376">**Trims whitespace** from values</label></li>
                        <li><input type="checkbox" id="c2377" onchange="updateProgress()"><label for="c2377">**Skips empty strings**, finds next match</label></li>
                        <li><input type="checkbox" id="c2378" onchange="updateProgress()"><label for="c2378">**Skips whitespace-only strings**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>41.2 Excel Row Number (getExcelRowNumber)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2379" onchange="updateProgress()"><label for="c2379">Array index 0 → Row 2 (after header)</label></li>
                        <li><input type="checkbox" id="c2380" onchange="updateProgress()"><label for="c2380">Array index 1 → Row 3</label></li>
                        <li><input type="checkbox" id="c2381" onchange="updateProgress()"><label for="c2381">Array index 100 → Row 102</label></li>
                        <li><input type="checkbox" id="c2382" onchange="updateProgress()"><label for="c2382">Formula: arrayIndex + 2</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>41.3 parseDDMMYYYY Date Format</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2383" onchange="updateProgress()"><label for="c2383">Valid &quot;dd/mm/yyyy&quot; → Date object</label></li>
                        <li><input type="checkbox" id="c2384" onchange="updateProgress()"><label for="c2384">Single-digit day/month accepted (e.g., &quot;5/3/2024&quot;)</label></li>
                        <li><input type="checkbox" id="c2385" onchange="updateProgress()"><label for="c2385">**Undefined → null**</label></li>
                        <li><input type="checkbox" id="c2386" onchange="updateProgress()"><label for="c2386">**Empty string → null**</label></li>
                        <li><input type="checkbox" id="c2387" onchange="updateProgress()"><label for="c2387">**Invalid format (YYYY-MM-DD) → null**</label></li>
                        <li><input type="checkbox" id="c2388" onchange="updateProgress()"><label for="c2388">**Invalid date (30/02/2024) → null**</label></li>
                        <li><input type="checkbox" id="c2389" onchange="updateProgress()"><label for="c2389">Too few parts → null</label></li>
                        <li><input type="checkbox" id="c2390" onchange="updateProgress()"><label for="c2390">Non-numeric parts → null</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>41.4 parseFlexibleDate</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2391" onchange="updateProgress()"><label for="c2391">**ISO format (YYYY-MM-DD) → parsed**</label></li>
                        <li><input type="checkbox" id="c2392" onchange="updateProgress()"><label for="c2392">**ISO datetime → parsed**</label></li>
                        <li><input type="checkbox" id="c2393" onchange="updateProgress()"><label for="c2393">**dd/mm/yyyy fallback → parsed**</label></li>
                        <li><input type="checkbox" id="c2394" onchange="updateProgress()"><label for="c2394">Undefined → null</label></li>
                        <li><input type="checkbox" id="c2395" onchange="updateProgress()"><label for="c2395">Invalid format → null</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>41.5 Import Results Structure</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2396" onchange="updateProgress()"><label for="c2396">Fields: success, updated, skipped, failed, errors, created</label></li>
                        <li><input type="checkbox" id="c2397" onchange="updateProgress()"><label for="c2397">All counts start at 0</label></li>
                        <li><input type="checkbox" id="c2398" onchange="updateProgress()"><label for="c2398">errors/created start as empty arrays</label></li>
                        <li><input type="checkbox" id="c2399" onchange="updateProgress()"><label for="c2399">Independent objects (no shared state)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>41.6 Error Recording (recordImportError)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2400" onchange="updateProgress()"><label for="c2400">Increments failed counter</label></li>
                        <li><input type="checkbox" id="c2401" onchange="updateProgress()"><label for="c2401">Adds to errors array</label></li>
                        <li><input type="checkbox" id="c2402" onchange="updateProgress()"><label for="c2402">Error entry has: row, error, data</label></li>
                        <li><input type="checkbox" id="c2403" onchange="updateProgress()"><label for="c2403">Handles Error objects (extracts message)</label></li>
                        <li><input type="checkbox" id="c2404" onchange="updateProgress()"><label for="c2404">Handles string errors</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>41.7 formatImportMessage</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2405" onchange="updateProgress()"><label for="c2405">Format: &quot;Import completed: X created, X updated, X skipped, X failed&quot;</label></li>
                        <li><input type="checkbox" id="c2406" onchange="updateProgress()"><label for="c2406">Includes extras if provided (e.g., &quot;25 history entries&quot;)</label></li>
                        <li><input type="checkbox" id="c2407" onchange="updateProgress()"><label for="c2407">**Skips extras with zero value**</label></li>
                        <li><input type="checkbox" id="c2408" onchange="updateProgress()"><label for="c2408">Handles all zero counts</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>41.8 parseEnumValue</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2409" onchange="updateProgress()"><label for="c2409">Returns matching enum value</label></li>
                        <li><input type="checkbox" id="c2410" onchange="updateProgress()"><label for="c2410">**Normalizes to UPPERCASE**</label></li>
                        <li><input type="checkbox" id="c2411" onchange="updateProgress()"><label for="c2411">**Replaces spaces with underscores** (e.g., &quot;in use&quot; → &quot;IN_USE&quot;)</label></li>
                        <li><input type="checkbox" id="c2412" onchange="updateProgress()"><label for="c2412">Undefined → default</label></li>
                        <li><input type="checkbox" id="c2413" onchange="updateProgress()"><label for="c2413">Empty string → default</label></li>
                        <li><input type="checkbox" id="c2414" onchange="updateProgress()"><label for="c2414">Non-matching value → default</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>41.9 parseBooleanValue</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2415" onchange="updateProgress()"><label for="c2415">**&quot;yes&quot;, &quot;true&quot;, &quot;1&quot; → true**</label></li>
                        <li><input type="checkbox" id="c2416" onchange="updateProgress()"><label for="c2416">**&quot;no&quot;, &quot;false&quot;, &quot;0&quot; → false**</label></li>
                        <li><input type="checkbox" id="c2417" onchange="updateProgress()"><label for="c2417">**Case insensitive** (YES, True, NO, False)</label></li>
                        <li><input type="checkbox" id="c2418" onchange="updateProgress()"><label for="c2418">**Trims whitespace**</label></li>
                        <li><input type="checkbox" id="c2419" onchange="updateProgress()"><label for="c2419">Undefined → default (false)</label></li>
                        <li><input type="checkbox" id="c2420" onchange="updateProgress()"><label for="c2420">Unrecognized value → default</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>41.10 parseNumericValue</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2421" onchange="updateProgress()"><label for="c2421">Integer string → number</label></li>
                        <li><input type="checkbox" id="c2422" onchange="updateProgress()"><label for="c2422">Decimal string → number</label></li>
                        <li><input type="checkbox" id="c2423" onchange="updateProgress()"><label for="c2423">Undefined → null</label></li>
                        <li><input type="checkbox" id="c2424" onchange="updateProgress()"><label for="c2424">Empty string → null</label></li>
                        <li><input type="checkbox" id="c2425" onchange="updateProgress()"><label for="c2425">Non-numeric → null</label></li>
                        <li><input type="checkbox" id="c2426" onchange="updateProgress()"><label for="c2426">**Enforce minimum value**</label></li>
                        <li><input type="checkbox" id="c2427" onchange="updateProgress()"><label for="c2427">**Enforce maximum value**</label></li>
                        <li><input type="checkbox" id="c2428" onchange="updateProgress()"><label for="c2428">**Reject decimals when allowDecimals=false**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>41.11 Price Conversion (convertPriceWithQAR)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2429" onchange="updateProgress()"><label for="c2429">QAR rate: 3.64</label></li>
                        <li><input type="checkbox" id="c2430" onchange="updateProgress()"><label for="c2430">QAR input → calculates priceQAR equivalent</label></li>
                        <li><input type="checkbox" id="c2431" onchange="updateProgress()"><label for="c2431">USD input → converts to QAR</label></li>
                        <li><input type="checkbox" id="c2432" onchange="updateProgress()"><label for="c2432">Zero amount → 0 for both</label></li>
                        <li><input type="checkbox" id="c2433" onchange="updateProgress()"><label for="c2433">Decimal amounts supported</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>41.12 File Size Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2434" onchange="updateProgress()"><label for="c2434">**Max file size: 10MB**</label></li>
                        <li><input type="checkbox" id="c2435" onchange="updateProgress()"><label for="c2435">Under max → accepted</label></li>
                        <li><input type="checkbox" id="c2436" onchange="updateProgress()"><label for="c2436">Over max → rejected</label></li>
                        <li><input type="checkbox" id="c2437" onchange="updateProgress()"><label for="c2437">Size in MB calculation for error message</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>41.13 File Type Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2438" onchange="updateProgress()"><label for="c2438">**xlsx MIME type accepted**</label></li>
                        <li><input type="checkbox" id="c2439" onchange="updateProgress()"><label for="c2439">**xls MIME type accepted**</label></li>
                        <li><input type="checkbox" id="c2440" onchange="updateProgress()"><label for="c2440">**text/csv MIME type accepted**</label></li>
                        <li><input type="checkbox" id="c2441" onchange="updateProgress()"><label for="c2441">PDF, images, etc. rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>41.14 File Extension Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2442" onchange="updateProgress()"><label for="c2442">Extract extension from filename</label></li>
                        <li><input type="checkbox" id="c2443" onchange="updateProgress()"><label for="c2443">Handle multiple dots in filename</label></li>
                        <li><input type="checkbox" id="c2444" onchange="updateProgress()"><label for="c2444">**Case insensitive** (XLSX, xlsx both valid)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>41.15 Duplicate Strategy</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2445" onchange="updateProgress()"><label for="c2445">Default: &quot;skip&quot;</label></li>
                        <li><input type="checkbox" id="c2446" onchange="updateProgress()"><label for="c2446">Alternative: &quot;update&quot;</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-42" data-section="42">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 42</span>
                    <h3>SUBSCRIPTION RENEWAL DATE UTILITIES</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/subscriptions/renewal-date.test.ts src/features/subscriptions/lib/renewal-utils.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>42.1 getNextRenewalDate</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2447" onchange="updateProgress()"><label for="c2447">**Null input → null** (no date to calculate from)</label></li>
                        <li><input type="checkbox" id="c2448" onchange="updateProgress()"><label for="c2448">**Future date → returns as-is** (no calculation needed)</label></li>
                        <li><input type="checkbox" id="c2449" onchange="updateProgress()"><label for="c2449">**ONE_TIME billing → returns original date** (no renewal)</label></li>
                        <li><input type="checkbox" id="c2450" onchange="updateProgress()"><label for="c2450">MONTHLY: advances by 1 month until future</label></li>
                        <li><input type="checkbox" id="c2451" onchange="updateProgress()"><label for="c2451">QUARTERLY: advances by 3 months until future</label></li>
                        <li><input type="checkbox" id="c2452" onchange="updateProgress()"><label for="c2452">SEMI_ANNUALLY: advances by 6 months until future</label></li>
                        <li><input type="checkbox" id="c2453" onchange="updateProgress()"><label for="c2453">YEARLY: advances by 12 months until future</label></li>
                        <li><input type="checkbox" id="c2454" onchange="updateProgress()"><label for="c2454">WEEKLY: advances by 7 days until future</label></li>
                        <li><input type="checkbox" id="c2455" onchange="updateProgress()"><label for="c2455">**Unknown billing cycle → returns original date**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>42.2 isRenewalOverdue</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2456" onchange="updateProgress()"><label for="c2456">**Null date → false** (nothing to be overdue)</label></li>
                        <li><input type="checkbox" id="c2457" onchange="updateProgress()"><label for="c2457">Past date → true (overdue)</label></li>
                        <li><input type="checkbox" id="c2458" onchange="updateProgress()"><label for="c2458">Future date → false (not yet due)</label></li>
                        <li><input type="checkbox" id="c2459" onchange="updateProgress()"><label for="c2459">**Same day (exact timestamp) → false** (uses &lt; not &lt;=)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>42.3 getDaysUntilRenewal</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2460" onchange="updateProgress()"><label for="c2460">**Null date → null**</label></li>
                        <li><input type="checkbox" id="c2461" onchange="updateProgress()"><label for="c2461">Future date → positive days</label></li>
                        <li><input type="checkbox" id="c2462" onchange="updateProgress()"><label for="c2462">Past date → negative days</label></li>
                        <li><input type="checkbox" id="c2463" onchange="updateProgress()"><label for="c2463">One month ahead → approximately 30-31 days</label></li>
                        <li><input type="checkbox" id="c2464" onchange="updateProgress()"><label for="c2464">One year ahead → 365 days</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>42.4 getRenewalStatus</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2465" onchange="updateProgress()"><label for="c2465">**Null date → status: &quot;no-date&quot;, color: &quot;gray&quot;**</label></li>
                        <li><input type="checkbox" id="c2466" onchange="updateProgress()"><label for="c2466">**Overdue (past) → status: &quot;overdue&quot;, color: &quot;red&quot;**</label></li>
                        <li><input type="checkbox" id="c2467" onchange="updateProgress()"><label for="c2467">**Within 7 days → status: &quot;due-soon&quot;, color: &quot;orange&quot;**</label></li>
                        <li><input type="checkbox" id="c2468" onchange="updateProgress()"><label for="c2468">**Within 30 days → status: &quot;upcoming&quot;, color: &quot;yellow&quot;**</label></li>
                        <li><input type="checkbox" id="c2469" onchange="updateProgress()"><label for="c2469">**More than 30 days → status: &quot;active&quot;, color: &quot;green&quot;**</label></li>
                        <li><input type="checkbox" id="c2470" onchange="updateProgress()"><label for="c2470">Returns daysUntil count</label></li>
                        <li><input type="checkbox" id="c2471" onchange="updateProgress()"><label for="c2471">Returns nextRenewal date</label></li>
                        <li><input type="checkbox" id="c2472" onchange="updateProgress()"><label for="c2472">Returns isOverdue boolean</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>42.5 Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2473" onchange="updateProgress()"><label for="c2473">**Leap year Feb 29 + 1 year → Mar 1** (Feb 29 doesn't exist in non-leap year)</label></li>
                        <li><input type="checkbox" id="c2474" onchange="updateProgress()"><label for="c2474">**End of month + 1 month → handles overflow** (Jan 31 + 1 = Mar 2/3)</label></li>
                        <li><input type="checkbox" id="c2475" onchange="updateProgress()"><label for="c2475">**Year boundary crossing** (Dec + 1 month → Jan next year)</label></li>
                        <li><input type="checkbox" id="c2476" onchange="updateProgress()"><label for="c2476">**Multiple year boundaries** handled correctly</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>42.6 Weekly Renewal Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2477" onchange="updateProgress()"><label for="c2477">Adds 7 days per cycle</label></li>
                        <li><input type="checkbox" id="c2478" onchange="updateProgress()"><label for="c2478">Handles month boundary (Jan 25 + 7 → Feb 1)</label></li>
                        <li><input type="checkbox" id="c2479" onchange="updateProgress()"><label for="c2479">Returns immediately if already in future</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>42.7 Status Color Mapping</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2480" onchange="updateProgress()"><label for="c2480">overdue → red</label></li>
                        <li><input type="checkbox" id="c2481" onchange="updateProgress()"><label for="c2481">due-soon → orange</label></li>
                        <li><input type="checkbox" id="c2482" onchange="updateProgress()"><label for="c2482">upcoming → yellow</label></li>
                        <li><input type="checkbox" id="c2483" onchange="updateProgress()"><label for="c2483">active → green</label></li>
                        <li><input type="checkbox" id="c2484" onchange="updateProgress()"><label for="c2484">no-date → gray</label></li>
                        <li><input type="checkbox" id="c2485" onchange="updateProgress()"><label for="c2485">unknown → gray</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-43" data-section="43">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 43</span>
                    <h3>SECURITY HEADERS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/security/headers.test.ts src/lib/security/headers.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>43.1 Clickjacking Protection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2486" onchange="updateProgress()"><label for="c2486">**X-Frame-Options: DENY** - prevents iframe embedding</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>43.2 MIME Type Sniffing Protection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2487" onchange="updateProgress()"><label for="c2487">**X-Content-Type-Options: nosniff** - prevents MIME sniffing attacks</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>43.3 XSS Protection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2488" onchange="updateProgress()"><label for="c2488">**X-XSS-Protection: 1; mode=block** - enables browser XSS filter</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>43.4 Referrer Leakage Protection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2489" onchange="updateProgress()"><label for="c2489">**Referrer-Policy: strict-origin-when-cross-origin**</label></li>
                        <li><input type="checkbox" id="c2490" onchange="updateProgress()"><label for="c2490">Full referrer for same-origin requests</label></li>
                        <li><input type="checkbox" id="c2491" onchange="updateProgress()"><label for="c2491">Only origin for cross-origin requests</label></li>
                        <li><input type="checkbox" id="c2492" onchange="updateProgress()"><label for="c2492">Nothing for HTTPS → HTTP navigation</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>43.5 Download Protection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2493" onchange="updateProgress()"><label for="c2493">**X-Download-Options: noopen** - prevents automatic file execution</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>43.6 HTTPS Enforcement (HSTS)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2494" onchange="updateProgress()"><label for="c2494">**Production:** Strict-Transport-Security: max-age=31536000; includeSubDomains</label></li>
                        <li><input type="checkbox" id="c2495" onchange="updateProgress()"><label for="c2495">**Development:** HSTS header NOT added (allows HTTP)</label></li>
                        <li><input type="checkbox" id="c2496" onchange="updateProgress()"><label for="c2496">Max-age = 1 year (31536000 seconds)</label></li>
                        <li><input type="checkbox" id="c2497" onchange="updateProgress()"><label for="c2497">Includes subdomains</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>43.7 Content Security Policy</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2498" onchange="updateProgress()"><label for="c2498">**default-src 'self'** - base policy</label></li>
                        <li><input type="checkbox" id="c2499" onchange="updateProgress()"><label for="c2499">img-src allows HTTPS sources</label></li>
                        <li><input type="checkbox" id="c2500" onchange="updateProgress()"><label for="c2500">img-src allows data: URIs</label></li>
                        <li><input type="checkbox" id="c2501" onchange="updateProgress()"><label for="c2501">Allows blob: URLs</label></li>
                        <li><input type="checkbox" id="c2502" onchange="updateProgress()"><label for="c2502">**Development:** includes 'unsafe-inline' and 'unsafe-eval'</label></li>
                        <li><input type="checkbox" id="c2503" onchange="updateProgress()"><label for="c2503">**Production:** strict CSP without unsafe-eval</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>43.8 OWASP Compliance</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2504" onchange="updateProgress()"><label for="c2504">All 6 recommended headers present in production:</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>43.9 addSecurityHeaders Function</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2505" onchange="updateProgress()"><label for="c2505">Returns modified response object</label></li>
                        <li><input type="checkbox" id="c2506" onchange="updateProgress()"><label for="c2506">Adds all security headers to response</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-44" data-section="44">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 44</span>
                    <h3>CLASSNAME MERGE UTILITY (cn)</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/utils.test.ts src/lib/utils.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>44.1 Basic Merging</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2507" onchange="updateProgress()"><label for="c2507">Merge single class names (&quot;class1&quot;, &quot;class2&quot;)</label></li>
                        <li><input type="checkbox" id="c2508" onchange="updateProgress()"><label for="c2508">Handle empty strings (filtered out)</label></li>
                        <li><input type="checkbox" id="c2509" onchange="updateProgress()"><label for="c2509">Handle undefined values (filtered out)</label></li>
                        <li><input type="checkbox" id="c2510" onchange="updateProgress()"><label for="c2510">Handle null values (filtered out)</label></li>
                        <li><input type="checkbox" id="c2511" onchange="updateProgress()"><label for="c2511">Handle boolean false (filtered out)</label></li>
                        <li><input type="checkbox" id="c2512" onchange="updateProgress()"><label for="c2512">Handle no arguments (returns &quot;&quot;)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>44.2 Conditional Classes</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2513" onchange="updateProgress()"><label for="c2513">Boolean &amp;&amp; class pattern (isActive &amp;&amp; 'active')</label></li>
                        <li><input type="checkbox" id="c2514" onchange="updateProgress()"><label for="c2514">Works with true condition</label></li>
                        <li><input type="checkbox" id="c2515" onchange="updateProgress()"><label for="c2515">Filters false condition</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>44.3 Object Syntax</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2516" onchange="updateProgress()"><label for="c2516">Object with true/false values</label></li>
                        <li><input type="checkbox" id="c2517" onchange="updateProgress()"><label for="c2517">True values included</label></li>
                        <li><input type="checkbox" id="c2518" onchange="updateProgress()"><label for="c2518">False values excluded</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>44.4 Array Syntax</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2519" onchange="updateProgress()"><label for="c2519">Array of classes flattened</label></li>
                        <li><input type="checkbox" id="c2520" onchange="updateProgress()"><label for="c2520">Nested arrays flattened</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>44.5 Tailwind Conflict Resolution (tailwind-merge)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2521" onchange="updateProgress()"><label for="c2521">**Later class wins** (p-4, p-2 → p-2)</label></li>
                        <li><input type="checkbox" id="c2522" onchange="updateProgress()"><label for="c2522">**Padding shorthand overrides individual** (px-4 py-2, p-6 → p-6)</label></li>
                        <li><input type="checkbox" id="c2523" onchange="updateProgress()"><label for="c2523">Margin can coexist (mx-auto, ml-4 → both kept)</label></li>
                        <li><input type="checkbox" id="c2524" onchange="updateProgress()"><label for="c2524">Responsive classes preserved (text-sm, md:text-lg, lg:text-xl)</label></li>
                        <li><input type="checkbox" id="c2525" onchange="updateProgress()"><label for="c2525">Hover states preserved (bg-blue-500, hover:bg-blue-600)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>44.6 Special Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2526" onchange="updateProgress()"><label for="c2526">Important modifier preserved (!text-blue-500)</label></li>
                        <li><input type="checkbox" id="c2527" onchange="updateProgress()"><label for="c2527">Dark mode classes preserved (dark:bg-gray-900)</label></li>
                        <li><input type="checkbox" id="c2528" onchange="updateProgress()"><label for="c2528">Complex component styling pattern</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-45" data-section="45">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 45</span>
                    <h3>DEPRECIATION VALIDATION SCHEMAS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/assets/depreciation.test.ts src/features/assets/validations/depreciation.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2529" onchange="updateProgress()"><label for="c2529">depreciationCategoryId required (non-empty string)</label></li>
                        <li><input type="checkbox" id="c2530" onchange="updateProgress()"><label for="c2530">Empty depreciationCategoryId → rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2531" onchange="updateProgress()"><label for="c2531">salvageValue: defaults to 0</label></li>
                        <li><input type="checkbox" id="c2532" onchange="updateProgress()"><label for="c2532">salvageValue: must be non-negative</label></li>
                        <li><input type="checkbox" id="c2533" onchange="updateProgress()"><label for="c2533">**Negative salvageValue → rejected**</label></li>
                        <li><input type="checkbox" id="c2534" onchange="updateProgress()"><label for="c2534">Zero salvageValue → accepted</label></li>
                        <li><input type="checkbox" id="c2535" onchange="updateProgress()"><label for="c2535">customUsefulLifeMonths: optional</label></li>
                        <li><input type="checkbox" id="c2536" onchange="updateProgress()"><label for="c2536">**customUsefulLifeMonths &lt; 1 → rejected**</label></li>
                        <li><input type="checkbox" id="c2537" onchange="updateProgress()"><label for="c2537">**Non-integer customUsefulLifeMonths → rejected**</label></li>
                        <li><input type="checkbox" id="c2538" onchange="updateProgress()"><label for="c2538">depreciationStartDate: ISO datetime format</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>45.2 depreciationRecordsQuerySchema</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2539" onchange="updateProgress()"><label for="c2539">**Default limit: 50**</label></li>
                        <li><input type="checkbox" id="c2540" onchange="updateProgress()"><label for="c2540">**Default offset: 0**</label></li>
                        <li><input type="checkbox" id="c2541" onchange="updateProgress()"><label for="c2541">**Default order: desc**</label></li>
                        <li><input type="checkbox" id="c2542" onchange="updateProgress()"><label for="c2542">Parse limit from string</label></li>
                        <li><input type="checkbox" id="c2543" onchange="updateProgress()"><label for="c2543">Parse offset from string</label></li>
                        <li><input type="checkbox" id="c2544" onchange="updateProgress()"><label for="c2544">Order: asc or desc only</label></li>
                        <li><input type="checkbox" id="c2545" onchange="updateProgress()"><label for="c2545">**Invalid order → rejected**</label></li>
                        <li><input type="checkbox" id="c2546" onchange="updateProgress()"><label for="c2546">**Limit &lt; 1 → rejected**</label></li>
                        <li><input type="checkbox" id="c2547" onchange="updateProgress()"><label for="c2547">**Limit &gt; 200 → rejected**</label></li>
                        <li><input type="checkbox" id="c2548" onchange="updateProgress()"><label for="c2548">**Negative offset → rejected**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Name Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2549" onchange="updateProgress()"><label for="c2549">Required field</label></li>
                        <li><input type="checkbox" id="c2550" onchange="updateProgress()"><label for="c2550">**Min 2 characters**</label></li>
                        <li><input type="checkbox" id="c2551" onchange="updateProgress()"><label for="c2551">**Max 100 characters**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Code Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2552" onchange="updateProgress()"><label for="c2552">Required field</label></li>
                        <li><input type="checkbox" id="c2553" onchange="updateProgress()"><label for="c2553">**Min 2 characters**</label></li>
                        <li><input type="checkbox" id="c2554" onchange="updateProgress()"><label for="c2554">**Max 50 characters**</label></li>
                        <li><input type="checkbox" id="c2555" onchange="updateProgress()"><label for="c2555">**Uppercase only** (lowercase rejected)</label></li>
                        <li><input type="checkbox" id="c2556" onchange="updateProgress()"><label for="c2556">**No special characters** (hyphens rejected)</label></li>
                        <li><input type="checkbox" id="c2557" onchange="updateProgress()"><label for="c2557">Numbers allowed</label></li>
                        <li><input type="checkbox" id="c2558" onchange="updateProgress()"><label for="c2558">Underscores allowed</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Rate &amp; Life Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2559" onchange="updateProgress()"><label for="c2559">annualRate required</label></li>
                        <li><input type="checkbox" id="c2560" onchange="updateProgress()"><label for="c2560">**Negative annualRate → rejected**</label></li>
                        <li><input type="checkbox" id="c2561" onchange="updateProgress()"><label for="c2561">**annualRate &gt; 100 → rejected**</label></li>
                        <li><input type="checkbox" id="c2562" onchange="updateProgress()"><label for="c2562">annualRate = 0 or 100 → accepted</label></li>
                        <li><input type="checkbox" id="c2563" onchange="updateProgress()"><label for="c2563">usefulLifeYears required</label></li>
                        <li><input type="checkbox" id="c2564" onchange="updateProgress()"><label for="c2564">**Negative usefulLifeYears → rejected**</label></li>
                        <li><input type="checkbox" id="c2565" onchange="updateProgress()"><label for="c2565">**Non-integer usefulLifeYears → rejected**</label></li>
                        <li><input type="checkbox" id="c2566" onchange="updateProgress()"><label for="c2566">usefulLifeYears = 0 → accepted</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2567" onchange="updateProgress()"><label for="c2567">description: max 500 characters</label></li>
                        <li><input type="checkbox" id="c2568" onchange="updateProgress()"><label for="c2568">isActive: defaults to true</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>45.4 updateDepreciationCategorySchema</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2569" onchange="updateProgress()"><label for="c2569">All fields optional (partial updates)</label></li>
                        <li><input type="checkbox" id="c2570" onchange="updateProgress()"><label for="c2570">Empty object allowed (no updates)</label></li>
                        <li><input type="checkbox" id="c2571" onchange="updateProgress()"><label for="c2571">Validates name if provided</label></li>
                        <li><input type="checkbox" id="c2572" onchange="updateProgress()"><label for="c2572">Validates code if provided</label></li>
                        <li><input type="checkbox" id="c2573" onchange="updateProgress()"><label for="c2573">Validates annualRate if provided</label></li>
                        <li><input type="checkbox" id="c2574" onchange="updateProgress()"><label for="c2574">Multiple fields can be updated together</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Straight-Line Method</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2575" onchange="updateProgress()"><label for="c2575">Annual = (Purchase - Salvage) / UsefulLife</label></li>
                        <li><input type="checkbox" id="c2576" onchange="updateProgress()"><label for="c2576">Example: (10000 - 1000) / 5 = 1800</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Percentage Method</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2577" onchange="updateProgress()"><label for="c2577">Annual = Purchase × (Rate / 100)</label></li>
                        <li><input type="checkbox" id="c2578" onchange="updateProgress()"><label for="c2578">Example: 10000 × 25% = 2500</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Book Value</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2579" onchange="updateProgress()"><label for="c2579">BookValue = Purchase - TotalDepreciation</label></li>
                        <li><input type="checkbox" id="c2580" onchange="updateProgress()"><label for="c2580">**Cannot depreciate below salvage value**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Monthly Depreciation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2581" onchange="updateProgress()"><label for="c2581">Monthly = Annual / 12</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2582" onchange="updateProgress()"><label for="c2582">Zero salvage value handled</label></li>
                        <li><input type="checkbox" id="c2583" onchange="updateProgress()"><label for="c2583">Fully depreciated assets</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-46" data-section="46">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 46</span>
                    <h3>APPROVAL ENGINE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/approvals/approval-engine.test.ts src/features/approvals/lib/approval-engine.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Policy Matching</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2584" onchange="updateProgress()"><label for="c2584">**No policies exist → null**</label></li>
                        <li><input type="checkbox" id="c2585" onchange="updateProgress()"><label for="c2585">Match leave request policy by days (minDays/maxDays)</label></li>
                        <li><input type="checkbox" id="c2586" onchange="updateProgress()"><label for="c2586">**Days exceed threshold → no match (null)**</label></li>
                        <li><input type="checkbox" id="c2587" onchange="updateProgress()"><label for="c2587">Match purchase request policy by amount (minAmount/maxAmount)</label></li>
                        <li><input type="checkbox" id="c2588" onchange="updateProgress()"><label for="c2588">**Amount below minimum → no match**</label></li>
                        <li><input type="checkbox" id="c2589" onchange="updateProgress()"><label for="c2589">Return first active policy when no thresholds specified</label></li>
                        <li><input type="checkbox" id="c2590" onchange="updateProgress()"><label for="c2590">Filter by tenantId when provided</label></li>
                        <li><input type="checkbox" id="c2591" onchange="updateProgress()"><label for="c2591">Ordered by priority (higher first)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>46.2 initializeApprovalChain</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2592" onchange="updateProgress()"><label for="c2592">Create approval steps for each policy level</label></li>
                        <li><input type="checkbox" id="c2593" onchange="updateProgress()"><label for="c2593">Set initial status to PENDING</label></li>
                        <li><input type="checkbox" id="c2594" onchange="updateProgress()"><label for="c2594">Include levelOrder and requiredRole for each step</label></li>
                        <li><input type="checkbox" id="c2595" onchange="updateProgress()"><label for="c2595">Link steps to entityType and entityId</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>46.3 getCurrentPendingStep</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2596" onchange="updateProgress()"><label for="c2596">Return first pending step (lowest levelOrder)</label></li>
                        <li><input type="checkbox" id="c2597" onchange="updateProgress()"><label for="c2597">**No pending steps → null**</label></li>
                        <li><input type="checkbox" id="c2598" onchange="updateProgress()"><label for="c2598">Ordered by levelOrder ascending</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Role-Based Authorization</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2599" onchange="updateProgress()"><label for="c2599">**ADMIN can approve any step** (always allowed)</label></li>
                        <li><input type="checkbox" id="c2600" onchange="updateProgress()"><label for="c2600">User with matching approvalRole can approve</label></li>
                        <li><input type="checkbox" id="c2601" onchange="updateProgress()"><label for="c2601">**User without matching role → rejected** (reason includes required role)</label></li>
                        <li><input type="checkbox" id="c2602" onchange="updateProgress()"><label for="c2602">**Non-existent user → rejected** (&quot;Member not found&quot;)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Delegation Support</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2603" onchange="updateProgress()"><label for="c2603">User with delegation can approve on behalf of delegator</label></li>
                        <li><input type="checkbox" id="c2604" onchange="updateProgress()"><label for="c2604">Returns viaDelegation: true when using delegation</label></li>
                        <li><input type="checkbox" id="c2605" onchange="updateProgress()"><label for="c2605">Delegation must be active and within date range</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Approve Action</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2606" onchange="updateProgress()"><label for="c2606">Update step status to APPROVED</label></li>
                        <li><input type="checkbox" id="c2607" onchange="updateProgress()"><label for="c2607">Record approverId and notes</label></li>
                        <li><input type="checkbox" id="c2608" onchange="updateProgress()"><label for="c2608">Record actionAt timestamp</label></li>
                        <li><input type="checkbox" id="c2609" onchange="updateProgress()"><label for="c2609">If last step → isChainComplete: true, allApproved: true</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Reject Action</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2610" onchange="updateProgress()"><label for="c2610">Update step status to REJECTED</label></li>
                        <li><input type="checkbox" id="c2611" onchange="updateProgress()"><label for="c2611">**Skip remaining steps** (status → SKIPPED)</label></li>
                        <li><input type="checkbox" id="c2612" onchange="updateProgress()"><label for="c2612">allApproved: false</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Error Handling</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2613" onchange="updateProgress()"><label for="c2613">**Step not found → throw &quot;Approval step not found&quot;**</label></li>
                        <li><input type="checkbox" id="c2614" onchange="updateProgress()"><label for="c2614">**Step already processed → throw &quot;Step already approved&quot;**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>46.6 adminBypassApproval</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2615" onchange="updateProgress()"><label for="c2615">Approve all pending steps at once</label></li>
                        <li><input type="checkbox" id="c2616" onchange="updateProgress()"><label for="c2616">Record admin as approver for all steps</label></li>
                        <li><input type="checkbox" id="c2617" onchange="updateProgress()"><label for="c2617">**Default notes:** &quot;Approved by admin (bypass)&quot;</label></li>
                        <li><input type="checkbox" id="c2618" onchange="updateProgress()"><label for="c2618">Custom notes supported</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>hasApprovalChain</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2619" onchange="updateProgress()"><label for="c2619">Steps exist → true</label></li>
                        <li><input type="checkbox" id="c2620" onchange="updateProgress()"><label for="c2620">No steps → false</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>isFullyApproved</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2621" onchange="updateProgress()"><label for="c2621">All steps APPROVED → true</label></li>
                        <li><input type="checkbox" id="c2622" onchange="updateProgress()"><label for="c2622">Any step PENDING → false</label></li>
                        <li><input type="checkbox" id="c2623" onchange="updateProgress()"><label for="c2623">No steps exist → false</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>wasRejected</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2624" onchange="updateProgress()"><label for="c2624">Any step REJECTED → true</label></li>
                        <li><input type="checkbox" id="c2625" onchange="updateProgress()"><label for="c2625">No rejected steps → false</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>deleteApprovalChain</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2626" onchange="updateProgress()"><label for="c2626">Deletes all steps for entity</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>46.8 getApprovalChainSummary</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2627" onchange="updateProgress()"><label for="c2627">**No steps → status: &quot;NOT_STARTED&quot;**</label></li>
                        <li><input type="checkbox" id="c2628" onchange="updateProgress()"><label for="c2628">Pending steps → status: &quot;PENDING&quot;, currentStep set</label></li>
                        <li><input type="checkbox" id="c2629" onchange="updateProgress()"><label for="c2629">All approved → status: &quot;APPROVED&quot;</label></li>
                        <li><input type="checkbox" id="c2630" onchange="updateProgress()"><label for="c2630">Any rejected → status: &quot;REJECTED&quot;</label></li>
                        <li><input type="checkbox" id="c2631" onchange="updateProgress()"><label for="c2631">Returns: totalSteps, completedSteps, currentStep, status</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>46.9 getPendingApprovalsForUser</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2632" onchange="updateProgress()"><label for="c2632">**ADMIN sees all pending** approvals</label></li>
                        <li><input type="checkbox" id="c2633" onchange="updateProgress()"><label for="c2633">**Non-existent user → empty array**</label></li>
                        <li><input type="checkbox" id="c2634" onchange="updateProgress()"><label for="c2634">Includes delegated approvals (based on delegation)</label></li>
                        <li><input type="checkbox" id="c2635" onchange="updateProgress()"><label for="c2635">Filter by tenantId when provided</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-47" data-section="47">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 47</span>
                    <h3>WPS FILE GENERATION (QATAR)</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/payroll/wps.test.ts src/features/payroll/lib/wps.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>47.1 SIF File Structure</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2636" onchange="updateProgress()"><label for="c2636">**SCR** (Salary Control Record) - Header line</label></li>
                        <li><input type="checkbox" id="c2637" onchange="updateProgress()"><label for="c2637">**SDR** (Salary Detail Record) - Employee lines</label></li>
                        <li><input type="checkbox" id="c2638" onchange="updateProgress()"><label for="c2638">**ETR** (End of Transmission Record) - Trailer line</label></li>
                        <li><input type="checkbox" id="c2639" onchange="updateProgress()"><label for="c2639">**Windows line endings** (\r\n)</label></li>
                        <li><input type="checkbox" id="c2640" onchange="updateProgress()"><label for="c2640">Empty employee list → SCR + ETR only</label></li>
                        <li><input type="checkbox" id="c2641" onchange="updateProgress()"><label for="c2641">Single employee → SCR + 1 SDR + ETR</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>47.2 Header (SCR) Content</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2642" onchange="updateProgress()"><label for="c2642">Includes employer MOL ID</label></li>
                        <li><input type="checkbox" id="c2643" onchange="updateProgress()"><label for="c2643">**Employer name UPPERCASE**</label></li>
                        <li><input type="checkbox" id="c2644" onchange="updateProgress()"><label for="c2644">Payment date format: YYYYMMDD</label></li>
                        <li><input type="checkbox" id="c2645" onchange="updateProgress()"><label for="c2645">Total record count</label></li>
                        <li><input type="checkbox" id="c2646" onchange="updateProgress()"><label for="c2646">Total amount</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>47.3 Employee Record (SDR) Content</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2647" onchange="updateProgress()"><label for="c2647">**Employee name UPPERCASE**</label></li>
                        <li><input type="checkbox" id="c2648" onchange="updateProgress()"><label for="c2648">QID number (11 digits)</label></li>
                        <li><input type="checkbox" id="c2649" onchange="updateProgress()"><label for="c2649">Bank code (4 chars)</label></li>
                        <li><input type="checkbox" id="c2650" onchange="updateProgress()"><label for="c2650">IBAN</label></li>
                        <li><input type="checkbox" id="c2651" onchange="updateProgress()"><label for="c2651">**Amounts in fils format** (QAR × 1000)</label></li>
                        <li><input type="checkbox" id="c2652" onchange="updateProgress()"><label for="c2652">12000 QAR → 0000012000000 (13 chars, zero-padded)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>47.4 Trailer (ETR) Content</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2653" onchange="updateProgress()"><label for="c2653">Record count padded to 6 characters</label></li>
                        <li><input type="checkbox" id="c2654" onchange="updateProgress()"><label for="c2654">2 records → 000002</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>47.5 getBankCode (Qatar Banks)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2655" onchange="updateProgress()"><label for="c2655">QNB / Qatar National Bank → QNBA</label></li>
                        <li><input type="checkbox" id="c2656" onchange="updateProgress()"><label for="c2656">Commercial Bank / Commercial Bank of Qatar → CBQQ</label></li>
                        <li><input type="checkbox" id="c2657" onchange="updateProgress()"><label for="c2657">Doha Bank → DHBQ</label></li>
                        <li><input type="checkbox" id="c2658" onchange="updateProgress()"><label for="c2658">QIB / Qatar Islamic Bank → QISB</label></li>
                        <li><input type="checkbox" id="c2659" onchange="updateProgress()"><label for="c2659">Masraf Al Rayan / MAR → MAFQ</label></li>
                        <li><input type="checkbox" id="c2660" onchange="updateProgress()"><label for="c2660">**Case insensitive** (qnb, QNB, Qnb all work)</label></li>
                        <li><input type="checkbox" id="c2661" onchange="updateProgress()"><label for="c2661">**Unknown bank → XXXX**</label></li>
                        <li><input type="checkbox" id="c2662" onchange="updateProgress()"><label for="c2662">**Empty string → XXXX**</label></li>
                        <li><input type="checkbox" id="c2663" onchange="updateProgress()"><label for="c2663">**Null/undefined → XXXX**</label></li>
                        <li><input type="checkbox" id="c2664" onchange="updateProgress()"><label for="c2664">Trims whitespace</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>47.6 QATAR_BANK_CODES</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2665" onchange="updateProgress()"><label for="c2665">All major Qatar banks defined</label></li>
                        <li><input type="checkbox" id="c2666" onchange="updateProgress()"><label for="c2666">Includes: QNB, Commercial Bank, Doha Bank, QIB, Masraf Al Rayan, Ahli Bank, Dukhan Bank, HSBC</label></li>
                        <li><input type="checkbox" id="c2667" onchange="updateProgress()"><label for="c2667">All codes are 4 characters</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>47.7 validateWPSRecord</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2668" onchange="updateProgress()"><label for="c2668">**Valid record → empty error array**</label></li>
                        <li><input type="checkbox" id="c2669" onchange="updateProgress()"><label for="c2669">**Invalid QID length → &quot;QID must be exactly 11 digits&quot;**</label></li>
                        <li><input type="checkbox" id="c2670" onchange="updateProgress()"><label for="c2670">**Empty QID → error**</label></li>
                        <li><input type="checkbox" id="c2671" onchange="updateProgress()"><label for="c2671">**Empty employee name → &quot;Employee name is required&quot;**</label></li>
                        <li><input type="checkbox" id="c2672" onchange="updateProgress()"><label for="c2672">**Whitespace-only name → error**</label></li>
                        <li><input type="checkbox" id="c2673" onchange="updateProgress()"><label for="c2673">**Short IBAN → &quot;Valid IBAN is required&quot;**</label></li>
                        <li><input type="checkbox" id="c2674" onchange="updateProgress()"><label for="c2674">**Unknown bank code (XXXX) → &quot;Unknown bank code&quot;**</label></li>
                        <li><input type="checkbox" id="c2675" onchange="updateProgress()"><label for="c2675">**Zero net salary → &quot;Net salary must be greater than 0&quot;**</label></li>
                        <li><input type="checkbox" id="c2676" onchange="updateProgress()"><label for="c2676">**Negative net salary → error**</label></li>
                        <li><input type="checkbox" id="c2677" onchange="updateProgress()"><label for="c2677">Multiple issues → multiple errors returned</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>47.8 generateWPSFileName</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2678" onchange="updateProgress()"><label for="c2678">Format: WPS_{MOL_ID}_{YYYYMM}_{HHMMSS}.sif</label></li>
                        <li><input type="checkbox" id="c2679" onchange="updateProgress()"><label for="c2679">Month padded with leading zero (03 for March)</label></li>
                        <li><input type="checkbox" id="c2680" onchange="updateProgress()"><label for="c2680">.sif extension</label></li>
                        <li><input type="checkbox" id="c2681" onchange="updateProgress()"><label for="c2681">Includes employer MOL ID</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>47.9 Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2682" onchange="updateProgress()"><label for="c2682">Special characters in employer name preserved</label></li>
                        <li><input type="checkbox" id="c2683" onchange="updateProgress()"><label for="c2683">**Long employer name truncated to 40 characters**</label></li>
                        <li><input type="checkbox" id="c2684" onchange="updateProgress()"><label for="c2684">Decimal amounts rounded correctly (12345.678 → 12345678 fils)</label></li>
                        <li><input type="checkbox" id="c2685" onchange="updateProgress()"><label for="c2685">Large salary amounts handled (999999.99 → 999999990 fils)</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-48" data-section="48">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 48</span>
                    <h3>FEATURE FLAGS &amp; TIER CONFIGURATION</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/multi-tenant/feature-flags.test.ts src/lib/multi-tenant/feature-flags.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>FREE Tier</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2686" onchange="updateProgress()"><label for="c2686">Name: &quot;Free&quot;</label></li>
                        <li><input type="checkbox" id="c2687" onchange="updateProgress()"><label for="c2687">maxUsers: -1 (unlimited)</label></li>
                        <li><input type="checkbox" id="c2688" onchange="updateProgress()"><label for="c2688">maxAssets: -1 (unlimited)</label></li>
                        <li><input type="checkbox" id="c2689" onchange="updateProgress()"><label for="c2689">maxSubscriptions: -1 (unlimited)</label></li>
                        <li><input type="checkbox" id="c2690" onchange="updateProgress()"><label for="c2690">maxSuppliers: -1 (unlimited)</label></li>
                        <li><input type="checkbox" id="c2691" onchange="updateProgress()"><label for="c2691">monthlyPrice: $0</label></li>
                        <li><input type="checkbox" id="c2692" onchange="updateProgress()"><label for="c2692">yearlyPrice: $0</label></li>
                        <li><input type="checkbox" id="c2693" onchange="updateProgress()"><label for="c2693">Includes all modules</label></li>
                        <li><input type="checkbox" id="c2694" onchange="updateProgress()"><label for="c2694">Includes basic features</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>PLUS Tier</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2695" onchange="updateProgress()"><label for="c2695">Name: &quot;Plus&quot;</label></li>
                        <li><input type="checkbox" id="c2696" onchange="updateProgress()"><label for="c2696">maxUsers: -1 (unlimited)</label></li>
                        <li><input type="checkbox" id="c2697" onchange="updateProgress()"><label for="c2697">monthlyPrice: $149</label></li>
                        <li><input type="checkbox" id="c2698" onchange="updateProgress()"><label for="c2698">yearlyPrice: $1490 (2 months free)</label></li>
                        <li><input type="checkbox" id="c2699" onchange="updateProgress()"><label for="c2699">Yearly &lt; 12 × monthly</label></li>
                        <li><input type="checkbox" id="c2700" onchange="updateProgress()"><label for="c2700">Includes all modules (same as FREE)</label></li>
                        <li><input type="checkbox" id="c2701" onchange="updateProgress()"><label for="c2701">Includes all features (priority_support, advanced_reports)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>48.2 hasModuleAccess</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2702" onchange="updateProgress()"><label for="c2702">**Always returns true** (tier restrictions disabled)</label></li>
                        <li><input type="checkbox" id="c2703" onchange="updateProgress()"><label for="c2703">Works for any module regardless of tier</label></li>
                        <li><input type="checkbox" id="c2704" onchange="updateProgress()"><label for="c2704">**Unknown modules → true** (lenient behavior)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>48.3 hasFeatureAccess</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2705" onchange="updateProgress()"><label for="c2705">**Always returns true** (tier restrictions disabled)</label></li>
                        <li><input type="checkbox" id="c2706" onchange="updateProgress()"><label for="c2706">Works for any feature regardless of tier</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>48.4 getTierConfig</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2707" onchange="updateProgress()"><label for="c2707">FREE tier → returns TIER_CONFIG.FREE</label></li>
                        <li><input type="checkbox" id="c2708" onchange="updateProgress()"><label for="c2708">PLUS tier → returns TIER_CONFIG.PLUS</label></li>
                        <li><input type="checkbox" id="c2709" onchange="updateProgress()"><label for="c2709">**Unknown tier → fallback to FREE**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>48.5 getAvailableModules</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2710" onchange="updateProgress()"><label for="c2710">Returns all modules regardless of tier</label></li>
                        <li><input type="checkbox" id="c2711" onchange="updateProgress()"><label for="c2711">Core modules: assets, subscriptions, suppliers</label></li>
                        <li><input type="checkbox" id="c2712" onchange="updateProgress()"><label for="c2712">HR modules: leave, payroll</label></li>
                        <li><input type="checkbox" id="c2713" onchange="updateProgress()"><label for="c2713">Operational: purchase-requests, documents</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>48.6 getAvailableFeatures</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2714" onchange="updateProgress()"><label for="c2714">Returns all features regardless of tier</label></li>
                        <li><input type="checkbox" id="c2715" onchange="updateProgress()"><label for="c2715">Reporting: basic_reports, advanced_reports</label></li>
                        <li><input type="checkbox" id="c2716" onchange="updateProgress()"><label for="c2716">Notifications: in_app, email, whatsapp</label></li>
                        <li><input type="checkbox" id="c2717" onchange="updateProgress()"><label for="c2717">Auth: google_sso, microsoft_sso</label></li>
                        <li><input type="checkbox" id="c2718" onchange="updateProgress()"><label for="c2718">Customization: custom_branding, subdomain</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>48.7 needsUpgradeForModule</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2719" onchange="updateProgress()"><label for="c2719">**Always returns null** (no upgrade needed)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>48.8 needsUpgradeForFeature</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2720" onchange="updateProgress()"><label for="c2720">**Always returns null** (no upgrade needed)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>48.9 MODULE_METADATA</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2721" onchange="updateProgress()"><label for="c2721">Each module has: name, description, icon</label></li>
                        <li><input type="checkbox" id="c2722" onchange="updateProgress()"><label for="c2722">assets → &quot;Asset Management&quot;, icon: Package</label></li>
                        <li><input type="checkbox" id="c2723" onchange="updateProgress()"><label for="c2723">subscriptions → &quot;Subscription Tracking&quot;, icon: CreditCard</label></li>
                        <li><input type="checkbox" id="c2724" onchange="updateProgress()"><label for="c2724">suppliers → &quot;Supplier Management&quot;, icon: Truck</label></li>
                        <li><input type="checkbox" id="c2725" onchange="updateProgress()"><label for="c2725">leave → &quot;Leave Management&quot;, icon: Calendar</label></li>
                        <li><input type="checkbox" id="c2726" onchange="updateProgress()"><label for="c2726">payroll → &quot;Payroll Processing&quot;, icon: DollarSign</label></li>
                        <li><input type="checkbox" id="c2727" onchange="updateProgress()"><label for="c2727">purchase-requests → &quot;Purchase Requests&quot;, icon: ShoppingCart</label></li>
                        <li><input type="checkbox" id="c2728" onchange="updateProgress()"><label for="c2728">documents → &quot;Company Documents&quot;, icon: FileCheck</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>48.10 Module Naming Convention</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2729" onchange="updateProgress()"><label for="c2729">No spaces in module names</label></li>
                        <li><input type="checkbox" id="c2730" onchange="updateProgress()"><label for="c2730">Multi-word modules use hyphens (purchase-requests)</label></li>
                        <li><input type="checkbox" id="c2731" onchange="updateProgress()"><label for="c2731">Lowercase only</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-49" data-section="49">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 49</span>
                    <h3>TENANT USAGE LIMITS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/multi-tenant/limits.test.ts src/lib/multi-tenant/limits.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>49.1 getOrganizationUsage</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2732" onchange="updateProgress()"><label for="c2732">Returns counts for: users, assets, subscriptions, suppliers</label></li>
                        <li><input type="checkbox" id="c2733" onchange="updateProgress()"><label for="c2733">Filters users by tenantId AND isDeleted: false</label></li>
                        <li><input type="checkbox" id="c2734" onchange="updateProgress()"><label for="c2734">Filters assets by tenantId</label></li>
                        <li><input type="checkbox" id="c2735" onchange="updateProgress()"><label for="c2735">Filters subscriptions by tenantId</label></li>
                        <li><input type="checkbox" id="c2736" onchange="updateProgress()"><label for="c2736">Filters suppliers by tenantId</label></li>
                        <li><input type="checkbox" id="c2737" onchange="updateProgress()"><label for="c2737">Executes all count queries in parallel</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>49.2 getResourceUsage</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2738" onchange="updateProgress()"><label for="c2738">Returns: current, limit, remaining, isAtLimit, percentUsed</label></li>
                        <li><input type="checkbox" id="c2739" onchange="updateProgress()"><label for="c2739">**limit: -1** (unlimited)</label></li>
                        <li><input type="checkbox" id="c2740" onchange="updateProgress()"><label for="c2740">**remaining: -1** (unlimited)</label></li>
                        <li><input type="checkbox" id="c2741" onchange="updateProgress()"><label for="c2741">**isAtLimit: false** (limits disabled)</label></li>
                        <li><input type="checkbox" id="c2742" onchange="updateProgress()"><label for="c2742">**percentUsed: 0** (unlimited)</label></li>
                        <li><input type="checkbox" id="c2743" onchange="updateProgress()"><label for="c2743">Works for all resource types</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>49.3 checkLimit</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2744" onchange="updateProgress()"><label for="c2744">**Always returns allowed: true** (limits disabled)</label></li>
                        <li><input type="checkbox" id="c2745" onchange="updateProgress()"><label for="c2745">Works for any resource type</label></li>
                        <li><input type="checkbox" id="c2746" onchange="updateProgress()"><label for="c2746">Works for any count to add</label></li>
                        <li><input type="checkbox" id="c2747" onchange="updateProgress()"><label for="c2747">Default countToAdd: 1</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>49.4 checkMultipleLimits</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2748" onchange="updateProgress()"><label for="c2748">Returns allAllowed: true for all checks</label></li>
                        <li><input type="checkbox" id="c2749" onchange="updateProgress()"><label for="c2749">Returns allowed: true for each resource type</label></li>
                        <li><input type="checkbox" id="c2750" onchange="updateProgress()"><label for="c2750">**Empty checks array → allAllowed: true, empty results**</label></li>
                        <li><input type="checkbox" id="c2751" onchange="updateProgress()"><label for="c2751">Single check supported</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>49.5 getLimitWarnings</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2752" onchange="updateProgress()"><label for="c2752">**Returns empty array** (limits disabled)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>49.6 getOrganizationWithTier</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2753" onchange="updateProgress()"><label for="c2753">Returns organization with tier info</label></li>
                        <li><input type="checkbox" id="c2754" onchange="updateProgress()"><label for="c2754">Includes: id, name, slug, subscriptionTier, maxUsers, maxAssets</label></li>
                        <li><input type="checkbox" id="c2755" onchange="updateProgress()"><label for="c2755">Includes Stripe info: stripeCustomerId, stripeSubEnd</label></li>
                        <li><input type="checkbox" id="c2756" onchange="updateProgress()"><label for="c2756">**Non-existent org → null**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>49.7 hasActiveSubscription</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2757" onchange="updateProgress()"><label for="c2757">**Always returns true** (tier restrictions disabled)</label></li>
                        <li><input type="checkbox" id="c2758" onchange="updateProgress()"><label for="c2758">Works for any organization</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>49.8 Resource Types</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2759" onchange="updateProgress()"><label for="c2759">users, assets, subscriptions, suppliers supported</label></li>
                        <li><input type="checkbox" id="c2760" onchange="updateProgress()"><label for="c2760">Type-safe ResourceType union</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>49.9 UsageInfo Structure</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2761" onchange="updateProgress()"><label for="c2761">current: number (current count)</label></li>
                        <li><input type="checkbox" id="c2762" onchange="updateProgress()"><label for="c2762">limit: number (-1 for unlimited)</label></li>
                        <li><input type="checkbox" id="c2763" onchange="updateProgress()"><label for="c2763">remaining: number (-1 for unlimited)</label></li>
                        <li><input type="checkbox" id="c2764" onchange="updateProgress()"><label for="c2764">isAtLimit: boolean</label></li>
                        <li><input type="checkbox" id="c2765" onchange="updateProgress()"><label for="c2765">percentUsed: number (0-100)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>49.10 Multi-Tenant Isolation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2766" onchange="updateProgress()"><label for="c2766">All queries filter by organization ID (tenantId)</label></li>
                        <li><input type="checkbox" id="c2767" onchange="updateProgress()"><label for="c2767">No cross-tenant data leakage</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-50" data-section="50">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 50</span>
                    <h3>API HANDLER WRAPPER</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/http/handler.test.ts src/lib/http/handler.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>50.1 Authentication Enforcement</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2768" onchange="updateProgress()"><label for="c2768">**requireAuth: false** → allows unauthenticated requests</label></li>
                        <li><input type="checkbox" id="c2769" onchange="updateProgress()"><label for="c2769">**requireAuth: true + no session** → 401 Unauthorized</label></li>
                        <li><input type="checkbox" id="c2770" onchange="updateProgress()"><label for="c2770">**requireAuth: true + valid session** → handler called</label></li>
                        <li><input type="checkbox" id="c2771" onchange="updateProgress()"><label for="c2771">Handler receives request and context</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>50.2 Admin Role Checks</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2772" onchange="updateProgress()"><label for="c2772">**requireAdmin: true + non-admin** → 403 Forbidden</label></li>
                        <li><input type="checkbox" id="c2773" onchange="updateProgress()"><label for="c2773">**requireAdmin: true + admin** → handler called</label></li>
                        <li><input type="checkbox" id="c2774" onchange="updateProgress()"><label for="c2774">**requireAdmin implies requireAuth** → 401 if no session</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>50.3 Rate Limiting</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2775" onchange="updateProgress()"><label for="c2775">**POST requests rate limited by default**</label></li>
                        <li><input type="checkbox" id="c2776" onchange="updateProgress()"><label for="c2776">**GET requests NOT rate limited by default**</label></li>
                        <li><input type="checkbox" id="c2777" onchange="updateProgress()"><label for="c2777">Rate limit exceeded → 429 Too Many Requests</label></li>
                        <li><input type="checkbox" id="c2778" onchange="updateProgress()"><label for="c2778">**skipRateLimit: true** → bypasses rate limiting</label></li>
                        <li><input type="checkbox" id="c2779" onchange="updateProgress()"><label for="c2779">Rate limit check uses checkRateLimit utility</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>50.4 Tenant Context</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2780" onchange="updateProgress()"><label for="c2780">**Tenant required by default for auth routes**</label></li>
                        <li><input type="checkbox" id="c2781" onchange="updateProgress()"><label for="c2781">**No tenant context → 403 Forbidden**</label></li>
                        <li><input type="checkbox" id="c2782" onchange="updateProgress()"><label for="c2782">**requireTenant: false** → allows no tenant context</label></li>
                        <li><input type="checkbox" id="c2783" onchange="updateProgress()"><label for="c2783">Tenant-scoped Prisma client injected into context</label></li>
                        <li><input type="checkbox" id="c2784" onchange="updateProgress()"><label for="c2784">Tenant context includes: tenantId, userId, orgRole</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>50.5 Module Access</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2785" onchange="updateProgress()"><label for="c2785">**requireModule + module disabled → 403 Forbidden**</label></li>
                        <li><input type="checkbox" id="c2786" onchange="updateProgress()"><label for="c2786">**requireModule + module enabled → handler called**</label></li>
                        <li><input type="checkbox" id="c2787" onchange="updateProgress()"><label for="c2787">Uses hasModuleAccess utility</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>50.6 Organization Role Checks</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2788" onchange="updateProgress()"><label for="c2788">**requireOrgRole + user lacks role → 403 Forbidden**</label></li>
                        <li><input type="checkbox" id="c2789" onchange="updateProgress()"><label for="c2789">**requireOrgRole + user has role → handler called**</label></li>
                        <li><input type="checkbox" id="c2790" onchange="updateProgress()"><label for="c2790">Role check accepts array: [OWNER, ADMIN]</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>50.7 Permission Checks</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2791" onchange="updateProgress()"><label for="c2791">**requirePermission + user lacks permission → 403 Forbidden**</label></li>
                        <li><input type="checkbox" id="c2792" onchange="updateProgress()"><label for="c2792">**requirePermission + user has permission → handler called**</label></li>
                        <li><input type="checkbox" id="c2793" onchange="updateProgress()"><label for="c2793">Permission format: &quot;module:action&quot; (e.g., &quot;payroll:run&quot;)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>50.8 Route Params</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2794" onchange="updateProgress()"><label for="c2794">Route params resolved and injected into context</label></li>
                        <li><input type="checkbox" id="c2795" onchange="updateProgress()"><label for="c2795">**Undefined params → ctx.params is undefined**</label></li>
                        <li><input type="checkbox" id="c2796" onchange="updateProgress()"><label for="c2796">Params from Promise resolved correctly</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>50.9 Request ID</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2797" onchange="updateProgress()"><label for="c2797">**x-request-id header added to response**</label></li>
                        <li><input type="checkbox" id="c2798" onchange="updateProgress()"><label for="c2798">**Existing x-request-id preserved** (not regenerated)</label></li>
                        <li><input type="checkbox" id="c2799" onchange="updateProgress()"><label for="c2799">Request ID included in error responses</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>50.10 Error Handling</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2800" onchange="updateProgress()"><label for="c2800">Handler errors caught and formatted</label></li>
                        <li><input type="checkbox" id="c2801" onchange="updateProgress()"><label for="c2801">Error response includes request ID</label></li>
                        <li><input type="checkbox" id="c2802" onchange="updateProgress()"><label for="c2802">Errors return 500 status by default</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-51" data-section="51">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 51</span>
                    <h3>HTTP ERROR UTILITIES</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/http/errors.test.ts src/lib/http/errors.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>AppError (Base)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2803" onchange="updateProgress()"><label for="c2803">Default statusCode: 500</label></li>
                        <li><input type="checkbox" id="c2804" onchange="updateProgress()"><label for="c2804">Default isOperational: true</label></li>
                        <li><input type="checkbox" id="c2805" onchange="updateProgress()"><label for="c2805">Custom statusCode supported</label></li>
                        <li><input type="checkbox" id="c2806" onchange="updateProgress()"><label for="c2806">Non-operational errors supported (false)</label></li>
                        <li><input type="checkbox" id="c2807" onchange="updateProgress()"><label for="c2807">Extends Error class</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>ValidationError</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2808" onchange="updateProgress()"><label for="c2808">statusCode: 400</label></li>
                        <li><input type="checkbox" id="c2809" onchange="updateProgress()"><label for="c2809">Extends AppError</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>AuthenticationError</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2810" onchange="updateProgress()"><label for="c2810">Default message: &quot;Authentication required&quot;</label></li>
                        <li><input type="checkbox" id="c2811" onchange="updateProgress()"><label for="c2811">statusCode: 401</label></li>
                        <li><input type="checkbox" id="c2812" onchange="updateProgress()"><label for="c2812">Custom message supported</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>AuthorizationError</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2813" onchange="updateProgress()"><label for="c2813">Default message: &quot;Insufficient permissions&quot;</label></li>
                        <li><input type="checkbox" id="c2814" onchange="updateProgress()"><label for="c2814">statusCode: 403</label></li>
                        <li><input type="checkbox" id="c2815" onchange="updateProgress()"><label for="c2815">Custom message supported</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>NotFoundError</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2816" onchange="updateProgress()"><label for="c2816">Default message: &quot;Resource not found&quot;</label></li>
                        <li><input type="checkbox" id="c2817" onchange="updateProgress()"><label for="c2817">statusCode: 404</label></li>
                        <li><input type="checkbox" id="c2818" onchange="updateProgress()"><label for="c2818">Custom resource name: &quot;{resource} not found&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>RateLimitError</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2819" onchange="updateProgress()"><label for="c2819">Default message: &quot;Rate limit exceeded&quot;</label></li>
                        <li><input type="checkbox" id="c2820" onchange="updateProgress()"><label for="c2820">statusCode: 429</label></li>
                        <li><input type="checkbox" id="c2821" onchange="updateProgress()"><label for="c2821">Custom message supported</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>51.2 Zod Error Formatting (formatZodError)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2822" onchange="updateProgress()"><label for="c2822">Returns error: &quot;Validation Error&quot;</label></li>
                        <li><input type="checkbox" id="c2823" onchange="updateProgress()"><label for="c2823">Returns message: &quot;Request validation failed&quot;</label></li>
                        <li><input type="checkbox" id="c2824" onchange="updateProgress()"><label for="c2824">**Single issue** → details array with 1 entry</label></li>
                        <li><input type="checkbox" id="c2825" onchange="updateProgress()"><label for="c2825">**Multiple issues** → details array with N entries</label></li>
                        <li><input type="checkbox" id="c2826" onchange="updateProgress()"><label for="c2826">**Nested paths** → &quot;address.city&quot; format</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>51.3 formatError Function</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2827" onchange="updateProgress()"><label for="c2827">**ZodError → 400** with validation details</label></li>
                        <li><input type="checkbox" id="c2828" onchange="updateProgress()"><label for="c2828">**AppError → corresponding statusCode**</label></li>
                        <li><input type="checkbox" id="c2829" onchange="updateProgress()"><label for="c2829">**Generic Error → 500** in production/test</label></li>
                        <li><input type="checkbox" id="c2830" onchange="updateProgress()"><label for="c2830">Includes requestId and timestamp</label></li>
                        <li><input type="checkbox" id="c2831" onchange="updateProgress()"><label for="c2831">**Hides sensitive details in production**</label></li>
                        <li><input type="checkbox" id="c2832" onchange="updateProgress()"><label for="c2832">Stack trace not exposed in production</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>errorResponse</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2833" onchange="updateProgress()"><label for="c2833">Creates NextResponse with status code</label></li>
                        <li><input type="checkbox" id="c2834" onchange="updateProgress()"><label for="c2834">Includes timestamp</label></li>
                        <li><input type="checkbox" id="c2835" onchange="updateProgress()"><label for="c2835">Supports details and code options</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>validationErrorResponse</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2836" onchange="updateProgress()"><label for="c2836">Creates 400 response from Zod SafeParseReturnType</label></li>
                        <li><input type="checkbox" id="c2837" onchange="updateProgress()"><label for="c2837">Code: VALIDATION_FAILED</label></li>
                        <li><input type="checkbox" id="c2838" onchange="updateProgress()"><label for="c2838">Custom message supported</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>notFoundResponse</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2839" onchange="updateProgress()"><label for="c2839">Creates 404 response</label></li>
                        <li><input type="checkbox" id="c2840" onchange="updateProgress()"><label for="c2840">Default: &quot;Resource not found&quot;</label></li>
                        <li><input type="checkbox" id="c2841" onchange="updateProgress()"><label for="c2841">Custom: &quot;{resource} not found&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>unauthorizedResponse</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2842" onchange="updateProgress()"><label for="c2842">Creates 401 response</label></li>
                        <li><input type="checkbox" id="c2843" onchange="updateProgress()"><label for="c2843">Default: &quot;Authentication required&quot;</label></li>
                        <li><input type="checkbox" id="c2844" onchange="updateProgress()"><label for="c2844">Code: AUTH_REQUIRED</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>forbiddenResponse</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2845" onchange="updateProgress()"><label for="c2845">Creates 403 response</label></li>
                        <li><input type="checkbox" id="c2846" onchange="updateProgress()"><label for="c2846">Default: &quot;Access denied&quot;</label></li>
                        <li><input type="checkbox" id="c2847" onchange="updateProgress()"><label for="c2847">Code: FORBIDDEN (or custom)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>badRequestResponse</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2848" onchange="updateProgress()"><label for="c2848">Creates 400 response</label></li>
                        <li><input type="checkbox" id="c2849" onchange="updateProgress()"><label for="c2849">Code: INVALID_REQUEST</label></li>
                        <li><input type="checkbox" id="c2850" onchange="updateProgress()"><label for="c2850">Details object supported</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>conflictResponse</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2851" onchange="updateProgress()"><label for="c2851">Creates 409 response</label></li>
                        <li><input type="checkbox" id="c2852" onchange="updateProgress()"><label for="c2852">Code: CONFLICT</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>invalidStateResponse</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2853" onchange="updateProgress()"><label for="c2853">Creates 400 response</label></li>
                        <li><input type="checkbox" id="c2854" onchange="updateProgress()"><label for="c2854">Code: INVALID_STATE</label></li>
                        <li><input type="checkbox" id="c2855" onchange="updateProgress()"><label for="c2855">allowedTransitions in details</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>successResponse</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2856" onchange="updateProgress()"><label for="c2856">Creates 200 response (default)</label></li>
                        <li><input type="checkbox" id="c2857" onchange="updateProgress()"><label for="c2857">success: true, message, data</label></li>
                        <li><input type="checkbox" id="c2858" onchange="updateProgress()"><label for="c2858">Custom status code supported</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>createdResponse</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2859" onchange="updateProgress()"><label for="c2859">Creates 201 response</label></li>
                        <li><input type="checkbox" id="c2860" onchange="updateProgress()"><label for="c2860">Data only or message + data</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>noContentResponse</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2861" onchange="updateProgress()"><label for="c2861">Creates 204 response</label></li>
                        <li><input type="checkbox" id="c2862" onchange="updateProgress()"><label for="c2862">No body</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>51.5 Error Codes</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2863" onchange="updateProgress()"><label for="c2863">AUTH_REQUIRED</label></li>
                        <li><input type="checkbox" id="c2864" onchange="updateProgress()"><label for="c2864">FORBIDDEN</label></li>
                        <li><input type="checkbox" id="c2865" onchange="updateProgress()"><label for="c2865">VALIDATION_FAILED</label></li>
                        <li><input type="checkbox" id="c2866" onchange="updateProgress()"><label for="c2866">NOT_FOUND</label></li>
                        <li><input type="checkbox" id="c2867" onchange="updateProgress()"><label for="c2867">RATE_LIMITED</label></li>
                        <li><input type="checkbox" id="c2868" onchange="updateProgress()"><label for="c2868">INTERNAL_ERROR</label></li>
                        <li><input type="checkbox" id="c2869" onchange="updateProgress()"><label for="c2869">CONFLICT</label></li>
                        <li><input type="checkbox" id="c2870" onchange="updateProgress()"><label for="c2870">INVALID_STATE</label></li>
                        <li><input type="checkbox" id="c2871" onchange="updateProgress()"><label for="c2871">ADMIN_REQUIRED</label></li>
                        <li><input type="checkbox" id="c2872" onchange="updateProgress()"><label for="c2872">INSUFFICIENT_ROLE</label></li>
                        <li><input type="checkbox" id="c2873" onchange="updateProgress()"><label for="c2873">PERMISSION_DENIED</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-52" data-section="52">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 52</span>
                    <h3>OAUTH UTILITIES</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/oauth/utils.test.ts src/lib/oauth/utils.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>52.1 Encryption/Decryption (AES-256-GCM)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2874" onchange="updateProgress()"><label for="c2874">encrypt + decrypt round-trip returns original</label></li>
                        <li><input type="checkbox" id="c2875" onchange="updateProgress()"><label for="c2875">**Empty string → empty string**</label></li>
                        <li><input type="checkbox" id="c2876" onchange="updateProgress()"><label for="c2876">**Invalid encrypted format → empty string**</label></li>
                        <li><input type="checkbox" id="c2877" onchange="updateProgress()"><label for="c2877">**Different ciphertext for same plaintext** (random IV)</label></li>
                        <li><input type="checkbox" id="c2878" onchange="updateProgress()"><label for="c2878">Special characters and unicode supported</label></li>
                        <li><input type="checkbox" id="c2879" onchange="updateProgress()"><label for="c2879">Long strings (10000+ chars) supported</label></li>
                        <li><input type="checkbox" id="c2880" onchange="updateProgress()"><label for="c2880">Format: iv:authTag:ciphertext</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>52.2 OAuth State Management (encryptState/decryptState)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2881" onchange="updateProgress()"><label for="c2881">State includes: subdomain, orgId, provider</label></li>
                        <li><input type="checkbox" id="c2882" onchange="updateProgress()"><label for="c2882">State includes: timestamp, nonce (CSRF)</label></li>
                        <li><input type="checkbox" id="c2883" onchange="updateProgress()"><label for="c2883">inviteToken optional</label></li>
                        <li><input type="checkbox" id="c2884" onchange="updateProgress()"><label for="c2884">**Null orgId supported**</label></li>
                        <li><input type="checkbox" id="c2885" onchange="updateProgress()"><label for="c2885">**Expired state (&gt;10 minutes) → null**</label></li>
                        <li><input type="checkbox" id="c2886" onchange="updateProgress()"><label for="c2886">**Tampered state → null**</label></li>
                        <li><input type="checkbox" id="c2887" onchange="updateProgress()"><label for="c2887">**Empty/invalid input → null**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>52.3 Security Validation (validateOAuthSecurity)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2888" onchange="updateProgress()"><label for="c2888">**New users → allowed: true**</label></li>
                        <li><input type="checkbox" id="c2889" onchange="updateProgress()"><label for="c2889">**Deactivated users (isDeleted) → error: &quot;AccountDeactivated&quot;**</label></li>
                        <li><input type="checkbox" id="c2890" onchange="updateProgress()"><label for="c2890">**Login disabled (canLogin: false) → error: &quot;LoginDisabled&quot;**</label></li>
                        <li><input type="checkbox" id="c2891" onchange="updateProgress()"><label for="c2891">**Locked accounts → error: &quot;AccountLocked&quot;** with lockedUntil</label></li>
                        <li><input type="checkbox" id="c2892" onchange="updateProgress()"><label for="c2892">**Super admins → always allowed**</label></li>
                        <li><input type="checkbox" id="c2893" onchange="updateProgress()"><label for="c2893">**Auth method not in allowedAuthMethods → error: &quot;AuthMethodNotAllowed&quot;**</label></li>
                        <li><input type="checkbox" id="c2894" onchange="updateProgress()"><label for="c2894">**Auth method in allowedAuthMethods → allowed**</label></li>
                        <li><input type="checkbox" id="c2895" onchange="updateProgress()"><label for="c2895">**No auth restrictions (empty array) → allowed**</label></li>
                        <li><input type="checkbox" id="c2896" onchange="updateProgress()"><label for="c2896">**Email normalized to lowercase**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>52.4 User Upsert (upsertOAuthUser)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2897" onchange="updateProgress()"><label for="c2897">**New user → creates User record**</label></li>
                        <li><input type="checkbox" id="c2898" onchange="updateProgress()"><label for="c2898">**Existing user → updates User record**</label></li>
                        <li><input type="checkbox" id="c2899" onchange="updateProgress()"><label for="c2899">**Org specified + no TeamMember → creates TeamMember**</label></li>
                        <li><input type="checkbox" id="c2900" onchange="updateProgress()"><label for="c2900">**Org specified + TeamMember exists → updates TeamMember**</label></li>
                        <li><input type="checkbox" id="c2901" onchange="updateProgress()"><label for="c2901">New TeamMember role: MEMBER, isOwner: false</label></li>
                        <li><input type="checkbox" id="c2902" onchange="updateProgress()"><label for="c2902">**Clears failed login attempts on success**</label></li>
                        <li><input type="checkbox" id="c2903" onchange="updateProgress()"><label for="c2903">**Email normalized to lowercase and trimmed**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>52.5 Session Token Creation (createSessionToken)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2904" onchange="updateProgress()"><label for="c2904">Creates JWT with user info</label></li>
                        <li><input type="checkbox" id="c2905" onchange="updateProgress()"><label for="c2905">Includes: sub, email, name, organizationId, orgSlug, orgRole, tier</label></li>
                        <li><input type="checkbox" id="c2906" onchange="updateProgress()"><label for="c2906">**Org not found → uses first membership**</label></li>
                        <li><input type="checkbox" id="c2907" onchange="updateProgress()"><label for="c2907">**No memberships → token without org data**</label></li>
                        <li><input type="checkbox" id="c2908" onchange="updateProgress()"><label for="c2908">**Non-existent user → throws &quot;User not found&quot;**</label></li>
                        <li><input type="checkbox" id="c2909" onchange="updateProgress()"><label for="c2909">maxAge: 30 days</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>52.6 URL Utilities</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2910" onchange="updateProgress()"><label for="c2910">**getBaseUrl:** NEXTAUTH_URL → VERCEL_URL → localhost:3000</label></li>
                        <li><input type="checkbox" id="c2911" onchange="updateProgress()"><label for="c2911">**getAppDomain:** NEXT_PUBLIC_APP_DOMAIN → localhost:3000</label></li>
                        <li><input type="checkbox" id="c2912" onchange="updateProgress()"><label for="c2912">**getTenantUrl:** builds https://{subdomain}.{domain}{path}</label></li>
                        <li><input type="checkbox" id="c2913" onchange="updateProgress()"><label for="c2913">Localhost uses http://</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-53" data-section="53">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 53</span>
                    <h3>HR UTILITIES</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/hr-utils.test.ts src/lib/hr-utils.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>53.1 Constants</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2914" onchange="updateProgress()"><label for="c2914">**EXPIRY_WARNING_DAYS = 30**</label></li>
                        <li><input type="checkbox" id="c2915" onchange="updateProgress()"><label for="c2915">**PROFILE_COMPLETION_THRESHOLD = 80**</label></li>
                        <li><input type="checkbox" id="c2916" onchange="updateProgress()"><label for="c2916">HR_REQUIRED_FIELDS includes: dateOfBirth, qidNumber, passportNumber, iban</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>53.2 getExpiryStatus</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2917" onchange="updateProgress()"><label for="c2917">**Null date → null**</label></li>
                        <li><input type="checkbox" id="c2918" onchange="updateProgress()"><label for="c2918">**Undefined date → null**</label></li>
                        <li><input type="checkbox" id="c2919" onchange="updateProgress()"><label for="c2919">**Past dates → &quot;expired&quot;**</label></li>
                        <li><input type="checkbox" id="c2920" onchange="updateProgress()"><label for="c2920">**Within 30 days → &quot;expiring&quot;**</label></li>
                        <li><input type="checkbox" id="c2921" onchange="updateProgress()"><label for="c2921">**Exactly 30 days → &quot;expiring&quot;**</label></li>
                        <li><input type="checkbox" id="c2922" onchange="updateProgress()"><label for="c2922">**More than 30 days → &quot;valid&quot;**</label></li>
                        <li><input type="checkbox" id="c2923" onchange="updateProgress()"><label for="c2923">**String dates (ISO) → parsed correctly**</label></li>
                        <li><input type="checkbox" id="c2924" onchange="updateProgress()"><label for="c2924">**Custom warning days supported**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>53.3 getExpiryInfo</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2925" onchange="updateProgress()"><label for="c2925">Returns: { status, daysRemaining }</label></li>
                        <li><input type="checkbox" id="c2926" onchange="updateProgress()"><label for="c2926">**Null date → { status: null, daysRemaining: null }**</label></li>
                        <li><input type="checkbox" id="c2927" onchange="updateProgress()"><label for="c2927">Future date → positive daysRemaining</label></li>
                        <li><input type="checkbox" id="c2928" onchange="updateProgress()"><label for="c2928">Past date → negative daysRemaining</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>53.4 getDaysRemaining</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2929" onchange="updateProgress()"><label for="c2929">**Null → null**</label></li>
                        <li><input type="checkbox" id="c2930" onchange="updateProgress()"><label for="c2930">**Undefined → null**</label></li>
                        <li><input type="checkbox" id="c2931" onchange="updateProgress()"><label for="c2931">Future date → positive number</label></li>
                        <li><input type="checkbox" id="c2932" onchange="updateProgress()"><label for="c2932">Past date → negative number</label></li>
                        <li><input type="checkbox" id="c2933" onchange="updateProgress()"><label for="c2933">Today → 0 or 1</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>53.5 getOverallExpiryStatus</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2934" onchange="updateProgress()"><label for="c2934">**Empty array → null**</label></li>
                        <li><input type="checkbox" id="c2935" onchange="updateProgress()"><label for="c2935">**Array of nulls → null**</label></li>
                        <li><input type="checkbox" id="c2936" onchange="updateProgress()"><label for="c2936">**Any &quot;expired&quot; → returns &quot;expired&quot;**</label></li>
                        <li><input type="checkbox" id="c2937" onchange="updateProgress()"><label for="c2937">**Any &quot;expiring&quot; (no expired) → returns &quot;expiring&quot;**</label></li>
                        <li><input type="checkbox" id="c2938" onchange="updateProgress()"><label for="c2938">**All &quot;valid&quot; → returns &quot;valid&quot;**</label></li>
                        <li><input type="checkbox" id="c2939" onchange="updateProgress()"><label for="c2939">**Ignores null values**</label></li>
                        <li><input type="checkbox" id="c2940" onchange="updateProgress()"><label for="c2940">**Priority:** expired &gt; expiring &gt; valid</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>53.6 calculateProfileCompletion</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2941" onchange="updateProgress()"><label for="c2941">**Null profile → 0%, isComplete: false**</label></li>
                        <li><input type="checkbox" id="c2942" onchange="updateProgress()"><label for="c2942">**Undefined profile → 0%**</label></li>
                        <li><input type="checkbox" id="c2943" onchange="updateProgress()"><label for="c2943">**Empty profile → 0%**</label></li>
                        <li><input type="checkbox" id="c2944" onchange="updateProgress()"><label for="c2944">Partial completion calculated correctly</label></li>
                        <li><input type="checkbox" id="c2945" onchange="updateProgress()"><label for="c2945">**&gt;= 80% → isComplete: true**</label></li>
                        <li><input type="checkbox" id="c2946" onchange="updateProgress()"><label for="c2946">Returns: percentage, isComplete, filledFields, totalFields, missingFields</label></li>
                        <li><input type="checkbox" id="c2947" onchange="updateProgress()"><label for="c2947">**Empty strings not counted as filled**</label></li>
                        <li><input type="checkbox" id="c2948" onchange="updateProgress()"><label for="c2948">**Null values not counted as filled**</label></li>
                        <li><input type="checkbox" id="c2949" onchange="updateProgress()"><label for="c2949">Custom required fields supported</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>53.7 parseJsonArray</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2950" onchange="updateProgress()"><label for="c2950">**Null → []**</label></li>
                        <li><input type="checkbox" id="c2951" onchange="updateProgress()"><label for="c2951">**Undefined → []**</label></li>
                        <li><input type="checkbox" id="c2952" onchange="updateProgress()"><label for="c2952">**Empty string → []**</label></li>
                        <li><input type="checkbox" id="c2953" onchange="updateProgress()"><label for="c2953">**Already array → returned as-is**</label></li>
                        <li><input type="checkbox" id="c2954" onchange="updateProgress()"><label for="c2954">**Valid JSON array string → parsed array**</label></li>
                        <li><input type="checkbox" id="c2955" onchange="updateProgress()"><label for="c2955">**Invalid JSON → []**</label></li>
                        <li><input type="checkbox" id="c2956" onchange="updateProgress()"><label for="c2956">**JSON object (not array) → []**</label></li>
                        <li><input type="checkbox" id="c2957" onchange="updateProgress()"><label for="c2957">Numbers and nested arrays supported</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>53.8 formatDateForPicker</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2958" onchange="updateProgress()"><label for="c2958">**Null → &quot;&quot;**</label></li>
                        <li><input type="checkbox" id="c2959" onchange="updateProgress()"><label for="c2959">**Undefined → &quot;&quot;**</label></li>
                        <li><input type="checkbox" id="c2960" onchange="updateProgress()"><label for="c2960">Date object → &quot;YYYY-MM-DD&quot; format</label></li>
                        <li><input type="checkbox" id="c2961" onchange="updateProgress()"><label for="c2961">String date → &quot;YYYY-MM-DD&quot; format</label></li>
                        <li><input type="checkbox" id="c2962" onchange="updateProgress()"><label for="c2962">**Invalid date → &quot;&quot;**</label></li>
                        <li><input type="checkbox" id="c2963" onchange="updateProgress()"><label for="c2963">Single-digit months/days zero-padded</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>53.9 calculateTenure</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2964" onchange="updateProgress()"><label for="c2964">**Null → &quot;-&quot;**</label></li>
                        <li><input type="checkbox" id="c2965" onchange="updateProgress()"><label for="c2965">**Undefined → &quot;-&quot;**</label></li>
                        <li><input type="checkbox" id="c2966" onchange="updateProgress()"><label for="c2966">**Today → &quot;Today&quot;**</label></li>
                        <li><input type="checkbox" id="c2967" onchange="updateProgress()"><label for="c2967">**Future dates → &quot;-&quot;**</label></li>
                        <li><input type="checkbox" id="c2968" onchange="updateProgress()"><label for="c2968">Recent join → &quot;Xd&quot; (days)</label></li>
                        <li><input type="checkbox" id="c2969" onchange="updateProgress()"><label for="c2969">Months ago → &quot;Xm&quot; (months)</label></li>
                        <li><input type="checkbox" id="c2970" onchange="updateProgress()"><label for="c2970">Years ago → &quot;Xy Xm&quot; (years and months)</label></li>
                        <li><input type="checkbox" id="c2971" onchange="updateProgress()"><label for="c2971">String date input supported</label></li>
                        <li><input type="checkbox" id="c2972" onchange="updateProgress()"><label for="c2972">Very old dates (20+ years) handled</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>53.10 getRoleBadgeVariant</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2973" onchange="updateProgress()"><label for="c2973">ADMIN → &quot;destructive&quot;</label></li>
                        <li><input type="checkbox" id="c2974" onchange="updateProgress()"><label for="c2974">EMPLOYEE → &quot;default&quot;</label></li>
                        <li><input type="checkbox" id="c2975" onchange="updateProgress()"><label for="c2975">Unknown role → &quot;secondary&quot;</label></li>
                        <li><input type="checkbox" id="c2976" onchange="updateProgress()"><label for="c2976">Empty string → &quot;secondary&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>53.11 maskSensitiveData</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2977" onchange="updateProgress()"><label for="c2977">**Null → &quot;-&quot;**</label></li>
                        <li><input type="checkbox" id="c2978" onchange="updateProgress()"><label for="c2978">**Undefined → &quot;-&quot;**</label></li>
                        <li><input type="checkbox" id="c2979" onchange="updateProgress()"><label for="c2979">**Empty string → &quot;-&quot;**</label></li>
                        <li><input type="checkbox" id="c2980" onchange="updateProgress()"><label for="c2980">**Default:** shows last 4 characters</label></li>
                        <li><input type="checkbox" id="c2981" onchange="updateProgress()"><label for="c2981">&quot;1234567890&quot; → &quot;******7890&quot;</label></li>
                        <li><input type="checkbox" id="c2982" onchange="updateProgress()"><label for="c2982">**Short strings (&lt; 4) → fully masked**</label></li>
                        <li><input type="checkbox" id="c2983" onchange="updateProgress()"><label for="c2983">**Exactly 4 chars → fully masked**</label></li>
                        <li><input type="checkbox" id="c2984" onchange="updateProgress()"><label for="c2984">Custom showLast parameter</label></li>
                        <li><input type="checkbox" id="c2985" onchange="updateProgress()"><label for="c2985">Custom mask character</label></li>
                        <li><input type="checkbox" id="c2986" onchange="updateProgress()"><label for="c2986">Works with IBAN and QID numbers</label></li>
                        <li><input type="checkbox" id="c2987" onchange="updateProgress()"><label for="c2987">Unicode strings supported</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-54" data-section="54">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 54</span>
                    <h3>ASSET LIFECYCLE MANAGEMENT</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/assets/asset-lifecycle.test.ts src/features/assets/lib/asset-lifecycle.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Basic Behavior</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2988" onchange="updateProgress()"><label for="c2988">**Asset not found → throws error** &quot;Asset not found&quot;</label></li>
                        <li><input type="checkbox" id="c2989" onchange="updateProgress()"><label for="c2989">**Unassigned asset → returns empty array** []</label></li>
                        <li><input type="checkbox" id="c2990" onchange="updateProgress()"><label for="c2990">**Single assignment → returns one period**</label></li>
                        <li><input type="checkbox" id="c2991" onchange="updateProgress()"><label for="c2991">**Multiple assignments → returns multiple periods**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Period Structure</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2992" onchange="updateProgress()"><label for="c2992">Each period has: userId, userName, userEmail</label></li>
                        <li><input type="checkbox" id="c2993" onchange="updateProgress()"><label for="c2993">Each period has: startDate (Date object)</label></li>
                        <li><input type="checkbox" id="c2994" onchange="updateProgress()"><label for="c2994">Each period has: endDate (Date or null for current)</label></li>
                        <li><input type="checkbox" id="c2995" onchange="updateProgress()"><label for="c2995">**Currently assigned → endDate is null**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Period Deduplication</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c2996" onchange="updateProgress()"><label for="c2996">**Same user, adjacent dates → deduplicated into single period**</label></li>
                        <li><input type="checkbox" id="c2997" onchange="updateProgress()"><label for="c2997">**Different users → separate periods**</label></li>
                        <li><input type="checkbox" id="c2998" onchange="updateProgress()"><label for="c2998">Uses earliest startDate when deduplicating</label></li>
                        <li><input type="checkbox" id="c2999" onchange="updateProgress()"><label for="c2999">Uses latest endDate when deduplicating</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3000" onchange="updateProgress()"><label for="c3000">**Asset assigned before history tracking → uses createdAt as startDate**</label></li>
                        <li><input type="checkbox" id="c3001" onchange="updateProgress()"><label for="c3001">**No history records → falls back to current assignment**</label></li>
                        <li><input type="checkbox" id="c3002" onchange="updateProgress()"><label for="c3002">**Rejects duplicate periods** based on user + dates</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Calculation Logic</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3003" onchange="updateProgress()"><label for="c3003">**Never assigned → 0%** utilization</label></li>
                        <li><input type="checkbox" id="c3004" onchange="updateProgress()"><label for="c3004">**Always assigned (since purchase) → 100%** utilization</label></li>
                        <li><input type="checkbox" id="c3005" onchange="updateProgress()"><label for="c3005">**Partial utilization** → calculated as (assigned days / total days) × 100</label></li>
                        <li><input type="checkbox" id="c3006" onchange="updateProgress()"><label for="c3006">**Rounds to 2 decimal places**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Date Handling</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3007" onchange="updateProgress()"><label for="c3007">Uses purchaseDate when available</label></li>
                        <li><input type="checkbox" id="c3008" onchange="updateProgress()"><label for="c3008">**Falls back to createdAt** when purchaseDate is null</label></li>
                        <li><input type="checkbox" id="c3009" onchange="updateProgress()"><label for="c3009">Calculates days between purchase/creation and now</label></li>
                        <li><input type="checkbox" id="c3010" onchange="updateProgress()"><label for="c3010">Sums total assigned days from all periods</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Return Value</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3011" onchange="updateProgress()"><label for="c3011">Returns percentage as number (0-100)</label></li>
                        <li><input type="checkbox" id="c3012" onchange="updateProgress()"><label for="c3012">Precision: 2 decimal places</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Behavior</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3013" onchange="updateProgress()"><label for="c3013">**Member with no assets → returns empty array**</label></li>
                        <li><input type="checkbox" id="c3014" onchange="updateProgress()"><label for="c3014">**Currently assigned assets listed first**</label></li>
                        <li><input type="checkbox" id="c3015" onchange="updateProgress()"><label for="c3015">**Past assignments included**</label></li>
                        <li><input type="checkbox" id="c3016" onchange="updateProgress()"><label for="c3016">Ordered by assignment date (current first)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Asset Info Returned</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3017" onchange="updateProgress()"><label for="c3017">Asset ID and assetTag</label></li>
                        <li><input type="checkbox" id="c3018" onchange="updateProgress()"><label for="c3018">Asset model, type, brand</label></li>
                        <li><input type="checkbox" id="c3019" onchange="updateProgress()"><label for="c3019">Assignment period (startDate, endDate)</label></li>
                        <li><input type="checkbox" id="c3020" onchange="updateProgress()"><label for="c3020">isCurrent flag for active assignments</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-55" data-section="55">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 55</span>
                    <h3>NOTIFICATION SERVICE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/notifications/notification-service.test.ts src/lib/domains/system/notifications/notification-service.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Success Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3021" onchange="updateProgress()"><label for="c3021">**Valid notification → returns true**</label></li>
                        <li><input type="checkbox" id="c3022" onchange="updateProgress()"><label for="c3022">Creates notification record in database</label></li>
                        <li><input type="checkbox" id="c3023" onchange="updateProgress()"><label for="c3023">Notification linked to user and tenant</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Failure Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3024" onchange="updateProgress()"><label for="c3024">**Missing tenantId → returns false** (multi-tenancy violation)</label></li>
                        <li><input type="checkbox" id="c3025" onchange="updateProgress()"><label for="c3025">**Logs &quot;multi-tenancy violation&quot;** when tenantId missing</label></li>
                        <li><input type="checkbox" id="c3026" onchange="updateProgress()"><label for="c3026">**Database error → returns false** (non-blocking)</label></li>
                        <li><input type="checkbox" id="c3027" onchange="updateProgress()"><label for="c3027">**Logs error on database failure**</label></li>
                        <li><input type="checkbox" id="c3028" onchange="updateProgress()"><label for="c3028">Does not throw exceptions (fire-and-forget pattern)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Multi-Tenancy Enforcement</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3029" onchange="updateProgress()"><label for="c3029">tenantId required for all notifications</label></li>
                        <li><input type="checkbox" id="c3030" onchange="updateProgress()"><label for="c3030">Notifications scoped to organization</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Behavior</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3031" onchange="updateProgress()"><label for="c3031">**Returns count of created notifications**</label></li>
                        <li><input type="checkbox" id="c3032" onchange="updateProgress()"><label for="c3032">**Missing tenantId → returns 0**</label></li>
                        <li><input type="checkbox" id="c3033" onchange="updateProgress()"><label for="c3033">**Empty array → returns 0** (handles gracefully)</label></li>
                        <li><input type="checkbox" id="c3034" onchange="updateProgress()"><label for="c3034">Creates all notifications in batch</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3035" onchange="updateProgress()"><label for="c3035">Partial failures tracked</label></li>
                        <li><input type="checkbox" id="c3036" onchange="updateProgress()"><label for="c3036">Returns successful count on mixed results</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Leave Templates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3037" onchange="updateProgress()"><label for="c3037">**leaveSubmitted:** &quot;Leave Request Submitted&quot;</label></li>
                        <li><input type="checkbox" id="c3038" onchange="updateProgress()"><label for="c3038">Includes day count (singular: &quot;1 day&quot;, plural: &quot;X days&quot;)</label></li>
                        <li><input type="checkbox" id="c3039" onchange="updateProgress()"><label for="c3039">**leaveApproved:** &quot;Leave Request Approved&quot;</label></li>
                        <li><input type="checkbox" id="c3040" onchange="updateProgress()"><label for="c3040">**leaveRejected:** &quot;Leave Request Rejected&quot; with reason</label></li>
                        <li><input type="checkbox" id="c3041" onchange="updateProgress()"><label for="c3041">**leaveCancelled:** &quot;Leave Request Cancelled&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Asset Templates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3042" onchange="updateProgress()"><label for="c3042">**assetAssigned:** &quot;Asset Assigned&quot; with assetTag and model</label></li>
                        <li><input type="checkbox" id="c3043" onchange="updateProgress()"><label for="c3043">**assetUnassigned:** &quot;Asset Unassigned&quot;</label></li>
                        <li><input type="checkbox" id="c3044" onchange="updateProgress()"><label for="c3044">**assetRequestSubmitted:** &quot;Asset Request Submitted&quot;</label></li>
                        <li><input type="checkbox" id="c3045" onchange="updateProgress()"><label for="c3045">**assetAssignmentPending:** &quot;Asset Assignment Pending&quot; for user acceptance</label></li>
                        <li><input type="checkbox" id="c3046" onchange="updateProgress()"><label for="c3046">**assetAssignmentAccepted:** &quot;Asset Assignment Accepted&quot;</label></li>
                        <li><input type="checkbox" id="c3047" onchange="updateProgress()"><label for="c3047">**assetAssignmentDeclined:** &quot;Asset Assignment Declined&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Purchase Request Templates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3048" onchange="updateProgress()"><label for="c3048">**purchaseRequestSubmitted:** &quot;Purchase Request Submitted&quot;</label></li>
                        <li><input type="checkbox" id="c3049" onchange="updateProgress()"><label for="c3049">**purchaseRequestApproved:** &quot;Purchase Request Approved&quot;</label></li>
                        <li><input type="checkbox" id="c3050" onchange="updateProgress()"><label for="c3050">**purchaseRequestRejected:** &quot;Purchase Request Rejected&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Document Templates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3051" onchange="updateProgress()"><label for="c3051">**documentExpiryWarning:** &quot;Document Expiring Soon&quot;</label></li>
                        <li><input type="checkbox" id="c3052" onchange="updateProgress()"><label for="c3052">Handles singular day: &quot;expires in 1 day&quot;</label></li>
                        <li><input type="checkbox" id="c3053" onchange="updateProgress()"><label for="c3053">Handles plural days: &quot;expires in X days&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>General Template</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3054" onchange="updateProgress()"><label for="c3054">**general:** Custom title and message</label></li>
                        <li><input type="checkbox" id="c3055" onchange="updateProgress()"><label for="c3055">Supports any notification type</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-56" data-section="56">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 56</span>
                    <h3>SUBSCRIPTION LIFECYCLE</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/subscriptions/subscription-lifecycle.test.ts src/features/subscriptions/lib/subscription-lifecycle.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Validation Errors</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3056" onchange="updateProgress()"><label for="c3056">**Subscription not found → throws** &quot;Subscription not found&quot;</label></li>
                        <li><input type="checkbox" id="c3057" onchange="updateProgress()"><label for="c3057">**Already active → throws** &quot;already active&quot;</label></li>
                        <li><input type="checkbox" id="c3058" onchange="updateProgress()"><label for="c3058">**Can only reactivate CANCELLED subscriptions**</label></li>
                        <li><input type="checkbox" id="c3059" onchange="updateProgress()"><label for="c3059">PAUSED/EXPIRED → throws appropriate error</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Success Case</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3060" onchange="updateProgress()"><label for="c3060">Changes status to ACTIVE</label></li>
                        <li><input type="checkbox" id="c3061" onchange="updateProgress()"><label for="c3061">Updates renewal date</label></li>
                        <li><input type="checkbox" id="c3062" onchange="updateProgress()"><label for="c3062">Creates history entry</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Validation Errors</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3063" onchange="updateProgress()"><label for="c3063">**Subscription not found → throws** &quot;not found&quot;</label></li>
                        <li><input type="checkbox" id="c3064" onchange="updateProgress()"><label for="c3064">**Already cancelled → throws** &quot;already cancelled&quot;</label></li>
                        <li><input type="checkbox" id="c3065" onchange="updateProgress()"><label for="c3065">**Can only cancel ACTIVE subscriptions**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Success Case</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3066" onchange="updateProgress()"><label for="c3066">Changes status to CANCELLED</label></li>
                        <li><input type="checkbox" id="c3067" onchange="updateProgress()"><label for="c3067">**Creates history entry** for cancellation</label></li>
                        <li><input type="checkbox" id="c3068" onchange="updateProgress()"><label for="c3068">Records cancellation timestamp</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Single Period</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3069" onchange="updateProgress()"><label for="c3069">**Always active → single period** with purchaseDate to now</label></li>
                        <li><input type="checkbox" id="c3070" onchange="updateProgress()"><label for="c3070">Period has: startDate, endDate</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Multiple Periods</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3071" onchange="updateProgress()"><label for="c3071">**Cancelled and reactivated → multiple periods**</label></li>
                        <li><input type="checkbox" id="c3072" onchange="updateProgress()"><label for="c3072">Each period represents active time span</label></li>
                        <li><input type="checkbox" id="c3073" onchange="updateProgress()"><label for="c3073">Gaps represent cancelled periods</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Date Handling</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3074" onchange="updateProgress()"><label for="c3074">Uses purchaseDate when available</label></li>
                        <li><input type="checkbox" id="c3075" onchange="updateProgress()"><label for="c3075">**Falls back to createdAt** when purchaseDate is null</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Billing Cycle Handling</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3076" onchange="updateProgress()"><label for="c3076">**ONE_TIME → charged once** regardless of duration</label></li>
                        <li><input type="checkbox" id="c3077" onchange="updateProgress()"><label for="c3077">**ONE_TIME cost equals costPerCycle**</label></li>
                        <li><input type="checkbox" id="c3078" onchange="updateProgress()"><label for="c3078">**MONTHLY → charged per month**</label></li>
                        <li><input type="checkbox" id="c3079" onchange="updateProgress()"><label for="c3079">**YEARLY → charged per year**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3080" onchange="updateProgress()"><label for="c3080">**Null costPerCycle → cost is 0**</label></li>
                        <li><input type="checkbox" id="c3081" onchange="updateProgress()"><label for="c3081">Cost based on billing cycles passed</label></li>
                        <li><input type="checkbox" id="c3082" onchange="updateProgress()"><label for="c3082">Proper calculation for renewal dates</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Date Handling</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3083" onchange="updateProgress()"><label for="c3083">Uses purchaseDate when available</label></li>
                        <li><input type="checkbox" id="c3084" onchange="updateProgress()"><label for="c3084">**Falls back to createdAt** when purchaseDate is null</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Behavior</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3085" onchange="updateProgress()"><label for="c3085">**Member with no subscriptions → returns empty array**</label></li>
                        <li><input type="checkbox" id="c3086" onchange="updateProgress()"><label for="c3086">Returns all subscriptions assigned to member</label></li>
                        <li><input type="checkbox" id="c3087" onchange="updateProgress()"><label for="c3087">Includes active and past subscriptions</label></li>
                        <li><input type="checkbox" id="c3088" onchange="updateProgress()"><label for="c3088">Ordered by assignment date</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-57" data-section="57">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 57</span>
                    <h3>PRISMA TENANT ISOLATION</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/core/prisma-tenant.test.ts src/lib/core/prisma-tenant.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Headers</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3089" onchange="updateProgress()"><label for="c3089">**x-tenant-id missing → returns null**</label></li>
                        <li><input type="checkbox" id="c3090" onchange="updateProgress()"><label for="c3090">**x-user-id missing → returns null**</label></li>
                        <li><input type="checkbox" id="c3091" onchange="updateProgress()"><label for="c3091">**Both present → parses successfully**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Headers</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3092" onchange="updateProgress()"><label for="c3092">x-user-role (parsed if present)</label></li>
                        <li><input type="checkbox" id="c3093" onchange="updateProgress()"><label for="c3093">x-org-role (parsed if present)</label></li>
                        <li><input type="checkbox" id="c3094" onchange="updateProgress()"><label for="c3094">x-subscription-tier (parsed if present)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3095" onchange="updateProgress()"><label for="c3095">**Empty string headers → treated as missing** → returns null</label></li>
                        <li><input type="checkbox" id="c3096" onchange="updateProgress()"><label for="c3096">**Preserves special characters** in header values</label></li>
                        <li><input type="checkbox" id="c3097" onchange="updateProgress()"><label for="c3097">**Whitespace handled** properly</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3098" onchange="updateProgress()"><label for="c3098">**Empty tenantId → throws error** &quot;Tenant context required for database operations&quot;</label></li>
                        <li><input type="checkbox" id="c3099" onchange="updateProgress()"><label for="c3099">**Valid tenantId → returns Prisma client**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Tenant Scoping</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3100" onchange="updateProgress()"><label for="c3100">All queries automatically filtered by tenantId</label></li>
                        <li><input type="checkbox" id="c3101" onchange="updateProgress()"><label for="c3101">All creates automatically add tenantId</label></li>
                        <li><input type="checkbox" id="c3102" onchange="updateProgress()"><label for="c3102">Prevents cross-tenant data access</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Behavior</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3103" onchange="updateProgress()"><label for="c3103">**Missing context → throws** &quot;Tenant context not found in request headers&quot;</label></li>
                        <li><input type="checkbox" id="c3104" onchange="updateProgress()"><label for="c3104">**Valid headers → returns tenant-scoped client**</label></li>
                        <li><input type="checkbox" id="c3105" onchange="updateProgress()"><label for="c3105">Combines header parsing and client creation</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Error Message Safety</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3106" onchange="updateProgress()"><label for="c3106">**Error messages don't contain &quot;prisma&quot;** (no DB info leak)</label></li>
                        <li><input type="checkbox" id="c3107" onchange="updateProgress()"><label for="c3107">**Error messages don't contain &quot;database&quot;**</label></li>
                        <li><input type="checkbox" id="c3108" onchange="updateProgress()"><label for="c3108">**Error messages don't contain &quot;sql&quot;**</label></li>
                        <li><input type="checkbox" id="c3109" onchange="updateProgress()"><label for="c3109">Generic error messages for security</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>SQL Injection Prevention</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3110" onchange="updateProgress()"><label for="c3110">**SQL injection in tenant ID → handled safely**</label></li>
                        <li><input type="checkbox" id="c3111" onchange="updateProgress()"><label for="c3111">Prisma parameterization prevents injection</label></li>
                        <li><input type="checkbox" id="c3112" onchange="updateProgress()"><label for="c3112">Special characters in headers don't cause issues</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>OrgRole Parsing</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3113" onchange="updateProgress()"><label for="c3113">OWNER recognized</label></li>
                        <li><input type="checkbox" id="c3114" onchange="updateProgress()"><label for="c3114">ADMIN recognized</label></li>
                        <li><input type="checkbox" id="c3115" onchange="updateProgress()"><label for="c3115">MANAGER recognized</label></li>
                        <li><input type="checkbox" id="c3116" onchange="updateProgress()"><label for="c3116">MEMBER recognized</label></li>
                        <li><input type="checkbox" id="c3117" onchange="updateProgress()"><label for="c3117">Invalid role → default handling</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>SubscriptionTier Parsing</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3118" onchange="updateProgress()"><label for="c3118">FREE tier recognized</label></li>
                        <li><input type="checkbox" id="c3119" onchange="updateProgress()"><label for="c3119">PLUS tier recognized</label></li>
                        <li><input type="checkbox" id="c3120" onchange="updateProgress()"><label for="c3120">Invalid tier → default handling</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-58" data-section="58">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 58</span>
                    <h3>PAYROLL PREVIEW CALCULATIONS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/payroll/preview.test.ts src/features/payroll/lib/preview.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>58.1 Empty State Handling</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3121" onchange="updateProgress()"><label for="c3121">**No salary structures → empty preview**</label></li>
                        <li><input type="checkbox" id="c3122" onchange="updateProgress()"><label for="c3122">Returns: employees: [], totalEmployees: 0</label></li>
                        <li><input type="checkbox" id="c3123" onchange="updateProgress()"><label for="c3123">Returns: totalGross: 0, totalNet: 0, totalDeductions: 0</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>58.2 Gross Salary Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3124" onchange="updateProgress()"><label for="c3124">Includes: basicSalary + housingAllowance</label></li>
                        <li><input type="checkbox" id="c3125" onchange="updateProgress()"><label for="c3125">Includes: transportAllowance + foodAllowance</label></li>
                        <li><input type="checkbox" id="c3126" onchange="updateProgress()"><label for="c3126">Includes: phoneAllowance + otherAllowances</label></li>
                        <li><input type="checkbox" id="c3127" onchange="updateProgress()"><label for="c3127">All allowances summed correctly</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>58.3 Net Salary (No Deductions)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3128" onchange="updateProgress()"><label for="c3128">**Net equals gross when no deductions**</label></li>
                        <li><input type="checkbox" id="c3129" onchange="updateProgress()"><label for="c3129">totalDeductions: 0</label></li>
                        <li><input type="checkbox" id="c3130" onchange="updateProgress()"><label for="c3130">loanDeductions: empty array</label></li>
                        <li><input type="checkbox" id="c3131" onchange="updateProgress()"><label for="c3131">leaveDeductions: empty array</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>58.4 Employee Information</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3132" onchange="updateProgress()"><label for="c3132">Includes: memberId, memberName, employeeCode</label></li>
                        <li><input type="checkbox" id="c3133" onchange="updateProgress()"><label for="c3133">Includes: designation</label></li>
                        <li><input type="checkbox" id="c3134" onchange="updateProgress()"><label for="c3134">**Null name → &quot;Unknown&quot;**</label></li>
                        <li><input type="checkbox" id="c3135" onchange="updateProgress()"><label for="c3135">**No HR profile → employeeCode: null, designation: null**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>58.5 Loan Deductions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3136" onchange="updateProgress()"><label for="c3136">**Active loans deducted from salary**</label></li>
                        <li><input type="checkbox" id="c3137" onchange="updateProgress()"><label for="c3137">**Loan capped at remaining amount** (min of monthlyDeduction, remainingAmount)</label></li>
                        <li><input type="checkbox" id="c3138" onchange="updateProgress()"><label for="c3138">**Multiple loans summed correctly**</label></li>
                        <li><input type="checkbox" id="c3139" onchange="updateProgress()"><label for="c3139">Net = Gross - Total Loan Deductions</label></li>
                        <li><input type="checkbox" id="c3140" onchange="updateProgress()"><label for="c3140">**Future start date loans excluded** (starts after period end)</label></li>
                        <li><input type="checkbox" id="c3141" onchange="updateProgress()"><label for="c3141">**Zero remaining amount → no deduction**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>58.6 Leave Deductions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3142" onchange="updateProgress()"><label for="c3142">**Unpaid leave deducted from salary**</label></li>
                        <li><input type="checkbox" id="c3143" onchange="updateProgress()"><label for="c3143">**Half-day leave → 0.5 days deduction**</label></li>
                        <li><input type="checkbox" id="c3144" onchange="updateProgress()"><label for="c3144">**Deduction = days × daily rate**</label></li>
                        <li><input type="checkbox" id="c3145" onchange="updateProgress()"><label for="c3145">**Leave calculation errors → graceful handling** (continue without deductions)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>58.7 Combined Deductions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3146" onchange="updateProgress()"><label for="c3146">**Both loan and leave deductions applied**</label></li>
                        <li><input type="checkbox" id="c3147" onchange="updateProgress()"><label for="c3147">totalDeductions = loanDeductions + leaveDeductions</label></li>
                        <li><input type="checkbox" id="c3148" onchange="updateProgress()"><label for="c3148">Net = Gross - totalDeductions</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>58.8 Multiple Employees</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3149" onchange="updateProgress()"><label for="c3149">**totalEmployees count correct**</label></li>
                        <li><input type="checkbox" id="c3150" onchange="updateProgress()"><label for="c3150">**totalGross sums all employees**</label></li>
                        <li><input type="checkbox" id="c3151" onchange="updateProgress()"><label for="c3151">**totalLoanDeductions sums all employees**</label></li>
                        <li><input type="checkbox" id="c3152" onchange="updateProgress()"><label for="c3152">**totalNet sums all employees**</label></li>
                        <li><input type="checkbox" id="c3153" onchange="updateProgress()"><label for="c3153">**Employees sorted alphabetically by name**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>58.9 Daily Rate Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3154" onchange="updateProgress()"><label for="c3154">**Daily rate = grossSalary / 30**</label></li>
                        <li><input type="checkbox" id="c3155" onchange="updateProgress()"><label for="c3155">Used for leave deductions</label></li>
                        <li><input type="checkbox" id="c3156" onchange="updateProgress()"><label for="c3156">Passed to unpaid leave calculation</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-59" data-section="59">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 59</span>
                    <h3>PAYROLL UTILITIES</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/payroll/payroll-utils.test.ts src/features/payroll/lib/utils.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Payroll Reference</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3157" onchange="updateProgress()"><label for="c3157">**Format: PREFIX-PAY-YYYY-MM-SEQ**</label></li>
                        <li><input type="checkbox" id="c3158" onchange="updateProgress()"><label for="c3158">Example: BCE-PAY-2024-12-001</label></li>
                        <li><input type="checkbox" id="c3159" onchange="updateProgress()"><label for="c3159">Month padded with zero (01-12)</label></li>
                        <li><input type="checkbox" id="c3160" onchange="updateProgress()"><label for="c3160">Sequence padded to 3 digits (001-999)</label></li>
                        <li><input type="checkbox" id="c3161" onchange="updateProgress()"><label for="c3161">Different prefixes supported</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Payslip Number</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3162" onchange="updateProgress()"><label for="c3162">**Format: PREFIX-PS-YYYY-MM-SEQSEQ**</label></li>
                        <li><input type="checkbox" id="c3163" onchange="updateProgress()"><label for="c3163">Sequence padded to 5 digits (00001-99999)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Loan Number</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3164" onchange="updateProgress()"><label for="c3164">**Format: PREFIX-LOAN-SEQSEQ**</label></li>
                        <li><input type="checkbox" id="c3165" onchange="updateProgress()"><label for="c3165">Sequence padded to 5 digits</label></li>
                        <li><input type="checkbox" id="c3166" onchange="updateProgress()"><label for="c3166">Handles large sequences (99999)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>59.2 Gross Salary Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3167" onchange="updateProgress()"><label for="c3167">Basic salary only → equals basic</label></li>
                        <li><input type="checkbox" id="c3168" onchange="updateProgress()"><label for="c3168">All allowances included</label></li>
                        <li><input type="checkbox" id="c3169" onchange="updateProgress()"><label for="c3169">**Undefined allowances treated as 0**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Status Variants (Badge Styling)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3170" onchange="updateProgress()"><label for="c3170">DRAFT → outline</label></li>
                        <li><input type="checkbox" id="c3171" onchange="updateProgress()"><label for="c3171">PENDING_APPROVAL → secondary</label></li>
                        <li><input type="checkbox" id="c3172" onchange="updateProgress()"><label for="c3172">APPROVED → default</label></li>
                        <li><input type="checkbox" id="c3173" onchange="updateProgress()"><label for="c3173">PROCESSED → default</label></li>
                        <li><input type="checkbox" id="c3174" onchange="updateProgress()"><label for="c3174">PAID → default</label></li>
                        <li><input type="checkbox" id="c3175" onchange="updateProgress()"><label for="c3175">CANCELLED → destructive</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Status Colors</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3176" onchange="updateProgress()"><label for="c3176">DRAFT → gray (#6B7280)</label></li>
                        <li><input type="checkbox" id="c3177" onchange="updateProgress()"><label for="c3177">PENDING_APPROVAL → amber (#F59E0B)</label></li>
                        <li><input type="checkbox" id="c3178" onchange="updateProgress()"><label for="c3178">APPROVED → blue (#3B82F6)</label></li>
                        <li><input type="checkbox" id="c3179" onchange="updateProgress()"><label for="c3179">PROCESSED → purple (#8B5CF6)</label></li>
                        <li><input type="checkbox" id="c3180" onchange="updateProgress()"><label for="c3180">PAID → green (#10B981)</label></li>
                        <li><input type="checkbox" id="c3181" onchange="updateProgress()"><label for="c3181">CANCELLED → red (#EF4444)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Status Text</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3182" onchange="updateProgress()"><label for="c3182">DRAFT → &quot;Draft&quot;</label></li>
                        <li><input type="checkbox" id="c3183" onchange="updateProgress()"><label for="c3183">PENDING_APPROVAL → &quot;Pending Approval&quot;</label></li>
                        <li><input type="checkbox" id="c3184" onchange="updateProgress()"><label for="c3184">All statuses have human-readable text</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>59.4 Loan Status Display</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3185" onchange="updateProgress()"><label for="c3185">ACTIVE → default variant</label></li>
                        <li><input type="checkbox" id="c3186" onchange="updateProgress()"><label for="c3186">PAUSED → secondary variant</label></li>
                        <li><input type="checkbox" id="c3187" onchange="updateProgress()"><label for="c3187">COMPLETED → outline variant</label></li>
                        <li><input type="checkbox" id="c3188" onchange="updateProgress()"><label for="c3188">WRITTEN_OFF → destructive variant</label></li>
                        <li><input type="checkbox" id="c3189" onchange="updateProgress()"><label for="c3189">All statuses have readable text</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>From DRAFT</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3190" onchange="updateProgress()"><label for="c3190">**Can → PENDING_APPROVAL**</label></li>
                        <li><input type="checkbox" id="c3191" onchange="updateProgress()"><label for="c3191">**Can → CANCELLED**</label></li>
                        <li><input type="checkbox" id="c3192" onchange="updateProgress()"><label for="c3192">Cannot → APPROVED (skip not allowed)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>From PENDING_APPROVAL</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3193" onchange="updateProgress()"><label for="c3193">**Can → APPROVED**</label></li>
                        <li><input type="checkbox" id="c3194" onchange="updateProgress()"><label for="c3194">**Can → DRAFT** (return to draft)</label></li>
                        <li><input type="checkbox" id="c3195" onchange="updateProgress()"><label for="c3195">**Can → CANCELLED**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>From APPROVED</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3196" onchange="updateProgress()"><label for="c3196">**Can → PROCESSED**</label></li>
                        <li><input type="checkbox" id="c3197" onchange="updateProgress()"><label for="c3197">**Can → PENDING_APPROVAL** (revert)</label></li>
                        <li><input type="checkbox" id="c3198" onchange="updateProgress()"><label for="c3198">**Can → CANCELLED**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>From PROCESSED</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3199" onchange="updateProgress()"><label for="c3199">**Can → PAID**</label></li>
                        <li><input type="checkbox" id="c3200" onchange="updateProgress()"><label for="c3200">**Can → APPROVED** (revert)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>From PAID</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3201" onchange="updateProgress()"><label for="c3201">**Cannot transition to any status** (terminal state)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>From CANCELLED</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3202" onchange="updateProgress()"><label for="c3202">**Can → DRAFT** (reopen)</label></li>
                        <li><input type="checkbox" id="c3203" onchange="updateProgress()"><label for="c3203">Cannot → other statuses</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>59.6 Currency Formatting</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3204" onchange="updateProgress()"><label for="c3204">Formats with QAR currency</label></li>
                        <li><input type="checkbox" id="c3205" onchange="updateProgress()"><label for="c3205">2 decimal places</label></li>
                        <li><input type="checkbox" id="c3206" onchange="updateProgress()"><label for="c3206">Supports different currencies (USD)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>59.7 Month Names</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3207" onchange="updateProgress()"><label for="c3207">getMonthName: 1 → &quot;January&quot;, 12 → &quot;December&quot;</label></li>
                        <li><input type="checkbox" id="c3208" onchange="updateProgress()"><label for="c3208">**Invalid month (0, 13) → empty string**</label></li>
                        <li><input type="checkbox" id="c3209" onchange="updateProgress()"><label for="c3209">getShortMonthName: 1 → &quot;Jan&quot;, 12 → &quot;Dec&quot;</label></li>
                        <li><input type="checkbox" id="c3210" onchange="updateProgress()"><label for="c3210">formatPayPeriod: &quot;December 2024&quot; format</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>59.8 Period Date Calculations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3211" onchange="updateProgress()"><label for="c3211">getPeriodStartDate: first day of month</label></li>
                        <li><input type="checkbox" id="c3212" onchange="updateProgress()"><label for="c3212">getPeriodEndDate: last day of month</label></li>
                        <li><input type="checkbox" id="c3213" onchange="updateProgress()"><label for="c3213">**Handles leap year February (29 days)**</label></li>
                        <li><input type="checkbox" id="c3214" onchange="updateProgress()"><label for="c3214">**Handles non-leap February (28 days)**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>59.9 Daily Salary Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3215" onchange="updateProgress()"><label for="c3215">**grossSalary / 30**</label></li>
                        <li><input type="checkbox" id="c3216" onchange="updateProgress()"><label for="c3216">**Rounds to 2 decimal places**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>59.10 Loan End Date Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3217" onchange="updateProgress()"><label for="c3217">**Start date + installments - 1 months**</label></li>
                        <li><input type="checkbox" id="c3218" onchange="updateProgress()"><label for="c3218">**Handles month-end edge case** (Jan 31 → Feb 28/29)</label></li>
                        <li><input type="checkbox" id="c3219" onchange="updateProgress()"><label for="c3219">**Handles year boundary** (Nov 2024 + 6 = Apr 2025)</label></li>
                        <li><input type="checkbox" id="c3220" onchange="updateProgress()"><label for="c3220">**Single installment → same month**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>59.11 Financial Precision Functions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3221" onchange="updateProgress()"><label for="c3221">toFixed2: rounds to 2 decimal places</label></li>
                        <li><input type="checkbox" id="c3222" onchange="updateProgress()"><label for="c3222">addMoney: adds amounts with precision</label></li>
                        <li><input type="checkbox" id="c3223" onchange="updateProgress()"><label for="c3223">subtractMoney: subtracts with precision</label></li>
                        <li><input type="checkbox" id="c3224" onchange="updateProgress()"><label for="c3224">multiplyMoney: multiplies with precision</label></li>
                        <li><input type="checkbox" id="c3225" onchange="updateProgress()"><label for="c3225">divideMoney: **divides by 0 → returns 0**</label></li>
                        <li><input type="checkbox" id="c3226" onchange="updateProgress()"><label for="c3226">parseDecimal: handles number, string, Decimal-like objects</label></li>
                        <li><input type="checkbox" id="c3227" onchange="updateProgress()"><label for="c3227">parseDecimal: **null/undefined → 0**</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-60" data-section="60">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 60</span>
                    <h3>ASSET TAG GENERATION</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/assets/asset-utils.test.ts src/features/assets/lib/asset-utils.ts</code></div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>60.1 Tag Format</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3228" onchange="updateProgress()"><label for="c3228">**Format: ORG-CAT-YYSEQ**</label></li>
                        <li><input type="checkbox" id="c3229" onchange="updateProgress()"><label for="c3229">Example: BCE-CP-25001</label></li>
                        <li><input type="checkbox" id="c3230" onchange="updateProgress()"><label for="c3230">Organization prefix uppercased</label></li>
                        <li><input type="checkbox" id="c3231" onchange="updateProgress()"><label for="c3231">Category code uppercased</label></li>
                        <li><input type="checkbox" id="c3232" onchange="updateProgress()"><label for="c3232">Year suffix: last 2 digits of year</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>60.2 Sequence Number Generation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3233" onchange="updateProgress()"><label for="c3233">**First asset in category → 001**</label></li>
                        <li><input type="checkbox" id="c3234" onchange="updateProgress()"><label for="c3234">**Increments from existing highest tag**</label></li>
                        <li><input type="checkbox" id="c3235" onchange="updateProgress()"><label for="c3235">**Padded to 3 digits** (001, 010, 100)</label></li>
                        <li><input type="checkbox" id="c3236" onchange="updateProgress()"><label for="c3236">**Sequences beyond 999 extend** (1000, 9999)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>60.3 Tenant Isolation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3237" onchange="updateProgress()"><label for="c3237">**Filters by tenantId**</label></li>
                        <li><input type="checkbox" id="c3238" onchange="updateProgress()"><label for="c3238">**Different tenants have independent sequences**</label></li>
                        <li><input type="checkbox" id="c3239" onchange="updateProgress()"><label for="c3239">Same category code can have different sequences per tenant</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>60.4 Category-Specific Sequencing</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3240" onchange="updateProgress()"><label for="c3240">**Each category has independent sequence**</label></li>
                        <li><input type="checkbox" id="c3241" onchange="updateProgress()"><label for="c3241">CP category: sequence 1-999</label></li>
                        <li><input type="checkbox" id="c3242" onchange="updateProgress()"><label for="c3242">MO category: separate sequence 1-999</label></li>
                        <li><input type="checkbox" id="c3243" onchange="updateProgress()"><label for="c3243">Multiple category codes supported: CP, MO, KB, MS, HD, PR, NW, FN</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>60.5 Year Reset Behavior</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3244" onchange="updateProgress()"><label for="c3244">**Year included in search prefix** (BCE-CP-25)</label></li>
                        <li><input type="checkbox" id="c3245" onchange="updateProgress()"><label for="c3245">**New year resets sequence to 001**</label></li>
                        <li><input type="checkbox" id="c3246" onchange="updateProgress()"><label for="c3246">**Assets from different years don't affect count**</label></li>
                        <li><input type="checkbox" id="c3247" onchange="updateProgress()"><label for="c3247">Year 2025 → &quot;25&quot;, Year 2026 → &quot;26&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>60.6 Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3248" onchange="updateProgress()"><label for="c3248">**Null assetTag → falls back to sequence 1**</label></li>
                        <li><input type="checkbox" id="c3249" onchange="updateProgress()"><label for="c3249">**Non-numeric sequence in tag → falls back to sequence 1**</label></li>
                        <li><input type="checkbox" id="c3250" onchange="updateProgress()"><label for="c3250">**Query uses descending order** to get highest tag</label></li>
                        <li><input type="checkbox" id="c3251" onchange="updateProgress()"><label for="c3251">**Single character category codes supported** (BCE-X-25001)</label></li>
                        <li><input type="checkbox" id="c3252" onchange="updateProgress()"><label for="c3252">**Three character category codes supported** (BCE-NET-25001)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>60.7 Complete Generation Flow</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3253" onchange="updateProgress()"><label for="c3253">New category → generates -001</label></li>
                        <li><input type="checkbox" id="c3254" onchange="updateProgress()"><label for="c3254">Existing category with 42 assets → generates -043</label></li>
                        <li><input type="checkbox" id="c3255" onchange="updateProgress()"><label for="c3255">Searches with: tenantId, assetTag startsWith, orderBy desc, take 1</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-61" data-section="61">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 61</span>
                    <h3>PURCHASE REQUEST UTILITIES</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/purchase-request-utils.test.ts src/lib/purchase-request-utils.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>PURCHASE_REQUEST_CATEGORIES</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3256" onchange="updateProgress()"><label for="c3256">**8 categories total**</label></li>
                        <li><input type="checkbox" id="c3257" onchange="updateProgress()"><label for="c3257">Includes: IT Equipment, Office Supplies, Software/Licenses</label></li>
                        <li><input type="checkbox" id="c3258" onchange="updateProgress()"><label for="c3258">Includes: Furniture, Marketing Materials, Travel &amp; Events</label></li>
                        <li><input type="checkbox" id="c3259" onchange="updateProgress()"><label for="c3259">Includes: Professional Services, Other</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>PURCHASE_TYPES</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3260" onchange="updateProgress()"><label for="c3260">**8 purchase types:** HARDWARE, SOFTWARE_SUBSCRIPTION, SERVICES, OFFICE_SUPPLIES</label></li>
                        <li><input type="checkbox" id="c3261" onchange="updateProgress()"><label for="c3261">Includes: MARKETING, TRAVEL, TRAINING, OTHER</label></li>
                        <li><input type="checkbox" id="c3262" onchange="updateProgress()"><label for="c3262">Each type has value and label</label></li>
                    </ul>
                </div>

                <!-- COST_TYPES removed from UI - defaults to OPERATING_COST server-side -->

                <div class="subsection">
                    <div class="subsection-header">
                        <span>PAYMENT_MODES</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3264" onchange="updateProgress()"><label for="c3264">**5 payment modes:** BANK_TRANSFER, CREDIT_CARD, CASH, CHEQUE, INTERNAL_TRANSFER</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>BILLING_CYCLES</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3265" onchange="updateProgress()"><label for="c3265">**3 billing cycles:** ONE_TIME, MONTHLY, YEARLY</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>CURRENCIES</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3266" onchange="updateProgress()"><label for="c3266">**2 currencies:** QAR, USD</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>getPurchaseTypeLabel</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3267" onchange="updateProgress()"><label for="c3267">HARDWARE → &quot;Hardware&quot;</label></li>
                        <li><input type="checkbox" id="c3268" onchange="updateProgress()"><label for="c3268">SOFTWARE_SUBSCRIPTION → &quot;Software/Subscription&quot;</label></li>
                        <li><input type="checkbox" id="c3269" onchange="updateProgress()"><label for="c3269">SERVICES → &quot;Services&quot;</label></li>
                        <li><input type="checkbox" id="c3270" onchange="updateProgress()"><label for="c3270">OFFICE_SUPPLIES → &quot;Office Supplies&quot;</label></li>
                        <li><input type="checkbox" id="c3271" onchange="updateProgress()"><label for="c3271">MARKETING → &quot;Marketing&quot;</label></li>
                        <li><input type="checkbox" id="c3272" onchange="updateProgress()"><label for="c3272">TRAVEL → &quot;Travel&quot;</label></li>
                        <li><input type="checkbox" id="c3273" onchange="updateProgress()"><label for="c3273">TRAINING → &quot;Training&quot;</label></li>
                        <li><input type="checkbox" id="c3274" onchange="updateProgress()"><label for="c3274">OTHER → &quot;Other&quot;</label></li>
                        <li><input type="checkbox" id="c3275" onchange="updateProgress()"><label for="c3275">**Unknown type → returns input value**</label></li>
                    </ul>
                </div>

                <!-- getCostTypeLabel removed - cost type not used in UI -->

                <div class="subsection">
                    <div class="subsection-header">
                        <span>getPaymentModeLabel</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3279" onchange="updateProgress()"><label for="c3279">BANK_TRANSFER → &quot;Bank Transfer&quot;</label></li>
                        <li><input type="checkbox" id="c3280" onchange="updateProgress()"><label for="c3280">CREDIT_CARD → &quot;Credit Card&quot;</label></li>
                        <li><input type="checkbox" id="c3281" onchange="updateProgress()"><label for="c3281">CASH → &quot;Cash&quot;</label></li>
                        <li><input type="checkbox" id="c3282" onchange="updateProgress()"><label for="c3282">CHEQUE → &quot;Cheque&quot;</label></li>
                        <li><input type="checkbox" id="c3283" onchange="updateProgress()"><label for="c3283">INTERNAL_TRANSFER → &quot;Internal Transfer&quot;</label></li>
                        <li><input type="checkbox" id="c3284" onchange="updateProgress()"><label for="c3284">**Unknown mode → returns input value**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>getBillingCycleLabel</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3285" onchange="updateProgress()"><label for="c3285">ONE_TIME → &quot;One-time&quot;</label></li>
                        <li><input type="checkbox" id="c3286" onchange="updateProgress()"><label for="c3286">MONTHLY → &quot;Monthly&quot;</label></li>
                        <li><input type="checkbox" id="c3287" onchange="updateProgress()"><label for="c3287">YEARLY → &quot;Yearly&quot;</label></li>
                        <li><input type="checkbox" id="c3288" onchange="updateProgress()"><label for="c3288">**Unknown cycle → returns input value**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>getStatusLabel</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3289" onchange="updateProgress()"><label for="c3289">PENDING → &quot;Pending&quot;</label></li>
                        <li><input type="checkbox" id="c3290" onchange="updateProgress()"><label for="c3290">UNDER_REVIEW → &quot;Under Review&quot;</label></li>
                        <li><input type="checkbox" id="c3291" onchange="updateProgress()"><label for="c3291">APPROVED → &quot;Approved&quot;</label></li>
                        <li><input type="checkbox" id="c3292" onchange="updateProgress()"><label for="c3292">REJECTED → &quot;Rejected&quot;</label></li>
                        <li><input type="checkbox" id="c3293" onchange="updateProgress()"><label for="c3293">COMPLETED → &quot;Completed&quot;</label></li>
                        <li><input type="checkbox" id="c3294" onchange="updateProgress()"><label for="c3294">**Unknown status → returns input value**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>getPriorityLabel</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3295" onchange="updateProgress()"><label for="c3295">LOW → &quot;Low&quot;</label></li>
                        <li><input type="checkbox" id="c3296" onchange="updateProgress()"><label for="c3296">MEDIUM → &quot;Medium&quot;</label></li>
                        <li><input type="checkbox" id="c3297" onchange="updateProgress()"><label for="c3297">HIGH → &quot;High&quot;</label></li>
                        <li><input type="checkbox" id="c3298" onchange="updateProgress()"><label for="c3298">URGENT → &quot;Urgent&quot;</label></li>
                        <li><input type="checkbox" id="c3299" onchange="updateProgress()"><label for="c3299">**Unknown priority → returns input value**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>getStatusColor</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3300" onchange="updateProgress()"><label for="c3300">PENDING → yellow background</label></li>
                        <li><input type="checkbox" id="c3301" onchange="updateProgress()"><label for="c3301">UNDER_REVIEW → blue background</label></li>
                        <li><input type="checkbox" id="c3302" onchange="updateProgress()"><label for="c3302">APPROVED → green background</label></li>
                        <li><input type="checkbox" id="c3303" onchange="updateProgress()"><label for="c3303">REJECTED → red background</label></li>
                        <li><input type="checkbox" id="c3304" onchange="updateProgress()"><label for="c3304">COMPLETED → gray background</label></li>
                        <li><input type="checkbox" id="c3305" onchange="updateProgress()"><label for="c3305">**Unknown status → gray (default)**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>getPriorityColor</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3306" onchange="updateProgress()"><label for="c3306">LOW → gray background</label></li>
                        <li><input type="checkbox" id="c3307" onchange="updateProgress()"><label for="c3307">MEDIUM → blue background</label></li>
                        <li><input type="checkbox" id="c3308" onchange="updateProgress()"><label for="c3308">HIGH → orange background</label></li>
                        <li><input type="checkbox" id="c3309" onchange="updateProgress()"><label for="c3309">URGENT → red background</label></li>
                        <li><input type="checkbox" id="c3310" onchange="updateProgress()"><label for="c3310">**Unknown priority → gray (default)**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>canEditRequest</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3311" onchange="updateProgress()"><label for="c3311">**PENDING → true** (can edit)</label></li>
                        <li><input type="checkbox" id="c3312" onchange="updateProgress()"><label for="c3312">UNDER_REVIEW → false</label></li>
                        <li><input type="checkbox" id="c3313" onchange="updateProgress()"><label for="c3313">APPROVED → false</label></li>
                        <li><input type="checkbox" id="c3314" onchange="updateProgress()"><label for="c3314">REJECTED → false</label></li>
                        <li><input type="checkbox" id="c3315" onchange="updateProgress()"><label for="c3315">COMPLETED → false</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>canDeleteRequest</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3316" onchange="updateProgress()"><label for="c3316">**PENDING → true** (can delete)</label></li>
                        <li><input type="checkbox" id="c3317" onchange="updateProgress()"><label for="c3317">Other statuses → false</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>From PENDING</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3318" onchange="updateProgress()"><label for="c3318">**Can → UNDER_REVIEW, APPROVED, REJECTED**</label></li>
                        <li><input type="checkbox" id="c3319" onchange="updateProgress()"><label for="c3319">Cannot → COMPLETED, PENDING</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>From UNDER_REVIEW</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3320" onchange="updateProgress()"><label for="c3320">**Can → APPROVED, REJECTED, PENDING**</label></li>
                        <li><input type="checkbox" id="c3321" onchange="updateProgress()"><label for="c3321">Cannot → COMPLETED</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>From APPROVED</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3322" onchange="updateProgress()"><label for="c3322">**Can → COMPLETED, REJECTED**</label></li>
                        <li><input type="checkbox" id="c3323" onchange="updateProgress()"><label for="c3323">Cannot → PENDING, UNDER_REVIEW</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>From REJECTED</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3324" onchange="updateProgress()"><label for="c3324">**Can → PENDING, UNDER_REVIEW** (resubmit)</label></li>
                        <li><input type="checkbox" id="c3325" onchange="updateProgress()"><label for="c3325">Cannot → APPROVED, COMPLETED</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>From COMPLETED</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3326" onchange="updateProgress()"><label for="c3326">**Returns empty array** (terminal state)</label></li>
                        <li><input type="checkbox" id="c3327" onchange="updateProgress()"><label for="c3327">No transitions allowed</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Unknown Status</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3328" onchange="updateProgress()"><label for="c3328">**Returns empty array**</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-62" data-section="62">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 62</span>
                    <h3>PAYROLL VALIDATION SCHEMAS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/payroll/payroll-validations.test.ts src/features/payroll/validations/payroll.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3329" onchange="updateProgress()"><label for="c3329">**userId required** (min 1 char)</label></li>
                        <li><input type="checkbox" id="c3330" onchange="updateProgress()"><label for="c3330">**basicSalary required** (min 0, max 999,999,999)</label></li>
                        <li><input type="checkbox" id="c3331" onchange="updateProgress()"><label for="c3331">**effectiveFrom required** (min 1 char)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Allowances</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3332" onchange="updateProgress()"><label for="c3332">housingAllowance: defaults to 0</label></li>
                        <li><input type="checkbox" id="c3333" onchange="updateProgress()"><label for="c3333">transportAllowance: defaults to 0</label></li>
                        <li><input type="checkbox" id="c3334" onchange="updateProgress()"><label for="c3334">foodAllowance: defaults to 0</label></li>
                        <li><input type="checkbox" id="c3335" onchange="updateProgress()"><label for="c3335">phoneAllowance: defaults to 0</label></li>
                        <li><input type="checkbox" id="c3336" onchange="updateProgress()"><label for="c3336">otherAllowances: defaults to 0</label></li>
                        <li><input type="checkbox" id="c3337" onchange="updateProgress()"><label for="c3337">**All allowances min 0**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3338" onchange="updateProgress()"><label for="c3338">otherAllowancesDetails: array of {name, amount}</label></li>
                        <li><input type="checkbox" id="c3339" onchange="updateProgress()"><label for="c3339">notes: max 500 chars</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Validation Rules</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3340" onchange="updateProgress()"><label for="c3340">**Negative basicSalary → rejected**</label></li>
                        <li><input type="checkbox" id="c3341" onchange="updateProgress()"><label for="c3341">**basicSalary &gt; 999,999,999 → rejected**</label></li>
                        <li><input type="checkbox" id="c3342" onchange="updateProgress()"><label for="c3342">**notes &gt; 500 chars → rejected**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Field Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3343" onchange="updateProgress()"><label for="c3343">**year: 2020-2100** (integer)</label></li>
                        <li><input type="checkbox" id="c3344" onchange="updateProgress()"><label for="c3344">**month: 1-12** (integer)</label></li>
                        <li><input type="checkbox" id="c3345" onchange="updateProgress()"><label for="c3345">**year &lt; 2020 → rejected**</label></li>
                        <li><input type="checkbox" id="c3346" onchange="updateProgress()"><label for="c3346">**year &gt; 2100 → rejected**</label></li>
                        <li><input type="checkbox" id="c3347" onchange="updateProgress()"><label for="c3347">**month 0 → rejected**</label></li>
                        <li><input type="checkbox" id="c3348" onchange="updateProgress()"><label for="c3348">**month 13 → rejected**</label></li>
                        <li><input type="checkbox" id="c3349" onchange="updateProgress()"><label for="c3349">**Non-integer year → rejected** (e.g., 2024.5)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3350" onchange="updateProgress()"><label for="c3350">**userId required**</label></li>
                        <li><input type="checkbox" id="c3351" onchange="updateProgress()"><label for="c3351">**type: LOAN or ADVANCE** (enum)</label></li>
                        <li><input type="checkbox" id="c3352" onchange="updateProgress()"><label for="c3352">**description: 1-500 chars**</label></li>
                        <li><input type="checkbox" id="c3353" onchange="updateProgress()"><label for="c3353">**principalAmount: min 1** (&gt; 0)</label></li>
                        <li><input type="checkbox" id="c3354" onchange="updateProgress()"><label for="c3354">**monthlyDeduction: min 1** (&gt; 0)</label></li>
                        <li><input type="checkbox" id="c3355" onchange="updateProgress()"><label for="c3355">**startDate required**</label></li>
                        <li><input type="checkbox" id="c3356" onchange="updateProgress()"><label for="c3356">**installments: integer min 1**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Validation Rules</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3357" onchange="updateProgress()"><label for="c3357">**Invalid type → rejected**</label></li>
                        <li><input type="checkbox" id="c3358" onchange="updateProgress()"><label for="c3358">**principalAmount = 0 → rejected**</label></li>
                        <li><input type="checkbox" id="c3359" onchange="updateProgress()"><label for="c3359">**installments = 0 → rejected**</label></li>
                        <li><input type="checkbox" id="c3360" onchange="updateProgress()"><label for="c3360">notes: max 500 chars (optional)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3361" onchange="updateProgress()"><label for="c3361">**amount: min 0.01** (&gt; 0)</label></li>
                        <li><input type="checkbox" id="c3362" onchange="updateProgress()"><label for="c3362">**paymentMethod: SALARY_DEDUCTION, CASH, BANK_TRANSFER** (enum)</label></li>
                        <li><input type="checkbox" id="c3363" onchange="updateProgress()"><label for="c3363">**paymentDate required**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3364" onchange="updateProgress()"><label for="c3364">reference: max 100 chars</label></li>
                        <li><input type="checkbox" id="c3365" onchange="updateProgress()"><label for="c3365">notes: max 500 chars</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Validation Rules</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3366" onchange="updateProgress()"><label for="c3366">**amount = 0 → rejected**</label></li>
                        <li><input type="checkbox" id="c3367" onchange="updateProgress()"><label for="c3367">**Invalid paymentMethod → rejected**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Deduction Types</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3368" onchange="updateProgress()"><label for="c3368">LOAN_REPAYMENT, UNPAID_LEAVE, ADVANCE_RECOVERY</label></li>
                        <li><input type="checkbox" id="c3369" onchange="updateProgress()"><label for="c3369">TAX, SOCIAL_INSURANCE, OTHER</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3370" onchange="updateProgress()"><label for="c3370">**type: valid DeductionType** (enum)</label></li>
                        <li><input type="checkbox" id="c3371" onchange="updateProgress()"><label for="c3371">**description: 1-200 chars**</label></li>
                        <li><input type="checkbox" id="c3372" onchange="updateProgress()"><label for="c3372">**amount: min 0.01** (&gt; 0)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3373" onchange="updateProgress()"><label for="c3373">leaveRequestId (for UNPAID_LEAVE)</label></li>
                        <li><input type="checkbox" id="c3374" onchange="updateProgress()"><label for="c3374">loanId (for LOAN_REPAYMENT)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Validation Rules</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3375" onchange="updateProgress()"><label for="c3375">**Invalid type → rejected**</label></li>
                        <li><input type="checkbox" id="c3376" onchange="updateProgress()"><label for="c3376">**description &gt; 200 chars → rejected**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>payrollRunQuerySchema</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3377" onchange="updateProgress()"><label for="c3377">year: coerced to number (optional)</label></li>
                        <li><input type="checkbox" id="c3378" onchange="updateProgress()"><label for="c3378">status: enum (optional)</label></li>
                        <li><input type="checkbox" id="c3379" onchange="updateProgress()"><label for="c3379">p: default 1 (page)</label></li>
                        <li><input type="checkbox" id="c3380" onchange="updateProgress()"><label for="c3380">ps: default 20, max 100 (page size)</label></li>
                        <li><input type="checkbox" id="c3381" onchange="updateProgress()"><label for="c3381">**String year coerced to number** (&quot;2024&quot; → 2024)</label></li>
                        <li><input type="checkbox" id="c3382" onchange="updateProgress()"><label for="c3382">**ps &gt; 100 → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>payslipQuerySchema</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3383" onchange="updateProgress()"><label for="c3383">payrollRunId: optional</label></li>
                        <li><input type="checkbox" id="c3384" onchange="updateProgress()"><label for="c3384">userId: optional</label></li>
                        <li><input type="checkbox" id="c3385" onchange="updateProgress()"><label for="c3385">year: coerced to number (optional)</label></li>
                        <li><input type="checkbox" id="c3386" onchange="updateProgress()"><label for="c3386">month: 1-12 (optional)</label></li>
                        <li><input type="checkbox" id="c3387" onchange="updateProgress()"><label for="c3387">ps: default 50, max 100</label></li>
                        <li><input type="checkbox" id="c3388" onchange="updateProgress()"><label for="c3388">**month 0 → rejected**</label></li>
                        <li><input type="checkbox" id="c3389" onchange="updateProgress()"><label for="c3389">**month 13 → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>loanQuerySchema</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3390" onchange="updateProgress()"><label for="c3390">userId: optional</label></li>
                        <li><input type="checkbox" id="c3391" onchange="updateProgress()"><label for="c3391">status: ACTIVE, PAUSED, COMPLETED, WRITTEN_OFF (optional)</label></li>
                        <li><input type="checkbox" id="c3392" onchange="updateProgress()"><label for="c3392">type: LOAN, ADVANCE (optional)</label></li>
                        <li><input type="checkbox" id="c3393" onchange="updateProgress()"><label for="c3393">ps: default 50, max 100</label></li>
                        <li><input type="checkbox" id="c3394" onchange="updateProgress()"><label for="c3394">**Invalid status → rejected**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>submitPayrollSchema</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3395" onchange="updateProgress()"><label for="c3395">notes: max 500 chars (optional)</label></li>
                        <li><input type="checkbox" id="c3396" onchange="updateProgress()"><label for="c3396">**Empty submission accepted**</label></li>
                        <li><input type="checkbox" id="c3397" onchange="updateProgress()"><label for="c3397">**notes &gt; 500 chars → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>approvePayrollSchema</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3398" onchange="updateProgress()"><label for="c3398">notes: max 500 chars (optional)</label></li>
                        <li><input type="checkbox" id="c3399" onchange="updateProgress()"><label for="c3399">**Empty approval accepted**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>rejectPayrollSchema</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3400" onchange="updateProgress()"><label for="c3400">**reason required** (1-500 chars)</label></li>
                        <li><input type="checkbox" id="c3401" onchange="updateProgress()"><label for="c3401">**Empty reason → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>markPaidSchema</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3402" onchange="updateProgress()"><label for="c3402">paymentReference: max 100 chars (optional)</label></li>
                        <li><input type="checkbox" id="c3403" onchange="updateProgress()"><label for="c3403">notes: max 500 chars (optional)</label></li>
                        <li><input type="checkbox" id="c3404" onchange="updateProgress()"><label for="c3404">**Empty mark paid accepted**</label></li>
                        <li><input type="checkbox" id="c3405" onchange="updateProgress()"><label for="c3405">**reference &gt; 100 chars → rejected**</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-63" data-section="63">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 63</span>
                    <h3>SUBDOMAIN &amp; TENANT ROUTING</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/multi-tenant/subdomain.test.ts src/lib/multi-tenant/subdomain.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>System Subdomains</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3406" onchange="updateProgress()"><label for="c3406">**www reserved**</label></li>
                        <li><input type="checkbox" id="c3407" onchange="updateProgress()"><label for="c3407">**app reserved**</label></li>
                        <li><input type="checkbox" id="c3408" onchange="updateProgress()"><label for="c3408">**api reserved**</label></li>
                        <li><input type="checkbox" id="c3409" onchange="updateProgress()"><label for="c3409">**admin reserved**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Authentication Subdomains</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3410" onchange="updateProgress()"><label for="c3410">login, signup, auth, oauth, sso reserved</label></li>
                        <li><input type="checkbox" id="c3411" onchange="updateProgress()"><label for="c3411">All authentication subdomains blocked for tenant use</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Infrastructure Subdomains</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3412" onchange="updateProgress()"><label for="c3412">mail, smtp, ftp, cdn reserved</label></li>
                        <li><input type="checkbox" id="c3413" onchange="updateProgress()"><label for="c3413">Infrastructure subdomains protected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Environment Subdomains</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3414" onchange="updateProgress()"><label for="c3414">dev, staging, test, demo, beta reserved</label></li>
                        <li><input type="checkbox" id="c3415" onchange="updateProgress()"><label for="c3415">Environment subdomains protected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Billing Subdomains</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3416" onchange="updateProgress()"><label for="c3416">billing, payment, pricing reserved</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Organization Subdomains</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3417" onchange="updateProgress()"><label for="c3417">org, organization, team, workspace reserved</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Main Domain Detection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3418" onchange="updateProgress()"><label for="c3418">**durj.com → main domain** (no subdomain)</label></li>
                        <li><input type="checkbox" id="c3419" onchange="updateProgress()"><label for="c3419">Correctly identifies main domain</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Tenant Subdomain Extraction</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3420" onchange="updateProgress()"><label for="c3420">**acme.durj.com → subdomain &quot;acme&quot;**</label></li>
                        <li><input type="checkbox" id="c3421" onchange="updateProgress()"><label for="c3421">Extracts subdomain correctly</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Reserved Subdomain Check</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3422" onchange="updateProgress()"><label for="c3422">**www → identified as reserved**</label></li>
                        <li><input type="checkbox" id="c3423" onchange="updateProgress()"><label for="c3423">Case-insensitive: WWW → reserved</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Nested Subdomains</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3424" onchange="updateProgress()"><label for="c3424">**team.acme.durj.com → takes first part &quot;team&quot;**</label></li>
                        <li><input type="checkbox" id="c3425" onchange="updateProgress()"><label for="c3425">Handles nested subdomains</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Localhost Development</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3426" onchange="updateProgress()"><label for="c3426">**acme.localhost:3000 → subdomain &quot;acme&quot;**</label></li>
                        <li><input type="checkbox" id="c3427" onchange="updateProgress()"><label for="c3427">Supports localhost development format</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Empty/Invalid Subdomain</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3428" onchange="updateProgress()"><label for="c3428">**Empty subdomain → returns null**</label></li>
                        <li><input type="checkbox" id="c3429" onchange="updateProgress()"><label for="c3429">**Reserved subdomain → returns null**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Valid Subdomain</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3430" onchange="updateProgress()"><label for="c3430">Returns tenant info: id, slug, name, subscriptionTier</label></li>
                        <li><input type="checkbox" id="c3431" onchange="updateProgress()"><label for="c3431">Normalizes to lowercase for lookup</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Non-Existent Organization</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3432" onchange="updateProgress()"><label for="c3432">**Non-existent slug → returns null**</label></li>
                        <li><input type="checkbox" id="c3433" onchange="updateProgress()"><label for="c3433">No organization found for subdomain</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Character Handling</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3434" onchange="updateProgress()"><label for="c3434">Converts to lowercase</label></li>
                        <li><input type="checkbox" id="c3435" onchange="updateProgress()"><label for="c3435">Removes spaces</label></li>
                        <li><input type="checkbox" id="c3436" onchange="updateProgress()"><label for="c3436">Removes special characters (&amp; ! @ # etc.)</label></li>
                        <li><input type="checkbox" id="c3437" onchange="updateProgress()"><label for="c3437">Removes hyphens and underscores</label></li>
                        <li><input type="checkbox" id="c3438" onchange="updateProgress()"><label for="c3438">Only alphanumeric characters remain</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Length Limits</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3439" onchange="updateProgress()"><label for="c3439">**Max 63 characters** (subdomain limit)</label></li>
                        <li><input type="checkbox" id="c3440" onchange="updateProgress()"><label for="c3440">Trims whitespace</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3441" onchange="updateProgress()"><label for="c3441">Empty string → empty slug</label></li>
                        <li><input type="checkbox" id="c3442" onchange="updateProgress()"><label for="c3442">Numbers preserved (Company 123 → company123)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Length Requirements</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3443" onchange="updateProgress()"><label for="c3443">**Empty slug → rejected**</label></li>
                        <li><input type="checkbox" id="c3444" onchange="updateProgress()"><label for="c3444">**&lt; 3 characters → rejected**</label></li>
                        <li><input type="checkbox" id="c3445" onchange="updateProgress()"><label for="c3445">**&gt; 63 characters → rejected**</label></li>
                        <li><input type="checkbox" id="c3446" onchange="updateProgress()"><label for="c3446">3 characters → accepted</label></li>
                        <li><input type="checkbox" id="c3447" onchange="updateProgress()"><label for="c3447">63 characters → accepted</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Character Requirements</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3448" onchange="updateProgress()"><label for="c3448">**Uppercase letters → rejected**</label></li>
                        <li><input type="checkbox" id="c3449" onchange="updateProgress()"><label for="c3449">**Special characters → rejected** (acme-corp fails)</label></li>
                        <li><input type="checkbox" id="c3450" onchange="updateProgress()"><label for="c3450">Lowercase alphanumeric only → accepted</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Reserved Check</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3451" onchange="updateProgress()"><label for="c3451">**Reserved subdomains → rejected**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Validation First</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3452" onchange="updateProgress()"><label for="c3452">Invalid slug → not available</label></li>
                        <li><input type="checkbox" id="c3453" onchange="updateProgress()"><label for="c3453">Reserved slug → not available</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Database Check</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3454" onchange="updateProgress()"><label for="c3454">Existing slug → not available</label></li>
                        <li><input type="checkbox" id="c3455" onchange="updateProgress()"><label for="c3455">Unused slug → available</label></li>
                        <li><input type="checkbox" id="c3456" onchange="updateProgress()"><label for="c3456">Normalizes to lowercase for lookup</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Base Slug Available</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3457" onchange="updateProgress()"><label for="c3457">Returns base slug if available</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Collision Handling</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3458" onchange="updateProgress()"><label for="c3458">**Taken slug → appends -1, -2, etc.**</label></li>
                        <li><input type="checkbox" id="c3459" onchange="updateProgress()"><label for="c3459">Increments until available</label></li>
                        <li><input type="checkbox" id="c3460" onchange="updateProgress()"><label for="c3460">**After 100 attempts → uses timestamp fallback**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Production URLs</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3461" onchange="updateProgress()"><label for="c3461">**https://acme.durj.com** format</label></li>
                        <li><input type="checkbox" id="c3462" onchange="updateProgress()"><label for="c3462">Uses HTTPS in production</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Development URLs</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3463" onchange="updateProgress()"><label for="c3463">**http://acme.localhost:3000** format</label></li>
                        <li><input type="checkbox" id="c3464" onchange="updateProgress()"><label for="c3464">Uses HTTP in development</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Main App URL</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3465" onchange="updateProgress()"><label for="c3465">Production: https://durj.com</label></li>
                        <li><input type="checkbox" id="c3466" onchange="updateProgress()"><label for="c3466">Development: http://localhost:3000</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Subdomain Hijacking Prevention</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3467" onchange="updateProgress()"><label for="c3467">All infrastructure subdomains reserved</label></li>
                        <li><input type="checkbox" id="c3468" onchange="updateProgress()"><label for="c3468">All authentication subdomains reserved</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>SQL Injection Prevention</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3469" onchange="updateProgress()"><label for="c3469">**Malicious slug rejected** ('; DROP TABLE...)</label></li>
                        <li><input type="checkbox" id="c3470" onchange="updateProgress()"><label for="c3470">Only alphanumeric characters allowed</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Path Traversal Prevention</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3471" onchange="updateProgress()"><label for="c3471">**../admin rejected** (contains special chars)</label></li>
                        <li><input type="checkbox" id="c3472" onchange="updateProgress()"><label for="c3472">All special characters blocked</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Enumeration Protection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3473" onchange="updateProgress()"><label for="c3473">Non-existent orgs return null (no info leak)</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-64" data-section="64">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 64</span>
                    <h3>DEPRECIATION CONSTANTS (QATAR TAX)</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/depreciation-constants.test.ts src/features/assets/lib/depreciation/constants.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Predefined Categories</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3474" onchange="updateProgress()"><label for="c3474">**5 predefined categories**</label></li>
                        <li><input type="checkbox" id="c3475" onchange="updateProgress()"><label for="c3475">All have unique codes</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Machinery Category</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3476" onchange="updateProgress()"><label for="c3476">Code: MACHINERY</label></li>
                        <li><input type="checkbox" id="c3477" onchange="updateProgress()"><label for="c3477">**Annual rate: 15%**</label></li>
                        <li><input type="checkbox" id="c3478" onchange="updateProgress()"><label for="c3478">**Useful life: 7 years**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Vehicles Category</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3479" onchange="updateProgress()"><label for="c3479">Code: VEHICLES</label></li>
                        <li><input type="checkbox" id="c3480" onchange="updateProgress()"><label for="c3480">**Annual rate: 20%**</label></li>
                        <li><input type="checkbox" id="c3481" onchange="updateProgress()"><label for="c3481">**Useful life: 5 years**</label></li>
                        <li><input type="checkbox" id="c3482" onchange="updateProgress()"><label for="c3482">Asset category code: VH</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Furniture Category</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3483" onchange="updateProgress()"><label for="c3483">Code: FURNITURE</label></li>
                        <li><input type="checkbox" id="c3484" onchange="updateProgress()"><label for="c3484">**Annual rate: 15%**</label></li>
                        <li><input type="checkbox" id="c3485" onchange="updateProgress()"><label for="c3485">**Useful life: 7 years**</label></li>
                        <li><input type="checkbox" id="c3486" onchange="updateProgress()"><label for="c3486">Asset category code: FR</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>IT Equipment Category</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3487" onchange="updateProgress()"><label for="c3487">Code: IT_EQUIPMENT</label></li>
                        <li><input type="checkbox" id="c3488" onchange="updateProgress()"><label for="c3488">**Annual rate: 33.33%**</label></li>
                        <li><input type="checkbox" id="c3489" onchange="updateProgress()"><label for="c3489">**Useful life: 3 years**</label></li>
                        <li><input type="checkbox" id="c3490" onchange="updateProgress()"><label for="c3490">Asset category code: CP</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Electrical Equipment Category</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3491" onchange="updateProgress()"><label for="c3491">Code: ELECTRICAL</label></li>
                        <li><input type="checkbox" id="c3492" onchange="updateProgress()"><label for="c3492">**Annual rate: 20%**</label></li>
                        <li><input type="checkbox" id="c3493" onchange="updateProgress()"><label for="c3493">**Useful life: 5 years**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3494" onchange="updateProgress()"><label for="c3494">Each category has: code, name, annualRate</label></li>
                        <li><input type="checkbox" id="c3495" onchange="updateProgress()"><label for="c3495">Each category has: usefulLifeYears, description</label></li>
                        <li><input type="checkbox" id="c3496" onchange="updateProgress()"><label for="c3496">Some have: assetCategoryCode mapping</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Code Uniqueness</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3497" onchange="updateProgress()"><label for="c3497">All codes unique within categories</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Valid Codes</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3498" onchange="updateProgress()"><label for="c3498">VEHICLES → returns category with rate 20%</label></li>
                        <li><input type="checkbox" id="c3499" onchange="updateProgress()"><label for="c3499">IT_EQUIPMENT → returns category with rate 33.33%</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Invalid Codes</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3500" onchange="updateProgress()"><label for="c3500">**Invalid code → returns undefined**</label></li>
                        <li><input type="checkbox" id="c3501" onchange="updateProgress()"><label for="c3501">**Empty string → returns undefined**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Removed Categories</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3502" onchange="updateProgress()"><label for="c3502">BUILDINGS → returns undefined (removed)</label></li>
                        <li><input type="checkbox" id="c3503" onchange="updateProgress()"><label for="c3503">INTANGIBLE → returns undefined (removed)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Case Sensitivity</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3504" onchange="updateProgress()"><label for="c3504">**Lowercase &quot;vehicles&quot; → returns undefined** (case-sensitive)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Standard Calculations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3505" onchange="updateProgress()"><label for="c3505">**5 years → 20% rate** (100/5)</label></li>
                        <li><input type="checkbox" id="c3506" onchange="updateProgress()"><label for="c3506">**10 years → 10% rate** (100/10)</label></li>
                        <li><input type="checkbox" id="c3507" onchange="updateProgress()"><label for="c3507">**1 year → 100% rate**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3508" onchange="updateProgress()"><label for="c3508">**0 years → 0% rate**</label></li>
                        <li><input type="checkbox" id="c3509" onchange="updateProgress()"><label for="c3509">**Negative years → 0% rate**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Rounding</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3510" onchange="updateProgress()"><label for="c3510">**3 years → 33.33%** (rounded to 2 decimals)</label></li>
                        <li><input type="checkbox" id="c3511" onchange="updateProgress()"><label for="c3511">**7 years → 14.29%** (rounded to 2 decimals)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Standard Calculations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3512" onchange="updateProgress()"><label for="c3512">**20% rate → 5 years** (100/20)</label></li>
                        <li><input type="checkbox" id="c3513" onchange="updateProgress()"><label for="c3513">**10% rate → 10 years**</label></li>
                        <li><input type="checkbox" id="c3514" onchange="updateProgress()"><label for="c3514">**100% rate → 1 year**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Edge Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3515" onchange="updateProgress()"><label for="c3515">**0% rate → 0 years**</label></li>
                        <li><input type="checkbox" id="c3516" onchange="updateProgress()"><label for="c3516">**Negative rate → 0 years**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Rounding</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3517" onchange="updateProgress()"><label for="c3517">**15% rate → 7 years** (rounded to nearest integer)</label></li>
                        <li><input type="checkbox" id="c3518" onchange="updateProgress()"><label for="c3518">**3.33% rate → 30 years** (rounded)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Standard Rates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3519" onchange="updateProgress()"><label for="c3519">Rate 20% → Life 5 → Rate 20% ✓</label></li>
                        <li><input type="checkbox" id="c3520" onchange="updateProgress()"><label for="c3520">Rate 10% → Life 10 → Rate 10% ✓</label></li>
                        <li><input type="checkbox" id="c3521" onchange="updateProgress()"><label for="c3521">Rate 50% → Life 2 → Rate 50% ✓</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Non-Exact Values</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3522" onchange="updateProgress()"><label for="c3522">3 years → 33.33% → 3 years (handles rounding)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Official Rates Verification</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3523" onchange="updateProgress()"><label for="c3523">Machinery: 15% matches QTA</label></li>
                        <li><input type="checkbox" id="c3524" onchange="updateProgress()"><label for="c3524">Motor Vehicles: 20% matches QTA</label></li>
                        <li><input type="checkbox" id="c3525" onchange="updateProgress()"><label for="c3525">Furniture: 15% matches QTA</label></li>
                        <li><input type="checkbox" id="c3526" onchange="updateProgress()"><label for="c3526">Computers: 33.33% matches QTA</label></li>
                        <li><input type="checkbox" id="c3527" onchange="updateProgress()"><label for="c3527">Electrical: 20% matches QTA</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-65" data-section="65">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 65</span>
                    <h3>ASSET VALIDATION SCHEMAS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/validations/assets.test.ts src/features/assets/validations/assets.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3528" onchange="updateProgress()"><label for="c3528">**type required** (min 1 char)</label></li>
                        <li><input type="checkbox" id="c3529" onchange="updateProgress()"><label for="c3529">**model required** (min 1 char)</label></li>
                        <li><input type="checkbox" id="c3530" onchange="updateProgress()"><label for="c3530">Type empty string → rejected</label></li>
                        <li><input type="checkbox" id="c3531" onchange="updateProgress()"><label for="c3531">Model empty string → rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3532" onchange="updateProgress()"><label for="c3532">brand: accepts null/empty</label></li>
                        <li><input type="checkbox" id="c3533" onchange="updateProgress()"><label for="c3533">serial: accepts empty string</label></li>
                        <li><input type="checkbox" id="c3534" onchange="updateProgress()"><label for="c3534">category: accepts null</label></li>
                        <li><input type="checkbox" id="c3535" onchange="updateProgress()"><label for="c3535">notes: accepts empty string</label></li>
                        <li><input type="checkbox" id="c3536" onchange="updateProgress()"><label for="c3536">assetTag: auto-generates if empty</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Price Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3537" onchange="updateProgress()"><label for="c3537">**Negative price → rejected**</label></li>
                        <li><input type="checkbox" id="c3538" onchange="updateProgress()"><label for="c3538">**price = 0 → rejected**</label></li>
                        <li><input type="checkbox" id="c3539" onchange="updateProgress()"><label for="c3539">Positive decimal prices accepted (1999.99)</label></li>
                        <li><input type="checkbox" id="c3540" onchange="updateProgress()"><label for="c3540">priceQAR auto-calculated from price + currency</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Status Rules</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3541" onchange="updateProgress()"><label for="c3541">**Invalid status string → rejected**</label></li>
                        <li><input type="checkbox" id="c3542" onchange="updateProgress()"><label for="c3542">**IN_USE requires assignedMemberId**</label></li>
                        <li><input type="checkbox" id="c3543" onchange="updateProgress()"><label for="c3543">**IN_USE requires assignmentDate**</label></li>
                        <li><input type="checkbox" id="c3544" onchange="updateProgress()"><label for="c3544">SPARE, MAINTENANCE, DISPOSED don't require assignment</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Assignment Date Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3545" onchange="updateProgress()"><label for="c3545">**assignmentDate before purchaseDate → rejected**</label></li>
                        <li><input type="checkbox" id="c3546" onchange="updateProgress()"><label for="c3546">Empty assignedMemberId → transforms to null</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Complete Asset</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3547" onchange="updateProgress()"><label for="c3547">All fields accepted when valid</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Partial Updates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3548" onchange="updateProgress()"><label for="c3548">Allows partial updates (brand, notes only)</label></li>
                        <li><input type="checkbox" id="c3549" onchange="updateProgress()"><label for="c3549">Allows updating only status</label></li>
                        <li><input type="checkbox" id="c3550" onchange="updateProgress()"><label for="c3550">**Empty object accepted** (no changes)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Status Change Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3551" onchange="updateProgress()"><label for="c3551">Status change to IN_USE requires assignedMemberId + assignmentDate</label></li>
                        <li><input type="checkbox" id="c3552" onchange="updateProgress()"><label for="c3552">Validates constraints on status transitions</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Assignment</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3553" onchange="updateProgress()"><label for="c3553">**assignedMemberId required** (for assignment)</label></li>
                        <li><input type="checkbox" id="c3554" onchange="updateProgress()"><label for="c3554">**null accepted** (for unassignment)</label></li>
                        <li><input type="checkbox" id="c3555" onchange="updateProgress()"><label for="c3555">Empty object → rejected (missing field)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Defaults</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3556" onchange="updateProgress()"><label for="c3556">**p defaults to 1** (page)</label></li>
                        <li><input type="checkbox" id="c3557" onchange="updateProgress()"><label for="c3557">**ps defaults to 20** (page size)</label></li>
                        <li><input type="checkbox" id="c3558" onchange="updateProgress()"><label for="c3558">**sort defaults to createdAt**</label></li>
                        <li><input type="checkbox" id="c3559" onchange="updateProgress()"><label for="c3559">**order defaults to desc**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Coercion</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3560" onchange="updateProgress()"><label for="c3560">**String page coerced to number** (&quot;3&quot; → 3)</label></li>
                        <li><input type="checkbox" id="c3561" onchange="updateProgress()"><label for="c3561">**String pageSize coerced to number**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3562" onchange="updateProgress()"><label for="c3562">**page 0 → rejected** (min 1)</label></li>
                        <li><input type="checkbox" id="c3563" onchange="updateProgress()"><label for="c3563">**pageSize &gt; 100 → rejected** (max 100)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Sort Options</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3564" onchange="updateProgress()"><label for="c3564">Valid: model, brand, type, category, purchaseDate, warrantyExpiry, priceQAR, createdAt, assetTag</label></li>
                        <li><input type="checkbox" id="c3565" onchange="updateProgress()"><label for="c3565">**Invalid sort field → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Order Options</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3566" onchange="updateProgress()"><label for="c3566">**asc accepted**</label></li>
                        <li><input type="checkbox" id="c3567" onchange="updateProgress()"><label for="c3567">**desc accepted**</label></li>
                        <li><input type="checkbox" id="c3568" onchange="updateProgress()"><label for="c3568">**Invalid order → rejected** (e.g., &quot;random&quot;)</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-66" data-section="66">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 66</span>
                    <h3>SUPPLIER VALIDATION SCHEMAS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/validations/suppliers.test.ts src/features/suppliers/validations/suppliers.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3569" onchange="updateProgress()"><label for="c3569">**name required**</label></li>
                        <li><input type="checkbox" id="c3570" onchange="updateProgress()"><label for="c3570">**category required**</label></li>
                        <li><input type="checkbox" id="c3571" onchange="updateProgress()"><label for="c3571">Name empty → rejected</label></li>
                        <li><input type="checkbox" id="c3572" onchange="updateProgress()"><label for="c3572">Category empty → rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Website Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3573" onchange="updateProgress()"><label for="c3573">**https://example.com → valid**</label></li>
                        <li><input type="checkbox" id="c3574" onchange="updateProgress()"><label for="c3574">**http://example.com → valid**</label></li>
                        <li><input type="checkbox" id="c3575" onchange="updateProgress()"><label for="c3575">**example.com → valid** (domain only)</label></li>
                        <li><input type="checkbox" id="c3576" onchange="updateProgress()"><label for="c3576">**www.example.com → valid**</label></li>
                        <li><input type="checkbox" id="c3577" onchange="updateProgress()"><label for="c3577">**https://sub.example.co.uk → valid**</label></li>
                        <li><input type="checkbox" id="c3578" onchange="updateProgress()"><label for="c3578">**https://example.com/page → valid**</label></li>
                        <li><input type="checkbox" id="c3579" onchange="updateProgress()"><label for="c3579">**&quot;not a website&quot; → rejected**</label></li>
                        <li><input type="checkbox" id="c3580" onchange="updateProgress()"><label for="c3580">**&quot;ftp://example.com&quot; → rejected**</label></li>
                        <li><input type="checkbox" id="c3581" onchange="updateProgress()"><label for="c3581">**&quot;example&quot; → rejected** (no TLD)</label></li>
                        <li><input type="checkbox" id="c3582" onchange="updateProgress()"><label for="c3582">**Empty/null website accepted**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Establishment Year</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3583" onchange="updateProgress()"><label for="c3583">**1800 accepted** (minimum)</label></li>
                        <li><input type="checkbox" id="c3584" onchange="updateProgress()"><label for="c3584">**Current year accepted**</label></li>
                        <li><input type="checkbox" id="c3585" onchange="updateProgress()"><label for="c3585">**1799 → rejected** (before minimum)</label></li>
                        <li><input type="checkbox" id="c3586" onchange="updateProgress()"><label for="c3586">**Future year → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Contact Email Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3587" onchange="updateProgress()"><label for="c3587">**test@example.com → valid**</label></li>
                        <li><input type="checkbox" id="c3588" onchange="updateProgress()"><label for="c3588">**test.user@example.com → valid**</label></li>
                        <li><input type="checkbox" id="c3589" onchange="updateProgress()"><label for="c3589">**test+tag@example.com → valid**</label></li>
                        <li><input type="checkbox" id="c3590" onchange="updateProgress()"><label for="c3590">**&quot;notanemail&quot; → rejected**</label></li>
                        <li><input type="checkbox" id="c3591" onchange="updateProgress()"><label for="c3591">**&quot;test@&quot; → rejected**</label></li>
                        <li><input type="checkbox" id="c3592" onchange="updateProgress()"><label for="c3592">**&quot;@example.com&quot; → rejected**</label></li>
                        <li><input type="checkbox" id="c3593" onchange="updateProgress()"><label for="c3593">Secondary contact email also validated</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3594" onchange="updateProgress()"><label for="c3594">address, city, country: null/empty accepted</label></li>
                        <li><input type="checkbox" id="c3595" onchange="updateProgress()"><label for="c3595">primaryContactName, primaryContactEmail: null/empty accepted</label></li>
                        <li><input type="checkbox" id="c3596" onchange="updateProgress()"><label for="c3596">additionalInfo: empty accepted</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Partial Updates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3597" onchange="updateProgress()"><label for="c3597">Allows updating name and city only</label></li>
                        <li><input type="checkbox" id="c3598" onchange="updateProgress()"><label for="c3598">**Empty object accepted**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Validation on Update</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3599" onchange="updateProgress()"><label for="c3599">Website still validated on update</label></li>
                        <li><input type="checkbox" id="c3600" onchange="updateProgress()"><label for="c3600">Email still validated on update</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>66.3 approveSupplierSchema</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3601" onchange="updateProgress()"><label for="c3601">**approvedById required**</label></li>
                        <li><input type="checkbox" id="c3602" onchange="updateProgress()"><label for="c3602">**Empty approvedById → rejected**</label></li>
                        <li><input type="checkbox" id="c3603" onchange="updateProgress()"><label for="c3603">Empty object → rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>66.4 rejectSupplierSchema</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3604" onchange="updateProgress()"><label for="c3604">**rejectionReason required**</label></li>
                        <li><input type="checkbox" id="c3605" onchange="updateProgress()"><label for="c3605">**Empty reason → rejected**</label></li>
                        <li><input type="checkbox" id="c3606" onchange="updateProgress()"><label for="c3606">Empty object → rejected</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3607" onchange="updateProgress()"><label for="c3607">**date required**</label></li>
                        <li><input type="checkbox" id="c3608" onchange="updateProgress()"><label for="c3608">**notes required**</label></li>
                        <li><input type="checkbox" id="c3609" onchange="updateProgress()"><label for="c3609">**createdById required**</label></li>
                        <li><input type="checkbox" id="c3610" onchange="updateProgress()"><label for="c3610">Empty notes → rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Rating Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3611" onchange="updateProgress()"><label for="c3611">**Rating 1-5 → valid**</label></li>
                        <li><input type="checkbox" id="c3612" onchange="updateProgress()"><label for="c3612">**Rating 0 → rejected**</label></li>
                        <li><input type="checkbox" id="c3613" onchange="updateProgress()"><label for="c3613">**Rating 6 → rejected**</label></li>
                        <li><input type="checkbox" id="c3614" onchange="updateProgress()"><label for="c3614">**Rating -1 → rejected**</label></li>
                        <li><input type="checkbox" id="c3615" onchange="updateProgress()"><label for="c3615">**null rating accepted** (optional)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Rating</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3616" onchange="updateProgress()"><label for="c3616">Engagement without rating accepted</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Defaults</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3617" onchange="updateProgress()"><label for="c3617">**p defaults to 1**</label></li>
                        <li><input type="checkbox" id="c3618" onchange="updateProgress()"><label for="c3618">**ps defaults to 20**</label></li>
                        <li><input type="checkbox" id="c3619" onchange="updateProgress()"><label for="c3619">**sort defaults to createdAt**</label></li>
                        <li><input type="checkbox" id="c3620" onchange="updateProgress()"><label for="c3620">**order defaults to desc**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Status Filter</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3621" onchange="updateProgress()"><label for="c3621">PENDING, APPROVED, REJECTED all valid</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3622" onchange="updateProgress()"><label for="c3622">**page 0 → rejected**</label></li>
                        <li><input type="checkbox" id="c3623" onchange="updateProgress()"><label for="c3623">**pageSize &gt; 100 → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Sort Options</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3624" onchange="updateProgress()"><label for="c3624">Valid: name, category, suppCode, createdAt</label></li>
                        <li><input type="checkbox" id="c3625" onchange="updateProgress()"><label for="c3625">**Invalid sort → rejected**</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-67" data-section="67">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 67</span>
                    <h3>CSRF PROTECTION DETAILS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/security/csrf.test.ts src/lib/security/csrf.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Token Format</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3626" onchange="updateProgress()"><label for="c3626">**64-character hex token** (32 bytes)</label></li>
                        <li><input type="checkbox" id="c3627" onchange="updateProgress()"><label for="c3627">Uses cryptographically secure random bytes</label></li>
                        <li><input type="checkbox" id="c3628" onchange="updateProgress()"><label for="c3628">**Unique tokens per call**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Signing</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3629" onchange="updateProgress()"><label for="c3629">**HMAC-SHA256 for signing**</label></li>
                        <li><input type="checkbox" id="c3630" onchange="updateProgress()"><label for="c3630">Format: token.signature</label></li>
                        <li><input type="checkbox" id="c3631" onchange="updateProgress()"><label for="c3631">Signature appended to token</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Valid Tokens</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3632" onchange="updateProgress()"><label for="c3632">Valid signed token → true</label></li>
                        <li><input type="checkbox" id="c3633" onchange="updateProgress()"><label for="c3633">Recreates signature to verify</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Invalid Tokens</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3634" onchange="updateProgress()"><label for="c3634">**Token without signature (no dot) → false**</label></li>
                        <li><input type="checkbox" id="c3635" onchange="updateProgress()"><label for="c3635">**Empty token → false**</label></li>
                        <li><input type="checkbox" id="c3636" onchange="updateProgress()"><label for="c3636">**Invalid signature → false**</label></li>
                        <li><input type="checkbox" id="c3637" onchange="updateProgress()"><label for="c3637">Signature must match expected</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Security Options</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3638" onchange="updateProgress()"><label for="c3638">**httpOnly: true** (no JavaScript access)</label></li>
                        <li><input type="checkbox" id="c3639" onchange="updateProgress()"><label for="c3639">**sameSite: strict** (CSRF prevention)</label></li>
                        <li><input type="checkbox" id="c3640" onchange="updateProgress()"><label for="c3640">**maxAge: 86400** (24 hours)</label></li>
                        <li><input type="checkbox" id="c3641" onchange="updateProgress()"><label for="c3641">**path: /** (all routes)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Environment-Aware</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3642" onchange="updateProgress()"><label for="c3642">**secure: true in production**</label></li>
                        <li><input type="checkbox" id="c3643" onchange="updateProgress()"><label for="c3643">**secure: false in development**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Cookie Prefix</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3644" onchange="updateProgress()"><label for="c3644">**__Host-csrf-token** (secure cookie binding)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Same-Origin Requests</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3645" onchange="updateProgress()"><label for="c3645">**No origin header → same-origin → valid**</label></li>
                        <li><input type="checkbox" id="c3646" onchange="updateProgress()"><label for="c3646">**No referer header → same-origin → valid**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Valid Referer</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3647" onchange="updateProgress()"><label for="c3647">**Same domain → valid**</label></li>
                        <li><input type="checkbox" id="c3648" onchange="updateProgress()"><label for="c3648">**Subdomain → valid** (tenant.example.com)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Localhost Development</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3649" onchange="updateProgress()"><label for="c3649">**localhost:3000 → valid in dev mode**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Cross-Origin Rejection</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3650" onchange="updateProgress()"><label for="c3650">**Unknown domain → rejected**</label></li>
                        <li><input type="checkbox" id="c3651" onchange="updateProgress()"><label for="c3651">**Invalid URL → rejected**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Safe Methods (Skipped)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3652" onchange="updateProgress()"><label for="c3652">**GET → no CSRF check**</label></li>
                        <li><input type="checkbox" id="c3653" onchange="updateProgress()"><label for="c3653">**HEAD → no CSRF check**</label></li>
                        <li><input type="checkbox" id="c3654" onchange="updateProgress()"><label for="c3654">**OPTIONS → no CSRF check**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Protected Methods</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3655" onchange="updateProgress()"><label for="c3655">POST, PUT, PATCH, DELETE require CSRF</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Route Exclusions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3656" onchange="updateProgress()"><label for="c3656">**Non-API routes → skipped**</label></li>
                        <li><input type="checkbox" id="c3657" onchange="updateProgress()"><label for="c3657">**/api/auth/* → skipped** (auth callbacks)</label></li>
                        <li><input type="checkbox" id="c3658" onchange="updateProgress()"><label for="c3658">**/api/webhooks/* → skipped** (external webhooks)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Failure Response</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3659" onchange="updateProgress()"><label for="c3659">**Invalid CSRF → 403 Forbidden**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>From Cookie</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3660" onchange="updateProgress()"><label for="c3660">Existing valid token reused</label></li>
                        <li><input type="checkbox" id="c3661" onchange="updateProgress()"><label for="c3661">Extracts unsigned token from signed value</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>New Token Generation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3662" onchange="updateProgress()"><label for="c3662">**Missing cookie → new token generated**</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-68" data-section="68">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 68</span>
                    <h3>PASSWORD VALIDATION</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/security/password-validation.test.ts src/lib/security/password-validation.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Default Users</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3663" onchange="updateProgress()"><label for="c3663">**Minimum 8 characters**</label></li>
                        <li><input type="checkbox" id="c3664" onchange="updateProgress()"><label for="c3664">7 characters → rejected with error message</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Admin Users</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3665" onchange="updateProgress()"><label for="c3665">**Minimum 12 characters**</label></li>
                        <li><input type="checkbox" id="c3666" onchange="updateProgress()"><label for="c3666">Admin with 11 chars → rejected</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Length Bonuses</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3667" onchange="updateProgress()"><label for="c3667">**12+ chars → bonus score**</label></li>
                        <li><input type="checkbox" id="c3668" onchange="updateProgress()"><label for="c3668">**16+ chars → additional bonus**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Uppercase</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3669" onchange="updateProgress()"><label for="c3669">**Uppercase required** (default)</label></li>
                        <li><input type="checkbox" id="c3670" onchange="updateProgress()"><label for="c3670">Missing uppercase → error message</label></li>
                        <li><input type="checkbox" id="c3671" onchange="updateProgress()"><label for="c3671">Presence increases score</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Lowercase</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3672" onchange="updateProgress()"><label for="c3672">**Lowercase required**</label></li>
                        <li><input type="checkbox" id="c3673" onchange="updateProgress()"><label for="c3673">Missing lowercase → error message</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Numbers</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3674" onchange="updateProgress()"><label for="c3674">**Number required**</label></li>
                        <li><input type="checkbox" id="c3675" onchange="updateProgress()"><label for="c3675">Missing number → error message</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Special Characters</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3676" onchange="updateProgress()"><label for="c3676">**Optional for default users**</label></li>
                        <li><input type="checkbox" id="c3677" onchange="updateProgress()"><label for="c3677">**Required for admin users**</label></li>
                        <li><input type="checkbox" id="c3678" onchange="updateProgress()"><label for="c3678">Presence increases score</label></li>
                        <li><input type="checkbox" id="c3679" onchange="updateProgress()"><label for="c3679">Missing for admin → specific error message</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Detected Passwords</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3680" onchange="updateProgress()"><label for="c3680">**&quot;password&quot; → score 0**</label></li>
                        <li><input type="checkbox" id="c3681" onchange="updateProgress()"><label for="c3681">**&quot;123456&quot; → score 0**</label></li>
                        <li><input type="checkbox" id="c3682" onchange="updateProgress()"><label for="c3682">**&quot;qwerty&quot; → score 0**</label></li>
                        <li><input type="checkbox" id="c3683" onchange="updateProgress()"><label for="c3683">**&quot;admin&quot; → score 0**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Variations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3684" onchange="updateProgress()"><label for="c3684">password123 → still detected (low score)</label></li>
                        <li><input type="checkbox" id="c3685" onchange="updateProgress()"><label for="c3685">admin12345 → detected</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Score Reduction</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3686" onchange="updateProgress()"><label for="c3686">**Only letters → reduced score**</label></li>
                        <li><input type="checkbox" id="c3687" onchange="updateProgress()"><label for="c3687">**Only numbers → reduced score**</label></li>
                        <li><input type="checkbox" id="c3688" onchange="updateProgress()"><label for="c3688">**Repeated characters → reduced score** (Aaaaaa123)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Mixed Characters</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3689" onchange="updateProgress()"><label for="c3689">Mixed types improve score</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Score Ranges</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3690" onchange="updateProgress()"><label for="c3690">**Score 0-1 → &quot;weak&quot;**</label></li>
                        <li><input type="checkbox" id="c3691" onchange="updateProgress()"><label for="c3691">**Score 2 → &quot;fair&quot;**</label></li>
                        <li><input type="checkbox" id="c3692" onchange="updateProgress()"><label for="c3692">**Score 3 → &quot;good&quot;**</label></li>
                        <li><input type="checkbox" id="c3693" onchange="updateProgress()"><label for="c3693">**Score 4 → &quot;strong&quot;**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Colors</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3694" onchange="updateProgress()"><label for="c3694">weak → red (#ef4444)</label></li>
                        <li><input type="checkbox" id="c3695" onchange="updateProgress()"><label for="c3695">fair → orange</label></li>
                        <li><input type="checkbox" id="c3696" onchange="updateProgress()"><label for="c3696">good → yellow</label></li>
                        <li><input type="checkbox" id="c3697" onchange="updateProgress()"><label for="c3697">strong → green (#22c55e)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>DEFAULT_PASSWORD_REQUIREMENTS</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3698" onchange="updateProgress()"><label for="c3698">minLength: 8</label></li>
                        <li><input type="checkbox" id="c3699" onchange="updateProgress()"><label for="c3699">requireUppercase: true</label></li>
                        <li><input type="checkbox" id="c3700" onchange="updateProgress()"><label for="c3700">requireLowercase: true</label></li>
                        <li><input type="checkbox" id="c3701" onchange="updateProgress()"><label for="c3701">requireNumber: true</label></li>
                        <li><input type="checkbox" id="c3702" onchange="updateProgress()"><label for="c3702">requireSpecial: false</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>ADMIN_PASSWORD_REQUIREMENTS</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3703" onchange="updateProgress()"><label for="c3703">minLength: 12</label></li>
                        <li><input type="checkbox" id="c3704" onchange="updateProgress()"><label for="c3704">requireUppercase: true</label></li>
                        <li><input type="checkbox" id="c3705" onchange="updateProgress()"><label for="c3705">requireLowercase: true</label></li>
                        <li><input type="checkbox" id="c3706" onchange="updateProgress()"><label for="c3706">requireNumber: true</label></li>
                        <li><input type="checkbox" id="c3707" onchange="updateProgress()"><label for="c3707">**requireSpecial: true**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Empty/Invalid</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3708" onchange="updateProgress()"><label for="c3708">**Empty string → invalid** with errors</label></li>
                        <li><input type="checkbox" id="c3709" onchange="updateProgress()"><label for="c3709">**Very long passwords → valid** (100+ chars)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Unicode</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3710" onchange="updateProgress()"><label for="c3710">**Unicode characters accepted** (Pässwörd123!)</label></li>
                        <li><input type="checkbox" id="c3711" onchange="updateProgress()"><label for="c3711">Number requirement still validated</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Special Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3712" onchange="updateProgress()"><label for="c3712">**Only special chars → valid** (if meeting requirements)</label></li>
                        <li><input type="checkbox" id="c3713" onchange="updateProgress()"><label for="c3713">**Whitespace in password → valid** (increases entropy)</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-69" data-section="69">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 69</span>
                    <h3>LEAVE REQUEST VALIDATION</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/leave/leave-request-validation.test.ts src/features/leave/lib/leave-request-validation.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Standard Leave</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3714" onchange="updateProgress()"><label for="c3714">Standard leave type → valid for all</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Parental/Religious Leave</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3715" onchange="updateProgress()"><label for="c3715">**Without admin assignment → rejected**</label></li>
                        <li><input type="checkbox" id="c3716" onchange="updateProgress()"><label for="c3716">Error: &quot;must be assigned by an administrator&quot;</label></li>
                        <li><input type="checkbox" id="c3717" onchange="updateProgress()"><label for="c3717">**With existing balance → valid** (admin assigned)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Gender Restriction</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3718" onchange="updateProgress()"><label for="c3718">**Maternity for male → rejected**</label></li>
                        <li><input type="checkbox" id="c3719" onchange="updateProgress()"><label for="c3719">Error: &quot;only available for female employees&quot;</label></li>
                        <li><input type="checkbox" id="c3720" onchange="updateProgress()"><label for="c3720">**Paternity for female → rejected**</label></li>
                        <li><input type="checkbox" id="c3721" onchange="updateProgress()"><label for="c3721">Error: &quot;only available for male employees&quot;</label></li>
                        <li><input type="checkbox" id="c3722" onchange="updateProgress()"><label for="c3722">**Gender not recorded → rejected** with profile update request</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Service Requirement</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3723" onchange="updateProgress()"><label for="c3723">**Insufficient service months → rejected**</label></li>
                        <li><input type="checkbox" id="c3724" onchange="updateProgress()"><label for="c3724">Error: &quot;must complete service&quot;</label></li>
                        <li><input type="checkbox" id="c3725" onchange="updateProgress()"><label for="c3725">**Date of joining not recorded → rejected**</label></li>
                        <li><input type="checkbox" id="c3726" onchange="updateProgress()"><label for="c3726">Service calculated from join date to start date</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Hajj Leave</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3727" onchange="updateProgress()"><label for="c3727">**Already taken (hajjLeaveTaken: true) → rejected**</label></li>
                        <li><input type="checkbox" id="c3728" onchange="updateProgress()"><label for="c3728">Error: &quot;can only be taken once...already used&quot;</label></li>
                        <li><input type="checkbox" id="c3729" onchange="updateProgress()"><label for="c3729">**Existing pending request → rejected**</label></li>
                        <li><input type="checkbox" id="c3730" onchange="updateProgress()"><label for="c3730">Error: &quot;already have a pending request&quot;</label></li>
                        <li><input type="checkbox" id="c3731" onchange="updateProgress()"><label for="c3731">**Existing approved request → rejected**</label></li>
                        <li><input type="checkbox" id="c3732" onchange="updateProgress()"><label for="c3732">**Not taken + no request → valid**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Non-Once Leave</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3733" onchange="updateProgress()"><label for="c3733">Non-once-in-employment leave → always valid</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Working Days Calculation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3734" onchange="updateProgress()"><label for="c3734">**Sun-Thu counted** (Qatar work week)</label></li>
                        <li><input type="checkbox" id="c3735" onchange="updateProgress()"><label for="c3735">**Fri-Sat excluded** (weekend)</label></li>
                        <li><input type="checkbox" id="c3736" onchange="updateProgress()"><label for="c3736">Full day range calculated correctly</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Accrual-Based Leave</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3737" onchange="updateProgress()"><label for="c3737">**Includes weekends in count** (calendar days)</label></li>
                        <li><input type="checkbox" id="c3738" onchange="updateProgress()"><label for="c3738">7-day range = 7 days (not 5)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>No Working Days</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3739" onchange="updateProgress()"><label for="c3739">**Fri-Sat only → error** &quot;No working days in range&quot;</label></li>
                        <li><input type="checkbox" id="c3740" onchange="updateProgress()"><label for="c3740">totalDays: 0</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Half-Day Requests</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3741" onchange="updateProgress()"><label for="c3741">**Half-day → 0.5 days**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3742" onchange="updateProgress()"><label for="c3742">**Notice days not met → rejected**</label></li>
                        <li><input type="checkbox" id="c3743" onchange="updateProgress()"><label for="c3743">Error: &quot;requires at least X days advance notice&quot;</label></li>
                        <li><input type="checkbox" id="c3744" onchange="updateProgress()"><label for="c3744">Days calculated from today to start date</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Bypass Options</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3745" onchange="updateProgress()"><label for="c3745">**Admin with override → notice skipped**</label></li>
                        <li><input type="checkbox" id="c3746" onchange="updateProgress()"><label for="c3746">**User with bypass flag → notice skipped**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Limit Enforcement</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3747" onchange="updateProgress()"><label for="c3747">**Exceeds max → rejected**</label></li>
                        <li><input type="checkbox" id="c3748" onchange="updateProgress()"><label for="c3748">Error: &quot;maximum of X consecutive days&quot;</label></li>
                        <li><input type="checkbox" id="c3749" onchange="updateProgress()"><label for="c3749">Checked after working days calculation</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>No Overlap Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3750" onchange="updateProgress()"><label for="c3750">No existing requests → valid</label></li>
                        <li><input type="checkbox" id="c3751" onchange="updateProgress()"><label for="c3751">Non-overlapping dates → valid</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Overlap Cases</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3752" onchange="updateProgress()"><label for="c3752">**Fully overlapping → rejected**</label></li>
                        <li><input type="checkbox" id="c3753" onchange="updateProgress()"><label for="c3753">**Partial overlap (start) → rejected**</label></li>
                        <li><input type="checkbox" id="c3754" onchange="updateProgress()"><label for="c3754">**Partial overlap (end) → rejected**</label></li>
                        <li><input type="checkbox" id="c3755" onchange="updateProgress()"><label for="c3755">**New request encompasses existing → rejected**</label></li>
                        <li><input type="checkbox" id="c3756" onchange="updateProgress()"><label for="c3756">Error: &quot;overlaps with these dates&quot;</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Unpaid Leave</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3757" onchange="updateProgress()"><label for="c3757">**Unpaid leave → always valid** (no balance check)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Paid Leave</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3758" onchange="updateProgress()"><label for="c3758">**Sufficient balance → valid**</label></li>
                        <li><input type="checkbox" id="c3759" onchange="updateProgress()"><label for="c3759">Available = entitlement + carried + adjustment - used</label></li>
                        <li><input type="checkbox" id="c3760" onchange="updateProgress()"><label for="c3760">**Insufficient balance → rejected**</label></li>
                        <li><input type="checkbox" id="c3761" onchange="updateProgress()"><label for="c3761">Error includes available amount: &quot;INSUFFICIENT_BALANCE:6&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Balance Components</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3762" onchange="updateProgress()"><label for="c3762">Carried forward included</label></li>
                        <li><input type="checkbox" id="c3763" onchange="updateProgress()"><label for="c3763">Adjustment included</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Leave Types</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3764" onchange="updateProgress()"><label for="c3764">**Document required + not provided → rejected**</label></li>
                        <li><input type="checkbox" id="c3765" onchange="updateProgress()"><label for="c3765">Error: &quot;requires a supporting document&quot;</label></li>
                        <li><input type="checkbox" id="c3766" onchange="updateProgress()"><label for="c3766">**Document provided → valid**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Exemptions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3767" onchange="updateProgress()"><label for="c3767">**1-day leave → document not required**</label></li>
                        <li><input type="checkbox" id="c3768" onchange="updateProgress()"><label for="c3768">**Half-day leave (0.5) → document not required**</label></li>
                        <li><input type="checkbox" id="c3769" onchange="updateProgress()"><label for="c3769">**Multi-day leave → document required**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Non-Required Types</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3770" onchange="updateProgress()"><label for="c3770">Leave type not requiring docs → always valid</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>69.9 Service Requirement Formatting</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3771" onchange="updateProgress()"><label for="c3771">6 months → &quot;6 month(s)&quot;</label></li>
                        <li><input type="checkbox" id="c3772" onchange="updateProgress()"><label for="c3772">24 months → &quot;2 year(s)&quot;</label></li>
                        <li><input type="checkbox" id="c3773" onchange="updateProgress()"><label for="c3773">18 months → &quot;1 year(s) and 6 month(s)&quot;</label></li>
                        <li><input type="checkbox" id="c3774" onchange="updateProgress()"><label for="c3774">12 months → &quot;1 year(s)&quot;</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-70" data-section="70">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 70</span>
                    <h3>ASSET IMPORT</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/assets/asset-import.test.ts src/features/assets/lib/asset-import.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Type Required</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3775" onchange="updateProgress()"><label for="c3775">**Missing Type → rejected**</label></li>
                        <li><input type="checkbox" id="c3776" onchange="updateProgress()"><label for="c3776">Error mentions &quot;Type&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Model Required</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3777" onchange="updateProgress()"><label for="c3777">**Missing Model → rejected**</label></li>
                        <li><input type="checkbox" id="c3778" onchange="updateProgress()"><label for="c3778">Error mentions &quot;Model&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Both Missing</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3779" onchange="updateProgress()"><label for="c3779">**Missing both → rejected**</label></li>
                        <li><input type="checkbox" id="c3780" onchange="updateProgress()"><label for="c3780">Error mentions &quot;required&quot;</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Minimal Valid</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3781" onchange="updateProgress()"><label for="c3781">Type + Model only → success</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Case Variations</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3782" onchange="updateProgress()"><label for="c3782">**&quot;Asset Type&quot; → accepted** as type</label></li>
                        <li><input type="checkbox" id="c3783" onchange="updateProgress()"><label for="c3783">**&quot;type&quot; lowercase → accepted**</label></li>
                        <li><input type="checkbox" id="c3784" onchange="updateProgress()"><label for="c3784">**&quot;model&quot; lowercase → accepted**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Snake Case</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3785" onchange="updateProgress()"><label for="c3785">**&quot;asset_tag&quot; → accepted** as assetTag</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Alternate Names</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3786" onchange="updateProgress()"><label for="c3786">**&quot;Serial Number&quot; → accepted** as serial</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Default Status</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3787" onchange="updateProgress()"><label for="c3787">**Not provided → defaults to IN_USE**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Valid Statuses</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3788" onchange="updateProgress()"><label for="c3788">IN_USE parsed correctly</label></li>
                        <li><input type="checkbox" id="c3789" onchange="updateProgress()"><label for="c3789">SPARE parsed correctly</label></li>
                        <li><input type="checkbox" id="c3790" onchange="updateProgress()"><label for="c3790">REPAIR parsed correctly</label></li>
                        <li><input type="checkbox" id="c3791" onchange="updateProgress()"><label for="c3791">DISPOSED parsed correctly</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Invalid Status</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3792" onchange="updateProgress()"><label for="c3792">**Invalid status → defaults to IN_USE**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Default Currency</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3793" onchange="updateProgress()"><label for="c3793">**Not provided → defaults to QAR**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Valid Currencies</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3794" onchange="updateProgress()"><label for="c3794">QAR parsed correctly</label></li>
                        <li><input type="checkbox" id="c3795" onchange="updateProgress()"><label for="c3795">USD parsed correctly</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Invalid Currency</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3796" onchange="updateProgress()"><label for="c3796">**EUR → defaults to QAR** (not supported)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Numeric Values</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3797" onchange="updateProgress()"><label for="c3797">Integer price parsed (5000)</label></li>
                        <li><input type="checkbox" id="c3798" onchange="updateProgress()"><label for="c3798">Decimal price parsed (5000.50)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Non-Numeric Values</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3799" onchange="updateProgress()"><label for="c3799">**&quot;free&quot; → null**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>QAR Conversion</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3800" onchange="updateProgress()"><label for="c3800">QAR price → calculates priceQAR</label></li>
                        <li><input type="checkbox" id="c3801" onchange="updateProgress()"><label for="c3801">USD price → converts to QAR equivalent</label></li>
                        <li><input type="checkbox" id="c3802" onchange="updateProgress()"><label for="c3802">Uses exchange rate (3.64)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Valid Dates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3803" onchange="updateProgress()"><label for="c3803">Purchase date parsed as Date object</label></li>
                        <li><input type="checkbox" id="c3804" onchange="updateProgress()"><label for="c3804">Warranty expiry parsed as Date object</label></li>
                        <li><input type="checkbox" id="c3805" onchange="updateProgress()"><label for="c3805">ISO format accepted (2024-01-15)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Missing Dates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3806" onchange="updateProgress()"><label for="c3806">**Not provided → null**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Parsed Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3807" onchange="updateProgress()"><label for="c3807">Brand parsed from &quot;Brand&quot; column</label></li>
                        <li><input type="checkbox" id="c3808" onchange="updateProgress()"><label for="c3808">Category parsed from &quot;Category&quot; column</label></li>
                        <li><input type="checkbox" id="c3809" onchange="updateProgress()"><label for="c3809">Serial parsed from &quot;Serial&quot; column</label></li>
                        <li><input type="checkbox" id="c3810" onchange="updateProgress()"><label for="c3810">Supplier parsed from &quot;Supplier&quot; column</label></li>
                        <li><input type="checkbox" id="c3811" onchange="updateProgress()"><label for="c3811">Configuration parsed from &quot;Configuration&quot; column</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Missing Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3812" onchange="updateProgress()"><label for="c3812">**All optional fields → null when missing**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>ID for Updates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3813" onchange="updateProgress()"><label for="c3813">**ID column parsed** for update scenarios</label></li>
                        <li><input type="checkbox" id="c3814" onchange="updateProgress()"><label for="c3814">**Not provided → undefined**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Asset Tag</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3815" onchange="updateProgress()"><label for="c3815">Asset Tag column parsed</label></li>
                        <li><input type="checkbox" id="c3816" onchange="updateProgress()"><label for="c3816">Used for duplicate checking</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Prisma-Compatible Output</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3817" onchange="updateProgress()"><label for="c3817">Returns object with all asset fields</label></li>
                        <li><input type="checkbox" id="c3818" onchange="updateProgress()"><label for="c3818">Includes: type, category, brand, model</label></li>
                        <li><input type="checkbox" id="c3819" onchange="updateProgress()"><label for="c3819">Includes: serial, configuration, supplier</label></li>
                        <li><input type="checkbox" id="c3820" onchange="updateProgress()"><label for="c3820">Includes: purchaseDate, warrantyExpiry</label></li>
                        <li><input type="checkbox" id="c3821" onchange="updateProgress()"><label for="c3821">Includes: price, priceCurrency, priceQAR</label></li>
                        <li><input type="checkbox" id="c3822" onchange="updateProgress()"><label for="c3822">Includes: status, assignedMemberId</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Null Handling</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3823" onchange="updateProgress()"><label for="c3823">**Null optional fields preserved as null**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>ID Exclusion</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3824" onchange="updateProgress()"><label for="c3824">**ID not included in db data** (for creates)</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-71" data-section="71">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 71</span>
                    <h3>HR PROFILE VALIDATION SCHEMAS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/validations/hr-profile.test.ts src/lib/validations/hr-profile.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Valid QID</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3825" onchange="updateProgress()"><label for="c3825">**11-digit QID accepted** (e.g., 28412345678)</label></li>
                        <li><input type="checkbox" id="c3826" onchange="updateProgress()"><label for="c3826">All numeric QID accepted</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Invalid QID</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3827" onchange="updateProgress()"><label for="c3827">**&lt; 11 digits → rejected**</label></li>
                        <li><input type="checkbox" id="c3828" onchange="updateProgress()"><label for="c3828">**&gt; 11 digits → rejected**</label></li>
                        <li><input type="checkbox" id="c3829" onchange="updateProgress()"><label for="c3829">**Non-numeric characters → rejected** (1234567890A)</label></li>
                        <li><input type="checkbox" id="c3830" onchange="updateProgress()"><label for="c3830">**Contains hyphen → rejected** (12345-67890)</label></li>
                        <li><input type="checkbox" id="c3831" onchange="updateProgress()"><label for="c3831">**Empty string → rejected**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Valid Mobile</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3832" onchange="updateProgress()"><label for="c3832">**8-digit Qatar mobile accepted** (33445566)</label></li>
                        <li><input type="checkbox" id="c3833" onchange="updateProgress()"><label for="c3833">Prefix 3, 5, 7 all accepted</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Invalid Mobile</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3834" onchange="updateProgress()"><label for="c3834">**&lt; 8 digits → rejected**</label></li>
                        <li><input type="checkbox" id="c3835" onchange="updateProgress()"><label for="c3835">**&gt; 8 digits → rejected**</label></li>
                        <li><input type="checkbox" id="c3836" onchange="updateProgress()"><label for="c3836">**Non-numeric → rejected** (3344556A)</label></li>
                        <li><input type="checkbox" id="c3837" onchange="updateProgress()"><label for="c3837">**Contains country code → rejected** (+9743344)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Valid IBAN</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3838" onchange="updateProgress()"><label for="c3838">**Qatar IBAN accepted** (QA12QNBA000000000012345678901)</label></li>
                        <li><input type="checkbox" id="c3839" onchange="updateProgress()"><label for="c3839">**German IBAN accepted** (DE89370400440532013000)</label></li>
                        <li><input type="checkbox" id="c3840" onchange="updateProgress()"><label for="c3840">**UK IBAN accepted** (GB82WEST12345698765432)</label></li>
                        <li><input type="checkbox" id="c3841" onchange="updateProgress()"><label for="c3841">**IBAN with spaces → valid** (spaces stripped)</label></li>
                        <li><input type="checkbox" id="c3842" onchange="updateProgress()"><label for="c3842">**Lowercase → valid** (case insensitive)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Invalid IBAN</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3843" onchange="updateProgress()"><label for="c3843">**&quot;INVALID&quot; text → rejected**</label></li>
                        <li><input type="checkbox" id="c3844" onchange="updateProgress()"><label for="c3844">**Numeric only → rejected** (12345678)</label></li>
                        <li><input type="checkbox" id="c3845" onchange="updateProgress()"><label for="c3845">**Too short → rejected** (QA)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Valid Passport</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3846" onchange="updateProgress()"><label for="c3846">**Alphanumeric accepted** (AB1234567)</label></li>
                        <li><input type="checkbox" id="c3847" onchange="updateProgress()"><label for="c3847">**Numeric only accepted** (123456789)</label></li>
                        <li><input type="checkbox" id="c3848" onchange="updateProgress()"><label for="c3848">**5 characters → valid** (minimum)</label></li>
                        <li><input type="checkbox" id="c3849" onchange="updateProgress()"><label for="c3849">**20 characters → valid** (maximum)</label></li>
                        <li><input type="checkbox" id="c3850" onchange="updateProgress()"><label for="c3850">**Lowercase → valid** (case insensitive)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Invalid Passport</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3851" onchange="updateProgress()"><label for="c3851">**&lt; 5 characters → rejected**</label></li>
                        <li><input type="checkbox" id="c3852" onchange="updateProgress()"><label for="c3852">**&gt; 20 characters → rejected**</label></li>
                        <li><input type="checkbox" id="c3853" onchange="updateProgress()"><label for="c3853">**Contains hyphen → rejected** (AB-123456)</label></li>
                        <li><input type="checkbox" id="c3854" onchange="updateProgress()"><label for="c3854">**Contains space → rejected** (AB 123456)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>All Fields Optional</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3855" onchange="updateProgress()"><label for="c3855">**Empty object → valid**</label></li>
                        <li><input type="checkbox" id="c3856" onchange="updateProgress()"><label for="c3856">**Null values accepted** for optional fields</label></li>
                        <li><input type="checkbox" id="c3857" onchange="updateProgress()"><label for="c3857">**Empty strings accepted** for optional fields</label></li>
                        <li><input type="checkbox" id="c3858" onchange="updateProgress()"><label for="c3858">**Passthrough allows extra fields**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Field-Level Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3859" onchange="updateProgress()"><label for="c3859">QID validation applied</label></li>
                        <li><input type="checkbox" id="c3860" onchange="updateProgress()"><label for="c3860">Qatar mobile validation applied</label></li>
                        <li><input type="checkbox" id="c3861" onchange="updateProgress()"><label for="c3861">Personal email format validated</label></li>
                        <li><input type="checkbox" id="c3862" onchange="updateProgress()"><label for="c3862">IBAN validation applied</label></li>
                        <li><input type="checkbox" id="c3863" onchange="updateProgress()"><label for="c3863">Passport validation applied</label></li>
                        <li><input type="checkbox" id="c3864" onchange="updateProgress()"><label for="c3864">Emergency phone validated (5-15 digits)</label></li>
                        <li><input type="checkbox" id="c3865" onchange="updateProgress()"><label for="c3865">Other mobile validated (5-15 digits)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Graduation Year</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3866" onchange="updateProgress()"><label for="c3866">**1950 → valid** (minimum)</label></li>
                        <li><input type="checkbox" id="c3867" onchange="updateProgress()"><label for="c3867">**Current year → valid** (maximum)</label></li>
                        <li><input type="checkbox" id="c3868" onchange="updateProgress()"><label for="c3868">**&lt; 1950 → rejected**</label></li>
                        <li><input type="checkbox" id="c3869" onchange="updateProgress()"><label for="c3869">**Future year → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Onboarding Step</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3870" onchange="updateProgress()"><label for="c3870">**0-10 → valid** (integer range)</label></li>
                        <li><input type="checkbox" id="c3871" onchange="updateProgress()"><label for="c3871">**11 → rejected**</label></li>
                        <li><input type="checkbox" id="c3872" onchange="updateProgress()"><label for="c3872">**-1 → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Boolean Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3873" onchange="updateProgress()"><label for="c3873">hasDrivingLicense: boolean</label></li>
                        <li><input type="checkbox" id="c3874" onchange="updateProgress()"><label for="c3874">onboardingComplete: boolean</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>hrProfileAdminSchema</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3875" onchange="updateProgress()"><label for="c3875">**Includes employeeId field**</label></li>
                        <li><input type="checkbox" id="c3876" onchange="updateProgress()"><label for="c3876">Can update any profile field</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>hrProfileEmployeeSchema</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3877" onchange="updateProgress()"><label for="c3877">**Omits employeeId field** (employees cannot change own ID)</label></li>
                        <li><input type="checkbox" id="c3878" onchange="updateProgress()"><label for="c3878">Still allows passthrough fields</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Coercion</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3879" onchange="updateProgress()"><label for="c3879">**String graduation year coerced** (&quot;2015&quot; → 2015)</label></li>
                        <li><input type="checkbox" id="c3880" onchange="updateProgress()"><label for="c3880">**String onboarding step coerced** (&quot;5&quot; → 5)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>JSON Arrays as Strings</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3881" onchange="updateProgress()"><label for="c3881">**languagesKnown accepts JSON array string**</label></li>
                        <li><input type="checkbox" id="c3882" onchange="updateProgress()"><label for="c3882">**skillsCertifications accepts JSON array string**</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-72" data-section="72">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 72</span>
                    <h3>SUBSCRIPTION VALIDATION SCHEMAS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/validations/subscriptions.test.ts src/lib/validations/subscriptions.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3883" onchange="updateProgress()"><label for="c3883">**serviceName required** (1-255 chars)</label></li>
                        <li><input type="checkbox" id="c3884" onchange="updateProgress()"><label for="c3884">**purchaseDate required**</label></li>
                        <li><input type="checkbox" id="c3885" onchange="updateProgress()"><label for="c3885">**billingCycle required** (MONTHLY, YEARLY, ONE_TIME)</label></li>
                        <li><input type="checkbox" id="c3886" onchange="updateProgress()"><label for="c3886">**assignedMemberId required**</label></li>
                        <li><input type="checkbox" id="c3887" onchange="updateProgress()"><label for="c3887">**assignmentDate required** (when member assigned)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>serviceName Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3888" onchange="updateProgress()"><label for="c3888">Empty string → rejected</label></li>
                        <li><input type="checkbox" id="c3889" onchange="updateProgress()"><label for="c3889">**&gt; 255 characters → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>billingCycle Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3890" onchange="updateProgress()"><label for="c3890">MONTHLY, YEARLY, ONE_TIME → valid</label></li>
                        <li><input type="checkbox" id="c3891" onchange="updateProgress()"><label for="c3891">**Invalid cycle (WEEKLY) → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Cost Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3892" onchange="updateProgress()"><label for="c3892">**Negative costPerCycle → rejected**</label></li>
                        <li><input type="checkbox" id="c3893" onchange="updateProgress()"><label for="c3893">**Zero costPerCycle → rejected**</label></li>
                        <li><input type="checkbox" id="c3894" onchange="updateProgress()"><label for="c3894">Positive decimal → valid (599.99)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Status Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3895" onchange="updateProgress()"><label for="c3895">ACTIVE, PAUSED, CANCELLED → valid</label></li>
                        <li><input type="checkbox" id="c3896" onchange="updateProgress()"><label for="c3896">**Invalid status (EXPIRED) → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Date Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3897" onchange="updateProgress()"><label for="c3897">**renewalDate before purchaseDate → rejected**</label></li>
                        <li><input type="checkbox" id="c3898" onchange="updateProgress()"><label for="c3898">Same-day renewal and purchase → valid</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3899" onchange="updateProgress()"><label for="c3899">category, accountId, vendor → null accepted</label></li>
                        <li><input type="checkbox" id="c3900" onchange="updateProgress()"><label for="c3900">**notes &gt; 1000 chars → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Defaults</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3901" onchange="updateProgress()"><label for="c3901">**autoRenew defaults to true**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Partial Updates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3902" onchange="updateProgress()"><label for="c3902">serviceName only → valid</label></li>
                        <li><input type="checkbox" id="c3903" onchange="updateProgress()"><label for="c3903">costPerCycle only → valid</label></li>
                        <li><input type="checkbox" id="c3904" onchange="updateProgress()"><label for="c3904">status only → valid</label></li>
                        <li><input type="checkbox" id="c3905" onchange="updateProgress()"><label for="c3905">**Empty object accepted**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Validation on Update</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3906" onchange="updateProgress()"><label for="c3906">serviceName length validated on update</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Defaults</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3907" onchange="updateProgress()"><label for="c3907">**p defaults to 1**</label></li>
                        <li><input type="checkbox" id="c3908" onchange="updateProgress()"><label for="c3908">**ps defaults to 50**</label></li>
                        <li><input type="checkbox" id="c3909" onchange="updateProgress()"><label for="c3909">**sort defaults to createdAt**</label></li>
                        <li><input type="checkbox" id="c3910" onchange="updateProgress()"><label for="c3910">**order defaults to desc**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Coercion</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3911" onchange="updateProgress()"><label for="c3911">String page coerced to number (&quot;3&quot; → 3)</label></li>
                        <li><input type="checkbox" id="c3912" onchange="updateProgress()"><label for="c3912">String pageSize coerced to number</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3913" onchange="updateProgress()"><label for="c3913">**page 0 → rejected**</label></li>
                        <li><input type="checkbox" id="c3914" onchange="updateProgress()"><label for="c3914">**pageSize &gt; 100 → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>renewalWindowDays</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3915" onchange="updateProgress()"><label for="c3915">0-365 → valid</label></li>
                        <li><input type="checkbox" id="c3916" onchange="updateProgress()"><label for="c3916">**366 → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Sort Options</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3917" onchange="updateProgress()"><label for="c3917">serviceName, renewalDate, costPerCycle, createdAt → valid</label></li>
                        <li><input type="checkbox" id="c3918" onchange="updateProgress()"><label for="c3918">**Invalid sort → rejected**</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-73" data-section="73">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 73</span>
                    <h3>ASSET EXPORT</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/assets/asset-export.test.ts src/features/assets/lib/asset-export.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Essential Columns</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3919" onchange="updateProgress()"><label for="c3919">id, assetTag, type, category, brand, model, serial, status, price, priceCurrency included</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Member Columns</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3920" onchange="updateProgress()"><label for="c3920">assignedMemberId, assignedMemberName, assignedMemberEmail included</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Date Columns</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3921" onchange="updateProgress()"><label for="c3921">purchaseDate, warrantyExpiry, createdAt, updatedAt included</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Column Headers</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3922" onchange="updateProgress()"><label for="c3922">Human-readable headers (ID, Asset Tag, Serial Number)</label></li>
                        <li><input type="checkbox" id="c3923" onchange="updateProgress()"><label for="c3923">Each column has key and header</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Basic Field Transformation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3924" onchange="updateProgress()"><label for="c3924">All basic fields mapped (type, model, brand, serial, etc.)</label></li>
                        <li><input type="checkbox" id="c3925" onchange="updateProgress()"><label for="c3925">Status converted to string</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Assigned Member Info</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3926" onchange="updateProgress()"><label for="c3926">Member ID, name, email extracted from relation</label></li>
                        <li><input type="checkbox" id="c3927" onchange="updateProgress()"><label for="c3927">**Null member → empty strings**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Location</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3928" onchange="updateProgress()"><label for="c3928">Location name extracted from relation</label></li>
                        <li><input type="checkbox" id="c3929" onchange="updateProgress()"><label for="c3929">**Null location → empty string**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Date Formatting</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3930" onchange="updateProgress()"><label for="c3930">Dates formatted as YYYY-MM-DD</label></li>
                        <li><input type="checkbox" id="c3931" onchange="updateProgress()"><label for="c3931">**Null dates → empty string**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Price Formatting</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3932" onchange="updateProgress()"><label for="c3932">Price formatted with 2 decimals (5000.00)</label></li>
                        <li><input type="checkbox" id="c3933" onchange="updateProgress()"><label for="c3933">**Null price → empty string**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Null Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3934" onchange="updateProgress()"><label for="c3934">assetTag, category, brand, serial → empty string when null</label></li>
                        <li><input type="checkbox" id="c3935" onchange="updateProgress()"><label for="c3935">configuration, supplier, invoiceNumber, notes → empty string when null</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Assignment Date</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3936" onchange="updateProgress()"><label for="c3936">String date passed through</label></li>
                        <li><input type="checkbox" id="c3937" onchange="updateProgress()"><label for="c3937">**Null assignment date → empty string**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Array Handling</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3938" onchange="updateProgress()"><label for="c3938">**Empty array → empty array**</label></li>
                        <li><input type="checkbox" id="c3939" onchange="updateProgress()"><label for="c3939">**Single asset → array with 1 row**</label></li>
                        <li><input type="checkbox" id="c3940" onchange="updateProgress()"><label for="c3940">**Multiple assets → preserves order**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Default Filename</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3941" onchange="updateProgress()"><label for="c3941">**Format: assets_export_YYYY-MM-DD.xlsx**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Custom Prefix</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3942" onchange="updateProgress()"><label for="c3942">Custom prefix used (my_assets_YYYY-MM-DD.xlsx)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Custom Extension</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3943" onchange="updateProgress()"><label for="c3943">csv extension supported</label></li>
                        <li><input type="checkbox" id="c3944" onchange="updateProgress()"><label for="c3944">Both custom prefix and extension work</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>String Output</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3945" onchange="updateProgress()"><label for="c3945">**All export row values are strings** for CSV compatibility</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-74" data-section="74">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 74</span>
                    <h3>USER VALIDATION SCHEMAS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/lib/validations/users.test.ts src/lib/validations/users.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3946" onchange="updateProgress()"><label for="c3946">**name required** (1-100 chars)</label></li>
                        <li><input type="checkbox" id="c3947" onchange="updateProgress()"><label for="c3947">**email required** (valid format)</label></li>
                        <li><input type="checkbox" id="c3948" onchange="updateProgress()"><label for="c3948">**role required** (ADMIN, EMPLOYEE)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>name Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3949" onchange="updateProgress()"><label for="c3949">Empty string → rejected</label></li>
                        <li><input type="checkbox" id="c3950" onchange="updateProgress()"><label for="c3950">**&gt; 100 characters → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>email Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3951" onchange="updateProgress()"><label for="c3951">Valid emails accepted (test@example.com, test+tag@example.com)</label></li>
                        <li><input type="checkbox" id="c3952" onchange="updateProgress()"><label for="c3952">**Invalid emails rejected**: notanemail, @example.com, test@, test@.com, empty</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>role Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3953" onchange="updateProgress()"><label for="c3953">ADMIN, EMPLOYEE → valid</label></li>
                        <li><input type="checkbox" id="c3954" onchange="updateProgress()"><label for="c3954">**Invalid role (SUPER_ADMIN) → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>password Validation (Optional)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3955" onchange="updateProgress()"><label for="c3955">**&lt; 8 characters → rejected** (7 chars)</label></li>
                        <li><input type="checkbox" id="c3956" onchange="updateProgress()"><label for="c3956">**8 characters → valid** (exactly 8)</label></li>
                        <li><input type="checkbox" id="c3957" onchange="updateProgress()"><label for="c3957">**&gt; 100 characters → rejected**</label></li>
                        <li><input type="checkbox" id="c3958" onchange="updateProgress()"><label for="c3958">**100 characters → valid** (exactly 100)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Partial Updates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3959" onchange="updateProgress()"><label for="c3959">name only → valid</label></li>
                        <li><input type="checkbox" id="c3960" onchange="updateProgress()"><label for="c3960">role only → valid</label></li>
                        <li><input type="checkbox" id="c3961" onchange="updateProgress()"><label for="c3961">Both name and role → valid</label></li>
                        <li><input type="checkbox" id="c3962" onchange="updateProgress()"><label for="c3962">**Empty object accepted**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Validation on Update</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3963" onchange="updateProgress()"><label for="c3963">**name &gt; 100 chars → rejected**</label></li>
                        <li><input type="checkbox" id="c3964" onchange="updateProgress()"><label for="c3964">**Empty name → rejected**</label></li>
                        <li><input type="checkbox" id="c3965" onchange="updateProgress()"><label for="c3965">**Invalid role → rejected**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Excluded Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3966" onchange="updateProgress()"><label for="c3966">**email not included** (cannot change email after creation)</label></li>
                        <li><input type="checkbox" id="c3967" onchange="updateProgress()"><label for="c3967">**password not included** (uses separate password change flow)</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-75" data-section="75">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 75</span>
                    <h3>ASSET MAINTENANCE RECORDS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                <div class="file-ref"><strong>Key Files:</strong> <code>tests/unit/assets/maintenance.test.ts src/app/api/assets/[id]/maintenance/route.ts</code></div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>maintenanceDate Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3968" onchange="updateProgress()"><label for="c3968">**ISO date accepted** (2024-01-15T00:00:00.000Z)</label></li>
                        <li><input type="checkbox" id="c3969" onchange="updateProgress()"><label for="c3969">**Simple date string accepted** (2024-01-15)</label></li>
                        <li><input type="checkbox" id="c3970" onchange="updateProgress()"><label for="c3970">**Date with time accepted** (2024-01-15 10:30:00)</label></li>
                        <li><input type="checkbox" id="c3971" onchange="updateProgress()"><label for="c3971">**Invalid date format → rejected** (not-a-date)</label></li>
                        <li><input type="checkbox" id="c3972" onchange="updateProgress()"><label for="c3972">**Empty date → rejected**</label></li>
                        <li><input type="checkbox" id="c3973" onchange="updateProgress()"><label for="c3973">**maintenanceDate required**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>notes Validation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3974" onchange="updateProgress()"><label for="c3974">Notes accepted (string)</label></li>
                        <li><input type="checkbox" id="c3975" onchange="updateProgress()"><label for="c3975">**Null notes accepted**</label></li>
                        <li><input type="checkbox" id="c3976" onchange="updateProgress()"><label for="c3976">**Missing notes accepted** (undefined)</label></li>
                        <li><input type="checkbox" id="c3977" onchange="updateProgress()"><label for="c3977">**Empty string notes accepted**</label></li>
                        <li><input type="checkbox" id="c3978" onchange="updateProgress()"><label for="c3978">**Long notes accepted** (1000+ chars)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Date Sorting</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3979" onchange="updateProgress()"><label for="c3979">Sort by date descending (newest first)</label></li>
                        <li><input type="checkbox" id="c3980" onchange="updateProgress()"><label for="c3980">Sort by date ascending (oldest first)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Tenant Isolation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3981" onchange="updateProgress()"><label for="c3981">tenantId included in record data</label></li>
                        <li><input type="checkbox" id="c3982" onchange="updateProgress()"><label for="c3982">Records filtered by tenantId</label></li>
                        <li><input type="checkbox" id="c3983" onchange="updateProgress()"><label for="c3983">Cross-tenant records filtered out</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Asset Verification</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3984" onchange="updateProgress()"><label for="c3984">Asset must belong to same tenant</label></li>
                        <li><input type="checkbox" id="c3985" onchange="updateProgress()"><label for="c3985">**Asset in different tenant → rejected**</label></li>
                        <li><input type="checkbox" id="c3986" onchange="updateProgress()"><label for="c3986">**Asset not found → 404**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Required Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3987" onchange="updateProgress()"><label for="c3987">id, assetId, maintenanceDate, performedBy, tenantId</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Optional Fields</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3988" onchange="updateProgress()"><label for="c3988">notes (nullable)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Tracking</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3989" onchange="updateProgress()"><label for="c3989">performedBy captures session user ID</label></li>
                        <li><input type="checkbox" id="c3990" onchange="updateProgress()"><label for="c3990">createdAt, updatedAt timestamps</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Supported Types</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3991" onchange="updateProgress()"><label for="c3991">scheduled (Annual laptop servicing)</label></li>
                        <li><input type="checkbox" id="c3992" onchange="updateProgress()"><label for="c3992">repair (Screen replacement)</label></li>
                        <li><input type="checkbox" id="c3993" onchange="updateProgress()"><label for="c3993">preventive (Firmware update)</label></li>
                        <li><input type="checkbox" id="c3994" onchange="updateProgress()"><label for="c3994">warranty (Warranty claim repair)</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Route Options</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3995" onchange="updateProgress()"><label for="c3995">**GET requires auth**</label></li>
                        <li><input type="checkbox" id="c3996" onchange="updateProgress()"><label for="c3996">**POST requires auth + admin**</label></li>
                        <li><input type="checkbox" id="c3997" onchange="updateProgress()"><label for="c3997">**Requires assets module enabled**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Error Responses</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c3998" onchange="updateProgress()"><label for="c3998">**403 if organization context missing**</label></li>
                        <li><input type="checkbox" id="c3999" onchange="updateProgress()"><label for="c3999">**400 if asset ID missing**</label></li>
                        <li><input type="checkbox" id="c4000" onchange="updateProgress()"><label for="c4000">**404 if asset not found**</label></li>
                        <li><input type="checkbox" id="c4001" onchange="updateProgress()"><label for="c4001">**400 for invalid request body**</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Success Responses</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4002" onchange="updateProgress()"><label for="c4002">**201 on successful creation**</label></li>
                        <li><input type="checkbox" id="c4003" onchange="updateProgress()"><label for="c4003">**200 on successful list**</label></li>
                    </ul>
                </div>


                <div class="subsection">
                    <div class="subsection-header">
                        <span>Aggregation</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4004" onchange="updateProgress()"><label for="c4004">Count total maintenance records for asset</label></li>
                        <li><input type="checkbox" id="c4005" onchange="updateProgress()"><label for="c4005">Calculate days since last maintenance</label></li>
                        <li><input type="checkbox" id="c4006" onchange="updateProgress()"><label for="c4006">Identify assets needing maintenance (overdue)</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>Maintenance Intervals</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4007" onchange="updateProgress()"><label for="c4007">Compare last maintenance to interval days</label></li>
                        <li><input type="checkbox" id="c4008" onchange="updateProgress()"><label for="c4008">Flag assets exceeding interval</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-76" data-section="76">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 76</span>
                    <h3>CHAT / AI INTEGRATION</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                

                <div class="subsection">
                    <div class="subsection-header">
                        <span>76.1 AI Chat Authentication</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4009" onchange="updateProgress()"><label for="c4009">**Requires authenticated session**</label></li>
                        <li><input type="checkbox" id="c4010" onchange="updateProgress()"><label for="c4010">**Requires tenant context (organizationId)**</label></li>
                        <li><input type="checkbox" id="c4011" onchange="updateProgress()"><label for="c4011">Unauthenticated requests → 401</label></li>
                        <li><input type="checkbox" id="c4012" onchange="updateProgress()"><label for="c4012">Missing organization → 403</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>76.2 AI Rate Limiting</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4013" onchange="updateProgress()"><label for="c4013">Rate limits based on subscription tier</label></li>
                        <li><input type="checkbox" id="c4014" onchange="updateProgress()"><label for="c4014">FREE tier: Limited requests per day</label></li>
                        <li><input type="checkbox" id="c4015" onchange="updateProgress()"><label for="c4015">STARTER tier: Moderate limits</label></li>
                        <li><input type="checkbox" id="c4016" onchange="updateProgress()"><label for="c4016">PROFESSIONAL tier: Higher limits</label></li>
                        <li><input type="checkbox" id="c4017" onchange="updateProgress()"><label for="c4017">ENTERPRISE tier: Custom limits</label></li>
                        <li><input type="checkbox" id="c4018" onchange="updateProgress()"><label for="c4018">Rate limit exceeded → 429 with retry-after</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>76.3 Input Sanitization</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4019" onchange="updateProgress()"><label for="c4019">Malicious prompts blocked</label></li>
                        <li><input type="checkbox" id="c4020" onchange="updateProgress()"><label for="c4020">Injection attempts detected and blocked</label></li>
                        <li><input type="checkbox" id="c4021" onchange="updateProgress()"><label for="c4021">Blocked message logged with reason</label></li>
                        <li><input type="checkbox" id="c4022" onchange="updateProgress()"><label for="c4022">User notified of blocked message</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>76.4 AI Function Permissions</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4023" onchange="updateProgress()"><label for="c4023">Function access based on user role</label></li>
                        <li><input type="checkbox" id="c4024" onchange="updateProgress()"><label for="c4024">Admin functions restricted to ADMIN/OWNER</label></li>
                        <li><input type="checkbox" id="c4025" onchange="updateProgress()"><label for="c4025">Sensitive data filtered for non-admin users</label></li>
                        <li><input type="checkbox" id="c4026" onchange="updateProgress()"><label for="c4026">Only available functions returned per role</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>76.5 AI Audit Logging</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4027" onchange="updateProgress()"><label for="c4027">All AI interactions logged</label></li>
                        <li><input type="checkbox" id="c4028" onchange="updateProgress()"><label for="c4028">Budget usage tracked per tenant</label></li>
                        <li><input type="checkbox" id="c4029" onchange="updateProgress()"><label for="c4029">Super admin can view AI usage stats</label></li>
                        <li><input type="checkbox" id="c4030" onchange="updateProgress()"><label for="c4030">Per-tenant AI usage visible in admin</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>76.6 Chat History</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4031" onchange="updateProgress()"><label for="c4031">GET returns chat history for user</label></li>
                        <li><input type="checkbox" id="c4032" onchange="updateProgress()"><label for="c4032">DELETE clears chat history</label></li>
                        <li><input type="checkbox" id="c4033" onchange="updateProgress()"><label for="c4033">History is tenant-scoped</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-77" data-section="77">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 77</span>
                    <h3>BACKUP &amp; RESTORE PROCEDURES</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                

                <div class="subsection">
                    <div class="subsection-header">
                        <span>77.1 Tenant Backup (Admin)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4034" onchange="updateProgress()"><label for="c4034">Admin can create tenant backup</label></li>
                        <li><input type="checkbox" id="c4035" onchange="updateProgress()"><label for="c4035">Backup includes all tenant data:</label></li>
                        <li><input type="checkbox" id="c4036" onchange="updateProgress()"><label for="c4036">Backup exported as JSON</label></li>
                        <li><input type="checkbox" id="c4037" onchange="updateProgress()"><label for="c4037">File download with proper headers</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>77.2 Full Restore (Admin)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4038" onchange="updateProgress()"><label for="c4038">Restore from backup file</label></li>
                        <li><input type="checkbox" id="c4039" onchange="updateProgress()"><label for="c4039">**WARNING: Destructive operation**</label></li>
                        <li><input type="checkbox" id="c4040" onchange="updateProgress()"><label for="c4040">Requires admin confirmation</label></li>
                        <li><input type="checkbox" id="c4041" onchange="updateProgress()"><label for="c4041">Validates backup format</label></li>
                        <li><input type="checkbox" id="c4042" onchange="updateProgress()"><label for="c4042">Restores all entities</label></li>
                        <li><input type="checkbox" id="c4043" onchange="updateProgress()"><label for="c4043">Maintains referential integrity</label></li>
                        <li><input type="checkbox" id="c4044" onchange="updateProgress()"><label for="c4044">Logs restore action</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>77.3 Platform Backup (Super Admin)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4045" onchange="updateProgress()"><label for="c4045">Super admin can backup all organizations</label></li>
                        <li><input type="checkbox" id="c4046" onchange="updateProgress()"><label for="c4046">Per-organization backup files</label></li>
                        <li><input type="checkbox" id="c4047" onchange="updateProgress()"><label for="c4047">Platform-wide statistics included</label></li>
                        <li><input type="checkbox" id="c4048" onchange="updateProgress()"><label for="c4048">Encrypted backup option</label></li>
                        <li><input type="checkbox" id="c4049" onchange="updateProgress()"><label for="c4049">Stored in secure location</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>77.4 Scheduled Backups (Cron)</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4050" onchange="updateProgress()"><label for="c4050">Daily automated backups at 1 AM UTC</label></li>
                        <li><input type="checkbox" id="c4051" onchange="updateProgress()"><label for="c4051">Requires CRON_SECRET authorization</label></li>
                        <li><input type="checkbox" id="c4052" onchange="updateProgress()"><label for="c4052">Creates per-org backup files</label></li>
                        <li><input type="checkbox" id="c4053" onchange="updateProgress()"><label for="c4053">Retention policy enforcement</label></li>
                        <li><input type="checkbox" id="c4054" onchange="updateProgress()"><label for="c4054">Failure notifications to super admin</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>77.5 Backup Security</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4055" onchange="updateProgress()"><label for="c4055">Backups encrypted at rest</label></li>
                        <li><input type="checkbox" id="c4056" onchange="updateProgress()"><label for="c4056">Sensitive data redacted in export</label></li>
                        <li><input type="checkbox" id="c4057" onchange="updateProgress()"><label for="c4057">Password hashes NOT included</label></li>
                        <li><input type="checkbox" id="c4058" onchange="updateProgress()"><label for="c4058">Reset tokens NOT included</label></li>
                        <li><input type="checkbox" id="c4059" onchange="updateProgress()"><label for="c4059">API keys NOT included</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-78" data-section="78">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 78</span>
                    <h3>DATA EXPORT (GDPR COMPLIANCE)</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                

                <div class="subsection">
                    <div class="subsection-header">
                        <span>78.1 Right to Data Portability</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4060" onchange="updateProgress()"><label for="c4060">Users can export their personal data</label></li>
                        <li><input type="checkbox" id="c4061" onchange="updateProgress()"><label for="c4061">Export in machine-readable format (CSV, JSON)</label></li>
                        <li><input type="checkbox" id="c4062" onchange="updateProgress()"><label for="c4062">Includes all user-related data:</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>78.2 Admin Data Export</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4063" onchange="updateProgress()"><label for="c4063">Admin can export organization data</label></li>
                        <li><input type="checkbox" id="c4064" onchange="updateProgress()"><label for="c4064">Bulk export with filters</label></li>
                        <li><input type="checkbox" id="c4065" onchange="updateProgress()"><label for="c4065">Excel/CSV format options</label></li>
                        <li><input type="checkbox" id="c4066" onchange="updateProgress()"><label for="c4066">Column selection available</label></li>
                        <li><input type="checkbox" id="c4067" onchange="updateProgress()"><label for="c4067">Date range filtering</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>78.3 Export Security</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4068" onchange="updateProgress()"><label for="c4068">Export requires authentication</label></li>
                        <li><input type="checkbox" id="c4069" onchange="updateProgress()"><label for="c4069">Export logged in activity</label></li>
                        <li><input type="checkbox" id="c4070" onchange="updateProgress()"><label for="c4070">Rate limiting on exports</label></li>
                        <li><input type="checkbox" id="c4071" onchange="updateProgress()"><label for="c4071">Large exports may be async</label></li>
                        <li><input type="checkbox" id="c4072" onchange="updateProgress()"><label for="c4072">Sensitive fields redacted/masked</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>78.4 Right to Erasure</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4073" onchange="updateProgress()"><label for="c4073">Soft delete with retention period (7 days)</label></li>
                        <li><input type="checkbox" id="c4074" onchange="updateProgress()"><label for="c4074">Permanent deletion after retention</label></li>
                        <li><input type="checkbox" id="c4075" onchange="updateProgress()"><label for="c4075">Cascading deletion of related data</label></li>
                        <li><input type="checkbox" id="c4076" onchange="updateProgress()"><label for="c4076">Cleanup cron job runs daily</label></li>
                        <li><input type="checkbox" id="c4077" onchange="updateProgress()"><label for="c4077">Deletion logged for audit</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>78.5 Data Retention</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4078" onchange="updateProgress()"><label for="c4078">Configurable retention periods</label></li>
                        <li><input type="checkbox" id="c4079" onchange="updateProgress()"><label for="c4079">Audit logs retained longer</label></li>
                        <li><input type="checkbox" id="c4080" onchange="updateProgress()"><label for="c4080">Financial data retained per regulations</label></li>
                        <li><input type="checkbox" id="c4081" onchange="updateProgress()"><label for="c4081">Cleanup of expired data automated</label></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="section" id="section-79" data-section="79">
            <div class="section-header" onclick="toggleSection(this)">
                <div class="section-title">
                    <span class="section-badge">Section 79</span>
                    <h3>WHATSAPP NOTIFICATIONS</h3>
                </div>
                <div class="section-progress">
                    <span class="progress-text"><span class="completed">0</span>/<span class="total">0</span></span>
                    <div class="progress-bar-mini"><div class="progress-fill-mini" style="width: 0%"></div></div>
                    <span class="toggle-icon">&#9660;</span>
                </div>
            </div>
            <div class="section-content">
                

                <div class="subsection">
                    <div class="subsection-header">
                        <span>79.1 WhatsApp Webhook Security</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4082" onchange="updateProgress()"><label for="c4082">Signature validation required</label></li>
                        <li><input type="checkbox" id="c4083" onchange="updateProgress()"><label for="c4083">Rate limiting per IP</label></li>
                        <li><input type="checkbox" id="c4084" onchange="updateProgress()"><label for="c4084">Invalid signature → 401</label></li>
                        <li><input type="checkbox" id="c4085" onchange="updateProgress()"><label for="c4085">Rate limited → 429</label></li>
                        <li><input type="checkbox" id="c4086" onchange="updateProgress()"><label for="c4086">Webhook token verification</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>79.2 Approval via WhatsApp</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4087" onchange="updateProgress()"><label for="c4087">Leave requests can be approved/rejected</label></li>
                        <li><input type="checkbox" id="c4088" onchange="updateProgress()"><label for="c4088">Purchase requests can be approved/rejected</label></li>
                        <li><input type="checkbox" id="c4089" onchange="updateProgress()"><label for="c4089">Asset requests can be approved/rejected</label></li>
                        <li><input type="checkbox" id="c4090" onchange="updateProgress()"><label for="c4090">Action tokens expire after 24 hours</label></li>
                        <li><input type="checkbox" id="c4091" onchange="updateProgress()"><label for="c4091">One-time use tokens</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>79.3 WhatsApp Message Templates</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4092" onchange="updateProgress()"><label for="c4092">Leave approval template</label></li>
                        <li><input type="checkbox" id="c4093" onchange="updateProgress()"><label for="c4093">Purchase approval template</label></li>
                        <li><input type="checkbox" id="c4094" onchange="updateProgress()"><label for="c4094">Asset approval template</label></li>
                        <li><input type="checkbox" id="c4095" onchange="updateProgress()"><label for="c4095">Confirmation messages</label></li>
                        <li><input type="checkbox" id="c4096" onchange="updateProgress()"><label for="c4096">Error messages</label></li>
                    </ul>
                </div>

                <div class="subsection">
                    <div class="subsection-header">
                        <span>79.4 WhatsApp Configuration</span>
                    </div>
                    <ul class="checklist">
                        <li><input type="checkbox" id="c4097" onchange="updateProgress()"><label for="c4097">Per-organization WhatsApp setup</label></li>
                        <li><input type="checkbox" id="c4098" onchange="updateProgress()"><label for="c4098">Platform-wide WhatsApp config</label></li>
                        <li><input type="checkbox" id="c4099" onchange="updateProgress()"><label for="c4099">Phone number verification</label></li>
                        <li><input type="checkbox" id="c4100" onchange="updateProgress()"><label for="c4100">API credentials management</label></li>
                    </ul>
                </div>



            </div>
        </div>

        <footer>
            <p>Durj Platform - Comprehensive Test Checklist</p>
            <p>Last updated: January 2026</p>
            <p>Based on analysis of 17 code-review module files and 70+ unit test files</p>
            <div class="overall-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="overall-progress" style="width: 0%"></div>
                </div>
                <p><span id="progress-percentage">0%</span> Complete</p>
            </div>
        </footer>
    </div>

    <button class="print-btn" onclick="window.print()">&#128424; Print Checklist</button>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            loadProgress();
            updateProgress();
        });

        function toggleSection(header) {
            header.parentElement.classList.toggle('active');
        }

        function toggleToc() {
            document.getElementById('toc-content').classList.toggle('active');
        }

        function expandAll() {
            document.querySelectorAll('.section').forEach(s => s.classList.add('active'));
        }

        function collapseAll() {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        }

        function updateProgress() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const checked = document.querySelectorAll('input[type="checkbox"]:checked');
            const total = checkboxes.length;
            const completed = checked.length;
            const remaining = total - completed;
            const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;

            document.getElementById('completed-count').textContent = completed;
            document.getElementById('remaining-count').textContent = remaining;
            document.getElementById('progress-percentage').textContent = percentage + '%';
            document.getElementById('overall-progress').style.width = percentage + '%';

            document.querySelectorAll('.section').forEach(section => {
                const sectionCheckboxes = section.querySelectorAll('input[type="checkbox"]');
                const sectionChecked = section.querySelectorAll('input[type="checkbox"]:checked');
                const sectionTotal = sectionCheckboxes.length;
                const sectionCompleted = sectionChecked.length;
                const sectionPercentage = sectionTotal > 0 ? Math.round((sectionCompleted / sectionTotal) * 100) : 0;

                const progressText = section.querySelector('.progress-text');
                const progressFill = section.querySelector('.progress-fill-mini');

                if (progressText) {
                    progressText.querySelector('.completed').textContent = sectionCompleted;
                    progressText.querySelector('.total').textContent = sectionTotal;
                }
                if (progressFill) {
                    progressFill.style.width = sectionPercentage + '%';
                }
            });

            checkboxes.forEach(cb => {
                const li = cb.closest('li');
                if (li) {
                    cb.checked ? li.classList.add('checked') : li.classList.remove('checked');
                }
            });

            saveProgress();
        }

        function saveProgress() {
            const checked = document.querySelectorAll('input[type="checkbox"]:checked');
            localStorage.setItem('durj-comprehensive-test-progress', JSON.stringify(Array.from(checked).map(cb => cb.id)));
        }

        function loadProgress() {
            const saved = localStorage.getItem('durj-comprehensive-test-progress');
            if (saved) {
                try {
                    JSON.parse(saved).forEach(id => {
                        const cb = document.getElementById(id);
                        if (cb) cb.checked = true;
                    });
                } catch (e) {}
            }
        }

        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
                document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
                localStorage.removeItem('durj-comprehensive-test-progress');
                updateProgress();
            }
        }

        function exportProgress() {
            const checked = document.querySelectorAll('input[type="checkbox"]:checked');
            const data = {
                exportDate: new Date().toISOString(),
                totalTests: 4100,
                completedTests: checked.length,
                checkedIds: Array.from(checked).map(cb => cb.id)
            };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'durj-test-progress-' + new Date().toISOString().split('T')[0] + '.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        function filterTests() {
            const query = document.getElementById('search-input').value.toLowerCase();
            document.querySelectorAll('.checklist li').forEach(item => {
                const label = item.querySelector('label');
                if (label) {
                    const text = label.textContent.toLowerCase();
                    item.style.display = (text.includes(query) || query === '') ? 'flex' : 'none';
                }
            });
            document.querySelectorAll('.section').forEach(section => {
                const visibleItems = section.querySelectorAll('.checklist li[style="display: flex"], .checklist li:not([style])');
                section.style.display = (query !== '' && visibleItems.length === 0) ? 'none' : 'block';
            });
        }
    </script>
</body>
</html>